var Oj=Object.defineProperty;var Nj=(n,e,t)=>e in n?Oj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Bj=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var tt=(n,e,t)=>(Nj(n,typeof e!="symbol"?e+"":e,t),t),IS=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var ae=(n,e,t)=>(IS(n,e,"read from private field"),t?t.call(n):e.get(n)),yt=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},et=(n,e,t,r)=>(IS(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var Gv=(n,e,t,r)=>({set _(i){et(n,e,i,t)},get _(){return ae(n,e,r)}}),nn=(n,e,t)=>(IS(n,e,"access private method"),t);var v0e=Bj((R0e,sb)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Lm(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var s4={exports:{}},E_={},o4={exports:{}},Jt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uy=Symbol.for("react.element"),Lj=Symbol.for("react.portal"),Dj=Symbol.for("react.fragment"),Fj=Symbol.for("react.strict_mode"),Uj=Symbol.for("react.profiler"),zj=Symbol.for("react.provider"),$j=Symbol.for("react.context"),jj=Symbol.for("react.forward_ref"),Hj=Symbol.for("react.suspense"),Wj=Symbol.for("react.memo"),Gj=Symbol.for("react.lazy"),tM=Symbol.iterator;function Vj(n){return n===null||typeof n!="object"?null:(n=tM&&n[tM]||n["@@iterator"],typeof n=="function"?n:null)}var a4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l4=Object.assign,u4={};function Dm(n,e,t){this.props=n,this.context=e,this.refs=u4,this.updater=t||a4}Dm.prototype.isReactComponent={};Dm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Dm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function c4(){}c4.prototype=Dm.prototype;function tI(n,e,t){this.props=n,this.context=e,this.refs=u4,this.updater=t||a4}var nI=tI.prototype=new c4;nI.constructor=tI;l4(nI,Dm.prototype);nI.isPureReactComponent=!0;var nM=Array.isArray,h4=Object.prototype.hasOwnProperty,rI={current:null},d4={key:!0,ref:!0,__self:!0,__source:!0};function f4(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)h4.call(e,r)&&!d4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uy,type:n,key:s,ref:o,props:i,_owner:rI.current}}function qj(n,e){return{$$typeof:Uy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function iI(n){return typeof n=="object"&&n!==null&&n.$$typeof===Uy}function Xj(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var rM=/\/+/g;function RS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Xj(""+n.key):e.toString(36)}function uw(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Uy:case Lj:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+RS(o,0):r,nM(i)?(t="",n!=null&&(t=n.replace(rM,"$&/")+"/"),uw(i,e,t,"",function(u){return u})):i!=null&&(iI(i)&&(i=qj(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(rM,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",nM(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+RS(s,a);o+=uw(s,e,t,l,i)}else if(l=Vj(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+RS(s,a++),o+=uw(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vv(n,e,t){if(n==null)return n;var r=[],i=0;return uw(n,r,"","",function(s){return e.call(t,s,i++)}),r}function Kj(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ls={current:null},cw={transition:null},Qj={ReactCurrentDispatcher:Ls,ReactCurrentBatchConfig:cw,ReactCurrentOwner:rI};Jt.Children={map:Vv,forEach:function(n,e,t){Vv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Vv(n,function(){e++}),e},toArray:function(n){return Vv(n,function(e){return e})||[]},only:function(n){if(!iI(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Jt.Component=Dm;Jt.Fragment=Dj;Jt.Profiler=Uj;Jt.PureComponent=tI;Jt.StrictMode=Fj;Jt.Suspense=Hj;Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qj;Jt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=l4({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=rI.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)h4.call(e,l)&&!d4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Uy,type:n.type,key:i,ref:s,props:r,_owner:o}};Jt.createContext=function(n){return n={$$typeof:$j,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:zj,_context:n},n.Consumer=n};Jt.createElement=f4;Jt.createFactory=function(n){var e=f4.bind(null,n);return e.type=n,e};Jt.createRef=function(){return{current:null}};Jt.forwardRef=function(n){return{$$typeof:jj,render:n}};Jt.isValidElement=iI;Jt.lazy=function(n){return{$$typeof:Gj,_payload:{_status:-1,_result:n},_init:Kj}};Jt.memo=function(n,e){return{$$typeof:Wj,type:n,compare:e===void 0?null:e}};Jt.startTransition=function(n){var e=cw.transition;cw.transition={};try{n()}finally{cw.transition=e}};Jt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Jt.useCallback=function(n,e){return Ls.current.useCallback(n,e)};Jt.useContext=function(n){return Ls.current.useContext(n)};Jt.useDebugValue=function(){};Jt.useDeferredValue=function(n){return Ls.current.useDeferredValue(n)};Jt.useEffect=function(n,e){return Ls.current.useEffect(n,e)};Jt.useId=function(){return Ls.current.useId()};Jt.useImperativeHandle=function(n,e,t){return Ls.current.useImperativeHandle(n,e,t)};Jt.useInsertionEffect=function(n,e){return Ls.current.useInsertionEffect(n,e)};Jt.useLayoutEffect=function(n,e){return Ls.current.useLayoutEffect(n,e)};Jt.useMemo=function(n,e){return Ls.current.useMemo(n,e)};Jt.useReducer=function(n,e,t){return Ls.current.useReducer(n,e,t)};Jt.useRef=function(n){return Ls.current.useRef(n)};Jt.useState=function(n){return Ls.current.useState(n)};Jt.useSyncExternalStore=function(n,e,t){return Ls.current.useSyncExternalStore(n,e,t)};Jt.useTransition=function(){return Ls.current.useTransition()};Jt.version="18.2.0";o4.exports=Jt;var Y=o4.exports;const kt=rl(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj=Y,Zj=Symbol.for("react.element"),Jj=Symbol.for("react.fragment"),eH=Object.prototype.hasOwnProperty,tH=Yj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nH={key:!0,ref:!0,__self:!0,__source:!0};function p4(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eH.call(e,r)&&!nH.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Zj,type:n,key:s,ref:o,props:i,_owner:tH.current}}E_.Fragment=Jj;E_.jsx=p4;E_.jsxs=p4;s4.exports=E_;var q=s4.exports,VA={},m4={exports:{}},No={},g4={exports:{}},y4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,U){var z=k.length;k.push(U);e:for(;0<z;){var N=z-1>>>1,T=k[N];if(0<i(T,U))k[N]=U,k[z]=T,z=N;else break e}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var U=k[0],z=k.pop();if(z!==U){k[0]=z;e:for(var N=0,T=k.length,V=T>>>1;N<V;){var oe=2*(N+1)-1,ge=k[oe],we=oe+1,Re=k[we];if(0>i(ge,z))we<T&&0>i(Re,ge)?(k[N]=Re,k[we]=z,N=we):(k[N]=ge,k[oe]=z,N=oe);else if(we<T&&0>i(Re,z))k[N]=Re,k[we]=z,N=we;else break e}}return U}function i(k,U){var z=k.sortIndex-U.sortIndex;return z!==0?z:k.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(k){for(var U=t(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=k)r(u),U.sortIndex=U.expirationTime,e(l,U);else break;U=t(u)}}function R(k){if(v=!1,_(k),!g)if(t(l)!==null)g=!0,O(D);else{var U=t(u);U!==null&&C(R,U.startTime-k)}}function D(k,U){g=!1,v&&(v=!1,b(G),G=-1),m=!0;var z=p;try{for(_(U),f=t(l);f!==null&&(!(f.expirationTime>U)||k&&!ne());){var N=f.callback;if(typeof N=="function"){f.callback=null,p=f.priorityLevel;var T=N(f.expirationTime<=U);U=n.unstable_now(),typeof T=="function"?f.callback=T:f===t(l)&&r(l),_(U)}else r(l);f=t(l)}if(f!==null)var V=!0;else{var oe=t(u);oe!==null&&C(R,oe.startTime-U),V=!1}return V}finally{f=null,p=z,m=!1}}var j=!1,H=null,G=-1,K=5,te=-1;function ne(){return!(n.unstable_now()-te<K)}function ee(){if(H!==null){var k=n.unstable_now();te=k;var U=!0;try{U=H(!0,k)}finally{U?L():(j=!1,H=null)}}else j=!1}var L;if(typeof S=="function")L=function(){S(ee)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,A=w.port2;w.port1.onmessage=ee,L=function(){A.postMessage(null)}}else L=function(){x(ee,0)};function O(k){H=k,j||(j=!0,L())}function C(k,U){G=x(function(){k(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,O(D))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var z=p;p=U;try{return k()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,U){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var z=p;p=k;try{return U()}finally{p=z}},n.unstable_scheduleCallback=function(k,U,z){var N=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?N+z:N):z=N,k){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=z+T,k={id:h++,callback:U,priorityLevel:k,startTime:z,expirationTime:T,sortIndex:-1},z>N?(k.sortIndex=z,e(u,k),t(l)===null&&k===t(u)&&(v?(b(G),G=-1):v=!0,C(R,z-N))):(k.sortIndex=T,e(l,k),g||m||(g=!0,O(D))),k},n.unstable_shouldYield=ne,n.unstable_wrapCallback=function(k){var U=p;return function(){var z=p;p=U;try{return k.apply(this,arguments)}finally{p=z}}}})(y4);g4.exports=y4;var rH=g4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v4=Y,Oo=rH;function Ie(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w4=new Set,B0={};function rf(n,e){lm(n,e),lm(n+"Capture",e)}function lm(n,e){for(B0[n]=e,n=0;n<e.length;n++)w4.add(e[n])}var Hu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qA=Object.prototype.hasOwnProperty,iH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iM={},sM={};function sH(n){return qA.call(sM,n)?!0:qA.call(iM,n)?!1:iH.test(n)?sM[n]=!0:(iM[n]=!0,!1)}function oH(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function aH(n,e,t,r){if(e===null||typeof e>"u"||oH(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ds(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Yi[n]=new Ds(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Yi[e]=new Ds(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Yi[n]=new Ds(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Yi[n]=new Ds(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Yi[n]=new Ds(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Yi[n]=new Ds(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Yi[n]=new Ds(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Yi[n]=new Ds(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Yi[n]=new Ds(n,5,!1,n.toLowerCase(),null,!1,!1)});var sI=/[\-:]([a-z])/g;function oI(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(sI,oI);Yi[e]=new Ds(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(sI,oI);Yi[e]=new Ds(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(sI,oI);Yi[e]=new Ds(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Yi[n]=new Ds(n,1,!1,n.toLowerCase(),null,!1,!1)});Yi.xlinkHref=new Ds("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Yi[n]=new Ds(n,1,!1,n.toLowerCase(),null,!0,!0)});function aI(n,e,t,r){var i=Yi.hasOwnProperty(e)?Yi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aH(e,t,i,r)&&(t=null),r||i===null?sH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Ju=v4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qv=Symbol.for("react.element"),ip=Symbol.for("react.portal"),sp=Symbol.for("react.fragment"),lI=Symbol.for("react.strict_mode"),XA=Symbol.for("react.profiler"),x4=Symbol.for("react.provider"),_4=Symbol.for("react.context"),uI=Symbol.for("react.forward_ref"),KA=Symbol.for("react.suspense"),QA=Symbol.for("react.suspense_list"),cI=Symbol.for("react.memo"),Mc=Symbol.for("react.lazy"),b4=Symbol.for("react.offscreen"),oM=Symbol.iterator;function vg(n){return n===null||typeof n!="object"?null:(n=oM&&n[oM]||n["@@iterator"],typeof n=="function"?n:null)}var Br=Object.assign,PS;function jg(n){if(PS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);PS=e&&e[1]||""}return`
`+PS+n}var kS=!1;function MS(n,e){if(!n||kS)return"";kS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{kS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?jg(n):""}function lH(n){switch(n.tag){case 5:return jg(n.type);case 16:return jg("Lazy");case 13:return jg("Suspense");case 19:return jg("SuspenseList");case 0:case 2:case 15:return n=MS(n.type,!1),n;case 11:return n=MS(n.type.render,!1),n;case 1:return n=MS(n.type,!0),n;default:return""}}function YA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case sp:return"Fragment";case ip:return"Portal";case XA:return"Profiler";case lI:return"StrictMode";case KA:return"Suspense";case QA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case _4:return(n.displayName||"Context")+".Consumer";case x4:return(n._context.displayName||"Context")+".Provider";case uI:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cI:return e=n.displayName||null,e!==null?e:YA(n.type)||"Memo";case Mc:e=n._payload,n=n._init;try{return YA(n(e))}catch{}}return null}function uH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return YA(e);case 8:return e===lI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xh(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function S4(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cH(n){var e=S4(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Xv(n){n._valueTracker||(n._valueTracker=cH(n))}function E4(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=S4(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function $w(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ZA(n,e){var t=e.checked;return Br({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function aM(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=xh(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A4(n,e){e=e.checked,e!=null&&aI(n,"checked",e,!1)}function JA(n,e){A4(n,e);var t=xh(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?eT(n,e.type,t):e.hasOwnProperty("defaultValue")&&eT(n,e.type,xh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function lM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function eT(n,e,t){(e!=="number"||$w(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Hg=Array.isArray;function Tp(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+xh(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function tT(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ie(91));return Br({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function uM(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ie(92));if(Hg(t)){if(1<t.length)throw Error(Ie(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xh(t)}}function T4(n,e){var t=xh(e.value),r=xh(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function cM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function C4(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nT(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?C4(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Kv,I4=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Kv=Kv||document.createElement("div"),Kv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Kv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function L0(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var u0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hH=["Webkit","ms","Moz","O"];Object.keys(u0).forEach(function(n){hH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),u0[e]=u0[n]})});function R4(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||u0.hasOwnProperty(n)&&u0[n]?(""+e).trim():e+"px"}function P4(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=R4(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var dH=Br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rT(n,e){if(e){if(dH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ie(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ie(62))}}function iT(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sT=null;function hI(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var oT=null,Cp=null,Ip=null;function hM(n){if(n=jy(n)){if(typeof oT!="function")throw Error(Ie(280));var e=n.stateNode;e&&(e=R_(e),oT(n.stateNode,n.type,e))}}function k4(n){Cp?Ip?Ip.push(n):Ip=[n]:Cp=n}function M4(){if(Cp){var n=Cp,e=Ip;if(Ip=Cp=null,hM(n),e)for(n=0;n<e.length;n++)hM(e[n])}}function O4(n,e){return n(e)}function N4(){}var OS=!1;function B4(n,e,t){if(OS)return n(e,t);OS=!0;try{return O4(n,e,t)}finally{OS=!1,(Cp!==null||Ip!==null)&&(N4(),M4())}}function D0(n,e){var t=n.stateNode;if(t===null)return null;var r=R_(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ie(231,e,typeof t));return t}var aT=!1;if(Hu)try{var wg={};Object.defineProperty(wg,"passive",{get:function(){aT=!0}}),window.addEventListener("test",wg,wg),window.removeEventListener("test",wg,wg)}catch{aT=!1}function fH(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var c0=!1,jw=null,Hw=!1,lT=null,pH={onError:function(n){c0=!0,jw=n}};function mH(n,e,t,r,i,s,o,a,l){c0=!1,jw=null,fH.apply(pH,arguments)}function gH(n,e,t,r,i,s,o,a,l){if(mH.apply(this,arguments),c0){if(c0){var u=jw;c0=!1,jw=null}else throw Error(Ie(198));Hw||(Hw=!0,lT=u)}}function sf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function L4(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function dM(n){if(sf(n)!==n)throw Error(Ie(188))}function yH(n){var e=n.alternate;if(!e){if(e=sf(n),e===null)throw Error(Ie(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return dM(i),n;if(s===r)return dM(i),e;s=s.sibling}throw Error(Ie(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Ie(189))}}if(t.alternate!==r)throw Error(Ie(190))}if(t.tag!==3)throw Error(Ie(188));return t.stateNode.current===t?n:e}function D4(n){return n=yH(n),n!==null?F4(n):null}function F4(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=F4(n);if(e!==null)return e;n=n.sibling}return null}var U4=Oo.unstable_scheduleCallback,fM=Oo.unstable_cancelCallback,vH=Oo.unstable_shouldYield,wH=Oo.unstable_requestPaint,Kr=Oo.unstable_now,xH=Oo.unstable_getCurrentPriorityLevel,dI=Oo.unstable_ImmediatePriority,z4=Oo.unstable_UserBlockingPriority,Ww=Oo.unstable_NormalPriority,_H=Oo.unstable_LowPriority,$4=Oo.unstable_IdlePriority,A_=null,Xl=null;function bH(n){if(Xl&&typeof Xl.onCommitFiberRoot=="function")try{Xl.onCommitFiberRoot(A_,n,void 0,(n.current.flags&128)===128)}catch{}}var Xa=Math.clz32?Math.clz32:AH,SH=Math.log,EH=Math.LN2;function AH(n){return n>>>=0,n===0?32:31-(SH(n)/EH|0)|0}var Qv=64,Yv=4194304;function Wg(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=Wg(a):(s&=o,s!==0&&(r=Wg(s)))}else o=t&~i,o!==0?r=Wg(o):s!==0&&(r=Wg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Xa(e),i=1<<t,r|=n[t],e&=~i;return r}function TH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CH(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Xa(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=TH(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function uT(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function j4(){var n=Qv;return Qv<<=1,!(Qv&4194240)&&(Qv=64),n}function NS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function zy(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Xa(e),n[e]=t}function IH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Xa(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function fI(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Xa(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Bn=0;function H4(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var W4,pI,G4,V4,q4,cT=!1,Zv=[],uh=null,ch=null,hh=null,F0=new Map,U0=new Map,Fc=[],RH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pM(n,e){switch(n){case"focusin":case"focusout":uh=null;break;case"dragenter":case"dragleave":ch=null;break;case"mouseover":case"mouseout":hh=null;break;case"pointerover":case"pointerout":F0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":U0.delete(e.pointerId)}}function xg(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=jy(e),e!==null&&pI(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function PH(n,e,t,r,i){switch(e){case"focusin":return uh=xg(uh,n,e,t,r,i),!0;case"dragenter":return ch=xg(ch,n,e,t,r,i),!0;case"mouseover":return hh=xg(hh,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return F0.set(s,xg(F0.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,U0.set(s,xg(U0.get(s)||null,n,e,t,r,i)),!0}return!1}function X4(n){var e=md(n.target);if(e!==null){var t=sf(e);if(t!==null){if(e=t.tag,e===13){if(e=L4(t),e!==null){n.blockedOn=e,q4(n.priority,function(){G4(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hw(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=hT(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);sT=r,t.target.dispatchEvent(r),sT=null}else return e=jy(t),e!==null&&pI(e),n.blockedOn=t,!1;e.shift()}return!0}function mM(n,e,t){hw(n)&&t.delete(e)}function kH(){cT=!1,uh!==null&&hw(uh)&&(uh=null),ch!==null&&hw(ch)&&(ch=null),hh!==null&&hw(hh)&&(hh=null),F0.forEach(mM),U0.forEach(mM)}function _g(n,e){n.blockedOn===e&&(n.blockedOn=null,cT||(cT=!0,Oo.unstable_scheduleCallback(Oo.unstable_NormalPriority,kH)))}function z0(n){function e(i){return _g(i,n)}if(0<Zv.length){_g(Zv[0],n);for(var t=1;t<Zv.length;t++){var r=Zv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(uh!==null&&_g(uh,n),ch!==null&&_g(ch,n),hh!==null&&_g(hh,n),F0.forEach(e),U0.forEach(e),t=0;t<Fc.length;t++)r=Fc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Fc.length&&(t=Fc[0],t.blockedOn===null);)X4(t),t.blockedOn===null&&Fc.shift()}var Rp=Ju.ReactCurrentBatchConfig,Vw=!0;function MH(n,e,t,r){var i=Bn,s=Rp.transition;Rp.transition=null;try{Bn=1,mI(n,e,t,r)}finally{Bn=i,Rp.transition=s}}function OH(n,e,t,r){var i=Bn,s=Rp.transition;Rp.transition=null;try{Bn=4,mI(n,e,t,r)}finally{Bn=i,Rp.transition=s}}function mI(n,e,t,r){if(Vw){var i=hT(n,e,t,r);if(i===null)WS(n,e,r,qw,t),pM(n,r);else if(PH(i,n,e,t,r))r.stopPropagation();else if(pM(n,r),e&4&&-1<RH.indexOf(n)){for(;i!==null;){var s=jy(i);if(s!==null&&W4(s),s=hT(n,e,t,r),s===null&&WS(n,e,r,qw,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else WS(n,e,r,null,t)}}var qw=null;function hT(n,e,t,r){if(qw=null,n=hI(r),n=md(n),n!==null)if(e=sf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=L4(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return qw=n,null}function K4(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xH()){case dI:return 1;case z4:return 4;case Ww:case _H:return 16;case $4:return 536870912;default:return 16}default:return 16}}var Qc=null,gI=null,dw=null;function Q4(){if(dw)return dw;var n,e=gI,t=e.length,r,i="value"in Qc?Qc.value:Qc.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return dw=i.slice(n,1<r?1-r:void 0)}function fw(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Jv(){return!0}function gM(){return!1}function Bo(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jv:gM,this.isPropagationStopped=gM,this}return Br(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Jv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Jv)},persist:function(){},isPersistent:Jv}),e}var Fm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yI=Bo(Fm),$y=Br({},Fm,{view:0,detail:0}),NH=Bo($y),BS,LS,bg,T_=Br({},$y,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vI,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==bg&&(bg&&n.type==="mousemove"?(BS=n.screenX-bg.screenX,LS=n.screenY-bg.screenY):LS=BS=0,bg=n),BS)},movementY:function(n){return"movementY"in n?n.movementY:LS}}),yM=Bo(T_),BH=Br({},T_,{dataTransfer:0}),LH=Bo(BH),DH=Br({},$y,{relatedTarget:0}),DS=Bo(DH),FH=Br({},Fm,{animationName:0,elapsedTime:0,pseudoElement:0}),UH=Bo(FH),zH=Br({},Fm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$H=Bo(zH),jH=Br({},Fm,{data:0}),vM=Bo(jH),HH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=GH[n])?!!e[n]:!1}function vI(){return VH}var qH=Br({},$y,{key:function(n){if(n.key){var e=HH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=fw(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?WH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vI,charCode:function(n){return n.type==="keypress"?fw(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fw(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),XH=Bo(qH),KH=Br({},T_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wM=Bo(KH),QH=Br({},$y,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vI}),YH=Bo(QH),ZH=Br({},Fm,{propertyName:0,elapsedTime:0,pseudoElement:0}),JH=Bo(ZH),e7=Br({},T_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),t7=Bo(e7),n7=[9,13,27,32],wI=Hu&&"CompositionEvent"in window,h0=null;Hu&&"documentMode"in document&&(h0=document.documentMode);var r7=Hu&&"TextEvent"in window&&!h0,Y4=Hu&&(!wI||h0&&8<h0&&11>=h0),xM=String.fromCharCode(32),_M=!1;function Z4(n,e){switch(n){case"keyup":return n7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J4(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var op=!1;function i7(n,e){switch(n){case"compositionend":return J4(e);case"keypress":return e.which!==32?null:(_M=!0,xM);case"textInput":return n=e.data,n===xM&&_M?null:n;default:return null}}function s7(n,e){if(op)return n==="compositionend"||!wI&&Z4(n,e)?(n=Q4(),dw=gI=Qc=null,op=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y4&&e.locale!=="ko"?null:e.data;default:return null}}var o7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!o7[n.type]:e==="textarea"}function eD(n,e,t,r){k4(r),e=Xw(e,"onChange"),0<e.length&&(t=new yI("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var d0=null,$0=null;function a7(n){hD(n,0)}function C_(n){var e=up(n);if(E4(e))return n}function l7(n,e){if(n==="change")return e}var tD=!1;if(Hu){var FS;if(Hu){var US="oninput"in document;if(!US){var SM=document.createElement("div");SM.setAttribute("oninput","return;"),US=typeof SM.oninput=="function"}FS=US}else FS=!1;tD=FS&&(!document.documentMode||9<document.documentMode)}function EM(){d0&&(d0.detachEvent("onpropertychange",nD),$0=d0=null)}function nD(n){if(n.propertyName==="value"&&C_($0)){var e=[];eD(e,$0,n,hI(n)),B4(a7,e)}}function u7(n,e,t){n==="focusin"?(EM(),d0=e,$0=t,d0.attachEvent("onpropertychange",nD)):n==="focusout"&&EM()}function c7(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return C_($0)}function h7(n,e){if(n==="click")return C_(e)}function d7(n,e){if(n==="input"||n==="change")return C_(e)}function f7(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var el=typeof Object.is=="function"?Object.is:f7;function j0(n,e){if(el(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!qA.call(e,i)||!el(n[i],e[i]))return!1}return!0}function AM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function TM(n,e){var t=AM(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=AM(t)}}function rD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?rD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function iD(){for(var n=window,e=$w();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=$w(n.document)}return e}function xI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function p7(n){var e=iD(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&rD(t.ownerDocument.documentElement,t)){if(r!==null&&xI(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=TM(t,s);var o=TM(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var m7=Hu&&"documentMode"in document&&11>=document.documentMode,ap=null,dT=null,f0=null,fT=!1;function CM(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;fT||ap==null||ap!==$w(r)||(r=ap,"selectionStart"in r&&xI(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),f0&&j0(f0,r)||(f0=r,r=Xw(dT,"onSelect"),0<r.length&&(e=new yI("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ap)))}function e1(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var lp={animationend:e1("Animation","AnimationEnd"),animationiteration:e1("Animation","AnimationIteration"),animationstart:e1("Animation","AnimationStart"),transitionend:e1("Transition","TransitionEnd")},zS={},sD={};Hu&&(sD=document.createElement("div").style,"AnimationEvent"in window||(delete lp.animationend.animation,delete lp.animationiteration.animation,delete lp.animationstart.animation),"TransitionEvent"in window||delete lp.transitionend.transition);function I_(n){if(zS[n])return zS[n];if(!lp[n])return n;var e=lp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in sD)return zS[n]=e[t];return n}var oD=I_("animationend"),aD=I_("animationiteration"),lD=I_("animationstart"),uD=I_("transitionend"),cD=new Map,IM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ch(n,e){cD.set(n,e),rf(e,[n])}for(var $S=0;$S<IM.length;$S++){var jS=IM[$S],g7=jS.toLowerCase(),y7=jS[0].toUpperCase()+jS.slice(1);Ch(g7,"on"+y7)}Ch(oD,"onAnimationEnd");Ch(aD,"onAnimationIteration");Ch(lD,"onAnimationStart");Ch("dblclick","onDoubleClick");Ch("focusin","onFocus");Ch("focusout","onBlur");Ch(uD,"onTransitionEnd");lm("onMouseEnter",["mouseout","mouseover"]);lm("onMouseLeave",["mouseout","mouseover"]);lm("onPointerEnter",["pointerout","pointerover"]);lm("onPointerLeave",["pointerout","pointerover"]);rf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rf("onBeforeInput",["compositionend","keypress","textInput","paste"]);rf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),v7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gg));function RM(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,gH(r,e,void 0,n),n.currentTarget=null}function hD(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;RM(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;RM(i,a,u),s=l}}}if(Hw)throw n=lT,Hw=!1,lT=null,n}function ir(n,e){var t=e[vT];t===void 0&&(t=e[vT]=new Set);var r=n+"__bubble";t.has(r)||(dD(e,n,2,!1),t.add(r))}function HS(n,e,t){var r=0;e&&(r|=4),dD(t,n,r,e)}var t1="_reactListening"+Math.random().toString(36).slice(2);function H0(n){if(!n[t1]){n[t1]=!0,w4.forEach(function(t){t!=="selectionchange"&&(v7.has(t)||HS(t,!1,n),HS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[t1]||(e[t1]=!0,HS("selectionchange",!1,e))}}function dD(n,e,t,r){switch(K4(e)){case 1:var i=MH;break;case 4:i=OH;break;default:i=mI}t=i.bind(null,e,t,n),i=void 0,!aT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function WS(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=md(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}B4(function(){var u=s,h=hI(t),f=[];e:{var p=cD.get(n);if(p!==void 0){var m=yI,g=n;switch(n){case"keypress":if(fw(t)===0)break e;case"keydown":case"keyup":m=XH;break;case"focusin":g="focus",m=DS;break;case"focusout":g="blur",m=DS;break;case"beforeblur":case"afterblur":m=DS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=yM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=LH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=YH;break;case oD:case aD:case lD:m=UH;break;case uD:m=JH;break;case"scroll":m=NH;break;case"wheel":m=t7;break;case"copy":case"cut":case"paste":m=$H;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=wM}var v=(e&4)!==0,x=!v&&n==="scroll",b=v?p!==null?p+"Capture":null:p;v=[];for(var S=u,_;S!==null;){_=S;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,b!==null&&(R=D0(S,b),R!=null&&v.push(W0(S,R,_)))),x)break;S=S.return}0<v.length&&(p=new m(p,g,null,t,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==sT&&(g=t.relatedTarget||t.fromElement)&&(md(g)||g[Wu]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(g=t.relatedTarget||t.toElement,m=u,g=g?md(g):null,g!==null&&(x=sf(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=yM,R="onMouseLeave",b="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(v=wM,R="onPointerLeave",b="onPointerEnter",S="pointer"),x=m==null?p:up(m),_=g==null?p:up(g),p=new v(R,S+"leave",m,t,h),p.target=x,p.relatedTarget=_,R=null,md(h)===u&&(v=new v(b,S+"enter",g,t,h),v.target=_,v.relatedTarget=x,R=v),x=R,m&&g)t:{for(v=m,b=g,S=0,_=v;_;_=Of(_))S++;for(_=0,R=b;R;R=Of(R))_++;for(;0<S-_;)v=Of(v),S--;for(;0<_-S;)b=Of(b),_--;for(;S--;){if(v===b||b!==null&&v===b.alternate)break t;v=Of(v),b=Of(b)}v=null}else v=null;m!==null&&PM(f,p,m,v,!1),g!==null&&x!==null&&PM(f,x,g,v,!0)}}e:{if(p=u?up(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var D=l7;else if(bM(p))if(tD)D=d7;else{D=c7;var j=u7}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=h7);if(D&&(D=D(n,u))){eD(f,D,t,h);break e}j&&j(n,p,u),n==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&eT(p,"number",p.value)}switch(j=u?up(u):window,n){case"focusin":(bM(j)||j.contentEditable==="true")&&(ap=j,dT=u,f0=null);break;case"focusout":f0=dT=ap=null;break;case"mousedown":fT=!0;break;case"contextmenu":case"mouseup":case"dragend":fT=!1,CM(f,t,h);break;case"selectionchange":if(m7)break;case"keydown":case"keyup":CM(f,t,h)}var H;if(wI)e:{switch(n){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else op?Z4(n,t)&&(G="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(G="onCompositionStart");G&&(Y4&&t.locale!=="ko"&&(op||G!=="onCompositionStart"?G==="onCompositionEnd"&&op&&(H=Q4()):(Qc=h,gI="value"in Qc?Qc.value:Qc.textContent,op=!0)),j=Xw(u,G),0<j.length&&(G=new vM(G,n,null,t,h),f.push({event:G,listeners:j}),H?G.data=H:(H=J4(t),H!==null&&(G.data=H)))),(H=r7?i7(n,t):s7(n,t))&&(u=Xw(u,"onBeforeInput"),0<u.length&&(h=new vM("onBeforeInput","beforeinput",null,t,h),f.push({event:h,listeners:u}),h.data=H))}hD(f,e)})}function W0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Xw(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=D0(n,t),s!=null&&r.unshift(W0(n,s,i)),s=D0(n,e),s!=null&&r.push(W0(n,s,i))),n=n.return}return r}function Of(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function PM(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=D0(t,s),l!=null&&o.unshift(W0(t,l,a))):i||(l=D0(t,s),l!=null&&o.push(W0(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var w7=/\r\n?/g,x7=/\u0000|\uFFFD/g;function kM(n){return(typeof n=="string"?n:""+n).replace(w7,`
`).replace(x7,"")}function n1(n,e,t){if(e=kM(e),kM(n)!==e&&t)throw Error(Ie(425))}function Kw(){}var pT=null,mT=null;function gT(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yT=typeof setTimeout=="function"?setTimeout:void 0,_7=typeof clearTimeout=="function"?clearTimeout:void 0,MM=typeof Promise=="function"?Promise:void 0,b7=typeof queueMicrotask=="function"?queueMicrotask:typeof MM<"u"?function(n){return MM.resolve(null).then(n).catch(S7)}:yT;function S7(n){setTimeout(function(){throw n})}function GS(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),z0(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);z0(e)}function dh(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function OM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Um=Math.random().toString(36).slice(2),Wl="__reactFiber$"+Um,G0="__reactProps$"+Um,Wu="__reactContainer$"+Um,vT="__reactEvents$"+Um,E7="__reactListeners$"+Um,A7="__reactHandles$"+Um;function md(n){var e=n[Wl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Wu]||t[Wl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=OM(n);n!==null;){if(t=n[Wl])return t;n=OM(n)}return e}n=t,t=n.parentNode}return null}function jy(n){return n=n[Wl]||n[Wu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function up(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ie(33))}function R_(n){return n[G0]||null}var wT=[],cp=-1;function Ih(n){return{current:n}}function ar(n){0>cp||(n.current=wT[cp],wT[cp]=null,cp--)}function Xn(n,e){cp++,wT[cp]=n.current,n.current=e}var _h={},ws=Ih(_h),io=Ih(!1),Hd=_h;function um(n,e){var t=n.type.contextTypes;if(!t)return _h;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function so(n){return n=n.childContextTypes,n!=null}function Qw(){ar(io),ar(ws)}function NM(n,e,t){if(ws.current!==_h)throw Error(Ie(168));Xn(ws,e),Xn(io,t)}function fD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ie(108,uH(n)||"Unknown",i));return Br({},t,r)}function Yw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||_h,Hd=ws.current,Xn(ws,n),Xn(io,io.current),!0}function BM(n,e,t){var r=n.stateNode;if(!r)throw Error(Ie(169));t?(n=fD(n,e,Hd),r.__reactInternalMemoizedMergedChildContext=n,ar(io),ar(ws),Xn(ws,n)):ar(io),Xn(io,t)}var Au=null,P_=!1,VS=!1;function pD(n){Au===null?Au=[n]:Au.push(n)}function T7(n){P_=!0,pD(n)}function Rh(){if(!VS&&Au!==null){VS=!0;var n=0,e=Bn;try{var t=Au;for(Bn=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Au=null,P_=!1}catch(i){throw Au!==null&&(Au=Au.slice(n+1)),U4(dI,Rh),i}finally{Bn=e,VS=!1}}return null}var hp=[],dp=0,Zw=null,Jw=0,sa=[],oa=0,Wd=null,Pu=1,ku="";function Qh(n,e){hp[dp++]=Jw,hp[dp++]=Zw,Zw=n,Jw=e}function mD(n,e,t){sa[oa++]=Pu,sa[oa++]=ku,sa[oa++]=Wd,Wd=n;var r=Pu;n=ku;var i=32-Xa(r)-1;r&=~(1<<i),t+=1;var s=32-Xa(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Pu=1<<32-Xa(e)+i|t<<i|r,ku=s+n}else Pu=1<<s|t<<i|r,ku=n}function _I(n){n.return!==null&&(Qh(n,1),mD(n,1,0))}function bI(n){for(;n===Zw;)Zw=hp[--dp],hp[dp]=null,Jw=hp[--dp],hp[dp]=null;for(;n===Wd;)Wd=sa[--oa],sa[oa]=null,ku=sa[--oa],sa[oa]=null,Pu=sa[--oa],sa[oa]=null}var Po=null,Io=null,yr=!1,ja=null;function gD(n,e){var t=ha(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function LM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Po=n,Io=dh(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Po=n,Io=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Wd!==null?{id:Pu,overflow:ku}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ha(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Po=n,Io=null,!0):!1;default:return!1}}function xT(n){return(n.mode&1)!==0&&(n.flags&128)===0}function _T(n){if(yr){var e=Io;if(e){var t=e;if(!LM(n,e)){if(xT(n))throw Error(Ie(418));e=dh(t.nextSibling);var r=Po;e&&LM(n,e)?gD(r,t):(n.flags=n.flags&-4097|2,yr=!1,Po=n)}}else{if(xT(n))throw Error(Ie(418));n.flags=n.flags&-4097|2,yr=!1,Po=n}}}function DM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Po=n}function r1(n){if(n!==Po)return!1;if(!yr)return DM(n),yr=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!gT(n.type,n.memoizedProps)),e&&(e=Io)){if(xT(n))throw yD(),Error(Ie(418));for(;e;)gD(n,e),e=dh(e.nextSibling)}if(DM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ie(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Io=dh(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Io=null}}else Io=Po?dh(n.stateNode.nextSibling):null;return!0}function yD(){for(var n=Io;n;)n=dh(n.nextSibling)}function cm(){Io=Po=null,yr=!1}function SI(n){ja===null?ja=[n]:ja.push(n)}var C7=Ju.ReactCurrentBatchConfig;function La(n,e){if(n&&n.defaultProps){e=Br({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var ex=Ih(null),tx=null,fp=null,EI=null;function AI(){EI=fp=tx=null}function TI(n){var e=ex.current;ar(ex),n._currentValue=e}function bT(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Pp(n,e){tx=n,EI=fp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(eo=!0),n.firstContext=null)}function ya(n){var e=n._currentValue;if(EI!==n)if(n={context:n,memoizedValue:e,next:null},fp===null){if(tx===null)throw Error(Ie(308));fp=n,tx.dependencies={lanes:0,firstContext:n}}else fp=fp.next=n;return e}var gd=null;function CI(n){gd===null?gd=[n]:gd.push(n)}function vD(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,CI(e)):(t.next=i.next,i.next=t),e.interleaved=t,Gu(n,r)}function Gu(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Oc=!1;function II(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Lu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function fh(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,hn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gu(n,t)}return i=r.interleaved,i===null?(e.next=e,CI(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gu(n,t)}function pw(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fI(n,t)}}function FM(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function nx(n,e,t,r){var i=n.updateQueue;Oc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=n,v=a;switch(p=e,m=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,p);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,p=typeof g=="function"?g.call(m,f,p):g,p==null)break e;f=Br({},f,p);break e;case 2:Oc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=f):h=h.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Vd|=o,n.lanes=o,n.memoizedState=f}}function UM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ie(191,i));i.call(r)}}}var xD=new v4.Component().refs;function ST(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Br({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var k_={isMounted:function(n){return(n=n._reactInternals)?sf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Ns(),i=mh(n),s=Lu(r,i);s.payload=e,t!=null&&(s.callback=t),e=fh(n,s,i),e!==null&&(Ka(e,n,i,r),pw(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Ns(),i=mh(n),s=Lu(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=fh(n,s,i),e!==null&&(Ka(e,n,i,r),pw(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Ns(),r=mh(n),i=Lu(t,r);i.tag=2,e!=null&&(i.callback=e),e=fh(n,i,r),e!==null&&(Ka(e,n,r,t),pw(e,n,r))}};function zM(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!j0(t,r)||!j0(i,s):!0}function _D(n,e,t){var r=!1,i=_h,s=e.contextType;return typeof s=="object"&&s!==null?s=ya(s):(i=so(e)?Hd:ws.current,r=e.contextTypes,s=(r=r!=null)?um(n,i):_h),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=k_,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function $M(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&k_.enqueueReplaceState(e,e.state,null)}function ET(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=xD,II(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ya(s):(s=so(e)?Hd:ws.current,i.context=um(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ST(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&k_.enqueueReplaceState(i,i.state,null),nx(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Sg(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ie(309));var r=t.stateNode}if(!r)throw Error(Ie(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===xD&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ie(284));if(!t._owner)throw Error(Ie(290,n))}return n}function i1(n,e){throw n=Object.prototype.toString.call(e),Error(Ie(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function jM(n){var e=n._init;return e(n._payload)}function bD(n){function e(b,S){if(n){var _=b.deletions;_===null?(b.deletions=[S],b.flags|=16):_.push(S)}}function t(b,S){if(!n)return null;for(;S!==null;)e(b,S),S=S.sibling;return null}function r(b,S){for(b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(b,S){return b=gh(b,S),b.index=0,b.sibling=null,b}function s(b,S,_){return b.index=_,n?(_=b.alternate,_!==null?(_=_.index,_<S?(b.flags|=2,S):_):(b.flags|=2,S)):(b.flags|=1048576,S)}function o(b){return n&&b.alternate===null&&(b.flags|=2),b}function a(b,S,_,R){return S===null||S.tag!==6?(S=JS(_,b.mode,R),S.return=b,S):(S=i(S,_),S.return=b,S)}function l(b,S,_,R){var D=_.type;return D===sp?h(b,S,_.props.children,R,_.key):S!==null&&(S.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Mc&&jM(D)===S.type)?(R=i(S,_.props),R.ref=Sg(b,S,_),R.return=b,R):(R=xw(_.type,_.key,_.props,null,b.mode,R),R.ref=Sg(b,S,_),R.return=b,R)}function u(b,S,_,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=eE(_,b.mode,R),S.return=b,S):(S=i(S,_.children||[]),S.return=b,S)}function h(b,S,_,R,D){return S===null||S.tag!==7?(S=Od(_,b.mode,R,D),S.return=b,S):(S=i(S,_),S.return=b,S)}function f(b,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=JS(""+S,b.mode,_),S.return=b,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case qv:return _=xw(S.type,S.key,S.props,null,b.mode,_),_.ref=Sg(b,null,S),_.return=b,_;case ip:return S=eE(S,b.mode,_),S.return=b,S;case Mc:var R=S._init;return f(b,R(S._payload),_)}if(Hg(S)||vg(S))return S=Od(S,b.mode,_,null),S.return=b,S;i1(b,S)}return null}function p(b,S,_,R){var D=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return D!==null?null:a(b,S,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case qv:return _.key===D?l(b,S,_,R):null;case ip:return _.key===D?u(b,S,_,R):null;case Mc:return D=_._init,p(b,S,D(_._payload),R)}if(Hg(_)||vg(_))return D!==null?null:h(b,S,_,R,null);i1(b,_)}return null}function m(b,S,_,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(_)||null,a(S,b,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case qv:return b=b.get(R.key===null?_:R.key)||null,l(S,b,R,D);case ip:return b=b.get(R.key===null?_:R.key)||null,u(S,b,R,D);case Mc:var j=R._init;return m(b,S,_,j(R._payload),D)}if(Hg(R)||vg(R))return b=b.get(_)||null,h(S,b,R,D,null);i1(S,R)}return null}function g(b,S,_,R){for(var D=null,j=null,H=S,G=S=0,K=null;H!==null&&G<_.length;G++){H.index>G?(K=H,H=null):K=H.sibling;var te=p(b,H,_[G],R);if(te===null){H===null&&(H=K);break}n&&H&&te.alternate===null&&e(b,H),S=s(te,S,G),j===null?D=te:j.sibling=te,j=te,H=K}if(G===_.length)return t(b,H),yr&&Qh(b,G),D;if(H===null){for(;G<_.length;G++)H=f(b,_[G],R),H!==null&&(S=s(H,S,G),j===null?D=H:j.sibling=H,j=H);return yr&&Qh(b,G),D}for(H=r(b,H);G<_.length;G++)K=m(H,b,G,_[G],R),K!==null&&(n&&K.alternate!==null&&H.delete(K.key===null?G:K.key),S=s(K,S,G),j===null?D=K:j.sibling=K,j=K);return n&&H.forEach(function(ne){return e(b,ne)}),yr&&Qh(b,G),D}function v(b,S,_,R){var D=vg(_);if(typeof D!="function")throw Error(Ie(150));if(_=D.call(_),_==null)throw Error(Ie(151));for(var j=D=null,H=S,G=S=0,K=null,te=_.next();H!==null&&!te.done;G++,te=_.next()){H.index>G?(K=H,H=null):K=H.sibling;var ne=p(b,H,te.value,R);if(ne===null){H===null&&(H=K);break}n&&H&&ne.alternate===null&&e(b,H),S=s(ne,S,G),j===null?D=ne:j.sibling=ne,j=ne,H=K}if(te.done)return t(b,H),yr&&Qh(b,G),D;if(H===null){for(;!te.done;G++,te=_.next())te=f(b,te.value,R),te!==null&&(S=s(te,S,G),j===null?D=te:j.sibling=te,j=te);return yr&&Qh(b,G),D}for(H=r(b,H);!te.done;G++,te=_.next())te=m(H,b,G,te.value,R),te!==null&&(n&&te.alternate!==null&&H.delete(te.key===null?G:te.key),S=s(te,S,G),j===null?D=te:j.sibling=te,j=te);return n&&H.forEach(function(ee){return e(b,ee)}),yr&&Qh(b,G),D}function x(b,S,_,R){if(typeof _=="object"&&_!==null&&_.type===sp&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case qv:e:{for(var D=_.key,j=S;j!==null;){if(j.key===D){if(D=_.type,D===sp){if(j.tag===7){t(b,j.sibling),S=i(j,_.props.children),S.return=b,b=S;break e}}else if(j.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Mc&&jM(D)===j.type){t(b,j.sibling),S=i(j,_.props),S.ref=Sg(b,j,_),S.return=b,b=S;break e}t(b,j);break}else e(b,j);j=j.sibling}_.type===sp?(S=Od(_.props.children,b.mode,R,_.key),S.return=b,b=S):(R=xw(_.type,_.key,_.props,null,b.mode,R),R.ref=Sg(b,S,_),R.return=b,b=R)}return o(b);case ip:e:{for(j=_.key;S!==null;){if(S.key===j)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){t(b,S.sibling),S=i(S,_.children||[]),S.return=b,b=S;break e}else{t(b,S);break}else e(b,S);S=S.sibling}S=eE(_,b.mode,R),S.return=b,b=S}return o(b);case Mc:return j=_._init,x(b,S,j(_._payload),R)}if(Hg(_))return g(b,S,_,R);if(vg(_))return v(b,S,_,R);i1(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(t(b,S.sibling),S=i(S,_),S.return=b,b=S):(t(b,S),S=JS(_,b.mode,R),S.return=b,b=S),o(b)):t(b,S)}return x}var hm=bD(!0),SD=bD(!1),Hy={},Kl=Ih(Hy),V0=Ih(Hy),q0=Ih(Hy);function yd(n){if(n===Hy)throw Error(Ie(174));return n}function RI(n,e){switch(Xn(q0,e),Xn(V0,n),Xn(Kl,Hy),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nT(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=nT(e,n)}ar(Kl),Xn(Kl,e)}function dm(){ar(Kl),ar(V0),ar(q0)}function ED(n){yd(q0.current);var e=yd(Kl.current),t=nT(e,n.type);e!==t&&(Xn(V0,n),Xn(Kl,t))}function PI(n){V0.current===n&&(ar(Kl),ar(V0))}var Rr=Ih(0);function rx(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qS=[];function kI(){for(var n=0;n<qS.length;n++)qS[n]._workInProgressVersionPrimary=null;qS.length=0}var mw=Ju.ReactCurrentDispatcher,XS=Ju.ReactCurrentBatchConfig,Gd=0,Or=null,mi=null,Ci=null,ix=!1,p0=!1,X0=0,I7=0;function as(){throw Error(Ie(321))}function MI(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!el(n[t],e[t]))return!1;return!0}function OI(n,e,t,r,i,s){if(Gd=s,Or=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mw.current=n===null||n.memoizedState===null?M7:O7,n=t(r,i),p0){s=0;do{if(p0=!1,X0=0,25<=s)throw Error(Ie(301));s+=1,Ci=mi=null,e.updateQueue=null,mw.current=N7,n=t(r,i)}while(p0)}if(mw.current=sx,e=mi!==null&&mi.next!==null,Gd=0,Ci=mi=Or=null,ix=!1,e)throw Error(Ie(300));return n}function NI(){var n=X0!==0;return X0=0,n}function Nl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ci===null?Or.memoizedState=Ci=n:Ci=Ci.next=n,Ci}function va(){if(mi===null){var n=Or.alternate;n=n!==null?n.memoizedState:null}else n=mi.next;var e=Ci===null?Or.memoizedState:Ci.next;if(e!==null)Ci=e,mi=n;else{if(n===null)throw Error(Ie(310));mi=n,n={memoizedState:mi.memoizedState,baseState:mi.baseState,baseQueue:mi.baseQueue,queue:mi.queue,next:null},Ci===null?Or.memoizedState=Ci=n:Ci=Ci.next=n}return Ci}function K0(n,e){return typeof e=="function"?e(n):e}function KS(n){var e=va(),t=e.queue;if(t===null)throw Error(Ie(311));t.lastRenderedReducer=n;var r=mi,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Gd&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Or.lanes|=h,Vd|=h}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,el(r,e.memoizedState)||(eo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Or.lanes|=s,Vd|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function QS(n){var e=va(),t=e.queue;if(t===null)throw Error(Ie(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);el(s,e.memoizedState)||(eo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function AD(){}function TD(n,e){var t=Or,r=va(),i=e(),s=!el(r.memoizedState,i);if(s&&(r.memoizedState=i,eo=!0),r=r.queue,BI(RD.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||Ci!==null&&Ci.memoizedState.tag&1){if(t.flags|=2048,Q0(9,ID.bind(null,t,r,i,e),void 0,null),ki===null)throw Error(Ie(349));Gd&30||CD(t,e,i)}return i}function CD(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Or.updateQueue,e===null?(e={lastEffect:null,stores:null},Or.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function ID(n,e,t,r){e.value=t,e.getSnapshot=r,PD(e)&&kD(n)}function RD(n,e,t){return t(function(){PD(e)&&kD(n)})}function PD(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!el(n,t)}catch{return!0}}function kD(n){var e=Gu(n,1);e!==null&&Ka(e,n,1,-1)}function HM(n){var e=Nl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:K0,lastRenderedState:n},e.queue=n,n=n.dispatch=k7.bind(null,Or,n),[e.memoizedState,n]}function Q0(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Or.updateQueue,e===null?(e={lastEffect:null,stores:null},Or.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function MD(){return va().memoizedState}function gw(n,e,t,r){var i=Nl();Or.flags|=n,i.memoizedState=Q0(1|e,t,void 0,r===void 0?null:r)}function M_(n,e,t,r){var i=va();r=r===void 0?null:r;var s=void 0;if(mi!==null){var o=mi.memoizedState;if(s=o.destroy,r!==null&&MI(r,o.deps)){i.memoizedState=Q0(e,t,s,r);return}}Or.flags|=n,i.memoizedState=Q0(1|e,t,s,r)}function WM(n,e){return gw(8390656,8,n,e)}function BI(n,e){return M_(2048,8,n,e)}function OD(n,e){return M_(4,2,n,e)}function ND(n,e){return M_(4,4,n,e)}function BD(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function LD(n,e,t){return t=t!=null?t.concat([n]):null,M_(4,4,BD.bind(null,e,n),t)}function LI(){}function DD(n,e){var t=va();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&MI(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function FD(n,e){var t=va();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&MI(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function UD(n,e,t){return Gd&21?(el(t,e)||(t=j4(),Or.lanes|=t,Vd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,eo=!0),n.memoizedState=t)}function R7(n,e){var t=Bn;Bn=t!==0&&4>t?t:4,n(!0);var r=XS.transition;XS.transition={};try{n(!1),e()}finally{Bn=t,XS.transition=r}}function zD(){return va().memoizedState}function P7(n,e,t){var r=mh(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},$D(n))jD(e,t);else if(t=vD(n,e,t,r),t!==null){var i=Ns();Ka(t,n,r,i),HD(t,e,r)}}function k7(n,e,t){var r=mh(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if($D(n))jD(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,el(a,o)){var l=e.interleaved;l===null?(i.next=i,CI(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=vD(n,e,i,r),t!==null&&(i=Ns(),Ka(t,n,r,i),HD(t,e,r))}}function $D(n){var e=n.alternate;return n===Or||e!==null&&e===Or}function jD(n,e){p0=ix=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function HD(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,fI(n,t)}}var sx={readContext:ya,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},M7={readContext:ya,useCallback:function(n,e){return Nl().memoizedState=[n,e===void 0?null:e],n},useContext:ya,useEffect:WM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,gw(4194308,4,BD.bind(null,e,n),t)},useLayoutEffect:function(n,e){return gw(4194308,4,n,e)},useInsertionEffect:function(n,e){return gw(4,2,n,e)},useMemo:function(n,e){var t=Nl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Nl();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=P7.bind(null,Or,n),[r.memoizedState,n]},useRef:function(n){var e=Nl();return n={current:n},e.memoizedState=n},useState:HM,useDebugValue:LI,useDeferredValue:function(n){return Nl().memoizedState=n},useTransition:function(){var n=HM(!1),e=n[0];return n=R7.bind(null,n[1]),Nl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Or,i=Nl();if(yr){if(t===void 0)throw Error(Ie(407));t=t()}else{if(t=e(),ki===null)throw Error(Ie(349));Gd&30||CD(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,WM(RD.bind(null,r,s,n),[n]),r.flags|=2048,Q0(9,ID.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Nl(),e=ki.identifierPrefix;if(yr){var t=ku,r=Pu;t=(r&~(1<<32-Xa(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=X0++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=I7++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},O7={readContext:ya,useCallback:DD,useContext:ya,useEffect:BI,useImperativeHandle:LD,useInsertionEffect:OD,useLayoutEffect:ND,useMemo:FD,useReducer:KS,useRef:MD,useState:function(){return KS(K0)},useDebugValue:LI,useDeferredValue:function(n){var e=va();return UD(e,mi.memoizedState,n)},useTransition:function(){var n=KS(K0)[0],e=va().memoizedState;return[n,e]},useMutableSource:AD,useSyncExternalStore:TD,useId:zD,unstable_isNewReconciler:!1},N7={readContext:ya,useCallback:DD,useContext:ya,useEffect:BI,useImperativeHandle:LD,useInsertionEffect:OD,useLayoutEffect:ND,useMemo:FD,useReducer:QS,useRef:MD,useState:function(){return QS(K0)},useDebugValue:LI,useDeferredValue:function(n){var e=va();return mi===null?e.memoizedState=n:UD(e,mi.memoizedState,n)},useTransition:function(){var n=QS(K0)[0],e=va().memoizedState;return[n,e]},useMutableSource:AD,useSyncExternalStore:TD,useId:zD,unstable_isNewReconciler:!1};function fm(n,e){try{var t="",r=e;do t+=lH(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function YS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function AT(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var B7=typeof WeakMap=="function"?WeakMap:Map;function WD(n,e,t){t=Lu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ax||(ax=!0,BT=r),AT(n,e)},t}function GD(n,e,t){t=Lu(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){AT(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){AT(n,e),typeof r!="function"&&(ph===null?ph=new Set([this]):ph.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function GM(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new B7;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=K7.bind(null,n,e,t),e.then(n,n))}function VM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function qM(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Lu(-1,1),e.tag=2,fh(t,e,1))),t.lanes|=1),n)}var L7=Ju.ReactCurrentOwner,eo=!1;function ks(n,e,t,r){e.child=n===null?SD(e,null,t,r):hm(e,n.child,t,r)}function XM(n,e,t,r,i){t=t.render;var s=e.ref;return Pp(e,i),r=OI(n,e,t,r,s,i),t=NI(),n!==null&&!eo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Vu(n,e,i)):(yr&&t&&_I(e),e.flags|=1,ks(n,e,r,i),e.child)}function KM(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!WI(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,VD(n,e,s,r,i)):(n=xw(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:j0,t(o,r)&&n.ref===e.ref)return Vu(n,e,i)}return e.flags|=1,n=gh(s,r),n.ref=e.ref,n.return=e,e.child=n}function VD(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(j0(s,r)&&n.ref===e.ref)if(eo=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(eo=!0);else return e.lanes=n.lanes,Vu(n,e,i)}return TT(n,e,t,r,i)}function qD(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(mp,xo),xo|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Xn(mp,xo),xo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Xn(mp,xo),xo|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Xn(mp,xo),xo|=r;return ks(n,e,i,t),e.child}function XD(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function TT(n,e,t,r,i){var s=so(t)?Hd:ws.current;return s=um(e,s),Pp(e,i),t=OI(n,e,t,r,s,i),r=NI(),n!==null&&!eo?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Vu(n,e,i)):(yr&&r&&_I(e),e.flags|=1,ks(n,e,t,i),e.child)}function QM(n,e,t,r,i){if(so(t)){var s=!0;Yw(e)}else s=!1;if(Pp(e,i),e.stateNode===null)yw(n,e),_D(e,t,r),ET(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=ya(u):(u=so(t)?Hd:ws.current,u=um(e,u));var h=t.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&$M(e,o,r,u),Oc=!1;var p=e.memoizedState;o.state=p,nx(e,r,o,i),l=e.memoizedState,a!==r||p!==l||io.current||Oc?(typeof h=="function"&&(ST(e,t,h,r),l=e.memoizedState),(a=Oc||zM(e,t,a,r,p,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wD(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:La(e.type,a),o.props=u,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ya(l):(l=so(t)?Hd:ws.current,l=um(e,l));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&$M(e,o,r,l),Oc=!1,p=e.memoizedState,o.state=p,nx(e,r,o,i);var g=e.memoizedState;a!==f||p!==g||io.current||Oc?(typeof m=="function"&&(ST(e,t,m,r),g=e.memoizedState),(u=Oc||zM(e,t,u,r,p,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return CT(n,e,t,r,s,i)}function CT(n,e,t,r,i,s){XD(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&BM(e,t,!1),Vu(n,e,s);r=e.stateNode,L7.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=hm(e,n.child,null,s),e.child=hm(e,null,a,s)):ks(n,e,a,s),e.memoizedState=r.state,i&&BM(e,t,!0),e.child}function KD(n){var e=n.stateNode;e.pendingContext?NM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&NM(n,e.context,!1),RI(n,e.containerInfo)}function YM(n,e,t,r,i){return cm(),SI(i),e.flags|=256,ks(n,e,t,r),e.child}var IT={dehydrated:null,treeContext:null,retryLane:0};function RT(n){return{baseLanes:n,cachePool:null,transitions:null}}function QD(n,e,t){var r=e.pendingProps,i=Rr.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Xn(Rr,i&1),n===null)return _T(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=B_(o,r,0,null),n=Od(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=RT(t),e.memoizedState=IT,n):DI(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return D7(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gh(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gh(a,s):(s=Od(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?RT(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=IT,r}return s=n.child,n=s.sibling,r=gh(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function DI(n,e){return e=B_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function s1(n,e,t,r){return r!==null&&SI(r),hm(e,n.child,null,t),n=DI(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function D7(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=YS(Error(Ie(422))),s1(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=B_({mode:"visible",children:r.children},i,0,null),s=Od(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hm(e,n.child,null,o),e.child.memoizedState=RT(o),e.memoizedState=IT,s);if(!(e.mode&1))return s1(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ie(419)),r=YS(s,r,void 0),s1(n,e,o,r)}if(a=(o&n.childLanes)!==0,eo||a){if(r=ki,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gu(n,i),Ka(r,n,i,-1))}return HI(),r=YS(Error(Ie(421))),s1(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=Q7.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Io=dh(i.nextSibling),Po=e,yr=!0,ja=null,n!==null&&(sa[oa++]=Pu,sa[oa++]=ku,sa[oa++]=Wd,Pu=n.id,ku=n.overflow,Wd=e),e=DI(e,r.children),e.flags|=4096,e)}function ZM(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),bT(n.return,e,t)}function ZS(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function YD(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ks(n,e,r.children,t),r=Rr.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ZM(n,t,e);else if(n.tag===19)ZM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Xn(Rr,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&rx(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),ZS(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&rx(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}ZS(e,!0,t,null,s);break;case"together":ZS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yw(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Vu(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Vd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ie(153));if(e.child!==null){for(n=e.child,t=gh(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=gh(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function F7(n,e,t){switch(e.tag){case 3:KD(e),cm();break;case 5:ED(e);break;case 1:so(e.type)&&Yw(e);break;case 4:RI(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xn(ex,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xn(Rr,Rr.current&1),e.flags|=128,null):t&e.child.childLanes?QD(n,e,t):(Xn(Rr,Rr.current&1),n=Vu(n,e,t),n!==null?n.sibling:null);Xn(Rr,Rr.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return YD(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xn(Rr,Rr.current),r)break;return null;case 22:case 23:return e.lanes=0,qD(n,e,t)}return Vu(n,e,t)}var ZD,PT,JD,eF;ZD=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};PT=function(){};JD=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,yd(Kl.current);var s=null;switch(t){case"input":i=ZA(n,i),r=ZA(n,r),s=[];break;case"select":i=Br({},i,{value:void 0}),r=Br({},r,{value:void 0}),s=[];break;case"textarea":i=tT(n,i),r=tT(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Kw)}rT(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(B0.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(B0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ir("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};eF=function(n,e,t,r){t!==r&&(e.flags|=4)};function Eg(n,e){if(!yr)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function ls(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function U7(n,e,t){var r=e.pendingProps;switch(bI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(e),null;case 1:return so(e.type)&&Qw(),ls(e),null;case 3:return r=e.stateNode,dm(),ar(io),ar(ws),kI(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(r1(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ja!==null&&(FT(ja),ja=null))),PT(n,e),ls(e),null;case 5:PI(e);var i=yd(q0.current);if(t=e.type,n!==null&&e.stateNode!=null)JD(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ie(166));return ls(e),null}if(n=yd(Kl.current),r1(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Wl]=e,r[G0]=s,n=(e.mode&1)!==0,t){case"dialog":ir("cancel",r),ir("close",r);break;case"iframe":case"object":case"embed":ir("load",r);break;case"video":case"audio":for(i=0;i<Gg.length;i++)ir(Gg[i],r);break;case"source":ir("error",r);break;case"img":case"image":case"link":ir("error",r),ir("load",r);break;case"details":ir("toggle",r);break;case"input":aM(r,s),ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ir("invalid",r);break;case"textarea":uM(r,s),ir("invalid",r)}rT(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&n1(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&n1(r.textContent,a,n),i=["children",""+a]):B0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ir("scroll",r)}switch(t){case"input":Xv(r),lM(r,s,!0);break;case"textarea":Xv(r),cM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Kw)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=C4(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Wl]=e,n[G0]=r,ZD(n,e,!1,!1),e.stateNode=n;e:{switch(o=iT(t,r),t){case"dialog":ir("cancel",n),ir("close",n),i=r;break;case"iframe":case"object":case"embed":ir("load",n),i=r;break;case"video":case"audio":for(i=0;i<Gg.length;i++)ir(Gg[i],n);i=r;break;case"source":ir("error",n),i=r;break;case"img":case"image":case"link":ir("error",n),ir("load",n),i=r;break;case"details":ir("toggle",n),i=r;break;case"input":aM(n,r),i=ZA(n,r),ir("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Br({},r,{value:void 0}),ir("invalid",n);break;case"textarea":uM(n,r),i=tT(n,r),ir("invalid",n);break;default:i=r}rT(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?P4(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&I4(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&L0(n,l):typeof l=="number"&&L0(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(B0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ir("scroll",n):l!=null&&aI(n,s,l,o))}switch(t){case"input":Xv(n),lM(n,r,!1);break;case"textarea":Xv(n),cM(n);break;case"option":r.value!=null&&n.setAttribute("value",""+xh(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Tp(n,!!r.multiple,s,!1):r.defaultValue!=null&&Tp(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Kw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ls(e),null;case 6:if(n&&e.stateNode!=null)eF(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ie(166));if(t=yd(q0.current),yd(Kl.current),r1(e)){if(r=e.stateNode,t=e.memoizedProps,r[Wl]=e,(s=r.nodeValue!==t)&&(n=Po,n!==null))switch(n.tag){case 3:n1(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&n1(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Wl]=e,e.stateNode=r}return ls(e),null;case 13:if(ar(Rr),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(yr&&Io!==null&&e.mode&1&&!(e.flags&128))yD(),cm(),e.flags|=98560,s=!1;else if(s=r1(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ie(317));s[Wl]=e}else cm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ls(e),s=!1}else ja!==null&&(FT(ja),ja=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Rr.current&1?vi===0&&(vi=3):HI())),e.updateQueue!==null&&(e.flags|=4),ls(e),null);case 4:return dm(),PT(n,e),n===null&&H0(e.stateNode.containerInfo),ls(e),null;case 10:return TI(e.type._context),ls(e),null;case 17:return so(e.type)&&Qw(),ls(e),null;case 19:if(ar(Rr),s=e.memoizedState,s===null)return ls(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Eg(s,!1);else{if(vi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=rx(n),o!==null){for(e.flags|=128,Eg(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Xn(Rr,Rr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Kr()>pm&&(e.flags|=128,r=!0,Eg(s,!1),e.lanes=4194304)}else{if(!r)if(n=rx(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Eg(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yr)return ls(e),null}else 2*Kr()-s.renderingStartTime>pm&&t!==1073741824&&(e.flags|=128,r=!0,Eg(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Kr(),e.sibling=null,t=Rr.current,Xn(Rr,r?t&1|2:t&1),e):(ls(e),null);case 22:case 23:return jI(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xo&1073741824&&(ls(e),e.subtreeFlags&6&&(e.flags|=8192)):ls(e),null;case 24:return null;case 25:return null}throw Error(Ie(156,e.tag))}function z7(n,e){switch(bI(e),e.tag){case 1:return so(e.type)&&Qw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return dm(),ar(io),ar(ws),kI(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PI(e),null;case 13:if(ar(Rr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ie(340));cm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ar(Rr),null;case 4:return dm(),null;case 10:return TI(e.type._context),null;case 22:case 23:return jI(),null;case 24:return null;default:return null}}var o1=!1,ms=!1,$7=typeof WeakSet=="function"?WeakSet:Set,Je=null;function pp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Hr(n,e,r)}else t.current=null}function kT(n,e,t){try{t()}catch(r){Hr(n,e,r)}}var JM=!1;function j7(n,e){if(pT=Vw,n=iD(),xI(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=n,p=null;t:for(;;){for(var m;f!==t||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++u===i&&(a=o),p===s&&++h===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(mT={focusedElem:n,selectionRange:t},Vw=!1,Je=e;Je!==null;)if(e=Je,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Je=n;else for(;Je!==null;){e=Je;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,b=e.stateNode,S=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:La(e.type,v),x);b.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ie(163))}}catch(R){Hr(e,e.return,R)}if(n=e.sibling,n!==null){n.return=e.return,Je=n;break}Je=e.return}return g=JM,JM=!1,g}function m0(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&kT(e,t,s)}i=i.next}while(i!==r)}}function O_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function MT(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function tF(n){var e=n.alternate;e!==null&&(n.alternate=null,tF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Wl],delete e[G0],delete e[vT],delete e[E7],delete e[A7])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function nF(n){return n.tag===5||n.tag===3||n.tag===4}function e3(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||nF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function OT(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Kw));else if(r!==4&&(n=n.child,n!==null))for(OT(n,e,t),n=n.sibling;n!==null;)OT(n,e,t),n=n.sibling}function NT(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(NT(n,e,t),n=n.sibling;n!==null;)NT(n,e,t),n=n.sibling}var ji=null,za=!1;function yc(n,e,t){for(t=t.child;t!==null;)rF(n,e,t),t=t.sibling}function rF(n,e,t){if(Xl&&typeof Xl.onCommitFiberUnmount=="function")try{Xl.onCommitFiberUnmount(A_,t)}catch{}switch(t.tag){case 5:ms||pp(t,e);case 6:var r=ji,i=za;ji=null,yc(n,e,t),ji=r,za=i,ji!==null&&(za?(n=ji,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ji.removeChild(t.stateNode));break;case 18:ji!==null&&(za?(n=ji,t=t.stateNode,n.nodeType===8?GS(n.parentNode,t):n.nodeType===1&&GS(n,t),z0(n)):GS(ji,t.stateNode));break;case 4:r=ji,i=za,ji=t.stateNode.containerInfo,za=!0,yc(n,e,t),ji=r,za=i;break;case 0:case 11:case 14:case 15:if(!ms&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&kT(t,e,o),i=i.next}while(i!==r)}yc(n,e,t);break;case 1:if(!ms&&(pp(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Hr(t,e,a)}yc(n,e,t);break;case 21:yc(n,e,t);break;case 22:t.mode&1?(ms=(r=ms)||t.memoizedState!==null,yc(n,e,t),ms=r):yc(n,e,t);break;default:yc(n,e,t)}}function t3(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new $7),e.forEach(function(r){var i=Y7.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ia(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ji=a.stateNode,za=!1;break e;case 3:ji=a.stateNode.containerInfo,za=!0;break e;case 4:ji=a.stateNode.containerInfo,za=!0;break e}a=a.return}if(ji===null)throw Error(Ie(160));rF(s,o,i),ji=null,za=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Hr(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iF(e,n),e=e.sibling}function iF(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ia(e,n),Sl(n),r&4){try{m0(3,n,n.return),O_(3,n)}catch(v){Hr(n,n.return,v)}try{m0(5,n,n.return)}catch(v){Hr(n,n.return,v)}}break;case 1:Ia(e,n),Sl(n),r&512&&t!==null&&pp(t,t.return);break;case 5:if(Ia(e,n),Sl(n),r&512&&t!==null&&pp(t,t.return),n.flags&32){var i=n.stateNode;try{L0(i,"")}catch(v){Hr(n,n.return,v)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&A4(i,s),iT(a,o);var u=iT(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?P4(i,f):h==="dangerouslySetInnerHTML"?I4(i,f):h==="children"?L0(i,f):aI(i,h,f,u)}switch(a){case"input":JA(i,s);break;case"textarea":T4(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Tp(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Tp(i,!!s.multiple,s.defaultValue,!0):Tp(i,!!s.multiple,s.multiple?[]:"",!1))}i[G0]=s}catch(v){Hr(n,n.return,v)}}break;case 6:if(Ia(e,n),Sl(n),r&4){if(n.stateNode===null)throw Error(Ie(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(v){Hr(n,n.return,v)}}break;case 3:if(Ia(e,n),Sl(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{z0(e.containerInfo)}catch(v){Hr(n,n.return,v)}break;case 4:Ia(e,n),Sl(n);break;case 13:Ia(e,n),Sl(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zI=Kr())),r&4&&t3(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(ms=(u=ms)||h,Ia(e,n),ms=u):Ia(e,n),Sl(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(Je=n,h=n.child;h!==null;){for(f=Je=h;Je!==null;){switch(p=Je,m=p.child,p.tag){case 0:case 11:case 14:case 15:m0(4,p,p.return);break;case 1:pp(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Hr(r,t,v)}}break;case 5:pp(p,p.return);break;case 22:if(p.memoizedState!==null){r3(f);continue}}m!==null?(m.return=p,Je=m):r3(f)}h=h.sibling}e:for(h=null,f=n;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=R4("display",o))}catch(v){Hr(n,n.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Hr(n,n.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Ia(e,n),Sl(n),r&4&&t3(n);break;case 21:break;default:Ia(e,n),Sl(n)}}function Sl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(nF(t)){var r=t;break e}t=t.return}throw Error(Ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(L0(i,""),r.flags&=-33);var s=e3(n);NT(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e3(n);OT(n,a,o);break;default:throw Error(Ie(161))}}catch(l){Hr(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function H7(n,e,t){Je=n,sF(n)}function sF(n,e,t){for(var r=(n.mode&1)!==0;Je!==null;){var i=Je,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||o1;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ms;a=o1;var u=ms;if(o1=o,(ms=l)&&!u)for(Je=i;Je!==null;)o=Je,l=o.child,o.tag===22&&o.memoizedState!==null?i3(i):l!==null?(l.return=o,Je=l):i3(i);for(;s!==null;)Je=s,sF(s),s=s.sibling;Je=i,o1=a,ms=u}n3(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Je=s):n3(n)}}function n3(n){for(;Je!==null;){var e=Je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ms||O_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ms)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:La(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&UM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}UM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&z0(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ie(163))}ms||e.flags&512&&MT(e)}catch(p){Hr(e,e.return,p)}}if(e===n){Je=null;break}if(t=e.sibling,t!==null){t.return=e.return,Je=t;break}Je=e.return}}function r3(n){for(;Je!==null;){var e=Je;if(e===n){Je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Je=t;break}Je=e.return}}function i3(n){for(;Je!==null;){var e=Je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{O_(4,e)}catch(l){Hr(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Hr(e,i,l)}}var s=e.return;try{MT(e)}catch(l){Hr(e,s,l)}break;case 5:var o=e.return;try{MT(e)}catch(l){Hr(e,o,l)}}}catch(l){Hr(e,e.return,l)}if(e===n){Je=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Je=a;break}Je=e.return}}var W7=Math.ceil,ox=Ju.ReactCurrentDispatcher,FI=Ju.ReactCurrentOwner,ma=Ju.ReactCurrentBatchConfig,hn=0,ki=null,si=null,Ki=0,xo=0,mp=Ih(0),vi=0,Y0=null,Vd=0,N_=0,UI=0,g0=null,Zs=null,zI=0,pm=1/0,bu=null,ax=!1,BT=null,ph=null,a1=!1,Yc=null,lx=0,y0=0,LT=null,vw=-1,ww=0;function Ns(){return hn&6?Kr():vw!==-1?vw:vw=Kr()}function mh(n){return n.mode&1?hn&2&&Ki!==0?Ki&-Ki:C7.transition!==null?(ww===0&&(ww=j4()),ww):(n=Bn,n!==0||(n=window.event,n=n===void 0?16:K4(n.type)),n):1}function Ka(n,e,t,r){if(50<y0)throw y0=0,LT=null,Error(Ie(185));zy(n,t,r),(!(hn&2)||n!==ki)&&(n===ki&&(!(hn&2)&&(N_|=t),vi===4&&Uc(n,Ki)),oo(n,r),t===1&&hn===0&&!(e.mode&1)&&(pm=Kr()+500,P_&&Rh()))}function oo(n,e){var t=n.callbackNode;CH(n,e);var r=Gw(n,n===ki?Ki:0);if(r===0)t!==null&&fM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&fM(t),e===1)n.tag===0?T7(s3.bind(null,n)):pD(s3.bind(null,n)),b7(function(){!(hn&6)&&Rh()}),t=null;else{switch(H4(r)){case 1:t=dI;break;case 4:t=z4;break;case 16:t=Ww;break;case 536870912:t=$4;break;default:t=Ww}t=fF(t,oF.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function oF(n,e){if(vw=-1,ww=0,hn&6)throw Error(Ie(327));var t=n.callbackNode;if(kp()&&n.callbackNode!==t)return null;var r=Gw(n,n===ki?Ki:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=ux(n,r);else{e=r;var i=hn;hn|=2;var s=lF();(ki!==n||Ki!==e)&&(bu=null,pm=Kr()+500,Md(n,e));do try{q7();break}catch(a){aF(n,a)}while(1);AI(),ox.current=s,hn=i,si!==null?e=0:(ki=null,Ki=0,e=vi)}if(e!==0){if(e===2&&(i=uT(n),i!==0&&(r=i,e=DT(n,i))),e===1)throw t=Y0,Md(n,0),Uc(n,r),oo(n,Kr()),t;if(e===6)Uc(n,r);else{if(i=n.current.alternate,!(r&30)&&!G7(i)&&(e=ux(n,r),e===2&&(s=uT(n),s!==0&&(r=s,e=DT(n,s))),e===1))throw t=Y0,Md(n,0),Uc(n,r),oo(n,Kr()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Ie(345));case 2:Yh(n,Zs,bu);break;case 3:if(Uc(n,r),(r&130023424)===r&&(e=zI+500-Kr(),10<e)){if(Gw(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Ns(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=yT(Yh.bind(null,n,Zs,bu),e);break}Yh(n,Zs,bu);break;case 4:if(Uc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-Xa(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Kr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W7(r/1960))-r,10<r){n.timeoutHandle=yT(Yh.bind(null,n,Zs,bu),r);break}Yh(n,Zs,bu);break;case 5:Yh(n,Zs,bu);break;default:throw Error(Ie(329))}}}return oo(n,Kr()),n.callbackNode===t?oF.bind(null,n):null}function DT(n,e){var t=g0;return n.current.memoizedState.isDehydrated&&(Md(n,e).flags|=256),n=ux(n,e),n!==2&&(e=Zs,Zs=t,e!==null&&FT(e)),n}function FT(n){Zs===null?Zs=n:Zs.push.apply(Zs,n)}function G7(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!el(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Uc(n,e){for(e&=~UI,e&=~N_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Xa(e),r=1<<t;n[t]=-1,e&=~r}}function s3(n){if(hn&6)throw Error(Ie(327));kp();var e=Gw(n,0);if(!(e&1))return oo(n,Kr()),null;var t=ux(n,e);if(n.tag!==0&&t===2){var r=uT(n);r!==0&&(e=r,t=DT(n,r))}if(t===1)throw t=Y0,Md(n,0),Uc(n,e),oo(n,Kr()),t;if(t===6)throw Error(Ie(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Yh(n,Zs,bu),oo(n,Kr()),null}function $I(n,e){var t=hn;hn|=1;try{return n(e)}finally{hn=t,hn===0&&(pm=Kr()+500,P_&&Rh())}}function qd(n){Yc!==null&&Yc.tag===0&&!(hn&6)&&kp();var e=hn;hn|=1;var t=ma.transition,r=Bn;try{if(ma.transition=null,Bn=1,n)return n()}finally{Bn=r,ma.transition=t,hn=e,!(hn&6)&&Rh()}}function jI(){xo=mp.current,ar(mp)}function Md(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,_7(t)),si!==null)for(t=si.return;t!==null;){var r=t;switch(bI(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qw();break;case 3:dm(),ar(io),ar(ws),kI();break;case 5:PI(r);break;case 4:dm();break;case 13:ar(Rr);break;case 19:ar(Rr);break;case 10:TI(r.type._context);break;case 22:case 23:jI()}t=t.return}if(ki=n,si=n=gh(n.current,null),Ki=xo=e,vi=0,Y0=null,UI=N_=Vd=0,Zs=g0=null,gd!==null){for(e=0;e<gd.length;e++)if(t=gd[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}gd=null}return n}function aF(n,e){do{var t=si;try{if(AI(),mw.current=sx,ix){for(var r=Or.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ix=!1}if(Gd=0,Ci=mi=Or=null,p0=!1,X0=0,FI.current=null,t===null||t.return===null){vi=1,Y0=e,si=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ki,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=VM(o);if(m!==null){m.flags&=-257,qM(m,o,a,s,e),m.mode&1&&GM(s,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){GM(s,u,e),HI();break e}l=Error(Ie(426))}}else if(yr&&a.mode&1){var x=VM(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),qM(x,o,a,s,e),SI(fm(l,a));break e}}s=l=fm(l,a),vi!==4&&(vi=2),g0===null?g0=[s]:g0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=WD(s,l,e);FM(s,b);break e;case 1:a=l;var S=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ph===null||!ph.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=GD(s,a,e);FM(s,R);break e}}s=s.return}while(s!==null)}cF(t)}catch(D){e=D,si===t&&t!==null&&(si=t=t.return);continue}break}while(1)}function lF(){var n=ox.current;return ox.current=sx,n===null?sx:n}function HI(){(vi===0||vi===3||vi===2)&&(vi=4),ki===null||!(Vd&268435455)&&!(N_&268435455)||Uc(ki,Ki)}function ux(n,e){var t=hn;hn|=2;var r=lF();(ki!==n||Ki!==e)&&(bu=null,Md(n,e));do try{V7();break}catch(i){aF(n,i)}while(1);if(AI(),hn=t,ox.current=r,si!==null)throw Error(Ie(261));return ki=null,Ki=0,vi}function V7(){for(;si!==null;)uF(si)}function q7(){for(;si!==null&&!vH();)uF(si)}function uF(n){var e=dF(n.alternate,n,xo);n.memoizedProps=n.pendingProps,e===null?cF(n):si=e,FI.current=null}function cF(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=z7(t,e),t!==null){t.flags&=32767,si=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{vi=6,si=null;return}}else if(t=U7(t,e,xo),t!==null){si=t;return}if(e=e.sibling,e!==null){si=e;return}si=e=n}while(e!==null);vi===0&&(vi=5)}function Yh(n,e,t){var r=Bn,i=ma.transition;try{ma.transition=null,Bn=1,X7(n,e,t,r)}finally{ma.transition=i,Bn=r}return null}function X7(n,e,t,r){do kp();while(Yc!==null);if(hn&6)throw Error(Ie(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ie(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(IH(n,s),n===ki&&(si=ki=null,Ki=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||a1||(a1=!0,fF(Ww,function(){return kp(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ma.transition,ma.transition=null;var o=Bn;Bn=1;var a=hn;hn|=4,FI.current=null,j7(n,t),iF(t,n),p7(mT),Vw=!!pT,mT=pT=null,n.current=t,H7(t),wH(),hn=a,Bn=o,ma.transition=s}else n.current=t;if(a1&&(a1=!1,Yc=n,lx=i),s=n.pendingLanes,s===0&&(ph=null),bH(t.stateNode),oo(n,Kr()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(ax)throw ax=!1,n=BT,BT=null,n;return lx&1&&n.tag!==0&&kp(),s=n.pendingLanes,s&1?n===LT?y0++:(y0=0,LT=n):y0=0,Rh(),null}function kp(){if(Yc!==null){var n=H4(lx),e=ma.transition,t=Bn;try{if(ma.transition=null,Bn=16>n?16:n,Yc===null)var r=!1;else{if(n=Yc,Yc=null,lx=0,hn&6)throw Error(Ie(331));var i=hn;for(hn|=4,Je=n.current;Je!==null;){var s=Je,o=s.child;if(Je.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Je=u;Je!==null;){var h=Je;switch(h.tag){case 0:case 11:case 15:m0(8,h,s)}var f=h.child;if(f!==null)f.return=h,Je=f;else for(;Je!==null;){h=Je;var p=h.sibling,m=h.return;if(tF(h),h===u){Je=null;break}if(p!==null){p.return=m,Je=p;break}Je=m}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Je=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Je=o;else e:for(;Je!==null;){if(s=Je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:m0(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,Je=b;break e}Je=s.return}}var S=n.current;for(Je=S;Je!==null;){o=Je;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Je=_;else e:for(o=S;Je!==null;){if(a=Je,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:O_(9,a)}}catch(D){Hr(a,a.return,D)}if(a===o){Je=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,Je=R;break e}Je=a.return}}if(hn=i,Rh(),Xl&&typeof Xl.onPostCommitFiberRoot=="function")try{Xl.onPostCommitFiberRoot(A_,n)}catch{}r=!0}return r}finally{Bn=t,ma.transition=e}}return!1}function o3(n,e,t){e=fm(t,e),e=WD(n,e,1),n=fh(n,e,1),e=Ns(),n!==null&&(zy(n,1,e),oo(n,e))}function Hr(n,e,t){if(n.tag===3)o3(n,n,t);else for(;e!==null;){if(e.tag===3){o3(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ph===null||!ph.has(r))){n=fm(t,n),n=GD(e,n,1),e=fh(e,n,1),n=Ns(),e!==null&&(zy(e,1,n),oo(e,n));break}}e=e.return}}function K7(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Ns(),n.pingedLanes|=n.suspendedLanes&t,ki===n&&(Ki&t)===t&&(vi===4||vi===3&&(Ki&130023424)===Ki&&500>Kr()-zI?Md(n,0):UI|=t),oo(n,e)}function hF(n,e){e===0&&(n.mode&1?(e=Yv,Yv<<=1,!(Yv&130023424)&&(Yv=4194304)):e=1);var t=Ns();n=Gu(n,e),n!==null&&(zy(n,e,t),oo(n,t))}function Q7(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),hF(n,t)}function Y7(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Ie(314))}r!==null&&r.delete(e),hF(n,t)}var dF;dF=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||io.current)eo=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return eo=!1,F7(n,e,t);eo=!!(n.flags&131072)}else eo=!1,yr&&e.flags&1048576&&mD(e,Jw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yw(n,e),n=e.pendingProps;var i=um(e,ws.current);Pp(e,t),i=OI(null,e,r,n,i,t);var s=NI();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,so(r)?(s=!0,Yw(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,II(e),i.updater=k_,e.stateNode=i,i._reactInternals=e,ET(e,r,n,t),e=CT(null,e,r,!0,s,t)):(e.tag=0,yr&&s&&_I(e),ks(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(yw(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=J7(r),n=La(r,n),i){case 0:e=TT(null,e,r,n,t);break e;case 1:e=QM(null,e,r,n,t);break e;case 11:e=XM(null,e,r,n,t);break e;case 14:e=KM(null,e,r,La(r.type,n),t);break e}throw Error(Ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:La(r,i),TT(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:La(r,i),QM(n,e,r,i,t);case 3:e:{if(KD(e),n===null)throw Error(Ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,wD(n,e),nx(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fm(Error(Ie(423)),e),e=YM(n,e,r,t,i);break e}else if(r!==i){i=fm(Error(Ie(424)),e),e=YM(n,e,r,t,i);break e}else for(Io=dh(e.stateNode.containerInfo.firstChild),Po=e,yr=!0,ja=null,t=SD(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cm(),r===i){e=Vu(n,e,t);break e}ks(n,e,r,t)}e=e.child}return e;case 5:return ED(e),n===null&&_T(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,gT(r,i)?o=null:s!==null&&gT(r,s)&&(e.flags|=32),XD(n,e),ks(n,e,o,t),e.child;case 6:return n===null&&_T(e),null;case 13:return QD(n,e,t);case 4:return RI(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=hm(e,null,r,t):ks(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:La(r,i),XM(n,e,r,i,t);case 7:return ks(n,e,e.pendingProps,t),e.child;case 8:return ks(n,e,e.pendingProps.children,t),e.child;case 12:return ks(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Xn(ex,r._currentValue),r._currentValue=o,s!==null)if(el(s.value,o)){if(s.children===i.children&&!io.current){e=Vu(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Lu(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),bT(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ie(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),bT(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ks(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pp(e,t),i=ya(i),r=r(i),e.flags|=1,ks(n,e,r,t),e.child;case 14:return r=e.type,i=La(r,e.pendingProps),i=La(r.type,i),KM(n,e,r,i,t);case 15:return VD(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:La(r,i),yw(n,e),e.tag=1,so(r)?(n=!0,Yw(e)):n=!1,Pp(e,t),_D(e,r,i),ET(e,r,i,t),CT(null,e,r,!0,n,t);case 19:return YD(n,e,t);case 22:return qD(n,e,t)}throw Error(Ie(156,e.tag))};function fF(n,e){return U4(n,e)}function Z7(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ha(n,e,t,r){return new Z7(n,e,t,r)}function WI(n){return n=n.prototype,!(!n||!n.isReactComponent)}function J7(n){if(typeof n=="function")return WI(n)?1:0;if(n!=null){if(n=n.$$typeof,n===uI)return 11;if(n===cI)return 14}return 2}function gh(n,e){var t=n.alternate;return t===null?(t=ha(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function xw(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")WI(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case sp:return Od(t.children,i,s,e);case lI:o=8,i|=8;break;case XA:return n=ha(12,t,e,i|2),n.elementType=XA,n.lanes=s,n;case KA:return n=ha(13,t,e,i),n.elementType=KA,n.lanes=s,n;case QA:return n=ha(19,t,e,i),n.elementType=QA,n.lanes=s,n;case b4:return B_(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case x4:o=10;break e;case _4:o=9;break e;case uI:o=11;break e;case cI:o=14;break e;case Mc:o=16,r=null;break e}throw Error(Ie(130,n==null?n:typeof n,""))}return e=ha(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Od(n,e,t,r){return n=ha(7,n,r,e),n.lanes=t,n}function B_(n,e,t,r){return n=ha(22,n,r,e),n.elementType=b4,n.lanes=t,n.stateNode={isHidden:!1},n}function JS(n,e,t){return n=ha(6,n,null,e),n.lanes=t,n}function eE(n,e,t){return e=ha(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function eW(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=NS(0),this.expirationTimes=NS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=NS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function GI(n,e,t,r,i,s,o,a,l){return n=new eW(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ha(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},II(s),n}function tW(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ip,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function pF(n){if(!n)return _h;n=n._reactInternals;e:{if(sf(n)!==n||n.tag!==1)throw Error(Ie(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(so(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ie(171))}if(n.tag===1){var t=n.type;if(so(t))return fD(n,t,e)}return e}function mF(n,e,t,r,i,s,o,a,l){return n=GI(t,r,!0,n,i,s,o,a,l),n.context=pF(null),t=n.current,r=Ns(),i=mh(t),s=Lu(r,i),s.callback=e??null,fh(t,s,i),n.current.lanes=i,zy(n,i,r),oo(n,r),n}function L_(n,e,t,r){var i=e.current,s=Ns(),o=mh(i);return t=pF(t),e.context===null?e.context=t:e.pendingContext=t,e=Lu(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=fh(i,e,o),n!==null&&(Ka(n,i,o,s),pw(n,i,o)),o}function cx(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function a3(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function VI(n,e){a3(n,e),(n=n.alternate)&&a3(n,e)}function nW(){return null}var gF=typeof reportError=="function"?reportError:function(n){console.error(n)};function qI(n){this._internalRoot=n}D_.prototype.render=qI.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ie(409));L_(n,e,null,null)};D_.prototype.unmount=qI.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;qd(function(){L_(null,n,null,null)}),e[Wu]=null}};function D_(n){this._internalRoot=n}D_.prototype.unstable_scheduleHydration=function(n){if(n){var e=V4();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Fc.length&&e!==0&&e<Fc[t].priority;t++);Fc.splice(t,0,n),t===0&&X4(n)}};function XI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function F_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function l3(){}function rW(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=cx(o);s.call(u)}}var o=mF(e,r,n,0,null,!1,!1,"",l3);return n._reactRootContainer=o,n[Wu]=o.current,H0(n.nodeType===8?n.parentNode:n),qd(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=cx(l);a.call(u)}}var l=GI(n,0,!1,null,null,!1,!1,"",l3);return n._reactRootContainer=l,n[Wu]=l.current,H0(n.nodeType===8?n.parentNode:n),qd(function(){L_(e,l,t,r)}),l}function U_(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=cx(o);a.call(l)}}L_(e,o,n,i)}else o=rW(t,e,n,i,r);return cx(o)}W4=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Wg(e.pendingLanes);t!==0&&(fI(e,t|1),oo(e,Kr()),!(hn&6)&&(pm=Kr()+500,Rh()))}break;case 13:qd(function(){var r=Gu(n,1);if(r!==null){var i=Ns();Ka(r,n,1,i)}}),VI(n,1)}};pI=function(n){if(n.tag===13){var e=Gu(n,134217728);if(e!==null){var t=Ns();Ka(e,n,134217728,t)}VI(n,134217728)}};G4=function(n){if(n.tag===13){var e=mh(n),t=Gu(n,e);if(t!==null){var r=Ns();Ka(t,n,e,r)}VI(n,e)}};V4=function(){return Bn};q4=function(n,e){var t=Bn;try{return Bn=n,e()}finally{Bn=t}};oT=function(n,e,t){switch(e){case"input":if(JA(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=R_(r);if(!i)throw Error(Ie(90));E4(r),JA(r,i)}}}break;case"textarea":T4(n,t);break;case"select":e=t.value,e!=null&&Tp(n,!!t.multiple,e,!1)}};O4=$I;N4=qd;var iW={usingClientEntryPoint:!1,Events:[jy,up,R_,k4,M4,$I]},Ag={findFiberByHostInstance:md,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},sW={bundleType:Ag.bundleType,version:Ag.version,rendererPackageName:Ag.rendererPackageName,rendererConfig:Ag.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ju.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=D4(n),n===null?null:n.stateNode},findFiberByHostInstance:Ag.findFiberByHostInstance||nW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l1.isDisabled&&l1.supportsFiber)try{A_=l1.inject(sW),Xl=l1}catch{}}No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iW;No.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!XI(e))throw Error(Ie(200));return tW(n,e,null,t)};No.createRoot=function(n,e){if(!XI(n))throw Error(Ie(299));var t=!1,r="",i=gF;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=GI(n,1,!1,null,null,t,!1,r,i),n[Wu]=e.current,H0(n.nodeType===8?n.parentNode:n),new qI(e)};No.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ie(188)):(n=Object.keys(n).join(","),Error(Ie(268,n)));return n=D4(e),n=n===null?null:n.stateNode,n};No.flushSync=function(n){return qd(n)};No.hydrate=function(n,e,t){if(!F_(e))throw Error(Ie(200));return U_(null,n,e,!0,t)};No.hydrateRoot=function(n,e,t){if(!XI(n))throw Error(Ie(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=gF;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=mF(e,null,n,1,t??null,i,!1,s,o),n[Wu]=e.current,H0(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new D_(e)};No.render=function(n,e,t){if(!F_(e))throw Error(Ie(200));return U_(null,n,e,!1,t)};No.unmountComponentAtNode=function(n){if(!F_(n))throw Error(Ie(40));return n._reactRootContainer?(qd(function(){U_(null,null,n,!1,function(){n._reactRootContainer=null,n[Wu]=null})}),!0):!1};No.unstable_batchedUpdates=$I;No.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!F_(t))throw Error(Ie(200));if(n==null||n._reactInternals===void 0)throw Error(Ie(38));return U_(n,e,t,!1,r)};No.version="18.2.0-next-9e3b772b8-20220608";function yF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yF)}catch(n){console.error(n)}}yF(),m4.exports=No;var KI=m4.exports;const vF=rl(KI);var u3=KI;VA.createRoot=u3.createRoot,VA.hydrateRoot=u3.hydrateRoot;var of=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(of||{}),wF=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(wF||{}),UT=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(UT||{}),At=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(At||{}),Va=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(Va||{}),Me=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(Me||{}),Mp=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(Mp||{}),dt=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(dt||{}),Qe=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(Qe||{}),da=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(da||{}),Du=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(Du||{}),Zl=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Zl||{}),to=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(to||{}),jl=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(jl||{}),QI=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(QI||{}),fa=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(fa||{}),fi=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(fi||{}),ri=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(ri||{}),Ql=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Ql||{});const oW={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},Xe={ADAPTER:oW,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var tE=/iPhone/i,c3=/iPod/i,h3=/iPad/i,d3=/\biOS-universal(?:.+)Mac\b/i,nE=/\bAndroid(?:.+)Mobile\b/i,f3=/Android/i,Nf=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,u1=/Silk/i,yu=/Windows Phone/i,p3=/\bWindows(?:.+)ARM\b/i,m3=/BlackBerry/i,g3=/BB10/i,y3=/Opera Mini/i,v3=/\b(CriOS|Chrome)(?:.+)Mobile/i,w3=/Mobile(?:.+)Firefox\b/i,x3=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function aW(n){return function(e){return e.test(n)}}function _3(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,r=t.split("[FBAN");typeof r[1]<"u"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]<"u"&&(t=r[0]);var i=aW(t),s={apple:{phone:i(tE)&&!i(yu),ipod:i(c3),tablet:!i(tE)&&(i(h3)||x3(e))&&!i(yu),universal:i(d3),device:(i(tE)||i(c3)||i(h3)||i(d3)||x3(e))&&!i(yu)},amazon:{phone:i(Nf),tablet:!i(Nf)&&i(u1),device:i(Nf)||i(u1)},android:{phone:!i(yu)&&i(Nf)||!i(yu)&&i(nE),tablet:!i(yu)&&!i(Nf)&&!i(nE)&&(i(u1)||i(f3)),device:!i(yu)&&(i(Nf)||i(u1)||i(nE)||i(f3))||i(/\bokhttp\b/i)},windows:{phone:i(yu),tablet:i(p3),device:i(yu)||i(p3)},other:{blackberry:i(m3),blackberry10:i(g3),opera:i(y3),firefox:i(w3),chrome:i(v3),device:i(m3)||i(g3)||i(y3)||i(w3)||i(v3)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const lW=_3.default??_3,Mu=lW(globalThis.navigator);Xe.RETINA_PREFIX=/@([0-9\.]+)x/;Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var xF={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,f||l,p),g=t?t+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,g=new Array(m);p<m;p++)g[p]=f[p].fn;return g},a.prototype.listenerCount=function(u){var h=t?t+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,p,m,g){var v=t?t+u:u;if(!this._events[v])return!1;var x=this._events[v],b=arguments.length,S,_;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,f),!0;case 4:return x.fn.call(x.context,h,f,p),!0;case 5:return x.fn.call(x.context,h,f,p,m),!0;case 6:return x.fn.call(x.context,h,f,p,m,g),!0}for(_=1,S=new Array(b-1);_<b;_++)S[_-1]=arguments[_];x.fn.apply(x.context,S)}else{var R=x.length,D;for(_=0;_<R;_++)switch(x[_].once&&this.removeListener(u,x[_].fn,void 0,!0),b){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,h);break;case 3:x[_].fn.call(x[_].context,h,f);break;case 4:x[_].fn.call(x[_].context,h,f,p);break;default:if(!S)for(D=1,S=new Array(b-1);D<b;D++)S[D-1]=arguments[D];x[_].fn.apply(x[_].context,S)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,p){var m=t?t+u:u;if(!this._events[m])return this;if(!h)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===h&&(!p||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var v=0,x=[],b=g.length;v<b;v++)(g[v].fn!==h||p&&!g[v].once||f&&g[v].context!==f)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(xF);var uW=xF.exports;const il=rl(uW);var YI={exports:{}};YI.exports=z_;YI.exports.default=z_;function z_(n,e,t){t=t||2;var r=e&&e.length,i=r?e[0]*t:n.length,s=_F(n,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,f,p,m;if(r&&(s=pW(n,e,s,t)),n.length>80*t){a=u=n[0],l=h=n[1];for(var g=t;g<i;g+=t)f=n[g],p=n[g+1],f<a&&(a=f),p<l&&(l=p),f>u&&(u=f),p>h&&(h=p);m=Math.max(u-a,h-l),m=m!==0?32767/m:0}return Z0(s,o,t,a,l,m,0),o}function _F(n,e,t,r,i){var s,o;if(i===jT(n,e,t,r)>0)for(s=e;s<t;s+=r)o=b3(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=b3(s,n[s],n[s+1],o);return o&&$_(o,o.next)&&(ey(o),o=o.next),o}function Xd(n,e){if(!n)return n;e||(e=n);var t=n,r;do if(r=!1,!t.steiner&&($_(t,t.next)||Mr(t.prev,t,t.next)===0)){if(ey(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Z0(n,e,t,r,i,s,o){if(n){!o&&s&&wW(n,r,i,s);for(var a=n,l,u;n.prev!==n.next;){if(l=n.prev,u=n.next,s?hW(n,r,i,s):cW(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),ey(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=dW(Xd(n),e,t),Z0(n,e,t,r,i,s,2)):o===2&&fW(n,e,t,r,i,s):Z0(Xd(n),e,t,r,i,s,1);break}}}}function cW(n){var e=n.prev,t=n,r=n.next;if(Mr(e,t,r)>=0)return!1;for(var i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,h=i<s?i<o?i:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,p=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u,g=r.next;g!==e;){if(g.x>=h&&g.x<=p&&g.y>=f&&g.y<=m&&gp(i,a,s,l,o,u,g.x,g.y)&&Mr(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function hW(n,e,t,r){var i=n.prev,s=n,o=n.next;if(Mr(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,h=i.y,f=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,g=h<f?h<p?h:p:f<p?f:p,v=a>l?a>u?a:u:l>u?l:u,x=h>f?h>p?h:p:f>p?f:p,b=zT(m,g,e,t,r),S=zT(v,x,e,t,r),_=n.prevZ,R=n.nextZ;_&&_.z>=b&&R&&R.z<=S;){if(_.x>=m&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&gp(a,h,l,f,u,p,_.x,_.y)&&Mr(_.prev,_,_.next)>=0||(_=_.prevZ,R.x>=m&&R.x<=v&&R.y>=g&&R.y<=x&&R!==i&&R!==o&&gp(a,h,l,f,u,p,R.x,R.y)&&Mr(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;_&&_.z>=b;){if(_.x>=m&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&gp(a,h,l,f,u,p,_.x,_.y)&&Mr(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;R&&R.z<=S;){if(R.x>=m&&R.x<=v&&R.y>=g&&R.y<=x&&R!==i&&R!==o&&gp(a,h,l,f,u,p,R.x,R.y)&&Mr(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function dW(n,e,t){var r=n;do{var i=r.prev,s=r.next.next;!$_(i,s)&&bF(i,r,r.next,s)&&J0(i,s)&&J0(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),ey(r),ey(r.next),r=n=s),r=r.next}while(r!==n);return Xd(r)}function fW(n,e,t,r,i,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&bW(o,a)){var l=SF(o,a);o=Xd(o,o.next),l=Xd(l,l.next),Z0(o,e,t,r,i,s,0),Z0(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function pW(n,e,t,r){var i=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=_F(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(_W(u));for(i.sort(mW),s=0;s<i.length;s++)t=gW(i[s],t);return t}function mW(n,e){return n.x-e.x}function gW(n,e){var t=yW(n,e);if(!t)return e;var r=SF(t,n);return Xd(r,r.next),Xd(t,t.next)}function yW(n,e){var t=e,r=n.x,i=n.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===r))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,h=o.y,f=1/0,p;t=o;do r>=t.x&&t.x>=u&&r!==t.x&&gp(i<h?r:s,i,u,h,i<h?s:r,i,t.x,t.y)&&(p=Math.abs(i-t.y)/(r-t.x),J0(t,n)&&(p<f||p===f&&(t.x>o.x||t.x===o.x&&vW(o,t)))&&(o=t,f=p)),t=t.next;while(t!==l);return o}function vW(n,e){return Mr(n.prev,n,e.prev)<0&&Mr(e.next,n,n.next)<0}function wW(n,e,t,r){var i=n;do i.z===0&&(i.z=zT(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,xW(i)}function xW(n){var e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function zT(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function _W(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function gp(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function bW(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!SW(n,e)&&(J0(n,e)&&J0(e,n)&&EW(n,e)&&(Mr(n.prev,n,e.prev)||Mr(n,e.prev,e))||$_(n,e)&&Mr(n.prev,n,n.next)>0&&Mr(e.prev,e,e.next)>0)}function Mr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function $_(n,e){return n.x===e.x&&n.y===e.y}function bF(n,e,t,r){var i=h1(Mr(n,e,t)),s=h1(Mr(n,e,r)),o=h1(Mr(t,r,n)),a=h1(Mr(t,r,e));return!!(i!==s&&o!==a||i===0&&c1(n,t,e)||s===0&&c1(n,r,e)||o===0&&c1(t,n,r)||a===0&&c1(t,e,r))}function c1(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function h1(n){return n>0?1:n<0?-1:0}function SW(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&bF(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function J0(n,e){return Mr(n.prev,n,n.next)<0?Mr(n,e,n.next)>=0&&Mr(n,n.prev,e)>=0:Mr(n,e,n.prev)<0||Mr(n,n.next,e)<0}function EW(n,e){var t=n,r=!1,i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function SF(n,e){var t=new $T(n.i,n.x,n.y),r=new $T(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function b3(n,e,t,r){var i=new $T(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ey(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function $T(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}z_.deviation=function(n,e,t,r){var i=e&&e.length,s=i?e[0]*t:n.length,o=Math.abs(jT(n,0,s,t));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,h=a<l-1?e[a+1]*t:n.length;o-=Math.abs(jT(n,u,h,t))}var f=0;for(a=0;a<r.length;a+=3){var p=r[a]*t,m=r[a+1]*t,g=r[a+2]*t;f+=Math.abs((n[p]-n[g])*(n[m+1]-n[p+1])-(n[p]-n[m])*(n[g+1]-n[p+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function jT(n,e,t,r){for(var i=0,s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}z_.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},r=0,i=0;i<n.length;i++){for(var s=0;s<n[i].length;s++)for(var o=0;o<e;o++)t.vertices.push(n[i][s][o]);i>0&&(r+=n[i-1].length,t.holes.push(r))}return t};var AW=YI.exports;const TW=rl(AW);var hx={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */hx.exports;(function(n,e){(function(t){var r=e&&!e.nodeType&&e,i=n&&!n.nodeType&&n,s=typeof oi=="object"&&oi;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,u=1,h=26,f=38,p=700,m=72,g=128,v="-",x=/^xn--/,b=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=l-u,D=Math.floor,j=String.fromCharCode,H;function G(z){throw new RangeError(_[z])}function K(z,N){for(var T=z.length,V=[];T--;)V[T]=N(z[T]);return V}function te(z,N){var T=z.split("@"),V="";T.length>1&&(V=T[0]+"@",z=T[1]),z=z.replace(S,".");var oe=z.split("."),ge=K(oe,N).join(".");return V+ge}function ne(z){for(var N=[],T=0,V=z.length,oe,ge;T<V;)oe=z.charCodeAt(T++),oe>=55296&&oe<=56319&&T<V?(ge=z.charCodeAt(T++),(ge&64512)==56320?N.push(((oe&1023)<<10)+(ge&1023)+65536):(N.push(oe),T--)):N.push(oe);return N}function ee(z){return K(z,function(N){var T="";return N>65535&&(N-=65536,T+=j(N>>>10&1023|55296),N=56320|N&1023),T+=j(N),T}).join("")}function L(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:l}function w(z,N){return z+22+75*(z<26)-((N!=0)<<5)}function A(z,N,T){var V=0;for(z=T?D(z/p):z>>1,z+=D(z/N);z>R*h>>1;V+=l)z=D(z/R);return D(V+(R+1)*z/(z+f))}function O(z){var N=[],T=z.length,V,oe=0,ge=g,we=m,Re,Ne,Ue,Ye,Ce,ze,ft,xt,vt;for(Re=z.lastIndexOf(v),Re<0&&(Re=0),Ne=0;Ne<Re;++Ne)z.charCodeAt(Ne)>=128&&G("not-basic"),N.push(z.charCodeAt(Ne));for(Ue=Re>0?Re+1:0;Ue<T;){for(Ye=oe,Ce=1,ze=l;Ue>=T&&G("invalid-input"),ft=L(z.charCodeAt(Ue++)),(ft>=l||ft>D((a-oe)/Ce))&&G("overflow"),oe+=ft*Ce,xt=ze<=we?u:ze>=we+h?h:ze-we,!(ft<xt);ze+=l)vt=l-xt,Ce>D(a/vt)&&G("overflow"),Ce*=vt;V=N.length+1,we=A(oe-Ye,V,Ye==0),D(oe/V)>a-ge&&G("overflow"),ge+=D(oe/V),oe%=V,N.splice(oe++,0,ge)}return ee(N)}function C(z){var N,T,V,oe,ge,we,Re,Ne,Ue,Ye,Ce,ze=[],ft,xt,vt,Yn;for(z=ne(z),ft=z.length,N=g,T=0,ge=m,we=0;we<ft;++we)Ce=z[we],Ce<128&&ze.push(j(Ce));for(V=oe=ze.length,oe&&ze.push(v);V<ft;){for(Re=a,we=0;we<ft;++we)Ce=z[we],Ce>=N&&Ce<Re&&(Re=Ce);for(xt=V+1,Re-N>D((a-T)/xt)&&G("overflow"),T+=(Re-N)*xt,N=Re,we=0;we<ft;++we)if(Ce=z[we],Ce<N&&++T>a&&G("overflow"),Ce==N){for(Ne=T,Ue=l;Ye=Ue<=ge?u:Ue>=ge+h?h:Ue-ge,!(Ne<Ye);Ue+=l)Yn=Ne-Ye,vt=l-Ye,ze.push(j(w(Ye+Yn%vt,0))),Ne=D(Yn/vt);ze.push(j(w(Ne,0))),ge=A(T,xt,V==oe),T=0,++V}++T,++N}return ze.join("")}function k(z){return te(z,function(N){return x.test(N)?O(N.slice(4).toLowerCase()):N})}function U(z){return te(z,function(N){return b.test(N)?"xn--"+C(N):N})}if(o={version:"1.4.1",ucs2:{decode:ne,encode:ee},decode:O,encode:C,toASCII:U,toUnicode:k},r&&i)if(n.exports==r)i.exports=o;else for(H in o)o.hasOwnProperty(H)&&(r[H]=o[H]);else t.punycode=o})(oi)})(hx,hx.exports);var CW=hx.exports,Ph=TypeError;const IW={},RW=Object.freeze(Object.defineProperty({__proto__:null,default:IW},Symbol.toStringTag,{value:"Module"})),PW=Lm(RW);var ZI=typeof Map=="function"&&Map.prototype,rE=Object.getOwnPropertyDescriptor&&ZI?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,dx=ZI&&rE&&typeof rE.get=="function"?rE.get:null,S3=ZI&&Map.prototype.forEach,JI=typeof Set=="function"&&Set.prototype,iE=Object.getOwnPropertyDescriptor&&JI?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,fx=JI&&iE&&typeof iE.get=="function"?iE.get:null,E3=JI&&Set.prototype.forEach,kW=typeof WeakMap=="function"&&WeakMap.prototype,v0=kW?WeakMap.prototype.has:null,MW=typeof WeakSet=="function"&&WeakSet.prototype,w0=MW?WeakSet.prototype.has:null,OW=typeof WeakRef=="function"&&WeakRef.prototype,A3=OW?WeakRef.prototype.deref:null,NW=Boolean.prototype.valueOf,BW=Object.prototype.toString,LW=Function.prototype.toString,DW=String.prototype.match,eR=String.prototype.slice,Zc=String.prototype.replace,FW=String.prototype.toUpperCase,T3=String.prototype.toLowerCase,EF=RegExp.prototype.test,C3=Array.prototype.concat,Hl=Array.prototype.join,UW=Array.prototype.slice,I3=Math.floor,HT=typeof BigInt=="function"?BigInt.prototype.valueOf:null,sE=Object.getOwnPropertySymbols,WT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,mm=typeof Symbol=="function"&&typeof Symbol.iterator=="object",xs=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===mm||"symbol")?Symbol.toStringTag:null,AF=Object.prototype.propertyIsEnumerable,R3=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(n){return n.__proto__}:null);function P3(n,e){if(n===1/0||n===-1/0||n!==n||n&&n>-1e3&&n<1e3||EF.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof n=="number"){var r=n<0?-I3(-n):I3(n);if(r!==n){var i=String(r),s=eR.call(e,i.length+1);return Zc.call(i,t,"$&_")+"."+Zc.call(Zc.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Zc.call(e,t,"$&_")}var GT=PW,k3=GT.custom,M3=IF(k3)?k3:null,TF={__proto__:null,double:'"',single:"'"},zW={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},j_=function n(e,t,r,i){var s=t||{};if(Su(s,"quoteStyle")&&!Su(TF,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Su(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Su(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Su(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Su(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return PF(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?P3(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?P3(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=h&&h>0&&typeof e=="object")return VT(e)?"[Array]":"[Object]";var f=i9(s,r);if(typeof i>"u")i=[];else if(RF(i,e)>=0)return"[Circular]";function p(L,w,A){if(w&&(i=UW.call(i),i.push(w)),A){var O={depth:s.depth};return Su(s,"quoteStyle")&&(O.quoteStyle=s.quoteStyle),n(L,O,r+1,i)}return n(L,s,r+1,i)}if(typeof e=="function"&&!O3(e)){var m=KW(e),g=d1(e,p);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(g.length>0?" { "+Hl.call(g,", ")+" }":"")}if(IF(e)){var v=mm?Zc.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):WT.call(e);return typeof e=="object"&&!mm?Tg(v):v}if(t9(e)){for(var x="<"+T3.call(String(e.nodeName)),b=e.attributes||[],S=0;S<b.length;S++)x+=" "+b[S].name+"="+CF($W(b[S].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+T3.call(String(e.nodeName))+">",x}if(VT(e)){if(e.length===0)return"[]";var _=d1(e,p);return f&&!r9(_)?"["+qT(_,f)+"]":"[ "+Hl.call(_,", ")+" ]"}if(HW(e)){var R=d1(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!AF.call(e,"cause")?"{ ["+String(e)+"] "+Hl.call(C3.call("[cause]: "+p(e.cause),R),", ")+" }":R.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Hl.call(R,", ")+" }"}if(typeof e=="object"&&o){if(M3&&typeof e[M3]=="function"&&GT)return GT(e,{depth:h-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(QW(e)){var D=[];return S3&&S3.call(e,function(L,w){D.push(p(w,e,!0)+" => "+p(L,e))}),N3("Map",dx.call(e),D,f)}if(JW(e)){var j=[];return E3&&E3.call(e,function(L){j.push(p(L,e))}),N3("Set",fx.call(e),j,f)}if(YW(e))return oE("WeakMap");if(e9(e))return oE("WeakSet");if(ZW(e))return oE("WeakRef");if(GW(e))return Tg(p(Number(e)));if(qW(e))return Tg(p(HT.call(e)));if(VW(e))return Tg(NW.call(e));if(WW(e))return Tg(p(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof oi<"u"&&e===oi)return"{ [object globalThis] }";if(!jW(e)&&!O3(e)){var H=d1(e,p),G=R3?R3(e)===Object.prototype:e instanceof Object||e.constructor===Object,K=e instanceof Object?"":"null prototype",te=!G&&xs&&Object(e)===e&&xs in e?eR.call(kh(e),8,-1):K?"Object":"",ne=G||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",ee=ne+(te||K?"["+Hl.call(C3.call([],te||[],K||[]),": ")+"] ":"");return H.length===0?ee+"{}":f?ee+"{"+qT(H,f)+"}":ee+"{ "+Hl.call(H,", ")+" }"}return String(e)};function CF(n,e,t){var r=t.quoteStyle||e,i=TF[r];return i+n+i}function $W(n){return Zc.call(String(n),/"/g,"&quot;")}function VT(n){return kh(n)==="[object Array]"&&(!xs||!(typeof n=="object"&&xs in n))}function jW(n){return kh(n)==="[object Date]"&&(!xs||!(typeof n=="object"&&xs in n))}function O3(n){return kh(n)==="[object RegExp]"&&(!xs||!(typeof n=="object"&&xs in n))}function HW(n){return kh(n)==="[object Error]"&&(!xs||!(typeof n=="object"&&xs in n))}function WW(n){return kh(n)==="[object String]"&&(!xs||!(typeof n=="object"&&xs in n))}function GW(n){return kh(n)==="[object Number]"&&(!xs||!(typeof n=="object"&&xs in n))}function VW(n){return kh(n)==="[object Boolean]"&&(!xs||!(typeof n=="object"&&xs in n))}function IF(n){if(mm)return n&&typeof n=="object"&&n instanceof Symbol;if(typeof n=="symbol")return!0;if(!n||typeof n!="object"||!WT)return!1;try{return WT.call(n),!0}catch{}return!1}function qW(n){if(!n||typeof n!="object"||!HT)return!1;try{return HT.call(n),!0}catch{}return!1}var XW=Object.prototype.hasOwnProperty||function(n){return n in this};function Su(n,e){return XW.call(n,e)}function kh(n){return BW.call(n)}function KW(n){if(n.name)return n.name;var e=DW.call(LW.call(n),/^function\s*([\w$]+)/);return e?e[1]:null}function RF(n,e){if(n.indexOf)return n.indexOf(e);for(var t=0,r=n.length;t<r;t++)if(n[t]===e)return t;return-1}function QW(n){if(!dx||!n||typeof n!="object")return!1;try{dx.call(n);try{fx.call(n)}catch{return!0}return n instanceof Map}catch{}return!1}function YW(n){if(!v0||!n||typeof n!="object")return!1;try{v0.call(n,v0);try{w0.call(n,w0)}catch{return!0}return n instanceof WeakMap}catch{}return!1}function ZW(n){if(!A3||!n||typeof n!="object")return!1;try{return A3.call(n),!0}catch{}return!1}function JW(n){if(!fx||!n||typeof n!="object")return!1;try{fx.call(n);try{dx.call(n)}catch{return!0}return n instanceof Set}catch{}return!1}function e9(n){if(!w0||!n||typeof n!="object")return!1;try{w0.call(n,w0);try{v0.call(n,v0)}catch{return!0}return n instanceof WeakSet}catch{}return!1}function t9(n){return!n||typeof n!="object"?!1:typeof HTMLElement<"u"&&n instanceof HTMLElement?!0:typeof n.nodeName=="string"&&typeof n.getAttribute=="function"}function PF(n,e){if(n.length>e.maxStringLength){var t=n.length-e.maxStringLength,r="... "+t+" more character"+(t>1?"s":"");return PF(eR.call(n,0,e.maxStringLength),e)+r}var i=zW[e.quoteStyle||"single"];i.lastIndex=0;var s=Zc.call(Zc.call(n,i,"\\$1"),/[\x00-\x1f]/g,n9);return CF(s,"single",e)}function n9(n){var e=n.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+FW.call(e.toString(16))}function Tg(n){return"Object("+n+")"}function oE(n){return n+" { ? }"}function N3(n,e,t,r){var i=r?qT(t,r):Hl.call(t,", ");return n+" ("+e+") {"+i+"}"}function r9(n){for(var e=0;e<n.length;e++)if(RF(n[e],`
`)>=0)return!1;return!0}function i9(n,e){var t;if(n.indent==="	")t="	";else if(typeof n.indent=="number"&&n.indent>0)t=Hl.call(Array(n.indent+1)," ");else return null;return{base:t,prev:Hl.call(Array(e+1),t)}}function qT(n,e){if(n.length===0)return"";var t=`
`+e.prev+e.base;return t+Hl.call(n,","+t)+`
`+e.prev}function d1(n,e){var t=VT(n),r=[];if(t){r.length=n.length;for(var i=0;i<n.length;i++)r[i]=Su(n,i)?e(n[i],n):""}var s=typeof sE=="function"?sE(n):[],o;if(mm){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in n)Su(n,l)&&(t&&String(Number(l))===l&&l<n.length||mm&&o["$"+l]instanceof Symbol||(EF.call(/[^\w$]/,l)?r.push(e(l,n)+": "+e(n[l],n)):r.push(l+": "+e(n[l],n))));if(typeof sE=="function")for(var u=0;u<s.length;u++)AF.call(n,s[u])&&r.push("["+e(s[u])+"]: "+e(n[s[u]],n));return r}var s9=j_,o9=Ph,H_=function(n,e,t){for(var r=n,i;(i=r.next)!=null;r=i)if(i.key===e)return r.next=i.next,t||(i.next=n.next,n.next=i),i},a9=function(n,e){if(n){var t=H_(n,e);return t&&t.value}},l9=function(n,e,t){var r=H_(n,e);r?r.value=t:n.next={key:e,next:n.next,value:t}},u9=function(n,e){return n?!!H_(n,e):!1},c9=function(n,e){if(n)return H_(n,e,!0)},h9=function(){var e,t={assert:function(r){if(!t.has(r))throw new o9("Side channel does not contain "+s9(r))},delete:function(r){var i=e&&e.next,s=c9(e,r);return s&&i&&i===s&&(e=void 0),!!s},get:function(r){return a9(e,r)},has:function(r){return u9(e,r)},set:function(r,i){e||(e={next:void 0}),l9(e,r,i)}};return t},d9=Object,f9=Error,p9=EvalError,m9=RangeError,g9=ReferenceError,kF=SyntaxError,y9=URIError,v9=Math.abs,w9=Math.floor,x9=Math.max,_9=Math.min,b9=Math.pow,S9=Object.getOwnPropertyDescriptor,_w=S9;if(_w)try{_w([],"length")}catch{_w=null}var W_=_w,bw=Object.defineProperty||!1;if(bw)try{bw({},"a",{value:1})}catch{bw=!1}var G_=bw,E9=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),r=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0},aE,B3;function A9(){if(B3)return aE;B3=1;var n=typeof Symbol<"u"&&Symbol,e=E9;return aE=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},aE}var T9="Function.prototype.bind called on incompatible ",C9=Object.prototype.toString,I9=Math.max,R9="[object Function]",L3=function(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<t.length;s+=1)r[s+e.length]=t[s];return r},P9=function(e,t){for(var r=[],i=t||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},k9=function(n,e){for(var t="",r=0;r<n.length;r+=1)t+=n[r],r+1<n.length&&(t+=e);return t},M9=function(e){var t=this;if(typeof t!="function"||C9.apply(t)!==R9)throw new TypeError(T9+t);for(var r=P9(arguments,1),i,s=function(){if(this instanceof i){var h=t.apply(this,L3(r,arguments));return Object(h)===h?h:this}return t.apply(e,L3(r,arguments))},o=I9(0,t.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+k9(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,i.prototype=new u,u.prototype=null}return i},O9=M9,Wy=Function.prototype.bind||O9,tR=Function.prototype.call,nR=Function.prototype.apply,N9=typeof Reflect<"u"&&Reflect&&Reflect.apply,B9=Wy,L9=nR,D9=tR,F9=N9,MF=F9||B9.call(D9,L9),U9=Wy,z9=Ph,$9=tR,j9=MF,OF=function(e){if(e.length<1||typeof e[0]!="function")throw new z9("a function is required");return j9(U9,$9,e)},lE,D3;function H9(){if(D3)return lE;D3=1;var n=OF,e=W_,t=[].__proto__===Array.prototype,r=t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return lE=r&&typeof r.get=="function"?n([r.get]):typeof s=="function"?function(a){return s(a==null?a:i(a))}:!1,lE}var uE,F3;function W9(){if(F3)return uE;F3=1;var n=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Wy;return uE=t.call(n,e),uE}var Yt,NF=d9,G9=f9,V9=p9,q9=m9,X9=g9,gm=kF,Op=Ph,K9=y9,Q9=v9,Y9=w9,Z9=x9,J9=_9,eG=b9,BF=Function,cE=function(n){try{return BF('"use strict"; return ('+n+").constructor;")()}catch{}},ty=W_,tG=G_,hE=function(){throw new Op},nG=ty?function(){try{return arguments.callee,hE}catch{try{return ty(arguments,"callee").get}catch{return hE}}}():hE,Bf=A9()(),rG=H9(),Ai=typeof Reflect=="function"&&Reflect.getPrototypeOf||NF.getPrototypeOf||rG,LF=nR,Gy=tR,qf={},iG=typeof Uint8Array>"u"||!Ai?Yt:Ai(Uint8Array),Nd={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Yt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Yt:ArrayBuffer,"%ArrayIteratorPrototype%":Bf&&Ai?Ai([][Symbol.iterator]()):Yt,"%AsyncFromSyncIteratorPrototype%":Yt,"%AsyncFunction%":qf,"%AsyncGenerator%":qf,"%AsyncGeneratorFunction%":qf,"%AsyncIteratorPrototype%":qf,"%Atomics%":typeof Atomics>"u"?Yt:Atomics,"%BigInt%":typeof BigInt>"u"?Yt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Yt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Yt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Yt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":G9,"%eval%":eval,"%EvalError%":V9,"%Float32Array%":typeof Float32Array>"u"?Yt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Yt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Yt:FinalizationRegistry,"%Function%":BF,"%GeneratorFunction%":qf,"%Int8Array%":typeof Int8Array>"u"?Yt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Yt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Yt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bf&&Ai?Ai(Ai([][Symbol.iterator]())):Yt,"%JSON%":typeof JSON=="object"?JSON:Yt,"%Map%":typeof Map>"u"?Yt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Bf||!Ai?Yt:Ai(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":NF,"%Object.getOwnPropertyDescriptor%":ty,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Yt:Promise,"%Proxy%":typeof Proxy>"u"?Yt:Proxy,"%RangeError%":q9,"%ReferenceError%":X9,"%Reflect%":typeof Reflect>"u"?Yt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Yt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Bf||!Ai?Yt:Ai(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Yt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bf&&Ai?Ai(""[Symbol.iterator]()):Yt,"%Symbol%":Bf?Symbol:Yt,"%SyntaxError%":gm,"%ThrowTypeError%":nG,"%TypedArray%":iG,"%TypeError%":Op,"%Uint8Array%":typeof Uint8Array>"u"?Yt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Yt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Yt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Yt:Uint32Array,"%URIError%":K9,"%WeakMap%":typeof WeakMap>"u"?Yt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Yt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Yt:WeakSet,"%Function.prototype.call%":Gy,"%Function.prototype.apply%":LF,"%Object.defineProperty%":tG,"%Math.abs%":Q9,"%Math.floor%":Y9,"%Math.max%":Z9,"%Math.min%":J9,"%Math.pow%":eG};if(Ai)try{null.error}catch(n){var sG=Ai(Ai(n));Nd["%Error.prototype%"]=sG}var oG=function n(e){var t;if(e==="%AsyncFunction%")t=cE("async function () {}");else if(e==="%GeneratorFunction%")t=cE("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=cE("async function* () {}");else if(e==="%AsyncGenerator%"){var r=n("%AsyncGeneratorFunction%");r&&(t=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=n("%AsyncGenerator%");i&&Ai&&(t=Ai(i.prototype))}return Nd[e]=t,t},U3={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Vy=Wy,px=W9(),aG=Vy.call(Gy,Array.prototype.concat),lG=Vy.call(LF,Array.prototype.splice),z3=Vy.call(Gy,String.prototype.replace),mx=Vy.call(Gy,String.prototype.slice),uG=Vy.call(Gy,RegExp.prototype.exec),cG=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,hG=/\\(\\)?/g,dG=function(e){var t=mx(e,0,1),r=mx(e,-1);if(t==="%"&&r!=="%")throw new gm("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&t!=="%")throw new gm("invalid intrinsic syntax, expected opening `%`");var i=[];return z3(e,cG,function(s,o,a,l){i[i.length]=a?z3(l,hG,"$1"):o||s}),i},fG=function(e,t){var r=e,i;if(px(U3,r)&&(i=U3[r],r="%"+i[0]+"%"),px(Nd,r)){var s=Nd[r];if(s===qf&&(s=oG(r)),typeof s>"u"&&!t)throw new Op("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new gm("intrinsic "+e+" does not exist!")},V_=function(e,t){if(typeof e!="string"||e.length===0)throw new Op("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Op('"allowMissing" argument must be a boolean');if(uG(/^%?[^%]*%?$/,e)===null)throw new gm("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=dG(e),i=r.length>0?r[0]:"",s=fG("%"+i+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],lG(r,aG([0,1],u)));for(var h=1,f=!0;h<r.length;h+=1){var p=r[h],m=mx(p,0,1),g=mx(p,-1);if((m==='"'||m==="'"||m==="`"||g==='"'||g==="'"||g==="`")&&m!==g)throw new gm("property names with quotes must have matching quotes");if((p==="constructor"||!f)&&(l=!0),i+="."+p,o="%"+i+"%",px(Nd,o))a=Nd[o];else if(a!=null){if(!(p in a)){if(!t)throw new Op("base intrinsic for "+e+" exists, but the property is not available.");return}if(ty&&h+1>=r.length){var v=ty(a,p);f=!!v,f&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[p]}else f=px(a,p),a=a[p];f&&!l&&(Nd[o]=a)}}return a},DF={exports:{}},$3=G_,pG=kF,Lf=Ph,j3=W_,mG=function(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new Lf("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Lf("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Lf("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Lf("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Lf("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Lf("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!j3&&j3(e,t);if($3)$3(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[t]=r;else throw new pG("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},XT=G_,FF=function(){return!!XT};FF.hasArrayLengthDefineBug=function(){if(!XT)return null;try{return XT([],"length",{value:1}).length!==1}catch{return!0}};var gG=FF,yG=V_,H3=mG,vG=gG(),W3=W_,G3=Ph,wG=yG("%Math.floor%"),xG=function(e,t){if(typeof e!="function")throw new G3("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||wG(t)!==t)throw new G3("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&W3){var o=W3(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(vG?H3(e,"length",t,!0,!0):H3(e,"length",t)),e},_G=Wy,bG=nR,SG=MF,EG=function(){return SG(_G,bG,arguments)};(function(n){var e=xG,t=G_,r=OF,i=EG;n.exports=function(o){var a=r(arguments),l=o.length-(arguments.length-1);return e(a,1+(l>0?l:0),!0)},t?t(n.exports,"apply",{value:i}):n.exports.apply=i})(DF);var AG=DF.exports,UF=V_,zF=AG,TG=zF(UF("String.prototype.indexOf")),$F=function(e,t){var r=UF(e,!!t);return typeof r=="function"&&TG(e,".prototype.")>-1?zF(r):r},CG=V_,qy=$F,IG=j_,RG=Ph,V3=CG("%Map%",!0),PG=qy("Map.prototype.get",!0),kG=qy("Map.prototype.set",!0),MG=qy("Map.prototype.has",!0),OG=qy("Map.prototype.delete",!0),NG=qy("Map.prototype.size",!0),jF=!!V3&&function(){var e,t={assert:function(r){if(!t.has(r))throw new RG("Side channel does not contain "+IG(r))},delete:function(r){if(e){var i=OG(e,r);return NG(e)===0&&(e=void 0),i}return!1},get:function(r){if(e)return PG(e,r)},has:function(r){return e?MG(e,r):!1},set:function(r,i){e||(e=new V3),kG(e,r,i)}};return t},BG=V_,q_=$F,LG=j_,f1=jF,DG=Ph,Df=BG("%WeakMap%",!0),FG=q_("WeakMap.prototype.get",!0),UG=q_("WeakMap.prototype.set",!0),zG=q_("WeakMap.prototype.has",!0),$G=q_("WeakMap.prototype.delete",!0),jG=Df?function(){var e,t,r={assert:function(i){if(!r.has(i))throw new DG("Side channel does not contain "+LG(i))},delete:function(i){if(Df&&i&&(typeof i=="object"||typeof i=="function")){if(e)return $G(e,i)}else if(f1&&t)return t.delete(i);return!1},get:function(i){return Df&&i&&(typeof i=="object"||typeof i=="function")&&e?FG(e,i):t&&t.get(i)},has:function(i){return Df&&i&&(typeof i=="object"||typeof i=="function")&&e?zG(e,i):!!t&&t.has(i)},set:function(i,s){Df&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new Df),UG(e,i,s)):f1&&(t||(t=f1()),t.set(i,s))}};return r}:f1,HG=Ph,WG=j_,GG=h9,VG=jF,qG=jG,XG=qG||VG||GG,KG=function(){var e,t={assert:function(r){if(!t.has(r))throw new HG("Side channel does not contain "+WG(r))},delete:function(r){return!!e&&e.delete(r)},get:function(r){return e&&e.get(r)},has:function(r){return!!e&&e.has(r)},set:function(r,i){e||(e=XG()),e.set(r,i)}};return t},QG=String.prototype.replace,YG=/%20/g,dE={RFC1738:"RFC1738",RFC3986:"RFC3986"},rR={default:dE.RFC3986,formatters:{RFC1738:function(n){return QG.call(n,YG,"+")},RFC3986:function(n){return String(n)}},RFC1738:dE.RFC1738,RFC3986:dE.RFC3986},ZG=rR,fE=Object.prototype.hasOwnProperty,ud=Array.isArray,El=function(){for(var n=[],e=0;e<256;++e)n.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return n}(),JG=function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(ud(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);t.obj[t.prop]=i}}},HF=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},eV=function n(e,t,r){if(!t)return e;if(typeof t!="object"&&typeof t!="function"){if(ud(e))e.push(t);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!fE.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return ud(e)&&!ud(t)&&(i=HF(e,r)),ud(e)&&ud(t)?(t.forEach(function(s,o){if(fE.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=n(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return fE.call(s,o)?s[o]=n(s[o],a,r):s[o]=a,s},i)},tV=function(e,t){return Object.keys(t).reduce(function(r,i){return r[i]=t[i],r},e)},nV=function(n,e,t){var r=n.replace(/\+/g," ");if(t==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},pE=1024,rV=function(e,t,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(m){return"%26%23"+parseInt(m.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=pE){for(var u=o.length>=pE?o.slice(l,l+pE):o,h=[],f=0;f<u.length;++f){var p=u.charCodeAt(f);if(p===45||p===46||p===95||p===126||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||s===ZG.RFC1738&&(p===40||p===41)){h[h.length]=u.charAt(f);continue}if(p<128){h[h.length]=El[p];continue}if(p<2048){h[h.length]=El[192|p>>6]+El[128|p&63];continue}if(p<55296||p>=57344){h[h.length]=El[224|p>>12]+El[128|p>>6&63]+El[128|p&63];continue}f+=1,p=65536+((p&1023)<<10|u.charCodeAt(f)&1023),h[h.length]=El[240|p>>18]+El[128|p>>12&63]+El[128|p>>6&63]+El[128|p&63]}a+=h.join("")}return a},iV=function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&r.indexOf(h)===-1&&(t.push({obj:o,prop:u}),r.push(h))}return JG(t),e},sV=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},oV=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},aV=function(e,t){return[].concat(e,t)},lV=function(e,t){if(ud(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(t(e[i]));return r}return t(e)},WF={arrayToObject:HF,assign:tV,combine:aV,compact:iV,decode:nV,encode:rV,isBuffer:oV,isRegExp:sV,maybeMap:lV,merge:eV},GF=KG,Sw=WF,x0=rR,uV=Object.prototype.hasOwnProperty,VF={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Bl=Array.isArray,cV=Array.prototype.push,qF=function(n,e){cV.apply(n,Bl(e)?e:[e])},hV=Date.prototype.toISOString,q3=x0.default,di={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Sw.encode,encodeValuesOnly:!1,filter:void 0,format:q3,formatter:x0.formatters[q3],indices:!1,serializeDate:function(e){return hV.call(e)},skipNulls:!1,strictNullHandling:!1},dV=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},mE={},fV=function n(e,t,r,i,s,o,a,l,u,h,f,p,m,g,v,x,b,S){for(var _=e,R=S,D=0,j=!1;(R=R.get(mE))!==void 0&&!j;){var H=R.get(e);if(D+=1,typeof H<"u"){if(H===D)throw new RangeError("Cyclic object value");j=!0}typeof R.get(mE)>"u"&&(D=0)}if(typeof h=="function"?_=h(t,_):_ instanceof Date?_=m(_):r==="comma"&&Bl(_)&&(_=Sw.maybeMap(_,function(z){return z instanceof Date?m(z):z})),_===null){if(o)return u&&!x?u(t,di.encoder,b,"key",g):t;_=""}if(dV(_)||Sw.isBuffer(_)){if(u){var G=x?t:u(t,di.encoder,b,"key",g);return[v(G)+"="+v(u(_,di.encoder,b,"value",g))]}return[v(t)+"="+v(String(_))]}var K=[];if(typeof _>"u")return K;var te;if(r==="comma"&&Bl(_))x&&u&&(_=Sw.maybeMap(_,u)),te=[{value:_.length>0?_.join(",")||null:void 0}];else if(Bl(h))te=h;else{var ne=Object.keys(_);te=f?ne.sort(f):ne}var ee=l?String(t).replace(/\./g,"%2E"):String(t),L=i&&Bl(_)&&_.length===1?ee+"[]":ee;if(s&&Bl(_)&&_.length===0)return L+"[]";for(var w=0;w<te.length;++w){var A=te[w],O=typeof A=="object"&&A&&typeof A.value<"u"?A.value:_[A];if(!(a&&O===null)){var C=p&&l?String(A).replace(/\./g,"%2E"):String(A),k=Bl(_)?typeof r=="function"?r(L,C):L:L+(p?"."+C:"["+C+"]");S.set(e,D);var U=GF();U.set(mE,S),qF(K,n(O,k,r,i,s,o,a,l,r==="comma"&&x&&Bl(_)?null:u,h,f,p,m,g,v,x,b,U))}}return K},pV=function(e){if(!e)return di;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||di.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=x0.default;if(typeof e.format<"u"){if(!uV.call(x0.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=x0.formatters[r],s=di.filter;(typeof e.filter=="function"||Bl(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in VF?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=di.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:di.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:di.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:di.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:di.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?di.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:di.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:di.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:di.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:di.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:di.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:di.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:di.strictNullHandling}},mV=function(n,e){var t=n,r=pV(e),i,s;typeof r.filter=="function"?(s=r.filter,t=s("",t)):Bl(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a=VF[r.arrayFormat],l=a==="comma"&&r.commaRoundTrip;i||(i=Object.keys(t)),r.sort&&i.sort(r.sort);for(var u=GF(),h=0;h<i.length;++h){var f=i[h],p=t[f];r.skipNulls&&p===null||qF(o,fV(p,f,a,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var m=o.join(r.delimiter),g=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),m.length>0?g+m:""},ym=WF,KT=Object.prototype.hasOwnProperty,gV=Array.isArray,Ur={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ym.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},yV=function(n){return n.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},XF=function(n,e){return n&&typeof n=="string"&&e.comma&&n.indexOf(",")>-1?n.split(","):n},vV="utf8=%26%2310003%3B",wV="utf8=%E2%9C%93",xV=function(e,t){var r={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===wV?u="utf-8":o[l]===vV&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],f=h.indexOf("]="),p=f===-1?h.indexOf("="):f+1,m,g;p===-1?(m=t.decoder(h,Ur.decoder,u,"key"),g=t.strictNullHandling?null:""):(m=t.decoder(h.slice(0,p),Ur.decoder,u,"key"),g=ym.maybeMap(XF(h.slice(p+1),t),function(x){return t.decoder(x,Ur.decoder,u,"value")})),g&&t.interpretNumericEntities&&u==="iso-8859-1"&&(g=yV(String(g))),h.indexOf("[]=")>-1&&(g=gV(g)?[g]:g);var v=KT.call(r,m);v&&t.duplicates==="combine"?r[m]=ym.combine(r[m],g):(!v||t.duplicates==="last")&&(r[m]=g)}return r},_V=function(n,e,t,r){for(var i=r?e:XF(e,t),s=n.length-1;s>=0;--s){var o,a=n[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&(i===""||t.strictNullHandling&&i===null)?[]:[].concat(i);else{o=t.plainObjects?{__proto__:null}:{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=t.decodeDotInKeys?l.replace(/%2E/g,"."):l,h=parseInt(u,10);!t.parseArrays&&u===""?o={0:i}:!isNaN(h)&&a!==u&&String(h)===u&&h>=0&&t.parseArrays&&h<=t.arrayLimit?(o=[],o[h]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},bV=function(e,t,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!r.plainObjects&&KT.call(Object.prototype,u)&&!r.allowPrototypes)return;h.push(u)}for(var f=0;r.depth>0&&(l=a.exec(s))!==null&&f<r.depth;){if(f+=1,!r.plainObjects&&KT.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(l[1])}if(l){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");h.push("["+s.slice(l.index)+"]")}return _V(h,t,r,i)}},SV=function(e){if(!e)return Ur;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Ur.charset:e.charset,r=typeof e.duplicates>"u"?Ur.duplicates:e.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ur.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ur.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ur.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ur.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ur.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ur.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ur.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ur.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ur.decoder,delimiter:typeof e.delimiter=="string"||ym.isRegExp(e.delimiter)?e.delimiter:Ur.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ur.depth,duplicates:r,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ur.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ur.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ur.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ur.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ur.strictNullHandling}},EV=function(n,e){var t=SV(e);if(n===""||n===null||typeof n>"u")return t.plainObjects?{__proto__:null}:{};for(var r=typeof n=="string"?xV(n,t):n,i=t.plainObjects?{__proto__:null}:{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=bV(a,r[a],t,typeof n=="string");i=ym.merge(i,l,t)}return t.allowSparse===!0?i:ym.compact(i)},AV=mV,TV=EV,CV=rR,IV={formats:CV,parse:TV,stringify:AV},RV=CW;function Fu(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var PV=/^([a-z0-9.+-]+:)/i,kV=/:[0-9]*$/,MV=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,OV=["<",">",'"',"`"," ","\r",`
`,"	"],NV=["{","}","|","\\","^","`"].concat(OV),QT=["'"].concat(NV),X3=["%","/","?",";","#"].concat(QT),K3=["/","?","#"],BV=255,Q3=/^[+a-z0-9A-Z_-]{0,63}$/,LV=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,DV={javascript:!0,"javascript:":!0},YT={javascript:!0,"javascript:":!0},Np={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ZT=IV;function FV(n,e,t){if(n&&typeof n=="object"&&n instanceof Fu)return n;var r=new Fu;return r.parse(n,e,t),r}Fu.prototype.parse=function(n,e,t){if(typeof n!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof n);var r=n.indexOf("?"),i=r!==-1&&r<n.indexOf("#")?"?":"#",s=n.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),n=s.join(i);var a=n;if(a=a.trim(),!t&&n.split("#").length===1){var l=MV.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=ZT.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=PV.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var f=a.substr(0,2)==="//";f&&!(u&&YT[u])&&(a=a.substr(2),this.slashes=!0)}if(!YT[u]&&(f||u&&!Np[u])){for(var p=-1,m=0;m<K3.length;m++){var g=a.indexOf(K3[m]);g!==-1&&(p===-1||g<p)&&(p=g)}var v,x;p===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",p),x!==-1&&(v=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(v)),p=-1;for(var m=0;m<X3.length;m++){var g=a.indexOf(X3[m]);g!==-1&&(p===-1||g<p)&&(p=g)}p===-1&&(p=a.length),this.host=a.slice(0,p),a=a.slice(p),this.parseHost(),this.hostname=this.hostname||"";var b=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!b)for(var S=this.hostname.split(/\./),m=0,_=S.length;m<_;m++){var R=S[m];if(R&&!R.match(Q3)){for(var D="",j=0,H=R.length;j<H;j++)R.charCodeAt(j)>127?D+="x":D+=R[j];if(!D.match(Q3)){var G=S.slice(0,m),K=S.slice(m+1),te=R.match(LV);te&&(G.push(te[1]),K.unshift(te[2])),K.length&&(a="/"+K.join(".")+a),this.hostname=G.join(".");break}}}this.hostname.length>BV?this.hostname="":this.hostname=this.hostname.toLowerCase(),b||(this.hostname=RV.toASCII(this.hostname));var ne=this.port?":"+this.port:"",ee=this.hostname||"";this.host=ee+ne,this.href+=this.host,b&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!DV[h])for(var m=0,_=QT.length;m<_;m++){var L=QT[m];if(a.indexOf(L)!==-1){var w=encodeURIComponent(L);w===L&&(w=escape(L)),a=a.split(L).join(w)}}var A=a.indexOf("#");A!==-1&&(this.hash=a.substr(A),a=a.slice(0,A));var O=a.indexOf("?");if(O!==-1?(this.search=a.substr(O),this.query=a.substr(O+1),e&&(this.query=ZT.parse(this.query)),a=a.slice(0,O)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Np[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ne=this.pathname||"",C=this.search||"";this.path=ne+C}return this.href=this.format(),this};Fu.prototype.format=function(){var n=this.auth||"";n&&(n=encodeURIComponent(n),n=n.replace(/%3A/i,":"),n+="@");var e=this.protocol||"",t=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=n+this.host:this.hostname&&(i=n+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=ZT.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Np[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+r};Fu.prototype.resolve=function(n){return this.resolveObject(FV(n,!1,!0)).format()};Fu.prototype.resolveObject=function(n){if(typeof n=="string"){var e=new Fu;e.parse(n,!1,!0),n=e}for(var t=new Fu,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];t[s]=this[s]}if(t.hash=n.hash,n.href==="")return t.href=t.format(),t;if(n.slashes&&!n.protocol){for(var o=Object.keys(n),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=n[l])}return Np[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(n.protocol&&n.protocol!==t.protocol){if(!Np[n.protocol]){for(var u=Object.keys(n),h=0;h<u.length;h++){var f=u[h];t[f]=n[f]}return t.href=t.format(),t}if(t.protocol=n.protocol,!n.host&&!YT[n.protocol]){for(var _=(n.pathname||"").split("/");_.length&&!(n.host=_.shift()););n.host||(n.host=""),n.hostname||(n.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),t.pathname=_.join("/")}else t.pathname=n.pathname;if(t.search=n.search,t.query=n.query,t.host=n.host||"",t.auth=n.auth,t.hostname=n.hostname||n.host,t.port=n.port,t.pathname||t.search){var p=t.pathname||"",m=t.search||"";t.path=p+m}return t.slashes=t.slashes||n.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",v=n.host||n.pathname&&n.pathname.charAt(0)==="/",x=v||g||t.host&&n.pathname,b=x,S=t.pathname&&t.pathname.split("/")||[],_=n.pathname&&n.pathname.split("/")||[],R=t.protocol&&!Np[t.protocol];if(R&&(t.hostname="",t.port=null,t.host&&(S[0]===""?S[0]=t.host:S.unshift(t.host)),t.host="",n.protocol&&(n.hostname=null,n.port=null,n.host&&(_[0]===""?_[0]=n.host:_.unshift(n.host)),n.host=null),x=x&&(_[0]===""||S[0]==="")),v)t.host=n.host||n.host===""?n.host:t.host,t.hostname=n.hostname||n.hostname===""?n.hostname:t.hostname,t.search=n.search,t.query=n.query,S=_;else if(_.length)S||(S=[]),S.pop(),S=S.concat(_),t.search=n.search,t.query=n.query;else if(n.search!=null){if(R){t.host=S.shift(),t.hostname=t.host;var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.hostname=D.shift(),t.host=t.hostname)}return t.search=n.search,t.query=n.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!S.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var j=S.slice(-1)[0],H=(t.host||n.host||S.length>1)&&(j==="."||j==="..")||j==="",G=0,K=S.length;K>=0;K--)j=S[K],j==="."?S.splice(K,1):j===".."?(S.splice(K,1),G++):G&&(S.splice(K,1),G--);if(!x&&!b)for(;G--;G)S.unshift("..");x&&S[0]!==""&&(!S[0]||S[0].charAt(0)!=="/")&&S.unshift(""),H&&S.join("/").substr(-1)!=="/"&&S.push("");var te=S[0]===""||S[0]&&S[0].charAt(0)==="/";if(R){t.hostname=te?"":S.length?S.shift():"",t.host=t.hostname;var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.hostname=D.shift(),t.host=t.hostname)}return x=x||t.host&&S.length,x&&!te&&S.unshift(""),S.length>0?t.pathname=S.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=n.auth||t.auth,t.slashes=t.slashes||n.slashes,t.href=t.format(),t};Fu.prototype.parseHost=function(){var n=this.host,e=kV.exec(n);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),n=n.substr(0,n.length-e.length)),n&&(this.hostname=n)};const Y3={};function Gt(n,e,t=3){if(Y3[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${n}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${n}`),console.warn(r))),Y3[e]=!0}function Ra(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Cg(n){return n.split("?")[0].split("#")[0]}function UV(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function zV(n,e,t){return n.replace(new RegExp(UV(e),"g"),t)}function $V(n,e){let t="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=n.length;++a){if(a<n.length)o=n.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",r=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+=`/${n.slice(i+1,a)}`:t=n.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const Wr={toPosix(n){return zV(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){Ra(n),n=this.toPosix(n);const e=/^file:\/\/\//.exec(n);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(n);return t?t[0]:""},toAbsolute(n,e,t){if(Ra(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const r=Cg(this.toPosix(e??Xe.ADAPTER.getBaseUrl())),i=Cg(this.toPosix(t??this.rootname(r)));return n=this.toPosix(n),n.startsWith("/")?Wr.join(i,n.slice(1)):this.isAbsolute(n)?n:this.join(r,n)},normalize(n){if(Ra(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const r=n.endsWith("/");return n=$V(n,!1),n.length>0&&r&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return Ra(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let e;for(let t=0;t<n.length;++t){const r=n[t];if(Ra(r),r.length>0)if(e===void 0)e=r;else{const i=n[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(n){if(Ra(n),n.length===0)return".";n=this.toPosix(n);let e=n.charCodeAt(0);const t=e===47;let r=-1,i=!0;const s=this.getProtocol(n),o=n;n=n.slice(s.length);for(let a=n.length-1;a>=1;--a)if(e=n.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?t?"/":this.isUrl(o)?s+n:s:t&&r===1?"//":s+n.slice(0,r)},rootname(n){Ra(n),n=this.toPosix(n);let e="";if(n.startsWith("/")?e="/":e=this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);t!==-1?e=n.slice(0,t):e=n,e.endsWith("/")||(e+="/")}return e},basename(n,e){Ra(n),e&&Ra(e),n=Cg(this.toPosix(n));let t=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=0;--s){const l=n.charCodeAt(s);if(l===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return t===r?r=a:r===-1&&(r=n.length),n.slice(t,r)}for(s=n.length-1;s>=0;--s)if(n.charCodeAt(s)===47){if(!i){t=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":n.slice(t,r)},extname(n){Ra(n),n=Cg(this.toPosix(n));let e=-1,t=0,r=-1,i=!0,s=0;for(let o=n.length-1;o>=0;--o){const a=n.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===t+1?"":n.slice(e,r)},parse(n){Ra(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return e;n=Cg(this.toPosix(n));let t=n.charCodeAt(0);const r=this.isAbsolute(n);let i;e.root=this.rootname(n),r||this.hasProtocol(n)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,u=n.length-1,h=0;for(;u>=i;--u){if(t=n.charCodeAt(u),t===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),t===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=n.slice(1,a):e.base=e.name=n.slice(o,a)):(o===0&&r?(e.name=n.slice(1,s),e.base=n.slice(1,a)):(e.name=n.slice(o,s),e.base=n.slice(o,a)),e.ext=n.slice(s,a)),e.dir=this.dirname(n),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let gE;async function jV(){return gE??(gE=(async()=>{var s;const n=document.createElement("canvas").getContext("webgl");if(!n)return to.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return to.UNPACK;const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t);const r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,i),n.deleteFramebuffer(r),n.deleteTexture(t),(s=n.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?to.PMA:to.UNPACK})()),gE}let yE;function HV(){return typeof yE>"u"&&(yE=function(){var e;const n={stencil:!0,failIfMajorPerformanceCaveat:Xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Xe.ADAPTER.getWebGLRenderingContext())return!1;const t=Xe.ADAPTER.createCanvas();let r=t.getContext("webgl",n)||t.getContext("experimental-webgl",n);const i=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),yE}var WV={grad:.9,turn:360,rad:360/(2*Math.PI)},vu=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ii=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},pa=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},KF=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},Z3=function(n){return{r:pa(n.r,0,255),g:pa(n.g,0,255),b:pa(n.b,0,255),a:pa(n.a)}},vE=function(n){return{r:Ii(n.r),g:Ii(n.g),b:Ii(n.b),a:Ii(n.a,3)}},GV=/^#([0-9a-f]{3,8})$/i,p1=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},QF=function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=Math.max(e,t,r),o=s-Math.min(e,t,r),a=o?s===e?(t-r)/o:s===t?2+(r-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},YF=function(n){var e=n.h,t=n.s,r=n.v,i=n.a;e=e/360*6,t/=100,r/=100;var s=Math.floor(e),o=r*(1-t),a=r*(1-(e-s)*t),l=r*(1-(1-e+s)*t),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},J3=function(n){return{h:KF(n.h),s:pa(n.s,0,100),l:pa(n.l,0,100),a:pa(n.a)}},eO=function(n){return{h:Ii(n.h),s:Ii(n.s),l:Ii(n.l),a:Ii(n.a,3)}},tO=function(n){return YF((t=(e=n).s,{h:e.h,s:(t*=((r=e.l)<50?r:100-r)/100)>0?2*t/(r+t)*100:0,v:r+t,a:e.a}));var e,t,r},_0=function(n){return{h:(e=QF(n)).h,s:(i=(200-(t=e.s))*(r=e.v)/100)>0&&i<200?t*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,r,i},VV=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qV=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XV=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KV=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JT={string:[[function(n){var e=GV.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Ii(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Ii(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=XV.exec(n)||KV.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:Z3({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=VV.exec(n)||qV.exec(n);if(!e)return null;var t,r,i=J3({h:(t=e[1],r=e[2],r===void 0&&(r="deg"),Number(t)*(WV[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return tO(i)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,r=n.b,i=n.a,s=i===void 0?1:i;return vu(e)&&vu(t)&&vu(r)?Z3({r:Number(e),g:Number(t),b:Number(r),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,r=n.l,i=n.a,s=i===void 0?1:i;if(!vu(e)||!vu(t)||!vu(r))return null;var o=J3({h:Number(e),s:Number(t),l:Number(r),a:Number(s)});return tO(o)},"hsl"],[function(n){var e=n.h,t=n.s,r=n.v,i=n.a,s=i===void 0?1:i;if(!vu(e)||!vu(t)||!vu(r))return null;var o=function(a){return{h:KF(a.h),s:pa(a.s,0,100),v:pa(a.v,0,100),a:pa(a.a)}}({h:Number(e),s:Number(t),v:Number(r),a:Number(s)});return YF(o)},"hsv"]]},nO=function(n,e){for(var t=0;t<e.length;t++){var r=e[t][0](n);if(r)return[r,e[t][1]]}return[null,void 0]},QV=function(n){return typeof n=="string"?nO(n.trim(),JT.string):typeof n=="object"&&n!==null?nO(n,JT.object):[null,void 0]},wE=function(n,e){var t=_0(n);return{h:t.h,s:pa(t.s+100*e,0,100),l:t.l,a:t.a}},xE=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},rO=function(n,e){var t=_0(n);return{h:t.h,s:t.s,l:pa(t.l+100*e,0,100),a:t.a}},e2=function(){function n(e){this.parsed=QV(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Ii(xE(this.rgba),2)},n.prototype.isDark=function(){return xE(this.rgba)<.5},n.prototype.isLight=function(){return xE(this.rgba)>=.5},n.prototype.toHex=function(){return e=vE(this.rgba),t=e.r,r=e.g,i=e.b,o=(s=e.a)<1?p1(Ii(255*s)):"","#"+p1(t)+p1(r)+p1(i)+o;var e,t,r,i,s,o},n.prototype.toRgb=function(){return vE(this.rgba)},n.prototype.toRgbString=function(){return e=vE(this.rgba),t=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+r+", "+i+", "+s+")":"rgb("+t+", "+r+", "+i+")";var e,t,r,i,s},n.prototype.toHsl=function(){return eO(_0(this.rgba))},n.prototype.toHslString=function(){return e=eO(_0(this.rgba)),t=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+r+"%, "+i+"%, "+s+")":"hsl("+t+", "+r+"%, "+i+"%)";var e,t,r,i,s},n.prototype.toHsv=function(){return e=QF(this.rgba),{h:Ii(e.h),s:Ii(e.s),v:Ii(e.v),a:Ii(e.a,3)};var e},n.prototype.invert=function(){return Rl({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),Rl(wE(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),Rl(wE(this.rgba,-e))},n.prototype.grayscale=function(){return Rl(wE(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),Rl(rO(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),Rl(rO(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?Rl({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ii(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=_0(this.rgba);return typeof e=="number"?Rl({h:e,s:t.s,l:t.l,a:t.a}):Ii(t.h)},n.prototype.isEqual=function(e){return this.toHex()===Rl(e).toHex()},n}(),Rl=function(n){return n instanceof e2?n:new e2(n)},iO=[],YV=function(n){n.forEach(function(e){iO.indexOf(e)<0&&(e(e2,JT),iO.push(e))})};function ZV(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in t)r[t[i]]=i;var s={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),f=1/0,p="black";if(!s.length)for(var m in t)s[m]=new n(t[m]).toRgb();for(var g in t){var v=(a=h,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<f&&(f=v,p=g)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new n(l).toRgb():null},"name"])}YV([ZV]);const Xf=class Ew{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ew)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,r,i]=this._components;return{r:e,g:t,b:r,a:i}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,r,i]=this._components;return e[0]=t,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,r,i,s]=Ew.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,i,s]=this._components;return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let t,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,r=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,r,i,s=255]=e,t/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Ew.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=Rl(e);o.isValid()&&({r:t,g:r,b:i,a:s}=o.rgba,t/=255,r/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(e*255<<16)+(t*255<<8)+(r*255|0)}_clamp(e,t=0,r=1){return typeof e=="number"?Math.min(Math.max(e,t),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),r)}),e)}};Xf.shared=new Xf,Xf.temp=new Xf,Xf.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Kn=Xf;function JV(n){return Gt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Kn.shared.setValue(n).toHex()}function eq(n){return Gt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Kn.shared.setValue(n).toNumber()}function tq(){const n=[],e=[];for(let r=0;r<32;r++)n[r]=r,e[r]=r;n[At.NORMAL_NPM]=At.NORMAL,n[At.ADD_NPM]=At.ADD,n[At.SCREEN_NPM]=At.SCREEN,e[At.NORMAL]=At.NORMAL_NPM,e[At.ADD]=At.ADD_NPM,e[At.SCREEN]=At.SCREEN_NPM;const t=[];return t.push(e),t.push(n),t}const ZF=tq();function JF(n,e){return ZF[e?1:0][n]}function nq(n,e=null){const t=n*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let r=0,i=0;r<t;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function e8(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function gx(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function sO(n){return!(n&n-1)&&!!n}function oO(n){let e=(n>65535?1:0)<<4;n>>>=e;let t=(n>255?1:0)<<3;return n>>>=t,e|=t,t=(n>15?1:0)<<2,n>>>=t,e|=t,t=(n>3?1:0)<<1,n>>>=t,e|=t,e|n>>1}function Bp(n,e,t){const r=n.length;let i;if(e>=r||t===0)return;t=e+t>r?r-e:t;const s=r-t;for(i=e;i<s;++i)n[i]=n[i+t];n.length=s}function Jc(n){return n===0?0:n<0?-1:1}let rq=0;function Kd(){return++rq}const t2=class{constructor(n,e,t,r){this.left=n,this.top=e,this.right=t,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};t2.EMPTY=new t2(0,0,0,0);let aO=t2;const lO={},Pl=Object.create(null),vc=Object.create(null);class iq{constructor(e,t,r){this._canvas=Xe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||Xe.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function uO(n,e,t){for(let r=0,i=4*t*e;r<e;++r,i+=4)if(n[i+3]!==0)return!1;return!0}function cO(n,e,t,r,i){const s=4*e;for(let o=r,a=r*s+4*t;o<=i;++o,a+=s)if(n[a+3]!==0)return!1;return!0}function sq(n){const{width:e,height:t}=n,r=n.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const i=r.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,l=t-1;for(;o<t&&uO(i,e,o);)++o;if(o===t)return aO.EMPTY;for(;uO(i,e,l);)--l;for(;cO(i,e,s,o,l);)++s;for(;cO(i,e,a,o,l);)--a;return++a,++l,new aO(s,o,a,l)}function oq(n){const e=sq(n),{width:t,height:r}=e;let i=null;if(!e.isEmpty()){const s=n.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,r)}return{width:t,height:r,data:i}}function aq(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(n,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function qu(n,e=1){var r;const t=(r=Xe.RETINA_PREFIX)==null?void 0:r.exec(n);return t?parseFloat(t[1]):e}var Le=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(Le||{});const n2=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},hO=(n,e)=>n2(n).priority??e,it={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(n2).forEach(e=>{e.type.forEach(t=>{var r,i;return(i=(r=this._removeHandlers)[t])==null?void 0:i.call(r,e)})}),this},add(...n){return n.map(n2).forEach(e=>{e.type.forEach(t=>{var s,o;const r=this._addHandlers,i=this._queue;r[t]?(s=r[t])==null||s.call(r,e):(i[t]=i[t]||[],(o=i[t])==null||o.push(e))})}),this},handle(n,e,t){var o;const r=this._addHandlers,i=this._removeHandlers;if(r[n]||i[n])throw new Error(`Extension type ${n} already has a handler`);r[n]=e,i[n]=t;const s=this._queue;return s[n]&&((o=s[n])==null||o.forEach(a=>e(a)),delete s[n]),this},handleByMap(n,e){return this.handle(n,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>hO(s,t)-hO(i,t)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class r2{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const lq=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function uq(n){let e="";for(let t=0;t<n;++t)t>0&&(e+=`
else `),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}function cq(n,e){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=lq.replace(/%forloop%/gi,uq(n));if(e.shaderSource(t,r),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))n=n/2|0;else break}return n}const _E=0,bE=1,SE=2,EE=3,AE=4,TE=5;class ru{constructor(){this.data=0,this.blendMode=At.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<_E)}set blend(e){!!(this.data&1<<_E)!==e&&(this.data^=1<<_E)}get offsets(){return!!(this.data&1<<bE)}set offsets(e){!!(this.data&1<<bE)!==e&&(this.data^=1<<bE)}get culling(){return!!(this.data&1<<SE)}set culling(e){!!(this.data&1<<SE)!==e&&(this.data^=1<<SE)}get depthTest(){return!!(this.data&1<<EE)}set depthTest(e){!!(this.data&1<<EE)!==e&&(this.data^=1<<EE)}get depthMask(){return!!(this.data&1<<TE)}set depthMask(e){!!(this.data&1<<TE)!==e&&(this.data^=1<<TE)}get clockwiseFrontFace(){return!!(this.data&1<<AE)}set clockwiseFrontFace(e){!!(this.data&1<<AE)!==e&&(this.data^=1<<AE)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==At.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new ru;return e.depthTest=!1,e.blend=!0,e}}ru.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const i2=[];function t8(n,e){if(!n)return null;let t="";if(typeof n=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);r&&(t=r[1].toLowerCase())}for(let r=i2.length-1;r>=0;--r){const i=i2[r];if(i.test&&i.test(n,t))return new i(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Qa{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let f=0,p=h.length;f<p;f++)h[f][u](e,t,r,i,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Qa.prototype,{dispatch:{value:Qa.prototype.emit},run:{value:Qa.prototype.emit}});class ny{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Qa("setRealSize"),this.onUpdate=new Qa("update"),this.onError=new Qa("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class X_ extends ny{constructor(e,t){const{width:r,height:i}=t||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===to.UNPACK);const s=t.realWidth,o=t.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(t.target,0,r.internalFormat,s,o,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const hq={scaleMode:da.NEAREST,alphaMode:to.NPM},s2=class Kf extends il{constructor(e=null,t=null){super(),t=Object.assign({},Kf.defaultOptions,t);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:h,type:f,target:p,resolution:m,resourceOptions:g}=t;e&&!(e instanceof ny)&&(e=t8(e,g),e.internal=!0),this.resolution=m||Xe.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=h,this.type=f,this.target=p,this.alphaMode=r,this.uid=Kd(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=sO(this.realWidth)&&sO(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete vc[this.cacheId],delete Pl[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Kf.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,r=Xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Kd()}`}s=e._pixiId}let o=vc[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Kf(e,t),o.cacheId=s,Kf.addToCache(o,s)),o}static fromBuffer(e,t,r,i){e=e||new Float32Array(t*r*4);const s=new X_(e,{width:t,height:r,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=Me.RGBA,a=dt.FLOAT):e instanceof Int32Array?(o=Me.RGBA_INTEGER,a=dt.INT):e instanceof Uint32Array?(o=Me.RGBA_INTEGER,a=dt.UNSIGNED_INT):e instanceof Int16Array?(o=Me.RGBA_INTEGER,a=dt.SHORT):e instanceof Uint16Array?(o=Me.RGBA_INTEGER,a=dt.UNSIGNED_SHORT):e instanceof Int8Array?(o=Me.RGBA,a=dt.BYTE):(o=Me.RGBA,a=dt.UNSIGNED_BYTE),s.internal=!0,new Kf(s,Object.assign({},hq,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),vc[t]&&vc[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),vc[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=vc[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete vc[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete vc[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};s2.defaultOptions={mipmap:Zl.POW2,anisotropicLevel:0,scaleMode:da.LINEAR,wrapMode:Du.CLAMP,alphaMode:to.UNPACK,target:Mp.TEXTURE_2D,format:Me.RGBA,type:dt.UNSIGNED_BYTE},s2._globalBatch=0;let Mt=s2;class o2{constructor(){this.texArray=null,this.blend=0,this.type=Va.TRIANGLES,this.start=0,this.size=0,this.data=null}}let dq=0,yi=class n8{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=dq++,this.disposeRunner=new Qa("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Ql.ELEMENT_ARRAY_BUFFER:Ql.ARRAY_BUFFER}get index(){return this.type===Ql.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new n8(e)}};class yx{constructor(e,t=0,r=!1,i=dt.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,r,i,s){return new yx(e,t,r,i,s)}}const fq={Float32Array,Uint32Array,Int32Array,Uint8Array};function pq(n,e){let t=0,r=0;const i={};for(let l=0;l<n.length;l++)r+=e[l],t+=n[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<n.length;l++){const u=e[l],h=n[l],f=e8(h);i[f]||(i[f]=new fq[f](s)),o=i[f];for(let p=0;p<h.length;p++){const m=(p/u|0)*r+a,g=p%u;o[m+g]=h[p]}a+=u}return new Float32Array(s)}const dO={5126:4,5123:2,5121:1};let mq=0;const gq={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class bh{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=mq++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Qa("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,i=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof yi||(t instanceof Array&&(t=new Float32Array(t)),t=new yi(t));const u=e.split("|");if(u.length>1){for(let f=0;f<u.length;f++)this.addAttribute(u[f],t,r,i,s);return this}let h=this.buffers.indexOf(t);return h===-1&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new yx(h,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof yi||(e instanceof Array&&(e=new Uint16Array(e)),e=new yi(e)),e.type=Ql.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],r=new yi;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*dO[s.type]/4),s.buffer=0}for(r.data=pq(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new bh;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new yi(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new yx(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ql.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new bh,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new gq[e8(o.buffers[a].data)](i[a]),t.buffers[a]=new yi(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Ql.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let f=0;f<o.buffers.length;f++)if(o.buffers[f]!==o.indexBuffer){h=f;break}for(const f in o.attributes){const p=o.attributes[f];(p.buffer|0)===h&&(l+=p.size*dO[p.type]/4)}for(let f=0;f<e.length;f++){const p=e[f].indexBuffer.data;for(let m=0;m<p.length;m++)t.indexBuffer.data[m+u]+=a;a+=e[f].buffers[h].data.length/l,u+=p.length}}return t}}class r8 extends bh{constructor(e=!1){super(),this._buffer=new yi(null,e,!1),this._indexBuffer=new yi(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,dt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,dt.FLOAT).addAttribute("aColor",this._buffer,4,!0,dt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,dt.FLOAT).addIndex(this._indexBuffer)}}const vx=Math.PI*2,yq=180/Math.PI,vq=Math.PI/180;var Xi=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Xi||{});class St{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new St(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}St.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const m1=[new St,new St,new St,new St];class It{constructor(e=0,t=0,r=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(i),this.type=Xi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new It(0,0,0,0)}clone(){return new It(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const G=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=G)return!1;const K=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>K}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=m1[0].set(e.left,e.top),l=m1[1].set(e.left,e.bottom),u=m1[2].set(e.right,e.top),h=m1[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const f=Math.sign(t.a*t.d-t.b*t.c);if(f===0||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=r||Math.min(a.x,l.x,u.x,h.x)>=i||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const p=f*(l.y-a.y),m=f*(a.x-l.x),g=p*r+m*s,v=p*i+m*s,x=p*r+m*o,b=p*i+m*o;if(Math.max(g,v,x,b)<=p*a.x+m*a.y||Math.min(g,v,x,b)>=p*h.x+m*h.y)return!1;const S=f*(a.y-u.y),_=f*(u.x-a.x),R=S*r+_*s,D=S*i+_*s,j=S*r+_*o,H=S*i+_*o;return!(Math.max(R,D,j,H)<=S*a.x+_*a.y||Math.min(R,D,j,H)>=S*h.x+_*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=i,this.height=s-i,this}}It.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class K_{constructor(e=0,t=0,r=0){this.x=e,this.y=t,this.radius=r,this.type=Xi.CIRC}clone(){return new K_(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=r}getBounds(){return new It(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}K_.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Q_{constructor(e=0,t=0,r=0,i=0){this.x=e,this.y=t,this.width=r,this.height=i,this.type=Xi.ELIP}clone(){return new Q_(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(t-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new It(this.x-this.width,this.y-this.height,this.width,this.height)}}Q_.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Bd{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const r=[];for(let i=0,s=t.length;i<s;i++)r.push(t[i].x,t[i].y);t=r}this.points=t,this.type=Xi.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new Bd(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>t!=h>t&&e<(u-a)*((t-l)/(h-l))+a&&(r=!r)}return r}}Bd.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,e)=>`${n}, ${e}`,"")}]`};class Y_{constructor(e=0,t=0,r=0,i=0,s=20){this.x=e,this.y=t,this.width=r,this.height=i,this.radius=s,this.type=Xi.RREC}clone(){return new Y_(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+r&&t<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=t-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=t-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}}Y_.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class lr{constructor(e=1,t=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,i,s,o){return this.a=e,this.b=t,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new St;const r=e.x,i=e.y;return t.x=this.a*r+this.c*i+this.tx,t.y=this.b*r+this.d*i+this.ty,t}applyInverse(e,t){t=t||new St;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*r,this.b=i*r+this.b*t,this.c=s*t-this.d*r,this.d=s*r+this.d*t,this.tx=o*t-this.ty*r,this.ty=o*r+this.ty*t,this}append(e){const t=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,t,r,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=t-(r*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,t),u=Math.abs(a+l);return u<1e-5||Math.abs(vx-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,t=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-t*r;return this.a=i/o,this.b=-t/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new lr;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new lr}static get TEMP_MATRIX(){return new lr}}lr.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Zh=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Jh=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ed=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],td=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],a2=[],i8=[],g1=Math.sign;function wq(){for(let n=0;n<16;n++){const e=[];a2.push(e);for(let t=0;t<16;t++){const r=g1(Zh[n]*Zh[t]+ed[n]*Jh[t]),i=g1(Jh[n]*Zh[t]+td[n]*Jh[t]),s=g1(Zh[n]*ed[t]+ed[n]*td[t]),o=g1(Jh[n]*ed[t]+td[n]*td[t]);for(let a=0;a<16;a++)if(Zh[a]===r&&Jh[a]===i&&ed[a]===s&&td[a]===o){e.push(a);break}}}for(let n=0;n<16;n++){const e=new lr;e.set(Zh[n],Jh[n],ed[n],td[n],0,0),i8.push(e)}}wq();const Ir={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>Zh[n],uY:n=>Jh[n],vX:n=>ed[n],vY:n=>td[n],inv:n=>n&8?n&15:-n&7,add:(n,e)=>a2[n][e],sub:(n,e)=>a2[n][Ir.inv(e)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,e)=>Math.abs(n)*2<=Math.abs(e)?e>=0?Ir.S:Ir.N:Math.abs(e)*2<=Math.abs(n)?n>0?Ir.E:Ir.W:e>0?n>0?Ir.SE:Ir.SW:n>0?Ir.NE:Ir.NW,matrixAppendRotationInv:(n,e,t=0,r=0)=>{const i=i8[Ir.inv(e)];i.tx=t,i.ty=r,n.append(i)}};class ql{constructor(e,t,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new ql(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}ql.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const l2=class{constructor(){this.worldTransform=new lr,this.localTransform=new lr,this.position=new ql(this.onChange,this,0,0),this.scale=new ql(this.onChange,this,1,1),this.pivot=new ql(this.onChange,this,0,0),this.skew=new ql(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const t=n.worldTransform,r=this.worldTransform;r.a=e.a*t.a+e.b*t.c,r.b=e.a*t.b+e.b*t.d,r.c=e.c*t.a+e.d*t.c,r.d=e.c*t.b+e.d*t.d,r.tx=e.tx*t.a+e.ty*t.c+t.tx,r.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};l2.IDENTITY=new l2;let Z_=l2;Z_.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var xq=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,_q=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function fO(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}function CE(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function s8(n,e){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return CE(2*e);case"bvec3":return CE(3*e);case"bvec4":return CE(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Lp=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,e)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(e==null||e.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,e)=>n.type==="mat3"&&n.size===1&&!n.isArray&&e.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,e)=>n.type==="vec2"&&n.size===1&&!n.isArray&&e.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,e)=>n.type==="vec4"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,e)=>n.type==="vec3"&&n.size===1&&!n.isArray&&e.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],bq={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Sq={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Eq(n,e){var r;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in n.uniforms){const s=e[i];if(!s){((r=n.uniforms[i])==null?void 0:r.group)===!0&&(n.uniforms[i].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=n.uniforms[i];let a=!1;for(let l=0;l<Lp.length;l++)if(Lp[l].test(s,o)){t.push(Lp[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?bq:Sq)[s.type].replace("location",`ud["${i}"].location`);t.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const o8={};let Ff=o8;function Aq(){if(Ff===o8||Ff!=null&&Ff.isContextLost()){const n=Xe.ADAPTER.createCanvas();let e;Xe.PREFER_ENV>=of.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ff=e}return Ff}let y1;function Tq(){if(!y1){y1=fa.MEDIUM;const n=Aq();if(n&&n.getShaderPrecisionFormat){const e=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);e&&(y1=e.precision?fa.HIGH:fa.MEDIUM)}}return y1}function pO(n,e){const t=n.getShaderSource(e).split(`
`).map((u,h)=>`${h}: ${u}`),r=n.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Cq(n,e,t,r){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||pO(n,t),n.getShaderParameter(r,n.COMPILE_STATUS)||pO(n,r),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}const Iq={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function a8(n){return Iq[n]}let v1=null;const mO={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function l8(n,e){if(!v1){const t=Object.keys(mO);v1={};for(let r=0;r<t.length;++r){const i=t[r];v1[n[i]]=mO[i]}}return v1[e]}function gO(n,e,t){if(n.substring(0,9)!=="precision"){let r=e;return e===fa.HIGH&&t!==fa.HIGH&&(r=fa.MEDIUM),`precision ${r} float;
${n}`}else if(t!==fa.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let Ig;function Rq(){if(typeof Ig=="boolean")return Ig;try{Ig=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ig=!1}return Ig}let Pq=0;const w1={},u2=class Qf{constructor(e,t,r="pixi-shader",i={}){this.extra={},this.id=Pq++,this.vertexSrc=e||Qf.defaultVertexSrc,this.fragmentSrc=t||Qf.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),w1[r]?(w1[r]++,r+=`-${w1[r]}`):w1[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=gO(this.vertexSrc,Qf.defaultVertexPrecision,fa.HIGH),this.fragmentSrc=gO(this.fragmentSrc,Qf.defaultFragmentPrecision,Tq())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return _q}static get defaultFragmentSrc(){return xq}static from(e,t,r){const i=e+t;let s=lO[i];return s||(lO[i]=s=new Qf(e,t,r)),s}};u2.defaultVertexPrecision=fa.HIGH,u2.defaultFragmentPrecision=Mu.apple.device?fa.HIGH:fa.MEDIUM;let Ou=u2,kq=0;class Ya{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=kq++,this.static=!!t,this.ubo=!!r,e instanceof yi?(this.buffer=e,this.buffer.type=Ql.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new yi(new Float32Array(1)),this.buffer.type=Ql.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(!this.ubo)this.uniforms[e]=new Ya(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,r){return new Ya(e,t,r)}static uboFrom(e,t){return new Ya(e,t??!0,!0)}}class Yl{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Ya?this.uniformGroup=t:this.uniformGroup=new Ya(t):this.uniformGroup=new Ya({}),this.disposeRunner=new Qa("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const i=t.uniforms[r];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const i=Ou.from(e,t);return new Yl(i,r)}}class Mq{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=Ya.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ou(this.vertexSrc,i)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new lr,default:this.defaultGroupCache[e]};return new Yl(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let r=0;r<e;r++)r>0&&(t+=`
else `),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class c2{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function Oq(){return!Mu.apple.device}function Nq(n){let e=!0;const t=Xe.ADAPTER.getNavigator();if(Mu.tablet||Mu.phone){if(Mu.apple.device){const r=t.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Mu.android.device){const r=t.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?n:4}class J_{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var Bq=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Lq=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Vg=class Oa extends J_{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=r8,this.vertexSize=6,this.state=ru.for2d(),this.size=Oa.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??Nq(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??Oq(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Gt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return Lq}static get defaultFragmentTemplate(){return Bq}setShaderGenerator({vertex:e=Oa.defaultVertexSrc,fragment:t=Oa.defaultFragmentTemplate}={}){this.shaderGenerator=new Mq(e,t)}contextChange(){const e=this.renderer.gl;Xe.PREFER_ENV===of.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Oa.defaultMaxTextures),this.maxTextures=cq(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Oa,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new o2);for(;t.length<i;)t.push(new c2);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,r=Oa._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Mt._globalBatch,l=0,u=r[0],h=0;i.copyBoundTextures(s,t);for(let f=0;f<this._bufferSize;++f){const p=e[f];e[f]=null,p._batchEnabled!==a&&(u.count>=t&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,h,f),h=f,u=r[++l],++a),p._batchEnabled=a,p.touched=o,u.elements[u.count++]=p)}u.count>0&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(let f=0;f<s.length;f++)s[f]=null;Mt._globalBatch=a}buildDrawCalls(e,t,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Oa._drawCallPool;let u=this._dcIndex,h=this._aIndex,f=this._iIndex,p=l[u];p.start=this._iIndex,p.texArray=e;for(let m=t;m<r;++m){const g=i[m],v=g._texture.baseTexture,x=ZF[v.alphaMode?1:0][g.blendMode];i[m]=null,t<m&&p.blend!==x&&(p.size=f-p.start,t=m,p=l[++u],p.texArray=e,p.start=f),this.packInterleavedGeometry(g,s,o,h,f),h+=g.vertexData.length/2*a,f+=g.indices.length,p.blend=x}t<r&&(p.size=f-p.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=f}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:r}=this;Oa.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:r}=this.renderer,i=Oa._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:u,start:h,blend:f}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=f,r.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Oa.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=gx(Math.ceil(e/8)),r=oO(t),i=t*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new r2(i*this.vertexSize*4)),s}getIndexBuffer(e){const t=gx(Math.ceil(e/12)),r=oO(t),i=t*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,r,i,s){const{uint32View:o,float32View:a}=t,l=i/this.vertexSize,u=e.uvs,h=e.indices,f=e.vertexData,p=e._texture.baseTexture._batchLocation,m=Math.min(e.worldAlpha,1),g=Kn.shared.setValue(e._tintRGB).toPremultiplied(m,e._texture.baseTexture.alphaMode>0);for(let v=0;v<f.length;v+=2)a[i++]=f[v],a[i++]=f[v+1],a[i++]=u[v],a[i++]=u[v+1],o[i++]=g,a[i++]=p;for(let v=0;v<h.length;v++)r[s++]=l+h[v]}};Vg.defaultBatchSize=4096,Vg.extension={name:"batch",type:Le.RendererPlugin},Vg._drawCallPool=[],Vg._textureArrayPool=[];let nd=Vg;it.add(nd);var Dq=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Fq=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const h2=class qg extends Yl{constructor(e,t,r){const i=Ou.from(e||qg.defaultVertexSrc,t||qg.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=qg.defaultResolution,this.multisample=qg.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ru}apply(e,t,r,i,s){e.applyFilter(this,t,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return Fq}static get defaultFragmentSrc(){return Dq}};h2.defaultResolution=1,h2.defaultMultisample=ri.NONE;let Ms=h2;class wx{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Kn(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:i}=e,s=r??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}wx.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},wx.extension={type:[Le.RendererSystem,Le.CanvasRendererSystem],name:"background"};it.add(wx);class u8{constructor(e){this.renderer=e,this.emptyRenderer=new J_(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const h=s[u],f=h._batchLocation;if(f>=0&&f<i&&t[f]===h){o[u]=f;continue}for(;l<i;){const p=t[l];if(p&&p._batchEnabled===r&&p._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,t[l]=h;break}}}destroy(){this.renderer=null}}u8.extension={type:Le.RendererSystem,name:"batch"};it.add(u8);let yO=0;class xx{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=yO++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=yO++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(Xe.PREFER_ENV>=of.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}xx.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},xx.extension={type:Le.RendererSystem,name:"context"};it.add(xx);class d2{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Qa("disposeFramebuffer"),this.multisample=ri.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Mt(null,{scaleMode:da.NEAREST,resolution:1,mipmap:Zl.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Mt(null,{scaleMode:da.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Zl.OFF,format:Me.DEPTH_COMPONENT,type:dt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class c8 extends Mt{constructor(e={}){if(typeof e=="number"){const t=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:r,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=ri.NONE),super(null,e),this.mipmap=Zl.OFF,this.valid=!0,this._clear=new Kn([0,0,0,0]),this.framebuffer=new d2(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Xu extends ny{constructor(e){const t=e,r=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,i=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){r===void 0&&!t.startsWith("data:")?e.crossOrigin=aq(t):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,t,r,i){const s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===to.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(t.target,0,r.internalFormat,t.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class h8 extends Xu{constructor(e,t){if(t=t||{},typeof e=="string"){const r=new Image;Xu.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??Xe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===to.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class iR{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const i=t.width,s=t.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,u=e.y/s+a;r=Ir.add(r,Ir.NW),this.x0=l+o*Ir.uX(r),this.y0=u+a*Ir.uY(r),r=Ir.add(r,2),this.x1=l+o*Ir.uX(r),this.y1=u+a*Ir.uY(r),r=Ir.add(r,2),this.x2=l+o*Ir.uX(r),this.y2=u+a*Ir.uY(r),r=Ir.add(r,2),this.x3=l+o*Ir.uX(r),this.y3=u+a*Ir.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}iR.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const vO=new iR;function x1(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class Fe extends il{constructor(e,t,r,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new It(0,0,1,1)),e instanceof Fe&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=vO,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new St(o.x,o.y):new St(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&Pl[t.url]&&Fe.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Fe.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new Fe(this.baseTexture,!this.noFrame&&e,t,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===vO&&(this._uvs=new iR),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=Xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Mt){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Kd()}`,Mt.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Kd()}`}s=e._pixiId}let o=Pl[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Mt)?(t.resolution||(t.resolution=qu(e)),o=new Fe(new Mt(e,t)),o.baseTexture.cacheId=s,Mt.addToCache(o.baseTexture,s),Fe.addToCache(o,s)):!o&&e instanceof Mt&&(o=new Fe(e),Fe.addToCache(o,s)),o}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),i=Fe.from(e,Object.assign({resourceOptions:r},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,r,i){return new Fe(Mt.fromBuffer(e,t,r,i))}static fromLoader(e,t,r,i){const s=new Mt(e,Object.assign({scaleMode:Mt.defaultOptions.scaleMode,resolution:qu(t)},i)),{resource:o}=s;o instanceof h8&&(o.url=t);const a=new Fe(s);return r||(r=t),Mt.addToCache(a.baseTexture,r),Fe.addToCache(a,r),r!==t&&(Mt.addToCache(a.baseTexture,t),Fe.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Pl[t]&&Pl[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Pl[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Pl[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Pl[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Pl[e.textureCacheIds[t]]===e&&delete Pl[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,h=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Fe._EMPTY||(Fe._EMPTY=new Fe(new Mt),x1(Fe._EMPTY),x1(Fe._EMPTY.baseTexture)),Fe._EMPTY}static get WHITE(){if(!Fe._WHITE){const e=Xe.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),Fe._WHITE=new Fe(Mt.from(e)),x1(Fe._WHITE),x1(Fe._WHITE.baseTexture)}return Fe._WHITE}}class af extends Fe{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new af(new c8(e))}}class d8{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=ri.NONE){const i=new c8(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new af(i)}getOptimalTexture(e,t,r=1,i=ri.NONE){let s;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=gx(e),t=gx(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,t,r){const i=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||ri.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const r=this.texturePool[t];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const r=this.texturePool[t];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}d8.SCREEN_KEY=-1;class Uq extends bh{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class f8 extends bh{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new yi(this.vertices),this.uvBuffer=new yi(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+t.width/e.width,this.uvs[3]=i,this.uvs[4]=r+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=r,this.uvs[7]=i+t.height/e.height,r=t.x,i=t.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+t.width,this.vertices[3]=i,this.vertices[4]=r+t.width,this.vertices[5]=i+t.height,this.vertices[6]=r,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class zq{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ri.NONE,this.sourceFrame=new It,this.destinationFrame=new It,this.bindingSourceFrame=new It,this.bindingDestinationFrame=new It,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const _1=[new St,new St,new St,new St],IE=new lr;class p8{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new d8,this.statePool=[],this.quad=new Uq,this.quadUv=new f8,this.tempRect=new It,this.activeState={},this.globalUniforms=new Ya({outputFrame:new It,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new zq,o=r.renderTexture;let a,l;if(o.current){const x=o.current;a=x.resolution,l=x.multisample}else a=r.resolution,l=r.multisample;let u=t[0].resolution||a,h=t[0].multisample??l,f=t[0].padding,p=t[0].autoFit,m=t[0].legacy??!0;for(let x=1;x<t.length;x++){const b=t[x];u=Math.min(u,b.resolution||a),h=Math.min(h,b.multisample??l),f=this.useMaxPadding?Math.max(f,b.padding):f+b.padding,p=p&&b.autoFit,m=m||(b.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=u,s.multisample=h,s.legacy=m,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(f);const g=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(IE.copyFrom(r.projection.transform).invert(),g),p?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,l.renderTexture,jl.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,t.resolution);h.filterFrame=u.filterFrame;let f=0;for(f=0;f<r.length-1;++f){f===1&&t.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,t.resolution),h.filterFrame=u.filterFrame),r[f].apply(this,u,h,jl.CLEAR,t);const p=u;u=h,h=p}r[f].apply(this,u,l.renderTexture,jl.BLEND,t),f>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=jl.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(t===jl.CLEAR||t===jl.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Va.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Va.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=t.worldTransform.copyTo(lr.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,i=ri.NONE){return this.texturePool.getOptimalTexture(e,t,r,i)}getFilterTexture(e,t,r){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||ri.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=_1[0],i=_1[1],s=_1[2],o=_1[3];r.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),u=Math.max(r.x,i.x,s.x,o.x),h=Math.max(r.y,i.y,s.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=h-l}roundFrame(e,t,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?IE.copyFrom(s):IE.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}p8.extension={type:Le.RendererSystem,name:"filter"};it.add(p8);class $q{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ri.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const jq=new It;class m8{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new d2(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new It,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Xe.PREFER_ENV===of.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>r,a=t.height>>r,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,i){const s=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=r,s.height=i,this.gl.viewport(e,t,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,i,s=UT.COLOR|UT.DEPTH){const{gl:o}=this;o.clearColor(e,t,r,i),o.clear(s)}initFramebuffer(e){const{gl:t}=this,r=new $q(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){t.bindRenderbuffer(t.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||r.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=r.DEPTH_STENCIL_ATTACHMENT,u=r.DEPTH_STENCIL):e.depth&&e.stencil?(l=r.DEPTH_STENCIL_ATTACHMENT,u=r.DEPTH24_STENCIL8):e.depth?(l=r.DEPTH_ATTACHMENT,u=r.DEPTH_COMPONENT24):(l=r.STENCIL_ATTACHMENT,u=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,u,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,l,r.RENDERBUFFER,i.stencil)}else i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=ri.NONE;if(e<=1||t===null)return r;for(let i=0;i<t.length;i++)if(t[i]<=e){r=t[i];break}return r===1&&(r=ri.NONE),r}blit(e,t,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=i.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new d2(i.width,i.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=jq,t.width=i.width,t.height=i.height),r||(r=t);const u=t.width===r.width&&t.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,r,i):s.renderbufferStorage(s.RENDERBUFFER,l,r,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new It}destroy(){this.renderer=null}}m8.extension={type:Le.RendererSystem,name:"framebuffer"};it.add(m8);const RE={5126:4,5123:2,5121:1};class g8{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;Xe.PREFER_ENV===of.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];t.update(i)}}checkCompatibility(e,t){const r=e.attributes,i=t.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const r=e.attributes,i=t.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const f=e.buffers,p=e.attributes,m={},g={};for(const v in f)m[v]=0,g[v]=0;for(const v in p)!p[v].size&&a.attributeData[v]?p[v].size=a.attributeData[v].size:p[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),m[p[v].buffer]+=p[v].size*RE[p[v].type];for(const v in p){const x=p[v],b=x.size;x.stride===void 0&&(m[x.buffer]===b*RE[x.type]?x.stride=0:x.stride=m[x.buffer]),x.start===void 0&&(x.start=g[x.buffer],g[x.buffer]+=b*RE[x.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let v=0;v<f.length;v++){const x=f[v];o.bind(x),r&&x._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=h,u[l]=h,i.bindVertexArray(null),o.unbind(Ql.ARRAY_BUFFER),h}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&o.dispose(s[l],t))}if(!t){for(const l in r)if(l[0]==="g"){const u=r[l];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const h=a[u],f=o[h.buffer],p=f._glBuffers[i];if(t.attributeData[u]){l!==p&&(s.bind(f),l=p);const m=t.attributeData[u].location;if(r.enableVertexAttribArray(m),r.vertexAttribPointer(m,h.size,h.type||r.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)r.vertexAttribDivisor(m,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,t||o.getSize(),i||1):s.drawArrays(e,r,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}g8.extension={type:Le.RendererSystem,name:"geometry"};it.add(g8);const wO=new lr;class sR{constructor(e,t){this._texture=e,this.mapCoord=new lr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];t[i]=s*r.a+o*r.c+r.tx,t[i+1]=s*r.b+o*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=t.orig,s=t.trim;s&&(wO.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(wO));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var Hq=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Wq=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class Gq extends Ms{constructor(e,t,r){let i=null;typeof e!="string"&&t===void 0&&r===void 0&&(i=e,e=void 0,t=void 0,r=void 0),super(e||Wq,t||Hq,r),this.maskSprite=i,this.maskMatrix=new lr}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new sR(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,r,i))}}class Vq{constructor(e=null){this.type=fi.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ms.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=fi.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class y8{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const s=this.maskDataPool.pop()||new Vq;s.pooled=!0,s.maskObject=t,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==fi.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case fi.SCISSOR:this.renderer.scissor.push(r);break;case fi.STENCIL:this.renderer.stencil.push(r);break;case fi.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case fi.COLOR:this.pushColorMask(r);break}r.type===fi.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case fi.SCISSOR:this.renderer.scissor.pop(t);break;case fi.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case fi.SPRITE:this.popSpriteMask(t);break;case fi.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===fi.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=fi.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=fi.SCISSOR:e.type=fi.STENCIL:e.type=fi.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Gq])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;const s=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}y8.extension={type:Le.RendererSystem,name:"mask"};it.add(y8);class v8{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const xO=new lr,_O=[],w8=class Aw extends v8{constructor(e){super(e),this.glConst=Xe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,_O.pop()??new It);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Aw.isMatrixRotated(t.worldTransform)||Aw.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,t,r,i,s){Aw.isMatrixRotated(s)||(s=s?xO.copyFrom(s):xO.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&_O.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};w8.extension={type:Le.RendererSystem,name:"scissor"};let qq=w8;it.add(qq);class x8 extends v8{constructor(e){super(e),this.glConst=Xe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}x8.extension={type:Le.RendererSystem,name:"stencil"};it.add(x8);class _8{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Gt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Gt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Gt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}_8.extension={type:[Le.RendererSystem,Le.CanvasRendererSystem],name:"_plugin"};it.add(_8);class b8{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new lr,this.transform=null}update(e,t,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}b8.extension={type:Le.RendererSystem,name:"projection"};it.add(b8);const Xq=new Z_,bO=new It;class S8{constructor(e){this.renderer=e,this._tempMatrix=new lr}generateTexture(e,t){const{region:r,...i}=t||{},s=(r==null?void 0:r.copyTo(bO))||e.getLocalBounds(bO,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=af.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=Xq,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}S8.extension={type:[Le.RendererSystem,Le.CanvasRendererSystem],name:"textureGenerator"};it.add(S8);const Vh=new It,Rg=new It;class E8{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new It,this.destinationFrame=new It,this.viewportFrame=new It}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(Vh.width=e.frame.width,Vh.height=e.frame.height,t=Vh),r||(Rg.x=e.frame.x,Rg.y=e.frame.y,Rg.width=t.width,Rg.height=t.height,r=Rg),o=s.framebuffer):(a=i.resolution,t||(Vh.width=i._view.screen.width,Vh.height=i._view.screen.height,t=Vh),r||(r=Vh,r.width=t.width,r.height=t.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Kn.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:f}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,f)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}E8.extension={type:Le.RendererSystem,name:"renderTexture"};it.add(E8);class Kq{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Qq(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(n,i);if(s.name.startsWith("gl_"))continue;const o=l8(e,s.type),a={type:o,name:s.name,size:a8(o),location:e.getAttribLocation(n,s.name)};t[s.name]=a}return t}function Yq(n,e){const t={},r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(n,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=l8(e,s.type);t[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:s8(l,s.size)}}return t}function Zq(n,e){var a;const t=fO(n,n.VERTEX_SHADER,e.vertexSrc),r=fO(n,n.FRAGMENT_SHADER,e.fragmentSrc),i=n.createProgram();n.attachShader(i,t),n.attachShader(i,r);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(i),n.getProgramParameter(i,n.LINK_STATUS)||Cq(n,i,t,r),e.attributeData=Qq(i,n),e.uniformData=Yq(i,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,h)=>u>h?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,n.bindAttribLocation(i,u,l[u]);n.linkProgram(i)}n.deleteShader(t),n.deleteShader(r);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:n.getUniformLocation(i,l),value:s8(u.type,u.size)}}return new Kq(i,o)}function Jq(n,e,t,r,i){t.buffer.update(i)}const eX={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},A8={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function tX(n){const e=n.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=A8[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,r%t!==0&&r<16){const a=r%t%16;r+=a,i+=a}r+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,r=t):(o.offset=i,r+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function nX(n,e){const t=[];for(const r in n)e[r]&&t.push(e[r]);return t.sort((r,i)=>r.index-i.index),t}function rX(n,e){if(!n.autoManage)return{size:0,syncFunc:Jq};const t=nX(n.uniforms,e),{uboElements:r,size:i}=tX(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],l=n.uniforms[a.data.name],u=a.data.name;let h=!1;for(let f=0;f<Lp.length;f++){const p=Lp[f];if(p.codeUbo&&p.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Lp[f].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const f=a8(a.data.type),p=Math.max(A8[a.data.type]/16,1),m=f/p,g=(4-m%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*p}; i++)
                {
                    for(var j = 0; j < ${m}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const f=eX[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${f};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let iX=0;const b1={textureCount:0,uboCount:0};class T8{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=iX++}systemCheck(){if(!Rq())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),t||(b1.textureCount=0,b1.uboCount=0,this.syncUniformGroup(e.uniformGroup,b1)),i}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=Eq(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,b1,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=rX(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,i=Zq(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}T8.extension={type:Le.RendererSystem,name:"shader"};it.add(T8);class _x{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}_x.defaultOptions={hello:!1},_x.extension={type:[Le.RendererSystem,Le.CanvasRendererSystem],name:"startup"};it.add(_x);function sX(n,e=[]){return e[At.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.ADD]=[n.ONE,n.ONE],e[At.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.NONE]=[0,0],e[At.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[At.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[At.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[At.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[At.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[At.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[At.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[At.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[At.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[At.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[At.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}const oX=0,aX=1,lX=2,uX=3,cX=4,hX=5,C8=class f2{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=At.NONE,this._blendEq=!1,this.map=[],this.map[oX]=this.setBlend,this.map[aX]=this.setOffset,this.map[lX]=this.setCullFace,this.map[uX]=this.setDepthTest,this.map[cX]=this.setFrontFace,this.map[hX]=this.setDepthMask,this.checks=[],this.defaultState=new ru,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=sX(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)t&1&&this.map[r].call(this,!!(e.data&1<<r)),t=t>>1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(f2.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(f2.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&r===-1?this.checks.push(e):!t&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};C8.extension={type:Le.RendererSystem,name:"state"};let dX=C8;it.add(dX);class fX extends il{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(i=>e.systems[i]),r=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Qa(t)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Xg=class Tw{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Tw.defaultMaxIdle,this.checkCountMax=Tw.defaultCheckCountMax,this.mode=Tw.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==QI.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let i=0;i<t.length;i++){const s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Xg.defaultMode=QI.AUTO,Xg.defaultMaxIdle=60*60,Xg.defaultCheckCountMax=60*10,Xg.extension={type:Le.RendererSystem,name:"textureGC"};let rd=Xg;it.add(rd);class PE{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=dt.UNSIGNED_BYTE,this.internalFormat=Me.RGBA,this.samplerType=0}}function pX(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[n.RGB]:Qe.FLOAT,[n.RGBA]:Qe.FLOAT,[n.ALPHA]:Qe.FLOAT,[n.LUMINANCE]:Qe.FLOAT,[n.LUMINANCE_ALPHA]:Qe.FLOAT,[n.R8]:Qe.FLOAT,[n.R8_SNORM]:Qe.FLOAT,[n.RG8]:Qe.FLOAT,[n.RG8_SNORM]:Qe.FLOAT,[n.RGB8]:Qe.FLOAT,[n.RGB8_SNORM]:Qe.FLOAT,[n.RGB565]:Qe.FLOAT,[n.RGBA4]:Qe.FLOAT,[n.RGB5_A1]:Qe.FLOAT,[n.RGBA8]:Qe.FLOAT,[n.RGBA8_SNORM]:Qe.FLOAT,[n.RGB10_A2]:Qe.FLOAT,[n.RGB10_A2UI]:Qe.FLOAT,[n.SRGB8]:Qe.FLOAT,[n.SRGB8_ALPHA8]:Qe.FLOAT,[n.R16F]:Qe.FLOAT,[n.RG16F]:Qe.FLOAT,[n.RGB16F]:Qe.FLOAT,[n.RGBA16F]:Qe.FLOAT,[n.R32F]:Qe.FLOAT,[n.RG32F]:Qe.FLOAT,[n.RGB32F]:Qe.FLOAT,[n.RGBA32F]:Qe.FLOAT,[n.R11F_G11F_B10F]:Qe.FLOAT,[n.RGB9_E5]:Qe.FLOAT,[n.R8I]:Qe.INT,[n.R8UI]:Qe.UINT,[n.R16I]:Qe.INT,[n.R16UI]:Qe.UINT,[n.R32I]:Qe.INT,[n.R32UI]:Qe.UINT,[n.RG8I]:Qe.INT,[n.RG8UI]:Qe.UINT,[n.RG16I]:Qe.INT,[n.RG16UI]:Qe.UINT,[n.RG32I]:Qe.INT,[n.RG32UI]:Qe.UINT,[n.RGB8I]:Qe.INT,[n.RGB8UI]:Qe.UINT,[n.RGB16I]:Qe.INT,[n.RGB16UI]:Qe.UINT,[n.RGB32I]:Qe.INT,[n.RGB32UI]:Qe.UINT,[n.RGBA8I]:Qe.INT,[n.RGBA8UI]:Qe.UINT,[n.RGBA16I]:Qe.INT,[n.RGBA16UI]:Qe.UINT,[n.RGBA32I]:Qe.INT,[n.RGBA32UI]:Qe.UINT,[n.DEPTH_COMPONENT16]:Qe.FLOAT,[n.DEPTH_COMPONENT24]:Qe.FLOAT,[n.DEPTH_COMPONENT32F]:Qe.FLOAT,[n.DEPTH_STENCIL]:Qe.FLOAT,[n.DEPTH24_STENCIL8]:Qe.FLOAT,[n.DEPTH32F_STENCIL8]:Qe.FLOAT}:e={[n.RGB]:Qe.FLOAT,[n.RGBA]:Qe.FLOAT,[n.ALPHA]:Qe.FLOAT,[n.LUMINANCE]:Qe.FLOAT,[n.LUMINANCE_ALPHA]:Qe.FLOAT,[n.DEPTH_STENCIL]:Qe.FLOAT},e}function mX(n){let e;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?e={[dt.UNSIGNED_BYTE]:{[Me.RGBA]:n.RGBA8,[Me.RGB]:n.RGB8,[Me.RG]:n.RG8,[Me.RED]:n.R8,[Me.RGBA_INTEGER]:n.RGBA8UI,[Me.RGB_INTEGER]:n.RGB8UI,[Me.RG_INTEGER]:n.RG8UI,[Me.RED_INTEGER]:n.R8UI,[Me.ALPHA]:n.ALPHA,[Me.LUMINANCE]:n.LUMINANCE,[Me.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[dt.BYTE]:{[Me.RGBA]:n.RGBA8_SNORM,[Me.RGB]:n.RGB8_SNORM,[Me.RG]:n.RG8_SNORM,[Me.RED]:n.R8_SNORM,[Me.RGBA_INTEGER]:n.RGBA8I,[Me.RGB_INTEGER]:n.RGB8I,[Me.RG_INTEGER]:n.RG8I,[Me.RED_INTEGER]:n.R8I},[dt.UNSIGNED_SHORT]:{[Me.RGBA_INTEGER]:n.RGBA16UI,[Me.RGB_INTEGER]:n.RGB16UI,[Me.RG_INTEGER]:n.RG16UI,[Me.RED_INTEGER]:n.R16UI,[Me.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[dt.SHORT]:{[Me.RGBA_INTEGER]:n.RGBA16I,[Me.RGB_INTEGER]:n.RGB16I,[Me.RG_INTEGER]:n.RG16I,[Me.RED_INTEGER]:n.R16I},[dt.UNSIGNED_INT]:{[Me.RGBA_INTEGER]:n.RGBA32UI,[Me.RGB_INTEGER]:n.RGB32UI,[Me.RG_INTEGER]:n.RG32UI,[Me.RED_INTEGER]:n.R32UI,[Me.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[dt.INT]:{[Me.RGBA_INTEGER]:n.RGBA32I,[Me.RGB_INTEGER]:n.RGB32I,[Me.RG_INTEGER]:n.RG32I,[Me.RED_INTEGER]:n.R32I},[dt.FLOAT]:{[Me.RGBA]:n.RGBA32F,[Me.RGB]:n.RGB32F,[Me.RG]:n.RG32F,[Me.RED]:n.R32F,[Me.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[dt.HALF_FLOAT]:{[Me.RGBA]:n.RGBA16F,[Me.RGB]:n.RGB16F,[Me.RG]:n.RG16F,[Me.RED]:n.R16F},[dt.UNSIGNED_SHORT_5_6_5]:{[Me.RGB]:n.RGB565},[dt.UNSIGNED_SHORT_4_4_4_4]:{[Me.RGBA]:n.RGBA4},[dt.UNSIGNED_SHORT_5_5_5_1]:{[Me.RGBA]:n.RGB5_A1},[dt.UNSIGNED_INT_2_10_10_10_REV]:{[Me.RGBA]:n.RGB10_A2,[Me.RGBA_INTEGER]:n.RGB10_A2UI},[dt.UNSIGNED_INT_10F_11F_11F_REV]:{[Me.RGB]:n.R11F_G11F_B10F},[dt.UNSIGNED_INT_5_9_9_9_REV]:{[Me.RGB]:n.RGB9_E5},[dt.UNSIGNED_INT_24_8]:{[Me.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[dt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Me.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:e={[dt.UNSIGNED_BYTE]:{[Me.RGBA]:n.RGBA,[Me.RGB]:n.RGB,[Me.ALPHA]:n.ALPHA,[Me.LUMINANCE]:n.LUMINANCE,[Me.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[dt.UNSIGNED_SHORT_5_6_5]:{[Me.RGB]:n.RGB},[dt.UNSIGNED_SHORT_4_4_4_4]:{[Me.RGBA]:n.RGBA},[dt.UNSIGNED_SHORT_5_5_5_1]:{[Me.RGBA]:n.RGBA}},e}class I8{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Mt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mX(e),this.samplerTypes=pX(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new PE(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new PE(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[i].samplerType!==Qe.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new PE(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var r;t.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??Qe.FLOAT,this.webGLVersion===2&&e.type===dt.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var i;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),(i=e.resource)==null?void 0:i.upload(r,e,t))t.samplerType!==Qe.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const i=this.managedTextures.indexOf(e);i!==-1&&Bp(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===Zl.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Du.CLAMP:t.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==Zl.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===da.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===da.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===da.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===da.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}I8.extension={type:Le.RendererSystem,name:"texture"};it.add(I8);class R8{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:i}=this;t&&i.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}r&&(t||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}R8.extension={type:Le.RendererSystem,name:"transformFeedback"};it.add(R8);class bx{constructor(e){this.renderer=e}init(e){this.screen=new It(0,0,e.width,e.height),this.element=e.view||Xe.ADAPTER.createCanvas(),this.resolution=e.resolution||Xe.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}bx.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},bx.extension={type:[Le.RendererSystem,Le.CanvasRendererSystem],name:"_view"};it.add(bx);Xe.PREFER_ENV=of.WEBGL2;Xe.STRICT_TEXTURE_CACHE=!1;Xe.RENDER_OPTIONS={...xx.defaultOptions,...wx.defaultOptions,...bx.defaultOptions,..._x.defaultOptions};Object.defineProperties(Xe,{WRAP_MODE:{get(){return Mt.defaultOptions.wrapMode},set(n){Gt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Mt.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return Mt.defaultOptions.scaleMode},set(n){Gt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Mt.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return Mt.defaultOptions.mipmap},set(n){Gt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Mt.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return Mt.defaultOptions.anisotropicLevel},set(n){Gt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Mt.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Gt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ms.defaultResolution},set(n){Ms.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Gt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ms.defaultMultisample},set(n){Ms.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return nd.defaultMaxTextures},set(n){Gt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),nd.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return nd.defaultBatchSize},set(n){Gt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),nd.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return nd.canUploadSameBuffer},set(n){Gt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),nd.canUploadSameBuffer=n}},GC_MODE:{get(){return rd.defaultMode},set(n){Gt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),rd.defaultMode=n}},GC_MAX_IDLE:{get(){return rd.defaultMaxIdle},set(n){Gt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),rd.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return rd.defaultCheckCountMax},set(n){Gt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),rd.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return Ou.defaultVertexPrecision},set(n){Gt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ou.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return Ou.defaultFragmentPrecision},set(n){Gt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ou.defaultFragmentPrecision=n}}});var Sh=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Sh||{});class kE{constructor(e,t=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const P8=class yo{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new kE(null,null,1/0),this.deltaMS=1/yo.targetFPMS,this.elapsedMS=1/yo.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Sh.NORMAL){return this._addListener(new kE(e,t,r))}addOnce(e,t,r=Sh.NORMAL){return this._addListener(new kE(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(!t)e.connect(r);else{for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r.match(e,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*yo.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,t)/1e3,yo.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!yo._shared){const e=yo._shared=new yo;e.autoStart=!0,e._protected=!0}return yo._shared}static get system(){if(!yo._system){const e=yo._system=new yo;e.autoStart=!0,e._protected=!0}return yo._system}};P8.targetFPMS=.06;let wr=P8;Object.defineProperties(Xe,{TARGET_FPMS:{get(){return wr.targetFPMS},set(n){Gt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),wr.targetFPMS=n}}});class k8{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Sh.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?wr.shared:new wr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}k8.extension=Le.Application;it.add(k8);const M8=[];it.handleByList(Le.Renderer,M8);function gX(n){for(const e of M8)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}var yX=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,vX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const wX=yX,O8=vX;class N8{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=ri.HIGH?this.multisample=ri.HIGH:t>=ri.MEDIUM?this.multisample=ri.MEDIUM:t>=ri.LOW?this.multisample=ri.LOW:this.multisample=ri.NONE}destroy(){}}N8.extension={type:Le.RendererSystem,name:"_multisample"};it.add(N8);class xX{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class B8{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,r*256,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(t||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new xX(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}B8.extension={type:Le.RendererSystem,name:"buffer"};it.add(B8);class L8{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(t.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}L8.extension={type:Le.RendererSystem,name:"objectRenderer"};it.add(L8);const Cw=class p2 extends fX{constructor(e){super(),this.type=wF.WEBGL,e=Object.assign({},Xe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ya({projectionMatrix:new lr},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:p2.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Gt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=p2.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:HV()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Gt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Gt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Gt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Gt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Gt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Gt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Gt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Gt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Cw.extension={type:Le.Renderer,priority:1},Cw.__plugins={},Cw.__systems={};let oR=Cw;it.handleByMap(Le.RendererPlugin,oR.__plugins);it.handleByMap(Le.RendererSystem,oR.__systems);it.add(oR);class D8 extends ny{constructor(e,t){const{width:r,height:i}=t||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Mt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof ny?this.addResourceAt(e[r],r):this.addResourceAt(t8(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:r}=this.items[0];return this.resize(t,r),this.update(),Promise.resolve(this)}),this._load}}class _X extends D8{constructor(e,t){const{width:r,height:i}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Mp.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,t.format,r.type,null);for(let l=0;l<i;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,r.type,u.resource.source))}return!0}}class bX extends Xu{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const F8=class Kg extends D8{constructor(e,t){const{width:r,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==Kg.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<Kg.SIDES;a++)this.items[a].target=Mp.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Mp.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Mp.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,r){const i=this.itemDirtyIds;for(let s=0;s<Kg.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||r.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Kg.SIDES}};F8.SIDES=6;let SX=F8;class yp extends Xu{constructor(e,t){t=t||{};let r,i,s;typeof e=="string"?(r=yp.EMPTY,i=e,s=!0):(r=e,i=null,s=!1),super(r),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const r=await Xe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===to.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;t(r),this.onError.emit(r)}}),this._load)}upload(e,t,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return yp._EMPTY=yp._EMPTY??Xe.ADAPTER.createCanvas(0,0),yp._EMPTY}}const m2=class Iw extends Xu{constructor(e,t){t=t||{},super(Xe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Iw.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Xu.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*t,s=this._overrideHeight||this._overrideWidth/t*r),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${Kd()}`,o.getContext("2d").drawImage(e,0,0,t,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const t=Iw.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Iw.SVG_XML.test(e)}};m2.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,m2.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let g2=m2;class EX extends Xu{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const y2=class v2 extends Xu{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");t.autoLoad!==!1&&r.setAttribute("preload","auto"),t.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),t.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),t.loop===!0&&r.setAttribute("loop",""),t.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Xu.crossOrigin(r,i,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);l=l||v2.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),r.appendChild(o)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=wr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(wr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||v2.TYPES.includes(t)}};y2.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],y2.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let U8=y2;i2.push(yp,h8,bX,U8,EX,g2,X_,SX,_X);class Sx{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?It.EMPTY:(e=e||new It(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,u=r*t.x+s*t.y+a,h=i*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,t,r,i,s){this.addFrameMatrix(e.worldTransform,t,r,i,s)}addFrameMatrix(e,t,r,i,s){const o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,f=e.ty;let p=this.minX,m=this.minY,g=this.maxX,v=this.maxY,x=o*t+l*r+h,b=a*t+u*r+f;p=x<p?x:p,m=b<m?b:m,g=x>g?x:g,v=b>v?b:v,x=o*i+l*r+h,b=a*i+u*r+f,p=x<p?x:p,m=b<m?b:m,g=x>g?x:g,v=b>v?b:v,x=o*t+l*s+h,b=a*t+u*s+f,p=x<p?x:p,m=b<m?b:m,g=x>g?x:g,v=b>v?b:v,x=o*i+l*s+h,b=a*i+u*s+f,p=x<p?x:p,m=b<m?b:m,g=x>g?x:g,v=b>v?b:v,this.minX=p,this.minY=m,this.maxX=g,this.maxY=v}addVertexData(e,t,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<r;l+=2){const u=e[l],h=e[l+1];i=u<i?u:i,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,r,i){this.addVerticesMatrix(e.worldTransform,t,r,i)}addVerticesMatrix(e,t,r,i,s=0,o=s){const a=e.a,l=e.b,u=e.c,h=e.d,f=e.tx,p=e.ty;let m=this.minX,g=this.minY,v=this.maxX,x=this.maxY;for(let b=r;b<i;b+=2){const S=t[b],_=t[b+1],R=a*S+u*_+f,D=h*_+l*S+p;m=Math.min(m,R-s),v=Math.max(v,R+s),g=Math.min(g,D-o),x=Math.max(x,D+o)}this.minX=m,this.minY=g,this.maxX=v,this.maxY=x}addBounds(e){const t=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,i,s,o){e-=s,t-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}}class _r extends il{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Z_,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Sx,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const i=t[r];Object.defineProperty(_r.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new It),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new It),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Sx);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,i){return t&&(e=t.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,r=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new AX),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*yq}set angle(e){this.transform.rotation=e*vq}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class AX extends _r{constructor(){super(...arguments),this.sortDirty=null}}_r.prototype.displayObjectUpdateTransform=_r.prototype.updateTransform;const TX=new lr;function CX(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}const z8=class w2 extends _r{constructor(){super(),this.children=[],this.sortableChildren=w2.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),i=this.getChildIndex(t);this.children[r]=t,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Bp(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(r===-1)return null;t.parent=null,t.transform._parentID=-1,Bp(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Bp(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,i=t,s=i-r;let o;if(s>0&&s<=i){o=this.children.splice(r,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(CX),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(t._bounds,r._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==w2.prototype._render&&(r=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=TX.copyFrom(i),i.prepend(s)):i=s),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const i=t&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==fi.NONE));if(i&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,r=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};z8.defaultSortableChildren=!1;let Zi=z8;Zi.prototype.containerUpdateTransform=Zi.prototype.updateTransform;Object.defineProperties(Xe,{SORTABLE_CHILDREN:{get(){return Zi.defaultSortableChildren},set(n){Gt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Zi.defaultSortableChildren=n}}});const Pg=new St,IX=new Uint16Array([0,1,2,0,2,3]);class sl extends Zi{constructor(e){super(),this._anchor=new ql(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Kn(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=At.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Fe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=IX,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Xe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Jc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Jc(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,r=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this.vertexData,h=e.trim,f=e.orig,p=this._anchor;let m=0,g=0,v=0,x=0;if(h?(g=h.x-p._x*f.width,m=g+h.width,x=h.y-p._y*f.height,v=x+h.height):(g=-p._x*f.width,m=g+f.width,x=-p._y*f.height,v=x+f.height),u[0]=r*g+s*x+a,u[1]=o*x+i*g+l,u[2]=r*m+s*x+a,u[3]=o*x+i*m+l,u[4]=r*m+s*v+a,u[5]=o*v+i*m+l,u[6]=r*g+s*v+a,u[7]=o*v+i*g+l,this._roundPixels){const b=Xe.RESOLUTION;for(let S=0;S<u.length;++S)u[S]=Math.round(u[S]*b)/b}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,f=s.ty,p=-i._x*r.width,m=p+r.width,g=-i._y*r.height,v=g+r.height;if(t[0]=o*p+l*g+h,t[1]=u*g+a*p+f,t[2]=o*m+l*g+h,t[3]=u*g+a*m+f,t[4]=o*m+l*v+h,t[5]=u*v+a*m+f,t[6]=o*p+l*v+h,t[7]=u*v+a*p+f,this._roundPixels){const x=Xe.RESOLUTION;for(let b=0;b<t.length;++b)t[b]=Math.round(t[b]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Sx),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new It),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Pg);const t=this._texture.orig.width,r=this._texture.orig.height,i=-t*this.anchor.x;let s=0;return Pg.x>=i&&Pg.x<i+t&&(s=-r*this.anchor.y,Pg.y>=s&&Pg.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const r=e instanceof Fe?e:Fe.from(e,t);return new sl(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=Jc(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=Jc(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Fe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const $8=new lr;_r.prototype._cacheAsBitmap=!1;_r.prototype._cacheData=null;_r.prototype._cacheAsBitmapResolution=null;_r.prototype._cacheAsBitmapMultisample=null;class RX{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(_r.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let e;n?(this._cacheData||(this._cacheData=new RX),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});_r.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))};_r.prototype._initCachedDisplayObject=function(n){var p,m;if((p=this._cacheData)!=null&&p.sprite)return;const e=this.alpha;this.alpha=1,n.batch.flush();const t=this.getLocalBounds(new It,!0);if((m=this.filters)!=null&&m.length){const g=this.filters[0].padding;t.pad(g)}const r=this.cacheAsBitmapResolution||n.resolution;t.ceil(r),t.width=Math.max(t.width,1/r),t.height=Math.max(t.height,1/r);const i=n.renderTexture.current,s=n.renderTexture.sourceFrame.clone(),o=n.renderTexture.destinationFrame.clone(),a=n.projection.transform,l=af.create({width:t.width,height:t.height,resolution:r,multisample:this.cacheAsBitmapMultisample??n.multisample}),u=`cacheAsBitmap_${Kd()}`;this._cacheData.textureCacheId=u,Mt.addToCache(l.baseTexture,u),Fe.addToCache(l,u);const h=this.transform.localTransform.copyTo($8).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=a,n.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const f=new sl(l);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(t.x/t.width),f.anchor.y=-(t.y/t.height),f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)};_r.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))};_r.prototype._initCachedDisplayObjectCanvas=function(n){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(new It,!0),t=this.alpha;this.alpha=1;const r=n.canvasContext.activeContext,i=n._projTransform,s=this.cacheAsBitmapResolution||n.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=af.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${Kd()}`;this._cacheData.textureCacheId=a,Mt.addToCache(o.baseTexture,a),Fe.addToCache(o,a);const l=$8;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),n.canvasContext.activeContext=r,n._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new sl(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};_r.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};_r.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};_r.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Mt.removeFromCache(this._cacheData.textureCacheId),Fe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};_r.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)};_r.prototype.name=null;Zi.prototype.getChildByName=function(n,e){for(let t=0,r=this.children.length;t<r;t++)if(this.children[t].name===n)return this.children[t];if(e)for(let t=0,r=this.children.length;t<r;t++){const i=this.children[t];if(!i.getChildByName)continue;const s=i.getChildByName(n,!0);if(s)return s}return null};_r.prototype.getGlobalPosition=function(n=new St,e=!1){return this.parent?this.parent.toGlobal(this.position,n,e):(n.x=this.position.x,n.y=this.position.y),n};var PX=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class kX extends Ms{constructor(e=1){super(wX,PX,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const MX={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},OX=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function NX(n){const e=MX[n],t=e.length;let r=OX,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<n;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=n-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}const BX=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function LX(n,e){const t=Math.ceil(n/2);let r=BX,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<n;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",n.toString()),r}class x2 extends Ms{constructor(e,t=8,r=4,i=Ms.defaultResolution,s=5){const o=LX(s,e),a=NX(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=t}apply(e,t,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/t.width):this.uniforms.strength=1/r.height*(r.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,jl.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,jl.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class DX extends Ms{constructor(e=8,t=4,r=Ms.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new x2(!0,e,t,r,i),this.blurYFilter=new x2(!1,e,t,r,i),this.resolution=r,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,jl.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,r,i):this.blurXFilter.apply(e,t,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var FX=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class _2 extends Ms{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(O8,FX,e),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,i,s]=Kn.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,u=o*(1-r)-a*i,h=o*(1-r)+a*i,f=o*(1-r)+a*i,p=r+o*(1-r),m=o*(1-r)-a*i,g=o*(1-r)-a*i,v=o*(1-r)+a*i,x=r+o*(1-r),b=[l,u,h,0,0,f,p,m,0,0,g,v,x,0,0,0,0,0,1,0];this._loadMatrix(b,t)}contrast(e,t){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,r,i,s){e=e||.2,t=t||.15,r=r||16770432,i=i||3375104;const o=Kn.shared,[a,l,u]=o.setValue(r).toArray(),[h,f,p]=o.setValue(i).toArray(),m=[.3,.59,.11,0,0,a,l,u,e,0,h,f,p,t,0,a-h,l-f,u-p,0,0];this._loadMatrix(m,s)}night(e,t){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}_2.prototype.grayscale=_2.prototype.greyscale;var UX=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,zX=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class $X extends Ms{constructor(e,t){const r=new lr;e.renderable=!1,super(zX,UX,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,t==null&&(t=20),this.scale=new St(t,t)}apply(e,t,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var jX=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,HX=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class WX extends Ms{constructor(){super(HX,jX)}}var GX=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class VX extends Ms{constructor(e=.5,t=Math.random()){super(O8,GX,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const SO={AlphaFilter:kX,BlurFilter:DX,BlurFilterPass:x2,ColorMatrixFilter:_2,DisplacementFilter:$X,FXAAFilter:WX,NoiseFilter:VX};Object.entries(SO).forEach(([n,e])=>{Object.defineProperty(SO,n,{get(){return Gt("7.1.0",`filters.${n} has moved to ${n}`),e}})});class qX{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(wr.system.add(this.tickerUpdate,this,Sh.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(wr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const zc=new qX;class Xy{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Xy.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new St,this.page=new St,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Ex extends Xy{constructor(){super(...arguments),this.client=new St,this.movement=new St,this.offset=new St,this.global=new St,this.screen=new St}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,r){return e.worldTransform.applyInverse(r||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,r,i,s,o,a,l,u,h,f,p,m,g,v){throw new Error("Method not implemented.")}}class Na extends Ex{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Dp extends Ex{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Dp.DOM_DELTA_PIXEL=0,Dp.DOM_DELTA_LINE=1,Dp.DOM_DELTA_PAGE=2;const XX=2048,KX=new St,ME=new St;class QX{constructor(e){this.dispatch=new il,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let r=0,i=t.length;r<i;r++)t[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){zc.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[r](this.rootTarget,this.rootTarget.eventMode,KX.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let r=0;r<XX&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(zc.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let f=h.length-1;f>=0;f--){const p=h[f],m=this.hitTestMoveRecursive(p,this._isInteractive(t)?t:p.eventMode,r,i,s,o||s(e,r));if(m){if(m.length>0&&!m[m.length-1].parent)continue;const g=e.isInteractive();(m.length>0||g)&&(g&&this._allInteractiveElements.push(e),m.push(e)),this._hitElements.length===0&&(this._hitElements=m),a=!0}}}const l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?u?[e]:[]:null}hitTestRecursive(e,t,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(zc.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const h=l[u],f=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,r,i,s);if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();return(f.length>0||p)&&f.push(e),f}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var r;if(e.hitArea&&(e.worldTransform.applyInverse(t,ME),!e.hitArea.contains(ME.x,ME.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const r=`on${t}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Na)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,u;if(!(e instanceof Na)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==t.target){const h=e.type==="mousemove"?"mouseout":"pointerout",f=this.createPointerEvent(e,h,s);if(this.dispatchEvent(f,"pointerout"),r&&this.dispatchEvent(f,"mouseout"),!t.composedPath().includes(s)){const p=this.createPointerEvent(e,"pointerleave",s);for(p.eventPhase=p.AT_TARGET;p.target&&!t.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),r&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(f)}if(s!==t.target){const h=e.type==="mousemove"?"mouseover":"pointerover",f=this.clonePointerEvent(t,h);this.dispatchEvent(f,"pointerover"),r&&this.dispatchEvent(f,"mouseover");let p=s==null?void 0:s.parent;for(;p&&p!==this.rootTarget.parent&&p!==t.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const m=this.clonePointerEvent(t,"pointerenter");for(m.eventPhase=m.AT_TARGET;m.target&&m.target!==s&&m.target!==this.rootTarget.parent;)m.currentTarget=m.target,this.notifyTarget(m),r&&this.notifyTarget(m,"mouseenter"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(f)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=t.target)==null?void 0:u.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof Na)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Na)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Na)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=i.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Na)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),r=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Dp)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let r=1;r<e.length&&e[r].parent===t;r++)t=e[r];return t}createPointerEvent(e,t,r){const i=this.allocateEvent(Na);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(Dp);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const r=this.allocateEvent(Na);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=t??r.type,r}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Na&&t instanceof Na&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof Ex&&t instanceof Ex&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const r=e.currentTarget._events[t];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(t,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(t,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const YX=1,ZX={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},b2=class S2{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new QX(null),zc.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Na(null),this.rootWheelEvent=new Dp(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...S2.defaultEventFeatures},{set:(t,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:r}=this.renderer;this.setTargetElement(t),this.resolution=r,S2._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":t&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":t&&Object.assign(this.domElement.style,r);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=t.length;r<i;r++){const s=t[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,zc.pointerMoved();const t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const r=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let r=0,i=t.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,t[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,zc.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;zc.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;zc.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,r){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=YX),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,t.push(r)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ZX[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};b2.extension={name:"events",type:[Le.RendererSystem,Le.CanvasRendererSystem]},b2.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let E2=b2;it.add(E2);function EO(n){return n==="dynamic"||n==="static"}const JX={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??EO(E2.defaultEventMode)},set interactive(n){Gt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??E2.defaultEventMode},set eventMode(n){this._internalInteractive=EO(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;n=r?`${n}capture`:n;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(n,a,o)}),s?l.once(n,a,o):l.on(n,a,o)},removeEventListener(n,e,t){const r=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;n=r?`${n}capture`:n,e=typeof e=="function"?e:e.handleEvent,this.off(n,e,i)},dispatchEvent(n){if(!(n instanceof Xy))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};_r.mixin(JX);const eK={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};_r.mixin(eK);const tK=9,S1=100,nK=0,rK=0,AO=2,TO=1,iK=-1e3,sK=-1e3,oK=2;class j8{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Mu.tablet||Mu.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${S1}px`,t.style.height=`${S1}px`,t.style.position="absolute",t.style.top=`${nK}px`,t.style.left=`${rK}px`,t.style.zIndex=AO.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${TO}px`,e.style.height=`${TO}px`,e.style.position="absolute",e.style.top=`${iK}px`,e.style.left=`${sK}px`,e.style.zIndex=oK.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}update(){const e=performance.now();if(Mu.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,h=s/a*l;let f=this.div;f.style.left=`${t}px`,f.style.top=`${r}px`,f.style.width=`${o}px`,f.style.height=`${a}px`;for(let p=0;p<this.children.length;p++){const m=this.children[p];if(m.renderId!==this.renderId)m._accessibleActive=!1,Bp(this.children,p,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,p--;else{f=m._accessibleDiv;let g=m.hitArea;const v=m.worldTransform;m.hitArea?(f.style.left=`${(v.tx+g.x*v.a)*u}px`,f.style.top=`${(v.ty+g.y*v.d)*h}px`,f.style.width=`${g.width*v.a*u}px`,f.style.height=`${g.height*v.d*h}px`):(g=m.getBounds(),this.capHitArea(g),f.style.left=`${g.x*u}px`,f.style.top=`${g.y*h}px`,f.style.width=`${g.width*u}px`,f.style.height=`${g.height*h}px`,f.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(f.title=m.accessibleTitle),f.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&f.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==f.title||m.tabIndex!==f.tabIndex)&&(f.title=m.accessibleTitle,f.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:r}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${S1}px`,t.style.height=`${S1}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=AO.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new Xy(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===tK&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}j8.extension={name:"accessibility",type:[Le.RendererPlugin,Le.CanvasRendererPlugin]};it.add(j8);const H8=class A2{constructor(e){this.stage=new Zi,e=Object.assign({forceCanvas:!1},e),this.renderer=gX(e),A2._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const r=A2._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};H8._plugins=[];let eb=H8;it.handleByList(Le.Application,eb._plugins);class W8{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,r;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,r=s}this.renderer.resize(t,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}W8.extension=Le.Application;it.add(W8);const CO={loader:Le.LoadParser,resolver:Le.ResolveParser,cache:Le.CacheParser,detection:Le.DetectionParser};it.handle(Le.Asset,n=>{const e=n.ref;Object.entries(CO).filter(([t])=>!!e[t]).forEach(([t,r])=>it.add(Object.assign(e[t],{extension:e[t].extension??r})))},n=>{const e=n.ref;Object.keys(CO).filter(t=>!!e[t]).forEach(t=>it.remove(e[t]))});class aK{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<t;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function zm(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}function Mh(n,e){const t=n.split("?")[0],r=Wr.extname(t).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const Wa=(n,e,t=!1)=>(Array.isArray(n)||(n=[n]),e?n.map(r=>typeof r=="string"||t?e(r):r):n),T2=(n,e)=>{const t=e.split("?")[1];return t&&(n+=`?${t}`),n};function G8(n,e,t,r,i){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?G8(n.replace(r[t],a),e,t+1,r,i):i.push(n.replace(r[t],a))}}function lK(n){const e=/\{(.*?)\}/g,t=n.match(e),r=[];if(t){const i=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),G8(n,i,0,t,r)}else r.push(n);return r}const Ax=n=>!Array.isArray(n);class uK{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const r=Wa(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){i=l.getCacheableAssets(r,t);break}}i||(i={},r.forEach(a=>{i[a]=t}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof Fe){const a=t;r.forEach(l=>{a.baseTexture!==Fe.EMPTY.baseTexture&&Mt.addToCache(a.baseTexture,l),Fe.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const cd=new uK;class cK{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,r)=>(this._parsersValidated=!1,e[t]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,t,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),r.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,i,t,this))&&(i=await u.parse(i,t,this)||i,r.parser=u)}return i})(),r}async load(e,t){this._parsersValidated||this._validateParsers();let r=0;const i={},s=Ax(e),o=Wa(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const h=Wr.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),i[u.src]=await this.promiseCache[h].promise,t&&t(++r/a)}catch(f){throw delete this.promiseCache[h],delete i[u.src],new Error(`[Loader.load] Failed to load ${h}.
${f}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const t=Wa(e,r=>({alias:[r],src:r})).map(async r=>{var o,a;const i=Wr.toAbsolute(r.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,r,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var xa=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(xa||{});const hK=".json",dK="application/json",fK={extension:{type:Le.LoadParser,priority:xa.Low},name:"loadJson",test(n){return zm(n,dK)||Mh(n,hK)},async load(n){return await(await Xe.ADAPTER.fetch(n)).json()}};it.add(fK);const pK=".txt",mK="text/plain",gK={name:"loadTxt",extension:{type:Le.LoadParser,priority:xa.Low},test(n){return zm(n,mK)||Mh(n,pK)},async load(n){return await(await Xe.ADAPTER.fetch(n)).text()}};it.add(gK);const yK=["normal","bold","100","200","300","400","500","600","700","800","900"],vK=[".ttf",".otf",".woff",".woff2"],wK=["font/ttf","font/otf","font/woff","font/woff2"],xK=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function _K(n){const e=Wr.extname(n),t=Wr.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let r=t.length>0;for(const s of t)if(!s.match(xK)){r=!1;break}let i=t.join(" ");return r||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const bK=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function SK(n){return bK.test(n)?n:encodeURI(n)}const EK={extension:{type:Le.LoadParser,priority:xa.Low},name:"loadWebFont",test(n){return zm(n,wK)||Mh(n,vK)},async load(n,e){var r,i,s;const t=Xe.ADAPTER.getFontFaceSet();if(t){const o=[],a=((r=e.data)==null?void 0:r.family)??_K(n),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(h=>yK.includes(h)))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const f=l[h],p=new FontFace(a,`url(${SK(n)})`,{...u,weight:f});await p.load(),t.add(p),o.push(p)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(e=>Xe.ADAPTER.getFontFaceSet().delete(e))}};it.add(EK);const AK=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Fp=null,C2=class{constructor(){Fp||(Fp=URL.createObjectURL(new Blob([AK],{type:"application/javascript"}))),this.worker=new Worker(Fp)}};C2.revokeObjectURL=function(){Fp&&(URL.revokeObjectURL(Fp),Fp=null)};const TK=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Up=null;class V8{constructor(){Up||(Up=URL.createObjectURL(new Blob([TK],{type:"application/javascript"}))),this.worker=new Worker(Up)}}V8.revokeObjectURL=function(){Up&&(URL.revokeObjectURL(Up),Up=null)};let IO=0,OE;class CK{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new C2;t.addEventListener("message",r=>{t.terminate(),C2.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){OE===void 0&&(OE=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<OE&&(this._createdWorkers++,e=new V8().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),r=t.id;this.resolveHash[IO]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:IO++,id:r})}}const RO=new CK;function Ky(n,e,t){n.resource.internal=!0;const r=new Fe(n),i=()=>{delete e.promiseCache[t],cd.has(t)&&cd.remove(t)};return r.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),r.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const IK=[".jpeg",".jpg",".png",".webp",".avif"],RK=["image/jpeg","image/png","image/webp","image/avif"];async function PK(n){const e=await Xe.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const tb={name:"loadTextures",extension:{type:Le.LoadParser,priority:xa.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return zm(n,RK)||Mh(n,IK)},async load(n,e,t){var a;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;r?this.config.preferWorkers&&await RO.isImageBitmapSupported()?i=await RO.loadImageBitmap(n):i=await PK(n):i=await new Promise((l,u)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=n,h.complete?l(h):(h.onload=()=>l(h),h.onerror=f=>u(f))});const s={...e.data};s.resolution??(s.resolution=qu(n)),r&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Mt(i,s);return o.resource.src=n,Ky(o,t,n)},unload(n){n.destroy(!0)}};it.add(tb);const kK=".svg",MK="image/svg+xml",OK={extension:{type:Le.LoadParser,priority:xa.High},name:"loadSVG",test(n){return zm(n,MK)||Mh(n,kK)},async testParse(n){return g2.test(n)},async parse(n,e,t){var s;const r=new g2(n,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await r.load();const i=new Mt(r,{resolution:qu(n),...e==null?void 0:e.data});return i.resource.src=e.src,Ky(i,t,e.src)},async load(n,e){return(await Xe.ADAPTER.fetch(n)).text()},unload:tb.unload};it.add(OK);const NK=[".mp4",".m4v",".webm",".ogv"],BK=["video/mp4","video/webm","video/ogg"],LK={name:"loadVideo",extension:{type:Le.LoadParser,priority:xa.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return zm(n,BK)||Mh(n,NK)},async load(n,e,t){var o;let r;const i=await(await Xe.ADAPTER.fetch(n)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new U8(s,a);await l.load();const u=new Mt(l,{alphaMode:await jV(),resolution:qu(n),...e==null?void 0:e.data});u.resource.src=n,r=Ky(u,t,n),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return r},unload(n){n.destroy(!0)}};it.add(LK);class DK{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(t[r])}`).join("&")}}getAlias(e){const{alias:t,name:r,src:i,srcs:s}=e;return Wa(t||r||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const r=[];Array.isArray(t)?t.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);r.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(e,u));r.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(t).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{const o=t[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}r.push(...s)}),this._bundles[e]=r}add(e,t,r,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Gt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:r,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Wa(o).forEach(l=>{const{src:u,srcs:h}=l;let{data:f,format:p,loadParser:m}=l;const g=Wa(u||h).map(b=>typeof b=="string"?lK(b):Array.isArray(b)?b:[b]),v=this.getAlias(l);Array.isArray(v)?v.forEach(a):a(v);const x=[];g.forEach(b=>{b.forEach(S=>{let _={};if(typeof S!="object"){_.src=S;for(let R=0;R<this._parsers.length;R++){const D=this._parsers[R];if(D.test(S)){_=D.parse(S);break}}}else f=S.data??f,p=S.format??p,m=S.loadParser??m,_={..._,...S};if(!v)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:v,data:f,format:p,loadParser:m}),x.push(_)})}),v.forEach(b=>{this._assetMap[b]=x})})}resolveBundle(e){const t=Ax(e);e=Wa(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}r[i]=a}}),t?r[e[0]]:r}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const r={};for(const i in t)r[i]=t[i].src;return r}return t.src}resolve(e){const t=Ax(e);e=Wa(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=s.filter(f=>f[l]?f[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),t?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:r,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Wr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Wr.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class FK{constructor(){this._detections=[],this._initialized=!1,this.resolver=new DK,this.loader=new cK,this.cache=cd,this._backgroundLoader=new aK(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,r,i,s){this.resolver.add(e,t,r,i,s)}async load(e,t){this._initialized||await this.init();const r=Ax(e),i=Wa(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,t);return r?o[i[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const u=()=>{t==null||t(++a/l)},h=o.map(f=>{const p=i[f];return l+=Object.keys(p).length,this._mapLoadToResolve(p,u).then(m=>{s[f]=m})});return await Promise.all(h),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return cd.get(e);const t={};for(let r=0;r<e.length;r++)t[r]=cd.get(e[r]);return t}async _mapLoadToResolve(e,t){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,t);this._backgroundLoader.active=!0;const o={};return r.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[i[l]]=u,cd.set(h,u)}),o}async unload(e){this._initialized||await this.init();const t=Wa(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(t);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=Wa(e);const t=this.resolver.resolveBundle(e),r=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(r)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(r=>{cd.remove(r.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?t=await r.add(t):e.skipDetections||(t=await r.remove(t));return t=t.filter((r,i)=>t.indexOf(r)===i),t}get detections(){return this._detections}get preferWorkers(){return tb.config.preferWorkers}set preferWorkers(e){Gt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(r=>r in e).forEach(r=>{t.config[r]=e[r]})})}}const E1=new FK;it.handleByList(Le.LoadParser,E1.loader.parsers).handleByList(Le.ResolveParser,E1.resolver.parsers).handleByList(Le.CacheParser,E1.cache.parsers).handleByList(Le.DetectionParser,E1.detections);const UK={extension:Le.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof Fe),getCacheableAssets:(n,e)=>{const t={};return n.forEach(r=>{e.forEach((i,s)=>{t[r+(s===0?"":s+1)]=i})}),t}};it.add(UK);async function q8(n){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(n)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const zK={extension:{type:Le.DetectionParser,priority:1},test:async()=>q8("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(e=>e!=="avif")};it.add(zK);const $K={extension:{type:Le.DetectionParser,priority:0},test:async()=>q8("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(e=>e!=="webp")};it.add($K);const PO=["png","jpg","jpeg"],jK={extension:{type:Le.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...PO],remove:async n=>n.filter(e=>!PO.includes(e))};it.add(jK);const HK="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function aR(n){return HK?!1:document.createElement("video").canPlayType(n)!==""}const WK={extension:{type:Le.DetectionParser,priority:0},test:async()=>aR("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(e=>e!=="webm")};it.add(WK);const GK={extension:{type:Le.DetectionParser,priority:0},test:async()=>aR("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(e=>e!=="mp4"&&e!=="m4v")};it.add(GK);const VK={extension:{type:Le.DetectionParser,priority:0},test:async()=>aR("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(e=>e!=="ogv")};it.add(VK);const qK={extension:Le.ResolveParser,test:tb.test,parse:n=>{var e;return{resolution:parseFloat(((e=Xe.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:Wr.extname(n).slice(1),src:n}}};it.add(qK);var $i=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))($i||{});const Tx={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let kl,Yf;function kO(){Yf={bptc:kl.getExtension("EXT_texture_compression_bptc"),astc:kl.getExtension("WEBGL_compressed_texture_astc"),etc:kl.getExtension("WEBGL_compressed_texture_etc"),s3tc:kl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:kl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:kl.getExtension("WEBGL_compressed_texture_pvrtc")||kl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:kl.getExtension("WEBGL_compressed_texture_etc1"),atc:kl.getExtension("WEBGL_compressed_texture_atc")}}const XK={extension:{type:Le.DetectionParser,priority:2},test:async()=>{const n=Xe.ADAPTER.createCanvas().getContext("webgl");return n?(kl=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{Yf||kO();const e=[];for(const t in Yf)Yf[t]&&e.push(t);return[...e,...n]},remove:async n=>(Yf||kO(),n.filter(e=>!(e in Yf)))};it.add(XK);class KK extends X_{constructor(e,t={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,t),this.origin=r,this.buffer=i?new r2(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new r2(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Ld extends KK{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=Ld._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||Ld._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:h}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=Ld._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,r,i,s,o,a){const l=new Array(r);let u=e.byteOffset,h=o,f=a,p=h+i-1&~(i-1),m=f+s-1&~(s-1),g=p*m*Tx[t];for(let v=0;v<r;v++)l[v]={levelID:v,levelWidth:r>1?h:p,levelHeight:r>1?f:m,levelBuffer:new Uint8Array(e.buffer,u,g)},u+=g,h=h>>1||1,f=f>>1||1,p=h+i-1&~(i-1),m=f+s-1&~(s-1),g=p*m*Tx[t];return l}}const NE=4,A1=124,QK=32,MO=20,YK=542327876,T1={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},ZK={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},C1={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},JK=1,eQ=2,tQ=4,nQ=64,rQ=512,iQ=131072,sQ=827611204,oQ=861165636,aQ=894720068,lQ=808540228,uQ=4,cQ={[sQ]:$i.COMPRESSED_RGBA_S3TC_DXT1_EXT,[oQ]:$i.COMPRESSED_RGBA_S3TC_DXT3_EXT,[aQ]:$i.COMPRESSED_RGBA_S3TC_DXT5_EXT},hQ={70:$i.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:$i.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:$i.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:$i.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:$i.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:$i.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:$i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:$i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:$i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:$i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:$i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:$i.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:$i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function dQ(n){const e=new Uint32Array(n);if(e[0]!==YK)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(n,0,A1/Uint32Array.BYTES_PER_ELEMENT),r=t[T1.HEIGHT],i=t[T1.WIDTH],s=t[T1.MIPMAP_COUNT],o=new Uint32Array(n,T1.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,QK/Uint32Array.BYTES_PER_ELEMENT),a=o[JK];if(a&tQ){const l=o[ZK.FOURCC];if(l!==lQ){const S=cQ[l],_=NE+A1,R=new Uint8Array(n,_);return[new Ld(R,{format:S,width:i,height:r,levels:s})]}const u=NE+A1,h=new Uint32Array(e.buffer,u,MO/Uint32Array.BYTES_PER_ELEMENT),f=h[C1.DXGI_FORMAT],p=h[C1.RESOURCE_DIMENSION],m=h[C1.MISC_FLAG],g=h[C1.ARRAY_SIZE],v=hQ[f];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(m===uQ)throw new Error("DDSParser does not support cubemap textures");if(p===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,b=NE+A1+MO;if(g===1)x.push(new Uint8Array(n,b));else{const S=Tx[v];let _=0,R=i,D=r;for(let H=0;H<s;H++){const G=Math.max(1,R+3&-4),K=Math.max(1,D+3&-4),te=G*K*S;_+=te,R=R>>>1,D=D>>>1}let j=b;for(let H=0;H<g;H++)x.push(new Uint8Array(n,j,_)),j+=_}return x.map(S=>new Ld(S,{format:v,width:i,height:r,levels:s}))}throw a&nQ?new Error("DDSParser does not support uncompressed texture data."):a&rQ?new Error("DDSParser does not supported YUV uncompressed texture data."):a&iQ?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&eQ?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const OO=[171,75,84,88,32,49,49,187,13,10,26,10],fQ=67305985,Pa={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},I2=64,NO={[dt.UNSIGNED_BYTE]:1,[dt.UNSIGNED_SHORT]:2,[dt.INT]:4,[dt.UNSIGNED_INT]:4,[dt.FLOAT]:4,[dt.HALF_FLOAT]:8},pQ={[Me.RGBA]:4,[Me.RGB]:3,[Me.RG]:2,[Me.RED]:1,[Me.LUMINANCE]:1,[Me.LUMINANCE_ALPHA]:2,[Me.ALPHA]:1},mQ={[dt.UNSIGNED_SHORT_4_4_4_4]:2,[dt.UNSIGNED_SHORT_5_5_5_1]:2,[dt.UNSIGNED_SHORT_5_6_5]:2};function gQ(n,e,t=!1){const r=new DataView(e);if(!yQ(n,r))return null;const i=r.getUint32(Pa.ENDIANNESS,!0)===fQ,s=r.getUint32(Pa.GL_TYPE,i),o=r.getUint32(Pa.GL_FORMAT,i),a=r.getUint32(Pa.GL_INTERNAL_FORMAT,i),l=r.getUint32(Pa.PIXEL_WIDTH,i),u=r.getUint32(Pa.PIXEL_HEIGHT,i)||1,h=r.getUint32(Pa.PIXEL_DEPTH,i)||1,f=r.getUint32(Pa.NUMBER_OF_ARRAY_ELEMENTS,i)||1,p=r.getUint32(Pa.NUMBER_OF_FACES,i),m=r.getUint32(Pa.NUMBER_OF_MIPMAP_LEVELS,i),g=r.getUint32(Pa.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(p!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");const v=4,x=4,b=l+3&-4,S=u+3&-4,_=new Array(f);let R=l*u;s===0&&(R=b*S);let D;if(s!==0?NO[s]?D=NO[s]*pQ[o]:D=mQ[s]:D=Tx[a],D===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const j=t?wQ(r,g,i):null;let H=R*D,G=l,K=u,te=b,ne=S,ee=I2+g;for(let L=0;L<m;L++){const w=r.getUint32(ee,i);let A=ee+4;for(let O=0;O<f;O++){let C=_[O];C||(C=_[O]=new Array(m)),C[L]={levelID:L,levelWidth:m>1||s!==0?G:te,levelHeight:m>1||s!==0?K:ne,levelBuffer:new Uint8Array(e,A,H)},A+=H}ee+=w+4,ee=ee%4!==0?ee+4-ee%4:ee,G=G>>1||1,K=K>>1||1,te=G+v-1&~(v-1),ne=K+x-1&~(x-1),H=te*ne*D}return s!==0?{uncompressed:_.map(L=>{let w=L[0].levelBuffer,A=!1;return s===dt.FLOAT?w=new Float32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4):s===dt.UNSIGNED_INT?(A=!0,w=new Uint32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4)):s===dt.INT&&(A=!0,w=new Int32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4)),{resource:new X_(w,{width:L[0].levelWidth,height:L[0].levelHeight}),type:s,format:A?vQ(o):o}}),kvData:j}:{compressed:_.map(L=>new Ld(null,{format:a,width:l,height:u,levels:m,levelBuffers:L})),kvData:j}}function yQ(n,e){for(let t=0;t<OO.length;t++)if(e.getUint8(t)!==OO[t])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function vQ(n){switch(n){case Me.RGBA:return Me.RGBA_INTEGER;case Me.RGB:return Me.RGB_INTEGER;case Me.RG:return Me.RG_INTEGER;case Me.RED:return Me.RED_INTEGER;default:return n}}function wQ(n,e,t){const r=new Map;let i=0;for(;i<e;){const s=n.getUint32(I2+i,t),o=I2+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&n.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(n.buffer,o,l)),h=new DataView(n.buffer,o+l+1,s-l-1);r.set(u,h),i+=4+s+a}return r}const xQ={extension:{type:Le.LoadParser,priority:xa.High},name:"loadDDS",test(n){return Mh(n,".dds")},async load(n,e,t){const r=await(await Xe.ADAPTER.fetch(n)).arrayBuffer(),i=dQ(r).map(s=>{const o=new Mt(s,{mipmap:Zl.OFF,alphaMode:to.NO_PREMULTIPLIED_ALPHA,resolution:qu(n),...e.data});return Ky(o,t,n)});return i.length===1?i[0]:i},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};it.add(xQ);const _Q={extension:{type:Le.LoadParser,priority:xa.High},name:"loadKTX",test(n){return Mh(n,".ktx")},async load(n,e,t){const r=await(await Xe.ADAPTER.fetch(n)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=gQ(n,r),a=i??s,l={mipmap:Zl.OFF,alphaMode:to.NO_PREMULTIPLIED_ALPHA,resolution:qu(n),...e.data},u=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const f=h.resource??h,p=new Mt(f,l);return p.ktxKeyValueData=o,Ky(p,t,n)});return u.length===1?u[0]:u},unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};it.add(_Q);const bQ=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],SQ={extension:Le.ResolveParser,test:n=>{const e=Wr.extname(n).slice(1);return["basis","ktx","dds"].includes(e)},parse:n=>{var r,i;const e=n.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const s=e.pop();if(bQ.includes(s))return{resolution:parseFloat(((r=Xe.RETINA_PREFIX.exec(n))==null?void 0:r[1])??"1"),format:s,src:n}}return{resolution:parseFloat(((i=Xe.RETINA_PREFIX.exec(n))==null?void 0:i[1])??"1"),format:t,src:n}}};it.add(SQ);const I1=new It,EQ=4,X8=class Qg{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,r,i){const s=new Image;return s.src=await this.base64(e,t,r,i),s}async base64(e,t,r,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},t,r)});if(s.toDataURL!==void 0)return s.toDataURL(t,r);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:r});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&Qg._flipY(r,i,s),a&&Qg._unpremultiplyAlpha(r);const l=new iq(i,s,1),u=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&Qg._flipY(r,i,s),a&&Qg._unpremultiplyAlpha(r),r}_rawPixels(e,t){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof af?a=e:(a=r.generateTexture(e,{region:t,resolution:r.resolution,multisample:r.multisample}),l=!0,t&&(I1.width=t.width,I1.height=t.height,t=I1)));const u=r.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===Me.RGBA,!l){r.renderTexture.bind(a);const m=a.framebuffer.glFramebuffers[r.CONTEXT_UID];m.blitFramebuffer&&r.framebuffer.bind(m.blitFramebuffer)}}else i=r.resolution,t||(t=I1,t.width=r.width/i,t.height=r.height/i),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const h=Math.max(Math.round(t.width*i),1),f=Math.max(Math.round(t.height*i),1),p=new Uint8Array(EQ*h*f);return u.readPixels(Math.round(t.x*i),Math.round(t.y*i),h,f,u.RGBA,u.UNSIGNED_BYTE,p),l&&(a==null||a.destroy(!0)),{pixels:p,width:h,height:f,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,r){const i=t<<2,s=r>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,u=(r-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,u,u+i),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let r=0;r<t;r+=4){const i=e[r+3];if(i!==0){const s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}};X8.extension={name:"extract",type:Le.RendererSystem};let AQ=X8;it.add(AQ);const Cx={build(n){const e=n.points;let t,r,i,s,o,a;if(n.type===Xi.CIRC){const g=n.shape;t=g.x,r=g.y,o=a=g.radius,i=s=0}else if(n.type===Xi.ELIP){const g=n.shape;t=g.x,r=g.y,o=g.width,a=g.height,i=s=0}else{const g=n.shape,v=g.width/2,x=g.height/2;t=g.x+v,r=g.y+x,o=a=Math.max(0,Math.min(g.radius,Math.min(v,x))),i=v-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(i?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=r+s,e[2]=e[4]=t-i,e[5]=e[7]=r-s;return}let h=0,f=l*4+(i?2:0)+2,p=f,m=u;{const g=i+o,v=s,x=t+g,b=t-g,S=r+v;if(e[h++]=x,e[h++]=S,e[--f]=S,e[--f]=b,s){const _=r-v;e[p++]=b,e[p++]=_,e[--m]=_,e[--m]=x}}for(let g=1;g<l;g++){const v=Math.PI/2*(g/l),x=i+Math.cos(v)*o,b=s+Math.sin(v)*a,S=t+x,_=t-x,R=r+b,D=r-b;e[h++]=S,e[h++]=R,e[--f]=R,e[--f]=_,e[p++]=_,e[p++]=D,e[--m]=D,e[--m]=S}{const g=i,v=s+a,x=t+g,b=t-g,S=r+v,_=r-v;e[h++]=x,e[h++]=S,e[--m]=_,e[--m]=x,i&&(e[h++]=b,e[h++]=S,e[--m]=_,e[--m]=b)}},triangulate(n,e){const t=n.points,r=e.points,i=e.indices;if(t.length===0)return;let s=r.length/2;const o=s;let a,l;if(n.type!==Xi.RREC){const h=n.shape;a=h.x,l=h.y}else{const h=n.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=n.matrix;r.push(n.matrix?u.a*a+u.c*l+u.tx:a,n.matrix?u.b*a+u.d*l+u.ty:l),s++,r.push(t[0],t[1]);for(let h=2;h<t.length;h+=2)r.push(t[h],t[h+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function BO(n,e=!1){const t=n.length;if(t<6)return;let r=0;for(let i=0,s=n[t-2],o=n[t-1];i<t;i+=2){const a=n[i],l=n[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=t/2;for(let s=i+i%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,u=s+1;[n[o],n[l]]=[n[l],n[o]],[n[a],n[u]]=[n[u],n[a]]}}}const K8={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let t=n.points;const r=n.holes,i=e.points,s=e.indices;if(t.length>=6){BO(t,!1);const o=[];for(let u=0;u<r.length;u++){const h=r[u];BO(h.points,!0),o.push(t.length/2),t=t.concat(h.points)}const a=TW(t,o,2);if(!a)return;const l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<t.length;u++)i.push(t[u])}}},TQ={build(n){const e=n.shape,t=e.x,r=e.y,i=e.width,s=e.height,o=n.points;o.length=0,i>=0&&s>=0&&o.push(t,r,t+i,r,t+i,r+s,t,r+s)},triangulate(n,e){const t=n.points,r=e.points;if(t.length===0)return;const i=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},CQ={build(n){Cx.build(n)},triangulate(n,e){Cx.triangulate(n,e)}};var Jo=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(Jo||{}),eh=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(eh||{});const vm={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class LO{static curveTo(e,t,r,i,s,o){const a=o[o.length-2],l=o[o.length-1]-t,u=a-e,h=i-t,f=r-e,p=Math.abs(l*f-u*h);if(p<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const m=l*l+u*u,g=h*h+f*f,v=l*h+u*f,x=s*Math.sqrt(m)/p,b=s*Math.sqrt(g)/p,S=x*v/m,_=b*v/g,R=x*f+b*u,D=x*h+b*l,j=u*(b+S),H=l*(b+S),G=f*(x+_),K=h*(x+_),te=Math.atan2(H-D,j-R),ne=Math.atan2(K-D,G-R);return{cx:R+e,cy:D+t,radius:s,startAngle:te,endAngle:ne,anticlockwise:u*h>f*l}}static arc(e,t,r,i,s,o,a,l,u){const h=a-o,f=vm._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/vx)*40),p=h/(f*2),m=p*2,g=Math.cos(p),v=Math.sin(p),x=f-1,b=x%1/x;for(let S=0;S<=x;++S){const _=S+b*S,R=p+o+m*_,D=Math.cos(R),j=-Math.sin(R);u.push((g*D+v*j)*s+r,(g*-j+v*D)*s+i)}}}class IQ{constructor(){this.reset()}begin(e,t,r){this.reset(),this.style=e,this.start=t,this.attribStart=r}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class lR{static curveLength(e,t,r,i,s,o,a,l){let u=0,h=0,f=0,p=0,m=0,g=0,v=0,x=0,b=0,S=0,_=0,R=e,D=t;for(let j=1;j<=10;++j)h=j/10,f=h*h,p=f*h,m=1-h,g=m*m,v=g*m,x=v*e+3*g*h*r+3*m*f*s+p*a,b=v*t+3*g*h*i+3*m*f*o+p*l,S=R-x,_=D-b,R=x,D=b,u+=Math.sqrt(S*S+_*_);return u}static curveTo(e,t,r,i,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=vm._segmentsCount(lR.curveLength(l,u,e,t,r,i,s,o));let f=0,p=0,m=0,g=0,v=0;a.push(l,u);for(let x=1,b=0;x<=h;++x)b=x/h,f=1-b,p=f*f,m=p*f,g=b*b,v=g*b,a.push(m*l+3*p*b*e+3*f*g*r+v*s,m*u+3*p*b*t+3*f*g*i+v*o)}}function DO(n,e,t,r,i,s,o,a){const l=n-t*i,u=e-r*i,h=n+t*s,f=e+r*s;let p,m;o?(p=r,m=-t):(p=-r,m=t);const g=l+p,v=u+m,x=h+p,b=f+m;return a.push(g,v,x,b),2}function qh(n,e,t,r,i,s,o,a){const l=t-n,u=r-e;let h=Math.atan2(l,u),f=Math.atan2(i-n,s-e);a&&h<f?h+=Math.PI*2:!a&&h>f&&(f+=Math.PI*2);let p=h;const m=f-h,g=Math.abs(m),v=Math.sqrt(l*l+u*u),x=(15*g*Math.sqrt(v)/Math.PI>>0)+1,b=m/x;if(p+=b,a){o.push(n,e,t,r);for(let S=1,_=p;S<x;S++,_+=b)o.push(n,e,n+Math.sin(_)*v,e+Math.cos(_)*v);o.push(n,e,i,s)}else{o.push(t,r,n,e);for(let S=1,_=p;S<x;S++,_+=b)o.push(n+Math.sin(_)*v,e+Math.cos(_)*v,n,e);o.push(i,s,n,e)}return x*2}function RQ(n,e){const t=n.shape;let r=n.points||t.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=n.lineStyle,o=new St(r[0],r[1]),a=new St(r[r.length-2],r[r.length-1]),l=t.type!==Xi.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const C=(o.x+a.x)*.5,k=(a.y+o.y)*.5;r.unshift(C,k),r.push(C,k)}const h=e.points,f=r.length/2;let p=r.length;const m=h.length/2,g=s.width/2,v=g*g,x=s.miterLimit*s.miterLimit;let b=r[0],S=r[1],_=r[2],R=r[3],D=0,j=0,H=-(S-R),G=b-_,K=0,te=0,ne=Math.sqrt(H*H+G*G);H/=ne,G/=ne,H*=g,G*=g;const ee=s.alignment,L=(1-ee)*2,w=ee*2;l||(s.cap===eh.ROUND?p+=qh(b-H*(L-w)*.5,S-G*(L-w)*.5,b-H*L,S-G*L,b+H*w,S+G*w,h,!0)+2:s.cap===eh.SQUARE&&(p+=DO(b,S,H,G,L,w,!0,h))),h.push(b-H*L,S-G*L,b+H*w,S+G*w);for(let C=1;C<f-1;++C){b=r[(C-1)*2],S=r[(C-1)*2+1],_=r[C*2],R=r[C*2+1],D=r[(C+1)*2],j=r[(C+1)*2+1],H=-(S-R),G=b-_,ne=Math.sqrt(H*H+G*G),H/=ne,G/=ne,H*=g,G*=g,K=-(R-j),te=_-D,ne=Math.sqrt(K*K+te*te),K/=ne,te/=ne,K*=g,te*=g;const k=_-b,U=S-R,z=_-D,N=j-R,T=k*z+U*N,V=U*z-N*k,oe=V<0;if(Math.abs(V)<.001*Math.abs(T)){h.push(_-H*L,R-G*L,_+H*w,R+G*w),T>=0&&(s.join===Jo.ROUND?p+=qh(_,R,_-H*L,R-G*L,_-K*L,R-te*L,h,!1)+4:p+=2,h.push(_-K*w,R-te*w,_+K*L,R+te*L));continue}const ge=(-H+b)*(-G+R)-(-H+_)*(-G+S),we=(-K+D)*(-te+R)-(-K+_)*(-te+j),Re=(k*we-z*ge)/V,Ne=(N*ge-U*we)/V,Ue=(Re-_)*(Re-_)+(Ne-R)*(Ne-R),Ye=_+(Re-_)*L,Ce=R+(Ne-R)*L,ze=_-(Re-_)*w,ft=R-(Ne-R)*w,xt=Math.min(k*k+U*U,z*z+N*N),vt=oe?L:w,Yn=xt+vt*vt*v,Ut=Ue<=Yn;let Nt=s.join;if(Nt===Jo.MITER&&Ue/v>x&&(Nt=Jo.BEVEL),Ut)switch(Nt){case Jo.MITER:{h.push(Ye,Ce,ze,ft);break}case Jo.BEVEL:{oe?h.push(Ye,Ce,_+H*w,R+G*w,Ye,Ce,_+K*w,R+te*w):h.push(_-H*L,R-G*L,ze,ft,_-K*L,R-te*L,ze,ft),p+=2;break}case Jo.ROUND:{oe?(h.push(Ye,Ce,_+H*w,R+G*w),p+=qh(_,R,_+H*w,R+G*w,_+K*w,R+te*w,h,!0)+4,h.push(Ye,Ce,_+K*w,R+te*w)):(h.push(_-H*L,R-G*L,ze,ft),p+=qh(_,R,_-H*L,R-G*L,_-K*L,R-te*L,h,!1)+4,h.push(_-K*L,R-te*L,ze,ft));break}}else{switch(h.push(_-H*L,R-G*L,_+H*w,R+G*w),Nt){case Jo.MITER:{oe?h.push(ze,ft,ze,ft):h.push(Ye,Ce,Ye,Ce),p+=2;break}case Jo.ROUND:{oe?p+=qh(_,R,_+H*w,R+G*w,_+K*w,R+te*w,h,!0)+2:p+=qh(_,R,_-H*L,R-G*L,_-K*L,R-te*L,h,!1)+2;break}}h.push(_-K*L,R-te*L,_+K*w,R+te*w),p+=2}}b=r[(f-2)*2],S=r[(f-2)*2+1],_=r[(f-1)*2],R=r[(f-1)*2+1],H=-(S-R),G=b-_,ne=Math.sqrt(H*H+G*G),H/=ne,G/=ne,H*=g,G*=g,h.push(_-H*L,R-G*L,_+H*w,R+G*w),l||(s.cap===eh.ROUND?p+=qh(_-H*(L-w)*.5,R-G*(L-w)*.5,_-H*L,R-G*L,_+H*w,R+G*w,h,!1)+2:s.cap===eh.SQUARE&&(p+=DO(_,R,H,G,L,w,!1,h)));const A=e.indices,O=vm.epsilon*vm.epsilon;for(let C=m;C<p+m-2;++C)b=h[C*2],S=h[C*2+1],_=h[(C+1)*2],R=h[(C+1)*2+1],D=h[(C+2)*2],j=h[(C+2)*2+1],!(Math.abs(b*(R-j)+_*(j-S)+D*(S-R))<O)&&A.push(C,C+1,C+2)}function PQ(n,e){let t=0;const r=n.shape,i=n.points||r.points,s=r.type!==Xi.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,u=o.length/2;let h=u;for(o.push(i[0],i[1]),t=1;t<l;t++)o.push(i[t*2],i[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function FO(n,e){n.lineStyle.native?PQ(n,e):RQ(n,e)}class uR{static curveLength(e,t,r,i,s,o){const a=e-2*r+s,l=t-2*i+o,u=2*r-2*e,h=2*i-2*t,f=4*(a*a+l*l),p=4*(a*u+l*h),m=u*u+h*h,g=2*Math.sqrt(f+p+m),v=Math.sqrt(f),x=2*f*v,b=2*Math.sqrt(m),S=p/v;return(x*g+v*p*(g-b)+(4*m*f-p*p)*Math.log((2*v+S+g)/(S+b)))/(4*x)}static curveTo(e,t,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=vm._segmentsCount(uR.curveLength(o,a,e,t,r,i));let u=0,h=0;for(let f=1;f<=l;++f){const p=f/l;u=o+(e-o)*p,h=a+(t-a)*p,s.push(u+(e+(r-e)*p-u)*p,h+(t+(i-t)*p-h)*p)}}}const BE={[Xi.POLY]:K8,[Xi.CIRC]:Cx,[Xi.ELIP]:Cx,[Xi.RECT]:TQ,[Xi.RREC]:CQ},UO=[],R1=[];class Ix{constructor(e,t=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new Ix(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Uf=new St,Q8=class Y8 extends r8{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Sx,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),R1.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),UO.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,r=null,i=null){const s=new Ix(e,t,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const r=new Ix(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let r=0;r<t.length;++r){const i=t[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Uf):Uf.copyFrom(e),i.shape.contains(Uf.x,Uf.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Uf.x,Uf.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const u=t[l],h=u.fillStyle,f=u.lineStyle;BE[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||f.visible)&&this.processHoles(u.holes);for(let p=0;p<2;p++){const m=p===0?h:f;if(!m.visible)continue;const g=m.texture.baseTexture,v=this.indices.length,x=this.points.length/2;g.wrapMode=Du.REPEAT,p===0?this.processFill(u):this.processLine(u);const b=this.points.length/2-x;b!==0&&(r&&!this._compareStyles(i,m)&&(r.end(v,x),r=null),r||(r=UO.pop()||new IQ,r.begin(m,v,x),this.batches.push(r),i=m),this.addUvs(this.points,e,m.texture,x,b,m.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,r=e.length;t<r;t++){const i=e[t];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Y8.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Mt._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),R1.push(this.drawCalls[f]);this.drawCalls.length=0;const t=this.colors,r=this.textureIds;let i=R1.pop();i||(i=new o2,i.texArray=new c2),i.texArray.count=0,i.start=0,i.size=0,i.type=Va.TRIANGLES;let s=0,o=null,a=0,l=!1,u=Va.TRIANGLES,h=0;this.drawCalls.push(i);for(let f=0;f<this.batches.length;f++){const p=this.batches[f],m=8,g=p.style,v=g.texture.baseTexture;l!==!!g.native&&(l=!!g.native,u=l?Va.LINES:Va.TRIANGLES,o=null,s=m,e++),o!==v&&(o=v,v._batchEnabled!==e&&(s===m&&(e++,s=0,i.size>0&&(i=R1.pop(),i||(i=new o2,i.texArray=new c2),this.drawCalls.push(i)),i.start=h,i.size=0,i.texArray.count=0,i.type=u),v.touched=1,v._batchEnabled=e,v._batchLocation=s,v.wrapMode=Du.REPEAT,i.texArray.elements[i.texArray.count++]=v,s++)),i.size+=p.size,h+=p.size,a=v._batchLocation,this.addColors(t,g.color,g.alpha,p.attribSize,p.attribStart),this.addTextureIds(r,a,p.attribSize,p.attribStart)}Mt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=t[u*2],o[l++]=t[u*2+1],a[l++]=r[u],o[l++]=i[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?K8.triangulate(e,this):BE[e.type].triangulate(e,this)}processLine(e){FO(e,this);for(let t=0;t<e.holes.length;t++)FO(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const r=e[t];BE[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let r=0;r<e.length/2;r++){const i=e[r*2],s=e[r*2+1];e[r*2]=t.a*i+t.c*s+t.tx,e[r*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,r,i,s=0){const o=Kn.shared.setValue(t).toLittleEndianNumber(),a=Kn.shared.setValue(o).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,t,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=t}addUvs(e,t,r,i,s,o=null){let a=0;const l=t.length,u=r.frame;for(;a<s;){let f=e[(i+a)*2],p=e[(i+a)*2+1];if(o){const m=o.a*f+o.c*p+o.tx;p=o.b*f+o.d*p+o.ty,f=m}a++,t.push(f/u.width,p/u.height)}const h=r.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(t,r,l,s)}adjustUvs(e,t,r,i){const s=t.baseTexture,o=1e-6,a=r+i*2,l=t.frame,u=l.width/s.width,h=l.height/s.height;let f=l.x/l.width,p=l.y/l.height,m=Math.floor(e[r]+o),g=Math.floor(e[r+1]+o);for(let v=r+2;v<a;v+=2)m=Math.min(m,Math.floor(e[v]+o)),g=Math.min(g,Math.floor(e[v+1]+o));f-=m,p-=g;for(let v=r;v<a;v+=2)e[v]=(e[v]+f)*u,e[v+1]=(e[v+1]+p)*h}};Q8.BATCHABLE_SIZE=100;let kQ=Q8;class nb{constructor(){this.color=16777215,this.alpha=1,this.texture=Fe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new nb;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Fe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class cR extends nb{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=eh.BUTT,this.join=Jo.MITER,this.miterLimit=10}clone(){const e=new cR;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=eh.BUTT,this.join=Jo.MITER,this.miterLimit=10}}const LE={},R2=class Rw extends Zi{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new nb,this._lineStyle=new cR,this._matrix=null,this._holeMode=!1,this.state=ru.for2d(),this._geometry=e||new kQ,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Kn(16777215),this.blendMode=At.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Rw(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Fe.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:eh.BUTT,join:Jo.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Bd,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Bd,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==t)&&r.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,r,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),uR.curveTo(e,t,r,i,s),this}bezierCurveTo(e,t,r,i,s,o){return this._initCurve(),lR.curveTo(e,t,r,i,s,o,this.currentPath.points),this}arcTo(e,t,r,i,s){this._initCurve(e,t);const o=this.currentPath.points,a=LO.curveTo(e,t,r,i,s,o);if(a){const{cx:l,cy:u,radius:h,startAngle:f,endAngle:p,anticlockwise:m}=a;this.arc(l,u,h,f,p,m)}return this}arc(e,t,r,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=vx:o&&i<=s&&(i+=vx),s-i===0)return this;const a=e+Math.cos(i)*r,l=t+Math.sin(i)*r,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const f=Math.abs(h[h.length-2]-a),p=Math.abs(h[h.length-1]-l);f<u&&p<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return LO.arc(a,l,e,t,r,i,s,o,h),this}beginFill(e=0,t){return this.beginTextureFill({texture:Fe.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Kn.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Fe.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,r,i){return this.drawShape(new It(e,t,r,i))}drawRoundedRect(e,t,r,i,s){return this.drawShape(new Y_(e,t,r,i,s))}drawCircle(e,t,r){return this.drawShape(new K_(e,t,r))}drawEllipse(e,t,r,i){return this.drawShape(new Q_(e,t,r,i))}drawPolygon(...e){let t,r=!0;const i=e[0];i.points?(r=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new Bd(t);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Xi.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:t,indices:u,uvs:l,_batchRGB:Kn.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,r=this.batches.length;t<r;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const t=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=t.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,Kn.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(r,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:r,type:i,size:s,start:o}=t,a=r.count;for(let l=0;l<a;l++)e.texture.bind(r.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader;const r=this.pluginName;if(!t){if(!LE[r]){const{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new lr,default:Ya.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;LE[r]=new Yl(a,o)}t=LE[r]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Rw._TEMP_POINT),this._geometry.containsPoint(Rw._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Kn.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,r=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this._geometry.points,h=this.vertexData;let f=0;for(let p=0;p<u.length;p+=2){const m=u[p],g=u[p+1];h[f++]=r*m+s*g+a,h[f++]=o*g+i*m+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};R2.curves=vm,R2._TEMP_POINT=new St;let b0=R2;class MQ{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const DE=new St,zO=new Bd,Z8=class J8 extends Zi{constructor(e,t,r,i=Va.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=r||ru.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Xe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Va.TRIANGLES&&t.length<J8.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,f=this.vertexData;for(let p=0;p<f.length/2;p++){const m=t[p*2],g=t[p*2+1];f[p*2]=s*m+a*g+u,f[p*2+1]=o*m+l*g+h}if(this._roundPixels){const p=Xe.RESOLUTION;for(let m=0;m<f.length;++m)f[m]=Math.round(f[m]*p)/p}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new MQ(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,DE);const t=this.geometry.getBuffer("aVertexPosition").data,r=zO.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,u=i[a+1]*2,h=i[a+2]*2;if(r[0]=t[l],r[1]=t[l+1],r[2]=t[u],r[3]=t[u+1],r[4]=t[h],r[5]=t[h+1],zO.contains(DE.x,DE.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Z8.BATCHABLE_SIZE=100;let ry=Z8;class rb extends bh{constructor(e,t,r){super();const i=new yi(e),s=new yi(t,!0),o=new yi(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,dt.FLOAT).addAttribute("aTextureCoord",s,2,!1,dt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var OQ=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,NQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class iy extends Yl{constructor(e,t){const r={uSampler:e,alpha:1,uTextureMatrix:lr.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(r,t.uniforms),super(t.program||Ou.from(NQ,OQ),r),this._colorDirty=!1,this.uvMatrix=new sR(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new Kn(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Kn.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class BQ extends rb{constructor(e=100,t=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,l=this.height/o;for(let h=0;h<e;h++){const f=h%this.segWidth,p=h/this.segWidth|0;t.push(f*a,p*l),r.push(f/s,p/o)}const u=s*o;for(let h=0;h<u;h++){const f=h%s,p=h/s|0,m=p*this.segWidth+f,g=p*this.segWidth+f+1,v=(p+1)*this.segWidth+f,x=(p+1)*this.segWidth+f+1;i.push(m,g,v,g,x,v)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class LQ extends rb{constructor(e=200,t,r=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,l=e[0];const u=this._width*this.textureScale,h=e.length;for(let p=0;p<h;p++){const m=p*4;if(this.textureScale>0){const g=l.x-e[p].x,v=l.y-e[p].y,x=Math.sqrt(g*g+v*v);l=e[p],a+=x/u}else a=p/(h-1);s[m]=a,s[m+1]=0,s[m+2]=a,s[m+3]=1}let f=0;for(let p=0;p<h-1;p++){const m=p*2;o[f++]=m,o[f++]=m+1,o[f++]=m+2,o[f++]=m+2,o[f++]=m+1,o[f++]=m+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let u=0;u<a;u++){const h=e[u],f=u*4;u<e.length-1?r=e[u+1]:r=h,s=-(r.x-t.x),i=r.y-t.y;const p=Math.sqrt(i*i+s*s);p<1e-6?(i=0,s=0):(i/=p,s/=p,i*=l,s*=l),o[f]=h.x+i,o[f+1]=h.y+s,o[f+2]=h.x-i,o[f+3]=h.y-s,t=h}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class DQ extends ry{constructor(e,t,r){const i=new BQ(e.width,e.height,t,r),s=new iy(Fe.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:r}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const P1=10;class FQ extends DQ{constructor(e,t,r,i,s){var o,a,l,u;super(Fe.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??((o=e.defaultBorders)==null?void 0:o.left)??P1,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??P1,this._topHeight=r??((l=e.defaultBorders)==null?void 0:l.top)??P1,this._bottomHeight=s??((u=e.defaultBorders)==null?void 0:u.bottom)??P1,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(t,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class UQ extends ry{constructor(e=Fe.EMPTY,t,r,i,s){const o=new rb(t,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new iy(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class zQ extends ry{constructor(e,t,r=0){const i=new LQ(e.height,t,r),s=new iy(e);r>0&&(e.baseTexture.wrapMode=Du.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class $Q extends Zi{constructor(e=1500,t,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=At.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new Kn(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class $O{constructor(e,t,r){this.geometry=new bh,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||dt.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new yi(nq(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new yi(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new yi(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===dt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===dt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,t,r,s.type===dt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,t,r,s.type===dt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var jQ=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,HQ=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class eU extends J_{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new lr,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:dt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Yl.from(HQ,jQ,{}),this.state=ru.for2d()}render(e){const t=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=JF(e.blendMode,u),s.state.set(this.state);const h=s.gl,f=e.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Kn.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let p=!1;for(let m=0,g=0;m<o;m+=i,g+=1){let v=o-m;v>i&&(v=i),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[g];x.uploadDynamic(t,m,v);const b=e._bufferUpdateIDs[g]||0;p=p||x._updateID<b,p&&(x._updateID=e._updateID,x.uploadStatic(t,m,v)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,v*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)t.push(new $O(this.properties,s,i));return t}_generateOneMoreBuffer(e){const t=e._batchSize,r=e._properties;return new $O(this.properties,r,t)}uploadVertices(e,t,r,i,s,o){let a=0,l=0,u=0,h=0;for(let f=0;f<r;++f){const p=e[t+f],m=p._texture,g=p.scale.x,v=p.scale.y,x=m.trim,b=m.orig;x?(l=x.x-p.anchor.x*b.width,a=l+x.width,h=x.y-p.anchor.y*b.height,u=h+x.height):(a=b.width*(1-p.anchor.x),l=b.width*-p.anchor.x,u=b.height*(1-p.anchor.y),h=b.height*-p.anchor.y),i[o]=l*g,i[o+1]=h*v,i[o+s]=a*g,i[o+s+1]=h*v,i[o+s*2]=a*g,i[o+s*2+1]=u*v,i[o+s*3]=l*g,i[o+s*3+1]=u*v,o+=s*4}}uploadPosition(e,t,r,i,s,o){for(let a=0;a<r;a++){const l=e[t+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,r,i,s,o){for(let a=0;a<r;a++){const l=e[t+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,t,r,i,s,o){for(let a=0;a<r;++a){const l=e[t+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,r,i,s,o){for(let a=0;a<r;++a){const l=e[t+a],u=Kn.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}eU.extension={name:"particle",type:Le.RendererPlugin};it.add(eU);var ib=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(ib||{});const k1={willReadFrequently:!0},Ml=class ut{static get experimentalLetterSpacingSupported(){let e=ut._experimentalLetterSpacingSupported;if(e!==void 0){const t=Xe.ADAPTER.getCanvasRenderingContext2D().prototype;e=ut._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,r,i,s,o,a,l,u){this.text=e,this.style=t,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,r,i=ut._canvas){r=r??t.wordWrap;const s=t.toFontString(),o=ut.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=i.getContext("2d",k1);a.font=s;const l=(r?ut.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let g=0;g<l.length;g++){const v=ut._measureText(l[g],t.letterSpacing,a);u[g]=v,h=Math.max(h,v)}let f=h+t.strokeThickness;t.dropShadow&&(f+=t.dropShadowDistance);const p=t.lineHeight||o.fontSize+t.strokeThickness;let m=Math.max(p,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(p+t.leading);return t.dropShadow&&(m+=t.dropShadowDistance),new ut(e,t,f,m,l,u,p+t.leading,h,o)}static _measureText(e,t,r){let i=!1;ut.experimentalLetterSpacingSupported&&(ut.experimentalLetterSpacing?(r.letterSpacing=`${t}px`,r.textLetterSpacing=`${t}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=t:s+=(ut.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,r=ut._canvas){const i=r.getContext("2d",k1);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:h}=t,f=ut.collapseSpaces(h),p=ut.collapseNewlines(h);let m=!f;const g=t.wordWrapWidth+u,v=ut.tokenize(e);for(let x=0;x<v.length;x++){let b=v[x];if(ut.isNewline(b)){if(!p){a+=ut.addLine(o),m=!f,o="",s=0;continue}b=" "}if(f){const _=ut.isBreakingSpace(b),R=ut.isBreakingSpace(o[o.length-1]);if(_&&R)continue}const S=ut.getFromCache(b,u,l,i);if(S>g)if(o!==""&&(a+=ut.addLine(o),o="",s=0),ut.canBreakWords(b,t.breakWords)){const _=ut.wordWrapSplit(b);for(let R=0;R<_.length;R++){let D=_[R],j=D,H=1;for(;_[R+H];){const K=_[R+H];if(!ut.canBreakChars(j,K,b,R,t.breakWords))D+=K;else break;j=K,H++}R+=H-1;const G=ut.getFromCache(D,u,l,i);G+s>g&&(a+=ut.addLine(o),m=!1,o="",s=0),o+=D,s+=G}}else{o.length>0&&(a+=ut.addLine(o),o="",s=0);const _=x===v.length-1;a+=ut.addLine(b,!_),m=!1,o="",s=0}else S+s>g&&(m=!1,a+=ut.addLine(o),o="",s=0),(o.length>0||!ut.isBreakingSpace(b)||m)&&(o+=b,s+=S)}return a+=ut.addLine(o,!1),a}static addLine(e,t=!0){return e=ut.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,r,i){let s=r[e];return typeof s!="number"&&(s=ut._measureText(e,t,i)+t,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const r=e[t];if(!ut.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ut._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ut._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let r="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(ut.isBreakingSpace(s,o)||ut.isNewline(s)){r!==""&&(t.push(r),r=""),t.push(s);continue}r+=s}return r!==""&&t.push(r),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,r,i,s){return!0}static wordWrapSplit(e){return ut.graphemeSegmenter(e)}static measureFont(e){if(ut._fonts[e])return ut._fonts[e];const t={ascent:0,descent:0,fontSize:0},r=ut._canvas,i=ut._context;i.font=e;const s=ut.METRICS_STRING+ut.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(ut.BASELINE_SYMBOL).width);const l=Math.ceil(ut.HEIGHT_MULTIPLIER*a);if(a=a*ut.BASELINE_MULTIPLIER|0,o===0||l===0)return ut._fonts[e]=t,t;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const u=i.getImageData(0,0,o,l).data,h=u.length,f=o*4;let p=0,m=0,g=!1;for(p=0;p<a;++p){for(let v=0;v<f;v+=4)if(u[m+v]!==255){g=!0;break}if(!g)m+=f;else break}for(t.ascent=a-p,m=h-f,g=!1,p=l;p>a;--p){for(let v=0;v<f;v+=4)if(u[m+v]!==255){g=!0;break}if(!g)m-=f;else break}return t.descent=p-a,t.fontSize=t.ascent+t.descent,ut._fonts[e]=t,t}static clearMetrics(e=""){e?delete ut._fonts[e]:ut._fonts={}}static get _canvas(){var e;if(!ut.__canvas){let t;try{const r=new OffscreenCanvas(0,0);if((e=r.getContext("2d",k1))!=null&&e.measureText)return ut.__canvas=r,r;t=Xe.ADAPTER.createCanvas()}catch{t=Xe.ADAPTER.createCanvas()}t.width=t.height=10,ut.__canvas=t}return ut.__canvas}static get _context(){return ut.__context||(ut.__context=ut._canvas.getContext("2d",k1)),ut.__context}};Ml.METRICS_STRING="|q",Ml.BASELINE_SYMBOL="M",Ml.BASELINE_MULTIPLIER=1.4,Ml.HEIGHT_MULTIPLIER=2,Ml.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return e=>[...n.segment(e)].map(t=>t.segment)}return n=>[...n]})(),Ml.experimentalLetterSpacing=!1,Ml._fonts={},Ml._newlines=[10,13],Ml._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Nc=Ml;const WQ=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],tU=class Yg{constructor(e){this.styleID=0,this.reset(),UE(this,e,e)}clone(){const e={};return UE(e,this,Yg.defaultStyle),new Yg(e)}reset(){UE(this,Yg.defaultStyle,Yg.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=FE(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=FE(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){GQ(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=FE(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let r=t.length-1;r>=0;r--){let i=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!WQ.includes(i)&&(i=`"${i}"`),t[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};tU.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ib.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Eh=tU;function FE(n){const e=Kn.shared,t=r=>{const i=e.setValue(r);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(n)?n.map(t):t(n)}function GQ(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0}function UE(n,e,t){for(const r in t)Array.isArray(e[r])?n[r]=e[r].slice():n[r]=e[r]}const VQ={texture:!0,children:!1,baseTexture:!0},nU=class P2 extends sl{constructor(e,t,r){let i=!1;r||(r=Xe.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const s=Fe.from(r);s.orig=new It,s.trim=new It,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=P2.defaultResolution??Xe.RESOLUTION,this._autoResolution=P2.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Nc.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Gt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Nc.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,i=Nc.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,u=i.lineWidths,h=i.maxLineWidth,f=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=t.strokeThickness,r.textBaseline=t.textBaseline,r.lineJoin=t.lineJoin,r.miterLimit=t.miterLimit;let p,m;const g=t.dropShadow?2:1;for(let v=0;v<g;++v){const x=t.dropShadow&&v===0,b=x?Math.ceil(Math.max(1,o)+t.padding*2):0,S=b*this._resolution;if(x){r.fillStyle="black",r.strokeStyle="black";const R=t.dropShadowColor,D=t.dropShadowBlur*this._resolution,j=t.dropShadowDistance*this._resolution;r.shadowColor=Kn.shared.setValue(R).setAlpha(t.dropShadowAlpha).toRgbaString(),r.shadowBlur=D,r.shadowOffsetX=Math.cos(t.dropShadowAngle)*j,r.shadowOffsetY=Math.sin(t.dropShadowAngle)*j+S}else r.fillStyle=this._generateFillStyle(t,a,i),r.strokeStyle=t.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let _=(l-f.fontSize)/2;l-f.fontSize<0&&(_=0);for(let R=0;R<a.length;R++)p=t.strokeThickness/2,m=t.strokeThickness/2+R*l+f.ascent+_,t.align==="right"?p+=h-u[R]:t.align==="center"&&(p+=(h-u[R])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[R],p+t.padding,m+t.padding-b,!0),t.fill&&this.drawLetterSpacing(a[R],p+t.padding,m+t.padding-b)}this.updateTexture()}drawLetterSpacing(e,t,r,i=!1){const s=this._style.letterSpacing;let o=!1;if(Nc.experimentalLetterSpacingSupported&&(Nc.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,r):this.context.fillText(e,t,r);return}let a=t;const l=Nc.graphemeSegmenter(e);let u=this.context.measureText(e).width,h=0;for(let f=0;f<l.length;++f){const p=l[f];i?this.context.strokeText(p,a,r):this.context.fillText(p,a,r);let m="";for(let g=f+1;g<l.length;++g)m+=l[g];h=this.context.measureText(m).width,a+=u-h+s,u=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=oq(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,r=this._style,i=r.trim?0:r.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,r){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,h=i.slice(),f=e.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(h.unshift(i[0]),f.unshift(0),h.push(i[i.length-1]),f.push(1),e.fillGradientType===ib.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const p=r.fontProperties.fontSize+e.strokeThickness;for(let m=0;m<t.length;m++){const g=r.lineHeight*(m-1)+p,v=r.lineHeight*m;let x=v;m>0&&g>v&&(x=(v+g)/2);const b=v+p,S=r.lineHeight*(m+1);let _=b;m+1<t.length&&S<b&&(_=(b+S)/2);const R=(_-x)/u;for(let D=0;D<h.length;D++){let j=0;typeof f[D]=="number"?j=f[D]:j=D/h.length;let H=Math.min(1,Math.max(0,x/u+j*R));H=Number(H.toFixed(5)),s.addColorStop(H,h[D])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const p=h.length+1;let m=1;for(let g=0;g<h.length;g++){let v;typeof f[g]=="number"?v=f[g]:v=m/p,s.addColorStop(v,h[g]),m++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},VQ,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Jc(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Jc(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Eh?this._style=e:this._style=new Eh(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};nU.defaultAutoResolution=!0;let hR=nU;class qQ{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function XQ(n,e){var r;let t=!1;if((r=n==null?void 0:n._textures)!=null&&r.length){for(let i=0;i<n._textures.length;i++)if(n._textures[i]instanceof Fe){const s=n._textures[i].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function KQ(n,e){if(n.baseTexture instanceof Mt){const t=n.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function QQ(n,e){if(n._texture&&n._texture instanceof Fe){const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function YQ(n,e){return e instanceof hR?(e.updateText(!0),!0):!1}function ZQ(n,e){if(e instanceof Eh){const t=e.toFontString();return Nc.measureFont(t),!0}return!1}function JQ(n,e){if(n instanceof hR){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function eY(n,e){return n instanceof Eh?(e.includes(n)||e.push(n),!0):!1}const rU=class iU{constructor(e){this.limiter=new qQ(iU.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(JQ),this.registerFindHook(eY),this.registerFindHook(XQ),this.registerFindHook(KQ),this.registerFindHook(QQ),this.registerUploadHook(YQ),this.registerUploadHook(ZQ)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,wr.system.addOnce(this.tick,this,Sh.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)wr.system.addOnce(this.tick,this,Sh.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,r=e.length;t<r;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Zi)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&wr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};rU.uploadsPerFrame=4;let k2=rU;Object.defineProperties(Xe,{UPLOADS_PER_FRAME:{get(){return k2.uploadsPerFrame},set(n){Gt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),k2.uploadsPerFrame=n}}});function sU(n,e){return e instanceof Mt?(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0):!1}function tY(n,e){if(!(e instanceof b0))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:r}=t;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&sU(n,s.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function nY(n,e){return n instanceof b0?(e.push(n),!0):!1}class oU extends k2{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(nY),this.registerUploadHook(sU),this.registerUploadHook(tY)}}oU.extension={name:"prepare",type:Le.RendererSystem};it.add(oU);class wm extends sl{constructor(e,t=!0){super(e[0]instanceof Fe?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(wr.shared.add(this.update,this,Sh.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let r=0;r<e.length;++r)t.push(Fe.from(e[r]));return new wm(t)}static fromImages(e){const t=[];for(let r=0;r<e.length;++r)t.push(Fe.from(e[r]));return new wm(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof Fe)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(wr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(wr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const kg=new St;class dR extends sl{constructor(e,t=100,r=100){super(e),this.tileTransform=new Z_,this._width=t,this._height=r,this.uvMatrix=this.texture.uvMatrix||new sR(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new It),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,kg);const t=this._width,r=this._height,i=-t*this.anchor._x;if(kg.x>=i&&kg.x<i+t){const s=-r*this.anchor._y;if(kg.y>=s&&kg.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const r=e instanceof Fe?e:Fe.from(e,t);return new dR(r,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var rY=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,iY=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,sY=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,jO=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oY=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const M1=new lr;class aU extends J_{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new f8,this.state=ru.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Yl.from(jO,oY,t),this.shader=e.context.webGLVersion>1?Yl.from(iY,rY,t):Yl.from(jO,sY,t)}render(e){const t=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,h=e.tileTransform.localTransform,f=e.uvMatrix;let p=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;p&&(l._glTextures[t.CONTEXT_UID]?p=l.wrapMode!==Du.CLAMP:l.wrapMode===Du.CLAMP&&(l.wrapMode=Du.REPEAT));const m=p?this.simpleShader:this.shader,g=a.width,v=a.height,x=e._width,b=e._height;M1.set(h.a*g/x,h.b*g/b,h.c*v/x,h.d*v/b,h.tx/x,h.ty/b),M1.invert(),p?M1.prepend(f.mapCoord):(m.uniforms.uMapCoord=f.mapCoord.toArray(!0),m.uniforms.uClampFrame=f.uClampFrame,m.uniforms.uClampOffset=f.uClampOffset),m.uniforms.uTransform=M1.toArray(!0),m.uniforms.uColor=Kn.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(m.uniforms.uColor),m.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),m.uniforms.uSampler=a,t.shader.bind(m),t.geometry.bind(r),this.state.blendMode=JF(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}aU.extension={name:"tilingSprite",type:Le.RendererPlugin};it.add(aU);const lU=class Zg{constructor(e,t,r){this.linkedSheets=[],(e instanceof Mt||e instanceof Fe)&&(e={texture:e,data:t,resolutionFilename:r});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof Fe?i:null,this.baseTexture=i instanceof Mt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let r=qu(e,null);return r===null&&(r=typeof t=="number"?t:parseFloat(t??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Zg.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const r=Zg.BATCH_SIZE;for(;t-e<r&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new It(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new It(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new It(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new It(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Fe(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),Fe.addToCache(this.textures[i],this.cachePrefix+i.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let r=0;r<e[t].length;r++){const i=e[t][r];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Zg.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Zg.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};lU.BATCH_SIZE=1e3;let Rx=lU;const aY=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function uU(n,e,t){const r={};if(n.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){const i=Wr.dirname(n[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(r,uU([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return r}const lY={extension:Le.Asset,cache:{test:n=>n instanceof Rx,getCacheableAssets:(n,e)=>uU(n,e,!1)},resolver:{test:n=>{const e=n.split("?")[0].split("."),t=e.pop(),r=e.pop();return t==="json"&&aY.includes(r)},parse:n=>{var t;const e=n.split(".");return{resolution:parseFloat(((t=Xe.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:e[e.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:Le.LoadParser,priority:xa.Normal},async testParse(n,e){return Wr.extname(e.src).toLowerCase()===".json"&&!!n.frames},async parse(n,e,t){var h,f;const{texture:r,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Wr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(r&&r.baseTexture)a=r;else{const p=T2(o+(i??n.meta.image),e.src);a=(await t.load([p]))[p]}const l=new Rx({texture:a.baseTexture,data:n,resolutionFilename:e.src,cachePrefix:s});await l.parse();const u=(h=n==null?void 0:n.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const p=[];for(const g of u){if(typeof g!="string")continue;let v=o+g;(f=e.data)!=null&&f.ignoreMultiPack||(v=T2(v,e.src),p.push(t.load({src:v,data:{ignoreMultiPack:!0}})))}const m=await Promise.all(p);l.linkedSheets=m,m.forEach(g=>{g.linkedSheets=[l].concat(l.linkedSheets.filter(v=>v!==g))})}return l},unload(n){n.destroy(!0)}}};it.add(lY);class Px{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Pw{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),f=h[0],p=h[1].replace(/"/gm,""),m=parseFloat(p),g=isNaN(m)?p:m;l[f]=g}r[o].push(l)}const i=new Px;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class M2{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Px,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<r.length;u++)t.info.push({face:r[u].getAttribute("face"),size:parseInt(r[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)t.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}}class O2{static test(e){return typeof e=="string"&&e.includes("<font>")?M2.test(Xe.ADAPTER.parseXML(e)):!1}static parse(e){return M2.parse(Xe.ADAPTER.parseXML(e))}}const zE=[Pw,M2,O2];function uY(n){for(let e=0;e<zE.length;e++)if(zE[e].test(n))return zE[e];return null}function cY(n,e,t,r,i,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,h=n.width/r-l-u*2,f=n.height/r-l-u*2,p=o.slice(),m=t.fillGradientStops.slice();if(!m.length){const g=p.length+1;for(let v=1;v<g;++v)m.push(v/g)}if(p.unshift(o[0]),m.unshift(0),p.push(o[o.length-1]),m.push(1),t.fillGradientType===ib.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,f+u);let g=0;const v=(s.fontProperties.fontSize+t.strokeThickness)/f;for(let x=0;x<i.length;x++){const b=s.lineHeight*x;for(let S=0;S<p.length;S++){let _=0;typeof m[S]=="number"?_=m[S]:_=S/p.length;const R=b/f+_*v;let D=Math.max(g,R);D=Math.min(D,1),a.addColorStop(D,p[S]),g=D}}}else{a=e.createLinearGradient(u,f/2,h+u,f/2);const g=p.length+1;let v=1;for(let x=0;x<p.length;x++){let b;typeof m[x]=="number"?b=m[x]:b=v/g,a.addColorStop(b,p[x]),v++}}return a}function hY(n,e,t,r,i,s,o){const a=t.text,l=t.fontProperties;e.translate(r,i),e.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=cY(n,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const f=o.dropShadowColor,p=o.dropShadowBlur*s,m=o.dropShadowDistance*s;e.shadowColor=Kn.shared.setValue(f).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=p,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*m,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*m}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function kw(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function cU(n){return Array.from?Array.from(n):n.split("")}function dY(n){typeof n=="string"&&(n=[n]);const e=[];for(let t=0,r=n.length;t<r;t++){const i=n[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...cU(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Rc=class Ol{constructor(e,t,r){var h;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=qu(o.file),u={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let f=0;f<e.page.length;f++){const{id:p,file:m}=e.page[f];u[p]=t instanceof Array?t[f]:t[m],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[p].baseTexture.alphaMode=to.NO_PREMULTIPLIED_ALPHA,u[p].baseTexture.mipmap=Zl.OFF)}for(let f=0;f<e.char.length;f++){const{id:p,page:m}=e.char[f];let{x:g,y:v,width:x,height:b,xoffset:S,yoffset:_,xadvance:R}=e.char[f];g/=l,v/=l,x/=l,b/=l,S/=l,_/=l,R/=l;const D=new It(g+u[m].frame.x/l,v+u[m].frame.y/l,x,b);this.chars[p]={xOffset:S,yOffset:_,xAdvance:R,kerning:{},texture:new Fe(u[m].baseTexture,D),page:m}}for(let f=0;f<e.kerning.length;f++){let{first:p,second:m,amount:g}=e.kerning[f];p/=l,m/=l,g/=l,this.chars[m]&&(this.chars[m].kerning[p]=g)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,r){let i;if(e instanceof Px)i=e;else{const o=uY(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof Fe&&(t=[t]);const s=new Ol(i,t,r);return Ol.available[s.font]=s,s}static uninstall(e){const t=Ol.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Ol.available[e]}static from(e,t,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},Ol.defaultOptions,r),h=dY(i),f=t instanceof Eh?t:new Eh(t),p=a,m=new Px;m.info[0]={face:f.fontFamily,size:f.fontSize},m.common[0]={lineHeight:f.fontSize};let g=0,v=0,x,b,S,_=0;const R=[];for(let j=0;j<h.length;j++){x||(x=Xe.ADAPTER.createCanvas(),x.width=a,x.height=l,b=x.getContext("2d"),S=new Mt(x,{resolution:o,...u}),R.push(new Fe(S)),m.page.push({id:R.length-1,file:""}));const H=h[j],G=Nc.measureText(H,f,!1,x),K=G.width,te=Math.ceil(G.height),ne=Math.ceil((f.fontStyle==="italic"?2:1)*K);if(v>=l-te*o){if(v===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${H}')`);--j,x=null,b=null,S=null,v=0,g=0,_=0;continue}if(_=Math.max(te+G.fontProperties.descent,_),ne*o+g>=p){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${H}')`);--j,v+=_*o,v=Math.ceil(v),g=0,_=0;continue}hY(x,b,G,g,v,o,f);const ee=kw(G.text);m.char.push({id:ee,page:R.length-1,x:g/o,y:v/o,width:ne,height:te,xoffset:0,yoffset:0,xadvance:K-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),g+=(ne+2*s)*o,g=Math.ceil(g)}if(!(r!=null&&r.skipKerning))for(let j=0,H=h.length;j<H;j++){const G=h[j];for(let K=0;K<H;K++){const te=h[K],ne=b.measureText(G).width,ee=b.measureText(te).width,L=b.measureText(G+te).width-(ne+ee);L&&m.kerning.push({first:kw(G),second:kw(te),amount:L})}}const D=new Ol(m,R,!0);return Ol.available[e]!==void 0&&Ol.uninstall(e),Ol.available[e]=D,D}};Rc.ALPHA=[["a","z"],["A","Z"]," "],Rc.NUMERIC=[["0","9"]],Rc.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Rc.ASCII=[[" ","~"]],Rc.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Rc.ALPHANUMERIC},Rc.available={};let Pc=Rc;var fY=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,pY=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const HO=[],WO=[],GO=[],hU=class dU extends Zi{constructor(e,t={}){super();const{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},dU.styleDefaults,t);if(!Pc.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Kn(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new ql(()=>{this.dirty=!0},this,0,0),this._roundPixels=Xe.ROUND_PIXELS,this.dirty=!0,this._resolution=Xe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var ne;const e=Pc.available[this._fontName],t=this.fontSize,r=t/e.size,i=new St,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=cU(l),h=this._maxWidth*e.size/t,f=e.distanceFieldType==="none"?HO:WO;let p=null,m=0,g=0,v=0,x=-1,b=0,S=0,_=0,R=0;for(let ee=0;ee<u.length;ee++){const L=u[ee],w=kw(L);if(/(?:\s)/.test(L)&&(x=ee,b=m,R++),L==="\r"||L===`
`){o.push(m),a.push(-1),g=Math.max(g,m),++v,++S,i.x=0,i.y+=e.lineHeight,p=null,R=0;continue}const A=e.chars[w];if(!A)continue;p&&A.kerning[p]&&(i.x+=A.kerning[p]);const O=GO.pop()||{texture:Fe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new St};O.texture=A.texture,O.line=v,O.charCode=w,O.position.x=Math.round(i.x+A.xOffset+this._letterSpacing/2),O.position.y=Math.round(i.y+A.yOffset),O.prevSpaces=R,s.push(O),m=O.position.x+Math.max(A.xAdvance-A.xOffset,A.texture.orig.width),i.x+=A.xAdvance+this._letterSpacing,_=Math.max(_,A.yOffset+A.texture.height),p=w,x!==-1&&h>0&&i.x>h&&(++S,Bp(s,1+x-S,1+ee-x),ee=x,x=-1,o.push(b),a.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,b),v++,i.x=0,i.y+=e.lineHeight,p=null,R=0)}const D=u[u.length-1];D!=="\r"&&D!==`
`&&(/(?:\s)/.test(D)&&(m=b),o.push(m),g=Math.max(g,m),a.push(-1));const j=[];for(let ee=0;ee<=v;ee++){let L=0;this._align==="right"?L=g-o[ee]:this._align==="center"?L=(g-o[ee])/2:this._align==="justify"&&(L=a[ee]<0?0:(g-o[ee])/a[ee]),j.push(L)}const H=s.length,G={},K=[],te=this._activePagesMeshData;f.push(...te);for(let ee=0;ee<H;ee++){const L=s[ee].texture,w=L.baseTexture.uid;if(!G[w]){let A=f.pop();if(!A){const C=new rb;let k,U;e.distanceFieldType==="none"?(k=new iy(Fe.EMPTY),U=At.NORMAL):(k=new iy(Fe.EMPTY,{program:Ou.from(pY,fY),uniforms:{uFWidth:0}}),U=At.NORMAL_NPM);const z=new ry(C,k);z.blendMode=U,A={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}A.index=0,A.indexCount=0,A.vertexCount=0,A.uvsCount=0,A.total=0;const{_textureCache:O}=this;O[w]=O[w]||new Fe(L.baseTexture),A.mesh.texture=O[w],A.mesh.tint=this._tintColor.value,K.push(A),G[w]=A}G[w].total++}for(let ee=0;ee<te.length;ee++)K.includes(te[ee])||this.removeChild(te[ee].mesh);for(let ee=0;ee<K.length;ee++)K[ee].mesh.parent!==this&&this.addChild(K[ee].mesh);this._activePagesMeshData=K;for(const ee in G){const L=G[ee],w=L.total;if(!(((ne=L.indices)==null?void 0:ne.length)>6*w)||L.vertices.length<ry.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*w),L.uvs=new Float32Array(4*2*w),L.indices=new Uint16Array(6*w);else{const A=L.total,O=L.vertices;for(let C=A*4*2;C<O.length;C++)O[C]=0}L.mesh.size=6*w}for(let ee=0;ee<H;ee++){const L=s[ee];let w=L.position.x+j[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(w=Math.round(w));const A=w*r,O=L.position.y*r,C=L.texture,k=G[C.baseTexture.uid],U=C.frame,z=C._uvs,N=k.index++;k.indices[N*6+0]=0+N*4,k.indices[N*6+1]=1+N*4,k.indices[N*6+2]=2+N*4,k.indices[N*6+3]=0+N*4,k.indices[N*6+4]=2+N*4,k.indices[N*6+5]=3+N*4,k.vertices[N*8+0]=A,k.vertices[N*8+1]=O,k.vertices[N*8+2]=A+U.width*r,k.vertices[N*8+3]=O,k.vertices[N*8+4]=A+U.width*r,k.vertices[N*8+5]=O+U.height*r,k.vertices[N*8+6]=A,k.vertices[N*8+7]=O+U.height*r,k.uvs[N*8+0]=z.x0,k.uvs[N*8+1]=z.y0,k.uvs[N*8+2]=z.x1,k.uvs[N*8+3]=z.y1,k.uvs[N*8+4]=z.x2,k.uvs[N*8+5]=z.y2,k.uvs[N*8+6]=z.x3,k.uvs[N*8+7]=z.y3}this._textWidth=g*r,this._textHeight=(i.y+e.lineHeight)*r;for(const ee in G){const L=G[ee];if(this.anchor.x!==0||this.anchor.y!==0){let C=0;const k=this._textWidth*this.anchor.x,U=this._textHeight*this.anchor.y;for(let z=0;z<L.total;z++)L.vertices[C++]-=k,L.vertices[C++]-=U,L.vertices[C++]-=k,L.vertices[C++]-=U,L.vertices[C++]-=k,L.vertices[C++]-=U,L.vertices[C++]-=k,L.vertices[C++]-=U}this._maxLineHeight=_*r;const w=L.mesh.geometry.getBuffer("aVertexPosition"),A=L.mesh.geometry.getBuffer("aTextureCoord"),O=L.mesh.geometry.getIndex();w.data=L.vertices,A.data=L.uvs,O.data=L.indices,w.update(),A.update(),O.update()}for(let ee=0;ee<s.length;ee++)GO.push(s[ee]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:r,size:i}=Pc.available[this._fontName];if(r!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),f=(Math.abs(u)+Math.abs(h))/2,p=this.fontSize/i,m=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=f*t*p*m}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Pc.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Pc.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Pc.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,r=Pc.available[this._fontName].distanceFieldType==="none"?HO:WO;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=Fe.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};hU.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let mY=hU;const gY=[".xml",".fnt"],yY={extension:{type:Le.LoadParser,priority:xa.Normal},name:"loadBitmapFont",test(n){return gY.includes(Wr.extname(n).toLowerCase())},async testParse(n){return Pw.test(n)||O2.test(n)},async parse(n,e,t){const r=Pw.test(n)?Pw.parse(n):O2.parse(n),{src:i}=e,{page:s}=r,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let f=Wr.join(Wr.dirname(i),h);f=T2(f,i),o.push(f)}const a=await t.load(o),l=o.map(u=>a[u]);return Pc.install(r,l,!0)},async load(n,e){return(await Xe.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};it.add(yY);const N2=class Zf extends Eh{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Zf(Object.keys(Zf.defaultOptions).reduce((t,r)=>({...t,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Zf.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:r}=Zf;if(r[e]){const i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Xe.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Wr.basename(e,Wr.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);r[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(r=>!this._overrides.includes(r));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(r=>this._overrides.includes(r));t.length>0&&(this._overrides=this._overrides.filter(r=>!t.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=eq(e)),typeof e=="number"?JV(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Zf.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=Xe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};N2.availableFonts={},N2.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let $E=N2;const O1=class Jf extends sl{constructor(e="",t={}){super(Fe.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,i=Fe.from(r,{scaleMode:Xe.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new It,i.trim=new It,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Jf.defaultMaxWidth,this.maxHeight=Jf.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=r,this._loadImage=new Image,this._autoResolution=Jf.defaultAutoResolution,this._resolution=Jf.defaultResolution??Xe.RESOLUTION,this.text=e,this.style=t}measureText(e){var h,f;const{text:t,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(i)}),this._styleElement.textContent=(f=this._style)==null?void 0:f.toGlobalCSS()),{width:l+r.padding*2,height:u+r.padding*2}}async updateText(e=!0){const{style:t,_image:r,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),r.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=r.width/i,t.trim.height=t._frame.height=r.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var r,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Jf.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=t,(i=this._svgRoot)==null||i.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Jc(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Jc(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof $E?(this.ownsStyle=!1,this._style=e):e instanceof Eh?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=$E.from(e)):(this.ownsStyle=!0,this._style=new $E(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};O1.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},O1.defaultMaxWidth=2024,O1.defaultMaxHeight=2024,O1.defaultAutoResolution=!0;var sb={exports:{}};const kx=globalThis||void 0||self;function vY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fU={exports:{}},Qr=fU.exports={},Ll,Dl;function B2(){throw new Error("setTimeout has not been defined")}function L2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ll=setTimeout:Ll=B2}catch{Ll=B2}try{typeof clearTimeout=="function"?Dl=clearTimeout:Dl=L2}catch{Dl=L2}})();function pU(n){if(Ll===setTimeout)return setTimeout(n,0);if((Ll===B2||!Ll)&&setTimeout)return Ll=setTimeout,setTimeout(n,0);try{return Ll(n,0)}catch{try{return Ll.call(null,n,0)}catch{return Ll.call(this,n,0)}}}function wY(n){if(Dl===clearTimeout)return clearTimeout(n);if((Dl===L2||!Dl)&&clearTimeout)return Dl=clearTimeout,clearTimeout(n);try{return Dl(n)}catch{try{return Dl.call(null,n)}catch{return Dl.call(this,n)}}}var Nu=[],zp=!1,vd,Mw=-1;function xY(){!zp||!vd||(zp=!1,vd.length?Nu=vd.concat(Nu):Mw=-1,Nu.length&&mU())}function mU(){if(!zp){var n=pU(xY);zp=!0;for(var e=Nu.length;e;){for(vd=Nu,Nu=[];++Mw<e;)vd&&vd[Mw].run();Mw=-1,e=Nu.length}vd=null,zp=!1,wY(n)}}Qr.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];Nu.push(new gU(n,e)),Nu.length===1&&!zp&&pU(mU)};function gU(n,e){this.fun=n,this.array=e}gU.prototype.run=function(){this.fun.apply(null,this.array)};Qr.title="browser";Qr.browser=!0;Qr.env={};Qr.argv=[];Qr.version="";Qr.versions={};function ec(){}Qr.on=ec;Qr.addListener=ec;Qr.once=ec;Qr.off=ec;Qr.removeListener=ec;Qr.removeAllListeners=ec;Qr.emit=ec;Qr.prependListener=ec;Qr.prependOnceListener=ec;Qr.listeners=function(n){return[]};Qr.binding=function(n){throw new Error("process.binding is not supported")};Qr.cwd=function(){return"/"};Qr.chdir=function(n){throw new Error("process.chdir is not supported")};Qr.umask=function(){return 0};var _Y=fU.exports;const Mg=vY(_Y);var yU={exports:{}},bY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SY=bY,EY=SY;function vU(){}function wU(){}wU.resetWarningCache=vU;var AY=function(){function n(r,i,s,o,a,l){if(l!==EY){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wU,resetWarningCache:vU};return t.PropTypes=t,t};yU.exports=AY();var fR=yU.exports;const sr=rl(fR);function ko(n){return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(n)}function xU(n){var e=function(t,r){if(ko(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,r||"default");if(ko(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}(n,"string");return ko(e)==="symbol"?e:String(e)}function Xr(n,e,t){return(e=xU(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jE(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ku(n){return function(e){if(Array.isArray(e))return jE(e)}(n)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(n)||function(e,t){if(e){if(typeof e=="string")return jE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jE(e,t):void 0}}(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Gr(n,e){for(var t=arguments.length,r=new Array(t>2?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i]}var TY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof kx<"u"?kx:typeof self<"u"?self:{};function CY(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IY=function(n){return n==null};function Jg(n){var e=[];if(n===void 0)return e;if(typeof n=="string")e=n.split(",");else if(typeof n=="number")e=[n];else if(Array.isArray(n))e=Ku(n);else{if(n===null||ko(n)!=="object")return e;e=[n&&(n==null?void 0:n.x)||0,n&&(n==null?void 0:n.y)||0]}return e.filter(function(t){return!IY(t)&&!isNaN(t)}).map(Number)}function VO(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function HE(n){return n instanceof St||n instanceof ql}var Mx=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function WE(n,e,t){if(HE(n[e])&&HE(t))n[e].copyFrom(t);else if(HE(n[e])){var r=Jg(t);Gr(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),ko(t)),n[e].set(r.shift(),r.shift())}else n[e]=t}var zf,_U=function(n){var e,t=n;if(!Array.isArray(t)){if(e=n,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(n)}var r={};return t.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},bU=function(n){return function(){return!n.apply(void 0,arguments)}},D2="children",RY=(Xr(zf={},D2,!0),Xr(zf,"parent",!0),Xr(zf,"worldAlpha",!0),Xr(zf,"worldTransform",!0),Xr(zf,"worldVisible",!0),zf),F2={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Jl=function(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var l,u;a==null||(l=a.__reactpixi)===null||l===void 0||(u=l.root)===null||u===void 0||u.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(t.hasOwnProperty(a))return Gr(l.typeofs.some(function(u){return ko(t[a])===u})||l.instanceofs.some(function(u){return t[a]instanceof u}),"".concat(n," ").concat(a," prop is invalid")),t[a]};if(t.texture)return Gr(t.texture instanceof Fe,"".concat(n," texture needs to be typeof `Texture`")),t.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Fe]});Gr(!!s,"".concat(n," could not get texture from props"));var o=Fe.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},PY=bU(_U([].concat(Ku(Object.keys(RY)),Ku(Mx))));function eu(n,e,t){var r=!1;if(Gr(_r.prototype.isPrototypeOf(n),"instance needs to be typeof `DisplayObject`, got `%s`",ko(n)),!t.ignoreEvents)for(var i=typeof n.removeListener=="function",s=typeof n.on=="function",o=0;o<Mx.length;o++){var a=Mx[o];e[a]!==t[a]&&(r=!0,typeof e[a]=="function"&&i&&n.removeListener(a,e[a]),typeof t[a]=="function"&&s&&n.on(a,t[a]))}var l=Object.keys(t||{});if(t.overwriteProps){for(var u=0;u<l.length;u++){var h=l[u];e[h]!==t[h]&&(r=!0,WE(n,h,t[h]))}return r}for(var f=l.filter(PY),p=0;p<f.length;p++){var m=f[p],g=t[m];t[m]!==e[m]&&(r=!0),g!==void 0?WE(n,m,g):m in F2?(console.warn("setting default value: ".concat(m,", from: ").concat(n[m]," to: ").concat(g," for"),n),r=!0,WE(n,m,F2[m])):console.warn("ignoring prop: ".concat(m,", from ").concat(n[m]," to ").concat(g," for"),n)}return r}var kY=function(n,e){var t=e.text,r=e.style;return new mY(t,r)},MY=function(){return new Zi};function Oh(n,e){if(n==null)return{};var t,r,i=function(o,a){if(o==null)return{};var l,u,h={},f=Object.keys(o);for(u=0;u<f.length;u++)l=f[u],a.indexOf(l)>=0||(h[l]=o[l]);return h}(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}var OY=["draw","geometry"],NY=function(n,e){var t=e.geometry;Gr(!t||t instanceof b0,"Graphics geometry needs to be a `Graphics`");var r=t?new b0(t.geometry):new b0;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var l=eu(i,s,Oh(o,OY));return s.draw!==a&&typeof a=="function"&&(l=!0,a.call(r,r)),l},r},BY=["image","texture"],LY=function(n,e){var t=e.leftWidth,r=t===void 0?10:t,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,l=e.bottomHeight,u=l===void 0?10:l,h=Jl("NineSlicePlane",n,e),f=new FQ(h,r,s,a,u);return f.applyProps=function(p,m,g){var v=g.image,x=g.texture,b=eu(p,m,Oh(g,BY));return(v||x)&&(x!==m.texture&&(b=!0),p.texture=Jl("NineSlicePlane",n,g)),b},f};function qO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function N1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qO(Object(t),!0).forEach(function(r){Xr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var DY=function(n,e){var t=e.maxSize,r=t===void 0?1500:t,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,l=N1(N1({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),u=N1(N1({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),h=new $Q(r,l,s,a);return h.willUnmount=function(f,p,m){f.destroy(u)},h},FY=["image","texture"],UY=function(n,e){var t=new sl(Jl("Sprite",n,e));return t.applyProps=function(r,i,s){var o=s.image,a=s.texture,l=eu(r,i,Oh(s,FY));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(l=!0),r.texture=Jl("Sprite",n,s)),l},t},zY=["textures","isPlaying","initialFrame","images"],$Y=function(n,e){var t=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(u){return u.map(function(h){return Gr(h instanceof Fe||(h==null?void 0:h.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),h})},l=r?wm.fromImages(r):new wm(a(t));return l[s?"gotoAndPlay":"gotoAndStop"](o||0),l.applyProps=function(u,h,f){var p=f.textures,m=f.isPlaying,g=f.initialFrame,v=f.images,x=eu(u,h,Oh(f,zY));if(v&&h.images!==v){for(var b=[],S=0;S<v.length;++S)b.push(Fe.from(v[S]));u.textures=b,x=!0}if(p&&h.textures!==p&&(u.textures=a(p),x=!0),m!==h.isPlaying||g!==h.initialFrame){var _=typeof g=="number"?g:l.currentFrame||0;l[m?"gotoAndPlay":"gotoAndStop"](_),x=!0}return x},l},jY=function(n,e){var t=e.text,r=t===void 0?"":t,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new hR(r,s);return o?(a.updateText(),new sl(a.texture)):a},HY=["tileScale","tilePosition","image","texture"],WY=function(n,e){var t=e.width,r=t===void 0?100:t,i=e.height,s=i===void 0?100:i,o=Jl("TilingSprite",n,e),a=new dR(o,r,s);return a.applyProps=function(l,u,h){var f=h.tileScale,p=h.tilePosition,m=h.image,g=h.texture,v=eu(l,u,Oh(h,HY));if(p){var x,b=Jg(p);(x=l.tilePosition).set.apply(x,Ku(b)),v=!VO(Jg(u.tilePosition),b)||v}if(f){var S,_=Jg(f);(S=l.tileScale).set.apply(S,Ku(_)),v=!VO(Jg(u.tileScale),_)||v}return(m||g)&&(g!==u.texture&&(v=!0),l.texture=Jl("Sprite",n,h)),v},a},GY=["image","texture"],VY=function(n,e){var t=Jl("Mesh",n,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Va.TRIANGLES:o,l=new UQ(t,r,i,s,a);return l.applyProps=function(u,h,f){var p=f.image,m=f.texture,g=eu(u,h,Oh(f,GY));return(p||m)&&(m!==h.texture&&(g=!0),u.texture=Jl("Mesh",n,f)),g},l},qY=["image","texture"],XY=function(n,e){var t=Jl("SimpleRope",n,e),r=e.points,i=new zQ(t,r);return i.applyProps=function(s,o,a){var l=a.image,u=a.texture,h=Oh(a,qY);Gr(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<Point>");var f=eu(s,o,h);return(l||u)&&(u!==o.texture&&(f=!0),s.texture=Jl("SimpleRope",n,a)),f},i},KY=Object.freeze({__proto__:null,BitmapText:kY,Container:MY,Graphics:NY,NineSlicePlane:LY,ParticleContainer:DY,Sprite:UY,Text:jY,TilingSprite:WY,SimpleMesh:VY,SimpleRope:XY,AnimatedSprite:$Y});function XO(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function KO(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(t),!0).forEach(function(r){Xr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XO(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ao={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},QY=Object.keys(ao).reduce(function(n,e){return KO(KO({},n),{},Xr({},e,KY[e]))},{}),SU={};function YY(n,e){return Gr(!!n,"Expect type to be defined, got `%s`",n),Gr(!ao[n],"Component `%s` could not be created, already exists in default components.",n),SU[n]=e,n}var QO,YO,ZO,JO,U2={},z2={},ZY={get exports(){return z2},set exports(n){z2=n}},eN={};function JY(){return YO||(YO=1,ZY.exports=(QO||(QO=1,function(n){function e(k,U){var z=k.length;k.push(U);e:for(;0<z;){var N=z-1>>>1,T=k[N];if(!(0<i(T,U)))break e;k[N]=U,k[z]=T,z=N}}function t(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var U=k[0],z=k.pop();if(z!==U){k[0]=z;e:for(var N=0,T=k.length,V=T>>>1;N<V;){var oe=2*(N+1)-1,ge=k[oe],we=oe+1,Re=k[we];if(0>i(ge,z))we<T&&0>i(Re,ge)?(k[N]=Re,k[we]=z,N=we):(k[N]=ge,k[oe]=z,N=oe);else{if(!(we<T&&0>i(Re,z)))break e;k[N]=Re,k[we]=z,N=we}}}return U}function i(k,U){var z=k.sortIndex-U.sortIndex;return z!==0?z:k.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,p=3,m=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function _(k){for(var U=t(u);U!==null;){if(U.callback===null)r(u);else{if(!(U.startTime<=k))break;r(u),U.sortIndex=U.expirationTime,e(l,U)}U=t(u)}}function R(k){if(v=!1,_(k),!g)if(t(l)!==null)g=!0,O(D);else{var U=t(u);U!==null&&C(R,U.startTime-k)}}function D(k,U){g=!1,v&&(v=!1,b(K),K=-1),m=!0;var z=p;try{for(_(U),f=t(l);f!==null&&(!(f.expirationTime>U)||k&&!ee());){var N=f.callback;if(typeof N=="function"){f.callback=null,p=f.priorityLevel;var T=N(f.expirationTime<=U);U=n.unstable_now(),typeof T=="function"?f.callback=T:f===t(l)&&r(l),_(U)}else r(l);f=t(l)}if(f!==null)var V=!0;else{var oe=t(u);oe!==null&&C(R,oe.startTime-U),V=!1}return V}finally{f=null,p=z,m=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,H=!1,G=null,K=-1,te=5,ne=-1;function ee(){return!(n.unstable_now()-ne<te)}function L(){if(G!==null){var k=n.unstable_now();ne=k;var U=!0;try{U=G(!0,k)}finally{U?j():(H=!1,G=null)}}else H=!1}if(typeof S=="function")j=function(){S(L)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,A=w.port2;w.port1.onmessage=L,j=function(){A.postMessage(null)}}else j=function(){x(L,0)};function O(k){G=k,H||(H=!0,j())}function C(k,U){K=x(function(){k(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){g||m||(g=!0,O(D))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var z=p;p=U;try{return k()}finally{p=z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,U){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var z=p;p=k;try{return U()}finally{p=z}},n.unstable_scheduleCallback=function(k,U,z){var N=n.unstable_now();switch(z=typeof z=="object"&&z!==null&&typeof(z=z.delay)=="number"&&0<z?N+z:N,k){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return k={id:h++,callback:U,priorityLevel:k,startTime:z,expirationTime:T=z+T,sortIndex:-1},z>N?(k.sortIndex=z,e(u,k),t(l)===null&&k===t(u)&&(v?(b(K),K=-1):v=!0,C(R,z-N))):(k.sortIndex=T,e(l,k),g||m||(g=!0,O(D))),k},n.unstable_shouldYield=ee,n.unstable_wrapCallback=function(k){var U=p;return function(){var z=p;p=U;try{return k.apply(this,arguments)}finally{p=z}}}}(eN)),eN)),z2}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function eZ(){return JO||(JO=1,ZO=function(n){var e={},t=kt,r=JY(),i=Object.assign;function s(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),R=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:typeof(c=R&&c[R]||c["@@iterator"])=="function"?c:null}function j(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case u:return"Fragment";case l:return"Portal";case f:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case x:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case m:return(c.displayName||"Context")+".Consumer";case p:return(c._context.displayName||"Context")+".Provider";case g:var d=c.render;return(c=c.displayName)||(c=(c=d.displayName||d.name||"")!==""?"ForwardRef("+c+")":"ForwardRef"),c;case b:return(d=c.displayName||null)!==null?d:j(c.type)||"Memo";case S:d=c._payload,c=c._init;try{return j(c(d))}catch{}}return null}function H(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=(c=d.render).displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(d);case 8:return d===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function G(c){var d=c,y=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do 4098&(d=c).flags&&(y=d.return),c=d.return;while(c)}return d.tag===3?y:null}function K(c){if(G(c)!==c)throw Error(s(188))}function te(c){var d=c.alternate;if(!d){if((d=G(c))===null)throw Error(s(188));return d!==c?null:c}for(var y=c,E=d;;){var I=y.return;if(I===null)break;var F=I.alternate;if(F===null){if((E=I.return)!==null){y=E;continue}break}if(I.child===F.child){for(F=I.child;F;){if(F===y)return K(I),c;if(F===E)return K(I),d;F=F.sibling}throw Error(s(188))}if(y.return!==E.return)y=I,E=F;else{for(var Q=!1,se=I.child;se;){if(se===y){Q=!0,y=I,E=F;break}if(se===E){Q=!0,E=I,y=F;break}se=se.sibling}if(!Q){for(se=F.child;se;){if(se===y){Q=!0,y=F,E=I;break}if(se===E){Q=!0,E=F,y=I;break}se=se.sibling}if(!Q)throw Error(s(189))}}if(y.alternate!==E)throw Error(s(190))}if(y.tag!==3)throw Error(s(188));return y.stateNode.current===y?c:d}function ne(c){return(c=te(c))!==null?ee(c):null}function ee(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=ee(c);if(d!==null)return d;c=c.sibling}return null}function L(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var d=L(c);if(d!==null)return d}c=c.sibling}return null}var w,A=Array.isArray,O=n.getPublicInstance,C=n.getRootHostContext,k=n.getChildHostContext,U=n.prepareForCommit,z=n.resetAfterCommit,N=n.createInstance,T=n.appendInitialChild,V=n.finalizeInitialChildren,oe=n.prepareUpdate,ge=n.shouldSetTextContent,we=n.createTextInstance,Re=n.scheduleTimeout,Ne=n.cancelTimeout,Ue=n.noTimeout,Ye=n.isPrimaryRenderer,Ce=n.supportsMutation,ze=n.supportsPersistence,ft=n.supportsHydration,xt=n.getInstanceFromNode,vt=n.preparePortalMount,Yn=n.getCurrentEventPriority,Ut=n.detachDeletedInstance,Nt=n.supportsMicrotasks,lo=n.scheduleMicrotask,Bt=n.supportsTestSelectors,qt=n.findFiberRoot,mt=n.getBoundingRect,Ke=n.getTextContent,Et=n.isHiddenSubtree,nt=n.matchAccessibilityRole,Ot=n.setFocusIfFocusable,Xt=n.setupIntersectionObserver,br=n.appendChild,en=n.appendChildToContainer,$=n.commitTextUpdate,P=n.commitMount,M=n.commitUpdate,X=n.insertBefore,re=n.insertInContainerBefore,ue=n.removeChild,me=n.removeChildFromContainer,_t=n.resetTextContent,Tt=n.hideInstance,at=n.hideTextInstance,_n=n.unhideInstance,wt=n.unhideTextInstance,ur=n.clearContainer,pf=n.cloneInstance,Zn=n.createContainerChildSet,Jn=n.appendChildToContainerChildSet,mf=n.finalizeContainerChildren,je=n.replaceContainerChildren,bn=n.cloneHiddenInstance,Dr=n.cloneHiddenTextInstance,Sn=n.canHydrateInstance,Mn=n.canHydrateTextInstance,ba=n.canHydrateSuspenseInstance,Kt=n.isSuspenseInstancePending,En=n.isSuspenseInstanceFallback,Sa=n.getSuspenseInstanceFallbackErrorDetails,er=n.registerSuspenseInstanceRetry,Dn=n.getNextHydratableSibling,gf=n.getFirstHydratableChild,cr=n.getFirstHydratableChildWithinContainer,Tn=n.getFirstHydratableChildWithinSuspenseInstance,yf=n.hydrateInstance,Fn=n.hydrateTextInstance,tr=n.hydrateSuspenseInstance,Fs=n.getNextHydratableInstanceAfterSuspenseInstance,Sr=n.commitHydratedContainer,hr=n.commitHydratedSuspenseInstance,dr=n.clearSuspenseBoundary,ll=n.clearSuspenseBoundaryFromContainer,Mi=n.shouldDeleteUnhydratedTailInstances,Ea=n.didNotMatchHydratedContainerTextInstance,nc=n.didNotMatchHydratedTextInstance;function uo(c){if(w===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);w=d&&d[1]||""}return`
`+w+c}var zo=!1;function Us(c,d){if(!c||zo)return"";zo=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ve){var E=ve}Reflect.construct(c,[],d)}else{try{d.call()}catch(ve){E=ve}c.call(d.prototype)}else{try{throw Error()}catch(ve){E=ve}c()}}catch(ve){if(ve&&E&&typeof ve.stack=="string"){for(var I=ve.stack.split(`
`),F=E.stack.split(`
`),Q=I.length-1,se=F.length-1;1<=Q&&0<=se&&I[Q]!==F[se];)se--;for(;1<=Q&&0<=se;Q--,se--)if(I[Q]!==F[se]){if(Q!==1||se!==1)do if(Q--,0>--se||I[Q]!==F[se]){var fe=`
`+I[Q].replace(" at new "," at ");return c.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",c.displayName)),fe}while(1<=Q&&0<=se);break}}}finally{zo=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?uo(c):""}var uu=Object.prototype.hasOwnProperty,Aa=[],zs=-1;function Ji(c){return{current:c}}function dn(c){0>zs||(c.current=Aa[zs],Aa[zs]=null,zs--)}function sn(c,d){zs++,Aa[zs]=c.current,c.current=d}var es={},Cn=Ji(es),Oi=Ji(!1),ul=es;function cl(c,d){var y=c.type.contextTypes;if(!y)return es;var E=c.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var I,F={};for(I in y)F[I]=d[I];return E&&((c=c.stateNode).__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=F),F}function ts(c){return(c=c.childContextTypes)!=null}function Jm(){dn(Oi),dn(Cn)}function lv(c,d,y){if(Cn.current!==es)throw Error(s(168));sn(Cn,d),sn(Oi,y)}function uv(c,d,y){var E=c.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return y;for(var I in E=E.getChildContext())if(!(I in d))throw Error(s(108,H(c)||"Unknown",I));return i({},y,E)}function Bh(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||es,ul=Cn.current,sn(Cn,c),sn(Oi,Oi.current),!0}function eg(c,d,y){var E=c.stateNode;if(!E)throw Error(s(169));y?(c=uv(c,d,ul),E.__reactInternalMemoizedMergedChildContext=c,dn(Oi),dn(Cn),sn(Cn,c)):dn(Oi),sn(Oi,y)}var co=Math.clz32?Math.clz32:function(c){return(c>>>=0)===0?32:31-(cv(c)/tg|0)|0},cv=Math.log,tg=Math.LN2,rc=64,ic=4194304;function Lh(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&c;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&c;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function sc(c,d){var y=c.pendingLanes;if(y===0)return 0;var E=0,I=c.suspendedLanes,F=c.pingedLanes,Q=268435455&y;if(Q!==0){var se=Q&~I;se!==0?E=Lh(se):(F&=Q)!==0&&(E=Lh(F))}else(Q=y&~I)!==0?E=Lh(Q):F!==0&&(E=Lh(F));if(E===0)return 0;if(d!==0&&d!==E&&!(d&I)&&((I=E&-E)>=(F=d&-d)||I===16&&4194240&F))return d;if(4&E&&(E|=16&y),(d=c.entangledLanes)!==0)for(c=c.entanglements,d&=E;0<d;)I=1<<(y=31-co(d)),E|=c[y],d&=~I;return E}function Gb(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;default:return-1}}function ng(c){return(c=-1073741825&c.pendingLanes)!==0?c:1073741824&c?1073741824:0}function hv(){var c=rc;return!(4194240&(rc<<=1))&&(rc=64),c}function hl(c){for(var d=[],y=0;31>y;y++)d.push(c);return d}function dl(c,d,y){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),(c=c.eventTimes)[d=31-co(d)]=y}function Dh(c,d){var y=c.entangledLanes|=d;for(c=c.entanglements;y;){var E=31-co(y),I=1<<E;I&d|c[E]&d&&(c[E]|=d),y&=~I}}var Wt=0;function dv(c){return 1<(c&=-c)?4<c?268435455&c?16:536870912:4:1}var fl=r.unstable_scheduleCallback,fv=r.unstable_cancelCallback,pv=r.unstable_shouldYield,rg=r.unstable_requestPaint,Fr=r.unstable_now,Fh=r.unstable_ImmediatePriority,oc=r.unstable_UserBlockingPriority,cu=r.unstable_NormalPriority,mv=r.unstable_IdlePriority,Uh=null,Ni=null,_i=typeof Object.is=="function"?Object.is:function(c,d){return c===d&&(c!==0||1/c==1/d)||c!=c&&d!=d},$o=null,zh=!1,On=!1;function zn(c){$o===null?$o=[c]:$o.push(c)}function ai(){if(!On&&$o!==null){On=!0;var c=0,d=Wt;try{var y=$o;for(Wt=1;c<y.length;c++){var E=y[c];do E=E(!0);while(E!==null)}$o=null,zh=!1}catch(I){throw $o!==null&&($o=$o.slice(c+1)),fl(Fh,ai),I}finally{Wt=d,On=!1}}return null}var fr=[],nr=0,Er=null,In=0,li=[],Bi=0,hu=null,ui=1,Yr="";function du(c,d){fr[nr++]=In,fr[nr++]=Er,Er=c,In=d}function gv(c,d,y){li[Bi++]=ui,li[Bi++]=Yr,li[Bi++]=hu,hu=c;var E=ui;c=Yr;var I=32-co(E)-1;E&=~(1<<I),y+=1;var F=32-co(d)+I;if(30<F){var Q=I-I%5;F=(E&(1<<Q)-1).toString(32),E>>=Q,I-=Q,ui=1<<32-co(d)+I|y<<I|E,Yr=F+c}else ui=1<<F|y<<I|E,Yr=c}function ig(c){c.return!==null&&(du(c,1),gv(c,1,0))}function sg(c){for(;c===Er;)Er=fr[--nr],fr[nr]=null,In=fr[--nr],fr[nr]=null;for(;c===hu;)hu=li[--Bi],li[Bi]=null,Yr=li[--Bi],li[Bi]=null,ui=li[--Bi],li[Bi]=null}var Ar=null,Vr=null,fn=!1,jo=!1,ho=null;function fo(c,d){var y=Xo(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=c,(d=c.deletions)===null?(c.deletions=[y],c.flags|=16):d.push(y)}function yv(c,d){switch(c.tag){case 5:return(d=Sn(d,c.type,c.pendingProps))!==null&&(c.stateNode=d,Ar=c,Vr=gf(d),!0);case 6:return(d=Mn(d,c.pendingProps))!==null&&(c.stateNode=d,Ar=c,Vr=null,!0);case 13:if((d=ba(d))!==null){var y=hu!==null?{id:ui,overflow:Yr}:null;return c.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},(y=Xo(18,null,null,0)).stateNode=d,y.return=c,c.child=y,Ar=c,Vr=null,!0}return!1;default:return!1}}function vf(c){return(1&c.mode)!=0&&(128&c.flags)==0}function wf(c){if(fn){var d=Vr;if(d){var y=d;if(!yv(c,d)){if(vf(c))throw Error(s(418));d=Dn(y);var E=Ar;d&&yv(c,d)?fo(E,y):(c.flags=-4097&c.flags|2,fn=!1,Ar=c)}}else{if(vf(c))throw Error(s(418));c.flags=-4097&c.flags|2,fn=!1,Ar=c}}}function ac(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ar=c}function pl(c){if(!ft||c!==Ar)return!1;if(!fn)return ac(c),fn=!0,!1;if(c.tag!==3&&(c.tag!==5||Mi(c.type)&&!ge(c.type,c.memoizedProps))){var d=Vr;if(d){if(vf(c))throw vv(),Error(s(418));for(;d;)fo(c,d),d=Dn(d)}}if(ac(c),c.tag===13){if(!ft)throw Error(s(316));if(!(c=(c=c.memoizedState)!==null?c.dehydrated:null))throw Error(s(317));Vr=Fs(c)}else Vr=Ar?Dn(c.stateNode):null;return!0}function vv(){for(var c=Vr;c;)c=Dn(c)}function ml(){ft&&(Vr=Ar=null,jo=fn=!1)}function og(c){ho===null?ho=[c]:ho.push(c)}var fu=o.ReactCurrentBatchConfig;function po(c,d){if(_i(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var y=Object.keys(c),E=Object.keys(d);if(y.length!==E.length)return!1;for(E=0;E<y.length;E++){var I=y[E];if(!uu.call(d,I)||!_i(c[I],d[I]))return!1}return!0}function $h(c){switch(c.tag){case 5:return uo(c.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return c=Us(c.type,!1);case 11:return c=Us(c.type.render,!1);case 1:return c=Us(c.type,!0);default:return""}}function $s(c,d){if(c&&c.defaultProps){for(var y in d=i({},d),c=c.defaultProps)d[y]===void 0&&(d[y]=c[y]);return d}return d}var lc=Ji(null),uc=null,Ta=null,xf=null;function _f(){xf=Ta=uc=null}function ag(c,d,y){Ye?(sn(lc,d._currentValue),d._currentValue=y):(sn(lc,d._currentValue2),d._currentValue2=y)}function bf(c){var d=lc.current;dn(lc),Ye?c._currentValue=d:c._currentValue2=d}function Sf(c,d,y){for(;c!==null;){var E=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),c===y)break;c=c.return}}function pu(c,d){uc=c,xf=Ta=null,(c=c.dependencies)!==null&&c.firstContext!==null&&(c.lanes&d&&(Gs=!0),c.firstContext=null)}function js(c){var d=Ye?c._currentValue:c._currentValue2;if(xf!==c)if(c={context:c,memoizedValue:d,next:null},Ta===null){if(uc===null)throw Error(s(308));Ta=c,uc.dependencies={lanes:0,firstContext:c}}else Ta=Ta.next=c;return d}var gl=null;function Ef(c){gl===null?gl=[c]:gl.push(c)}function mu(c,d,y,E){var I=d.interleaved;return I===null?(y.next=y,Ef(d)):(y.next=I.next,I.next=y),d.interleaved=y,Es(c,E)}function Es(c,d){c.lanes|=d;var y=c.alternate;for(y!==null&&(y.lanes|=d),y=c,c=c.return;c!==null;)c.childLanes|=d,(y=c.alternate)!==null&&(y.childLanes|=d),y=c,c=c.return;return y.tag===3?y.stateNode:null}var $n=!1;function Af(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tr(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ho(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Wo(c,d,y){var E=c.updateQueue;if(E===null)return null;if(E=E.shared,(2&tn)!=0){var I=E.pending;return I===null?d.next=d:(d.next=I.next,I.next=d),E.pending=d,Es(c,y)}return(I=E.interleaved)===null?(d.next=d,Ef(E)):(d.next=I.next,I.next=d),E.interleaved=d,Es(c,y)}function yl(c,d,y){if((d=d.updateQueue)!==null&&(d=d.shared,(4194240&y)!=0)){var E=d.lanes;y|=E&=c.pendingLanes,d.lanes=y,Dh(c,y)}}function wv(c,d){var y=c.updateQueue,E=c.alternate;if(E!==null&&y===(E=E.updateQueue)){var I=null,F=null;if((y=y.firstBaseUpdate)!==null){do{var Q={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};F===null?I=F=Q:F=F.next=Q,y=y.next}while(y!==null);F===null?I=F=d:F=F.next=d}else I=F=d;return y={baseState:E.baseState,firstBaseUpdate:I,lastBaseUpdate:F,shared:E.shared,effects:E.effects},void(c.updateQueue=y)}(c=y.lastBaseUpdate)===null?y.firstBaseUpdate=d:c.next=d,y.lastBaseUpdate=d}function Tf(c,d,y,E){var I=c.updateQueue;$n=!1;var F=I.firstBaseUpdate,Q=I.lastBaseUpdate,se=I.shared.pending;if(se!==null){I.shared.pending=null;var fe=se,ve=fe.next;fe.next=null,Q===null?F=ve:Q.next=ve,Q=fe;var be=c.alternate;be!==null&&(se=(be=be.updateQueue).lastBaseUpdate)!==Q&&(se===null?be.firstBaseUpdate=ve:se.next=ve,be.lastBaseUpdate=fe)}if(F!==null){var De=I.baseState;for(Q=0,be=ve=fe=null,se=F;;){var _e=se.lane,ke=se.eventTime;if((E&_e)===_e){be!==null&&(be=be.next={eventTime:ke,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var st=c,$t=se;switch(_e=d,ke=y,$t.tag){case 1:if(typeof(st=$t.payload)=="function"){De=st.call(ke,De,_e);break e}De=st;break e;case 3:st.flags=-65537&st.flags|128;case 0:if((_e=typeof(st=$t.payload)=="function"?st.call(ke,De,_e):st)==null)break e;De=i({},De,_e);break e;case 2:$n=!0}}se.callback!==null&&se.lane!==0&&(c.flags|=64,(_e=I.effects)===null?I.effects=[se]:_e.push(se))}else ke={eventTime:ke,lane:_e,tag:se.tag,payload:se.payload,callback:se.callback,next:null},be===null?(ve=be=ke,fe=De):be=be.next=ke,Q|=_e;if((se=se.next)===null){if((se=I.shared.pending)===null)break;se=(_e=se).next,_e.next=null,I.lastBaseUpdate=_e,I.shared.pending=null}}if(be===null&&(fe=De),I.baseState=fe,I.firstBaseUpdate=ve,I.lastBaseUpdate=be,(d=I.shared.interleaved)!==null){I=d;do Q|=I.lane,I=I.next;while(I!==d)}else F===null&&(I.shared.lanes=0);jh|=Q,c.lanes=Q,c.memoizedState=De}}function Cf(c,d,y){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var E=c[d],I=E.callback;if(I!==null){if(E.callback=null,E=y,typeof I!="function")throw Error(s(191,I));I.call(E)}}}var B=new t.Component().refs;function W(c,d,y,E){y=(y=y(E,d=c.memoizedState))==null?d:i({},d,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Z={isMounted:function(c){return!!(c=c._reactInternals)&&G(c)===c},enqueueSetState:function(c,d,y){c=c._reactInternals;var E=os(),I=fc(c),F=Ho(E,I);F.payload=d,y!=null&&(F.callback=y),(d=Wo(c,F,I))!==null&&(qo(d,c,I,E),yl(d,c,I))},enqueueReplaceState:function(c,d,y){c=c._reactInternals;var E=os(),I=fc(c),F=Ho(E,I);F.tag=1,F.payload=d,y!=null&&(F.callback=y),(d=Wo(c,F,I))!==null&&(qo(d,c,I,E),yl(d,c,I))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var y=os(),E=fc(c),I=Ho(y,E);I.tag=2,d!=null&&(I.callback=d),(d=Wo(c,I,E))!==null&&(qo(d,c,E,y),yl(d,c,E))}};function J(c,d,y,E,I,F,Q){return typeof(c=c.stateNode).shouldComponentUpdate=="function"?c.shouldComponentUpdate(E,F,Q):!d.prototype||!d.prototype.isPureReactComponent||!po(y,E)||!po(I,F)}function ie(c,d,y){var E=!1,I=es,F=d.contextType;return typeof F=="object"&&F!==null?F=js(F):(I=ts(d)?ul:Cn.current,F=(E=(E=d.contextTypes)!=null)?cl(c,I):es),d=new d(y,F),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Z,c.stateNode=d,d._reactInternals=c,E&&((c=c.stateNode).__reactInternalMemoizedUnmaskedChildContext=I,c.__reactInternalMemoizedMaskedChildContext=F),d}function de(c,d,y,E){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,E),d.state!==c&&Z.enqueueReplaceState(d,d.state,null)}function xe(c,d,y,E){var I=c.stateNode;I.props=y,I.state=c.memoizedState,I.refs=B,Af(c);var F=d.contextType;typeof F=="object"&&F!==null?I.context=js(F):(F=ts(d)?ul:Cn.current,I.context=cl(c,F)),I.state=c.memoizedState,typeof(F=d.getDerivedStateFromProps)=="function"&&(W(c,d,F,y),I.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(d=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),d!==I.state&&Z.enqueueReplaceState(I,I.state,null),Tf(c,y,I,E),I.state=c.memoizedState),typeof I.componentDidMount=="function"&&(c.flags|=4194308)}function Ee(c,d,y){if((c=y.ref)!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner){if(y.tag!==1)throw Error(s(309));var E=y.stateNode}if(!E)throw Error(s(147,c));var I=E,F=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===F?d.ref:(d=function(Q){var se=I.refs;se===B&&(se=I.refs={}),Q===null?delete se[F]:se[F]=Q},d._stringRef=F,d)}if(typeof c!="string")throw Error(s(284));if(!y._owner)throw Error(s(290,c))}return c}function Pe(c,d){throw c=Object.prototype.toString.call(d),Error(s(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function He(c){return(0,c._init)(c._payload)}function Ge(c){function d(Se,ce){if(c){var ye=Se.deletions;ye===null?(Se.deletions=[ce],Se.flags|=16):ye.push(ce)}}function y(Se,ce){if(!c)return null;for(;ce!==null;)d(Se,ce),ce=ce.sibling;return null}function E(Se,ce){for(Se=new Map;ce!==null;)ce.key!==null?Se.set(ce.key,ce):Se.set(ce.index,ce),ce=ce.sibling;return Se}function I(Se,ce){return(Se=mc(Se,ce)).index=0,Se.sibling=null,Se}function F(Se,ce,ye){return Se.index=ye,c?(ye=Se.alternate)!==null?(ye=ye.index)<ce?(Se.flags|=2,ce):ye:(Se.flags|=2,ce):(Se.flags|=1048576,ce)}function Q(Se){return c&&Se.alternate===null&&(Se.flags|=2),Se}function se(Se,ce,ye,Te){return ce===null||ce.tag!==6?((ce=TS(ye,Se.mode,Te)).return=Se,ce):((ce=I(ce,ye)).return=Se,ce)}function fe(Se,ce,ye,Te){var gt=ye.type;return gt===u?be(Se,ce,ye.props.children,Te,ye.key):ce!==null&&(ce.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===S&&He(gt)===ce.type)?((Te=I(ce,ye.props)).ref=Ee(Se,ce,ye),Te.return=Se,Te):((Te=jv(ye.type,ye.key,ye.props,null,Se.mode,Te)).ref=Ee(Se,ce,ye),Te.return=Se,Te)}function ve(Se,ce,ye,Te){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?((ce=CS(ye,Se.mode,Te)).return=Se,ce):((ce=I(ce,ye.children||[])).return=Se,ce)}function be(Se,ce,ye,Te,gt){return ce===null||ce.tag!==7?((ce=Gh(ye,Se.mode,Te,gt)).return=Se,ce):((ce=I(ce,ye)).return=Se,ce)}function De(Se,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return(ce=TS(""+ce,Se.mode,ye)).return=Se,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case a:return(ye=jv(ce.type,ce.key,ce.props,null,Se.mode,ye)).ref=Ee(Se,null,ce),ye.return=Se,ye;case l:return(ce=CS(ce,Se.mode,ye)).return=Se,ce;case S:return De(Se,(0,ce._init)(ce._payload),ye)}if(A(ce)||D(ce))return(ce=Gh(ce,Se.mode,ye,null)).return=Se,ce;Pe(Se,ce)}return null}function _e(Se,ce,ye,Te){var gt=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return gt!==null?null:se(Se,ce,""+ye,Te);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case a:return ye.key===gt?fe(Se,ce,ye,Te):null;case l:return ye.key===gt?ve(Se,ce,ye,Te):null;case S:return _e(Se,ce,(gt=ye._init)(ye._payload),Te)}if(A(ye)||D(ye))return gt!==null?null:be(Se,ce,ye,Te,null);Pe(Se,ye)}return null}function ke(Se,ce,ye,Te,gt){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return se(ce,Se=Se.get(ye)||null,""+Te,gt);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case a:return fe(ce,Se=Se.get(Te.key===null?ye:Te.key)||null,Te,gt);case l:return ve(ce,Se=Se.get(Te.key===null?ye:Te.key)||null,Te,gt);case S:return ke(Se,ce,ye,(0,Te._init)(Te._payload),gt)}if(A(Te)||D(Te))return be(ce,Se=Se.get(ye)||null,Te,gt,null);Pe(ce,Te)}return null}function st(Se,ce,ye,Te){for(var gt=null,Rn=null,lt=ce,mn=ce=0,Di=null;lt!==null&&mn<ye.length;mn++){lt.index>mn?(Di=lt,lt=null):Di=lt.sibling;var Pn=_e(Se,lt,ye[mn],Te);if(Pn===null){lt===null&&(lt=Di);break}c&&lt&&Pn.alternate===null&&d(Se,lt),ce=F(Pn,ce,mn),Rn===null?gt=Pn:Rn.sibling=Pn,Rn=Pn,lt=Di}if(mn===ye.length)return y(Se,lt),fn&&du(Se,mn),gt;if(lt===null){for(;mn<ye.length;mn++)(lt=De(Se,ye[mn],Te))!==null&&(ce=F(lt,ce,mn),Rn===null?gt=lt:Rn.sibling=lt,Rn=lt);return fn&&du(Se,mn),gt}for(lt=E(Se,lt);mn<ye.length;mn++)(Di=ke(lt,Se,mn,ye[mn],Te))!==null&&(c&&Di.alternate!==null&&lt.delete(Di.key===null?mn:Di.key),ce=F(Di,ce,mn),Rn===null?gt=Di:Rn.sibling=Di,Rn=Di);return c&&lt.forEach(function(gc){return d(Se,gc)}),fn&&du(Se,mn),gt}function $t(Se,ce,ye,Te){var gt=D(ye);if(typeof gt!="function")throw Error(s(150));if((ye=gt.call(ye))==null)throw Error(s(151));for(var Rn=gt=null,lt=ce,mn=ce=0,Di=null,Pn=ye.next();lt!==null&&!Pn.done;mn++,Pn=ye.next()){lt.index>mn?(Di=lt,lt=null):Di=lt.sibling;var gc=_e(Se,lt,Pn.value,Te);if(gc===null){lt===null&&(lt=Di);break}c&&lt&&gc.alternate===null&&d(Se,lt),ce=F(gc,ce,mn),Rn===null?gt=gc:Rn.sibling=gc,Rn=gc,lt=Di}if(Pn.done)return y(Se,lt),fn&&du(Se,mn),gt;if(lt===null){for(;!Pn.done;mn++,Pn=ye.next())(Pn=De(Se,Pn.value,Te))!==null&&(ce=F(Pn,ce,mn),Rn===null?gt=Pn:Rn.sibling=Pn,Rn=Pn);return fn&&du(Se,mn),gt}for(lt=E(Se,lt);!Pn.done;mn++,Pn=ye.next())(Pn=ke(lt,Se,mn,Pn.value,Te))!==null&&(c&&Pn.alternate!==null&&lt.delete(Pn.key===null?mn:Pn.key),ce=F(Pn,ce,mn),Rn===null?gt=Pn:Rn.sibling=Pn,Rn=Pn);return c&&lt.forEach(function(Mj){return d(Se,Mj)}),fn&&du(Se,mn),gt}return function Se(ce,ye,Te,gt){if(typeof Te=="object"&&Te!==null&&Te.type===u&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case a:e:{for(var Rn=Te.key,lt=ye;lt!==null;){if(lt.key===Rn){if((Rn=Te.type)===u){if(lt.tag===7){y(ce,lt.sibling),(ye=I(lt,Te.props.children)).return=ce,ce=ye;break e}}else if(lt.elementType===Rn||typeof Rn=="object"&&Rn!==null&&Rn.$$typeof===S&&He(Rn)===lt.type){y(ce,lt.sibling),(ye=I(lt,Te.props)).ref=Ee(ce,lt,Te),ye.return=ce,ce=ye;break e}y(ce,lt);break}d(ce,lt),lt=lt.sibling}Te.type===u?((ye=Gh(Te.props.children,ce.mode,gt,Te.key)).return=ce,ce=ye):((gt=jv(Te.type,Te.key,Te.props,null,ce.mode,gt)).ref=Ee(ce,ye,Te),gt.return=ce,ce=gt)}return Q(ce);case l:e:{for(lt=Te.key;ye!==null;){if(ye.key===lt){if(ye.tag===4&&ye.stateNode.containerInfo===Te.containerInfo&&ye.stateNode.implementation===Te.implementation){y(ce,ye.sibling),(ye=I(ye,Te.children||[])).return=ce,ce=ye;break e}y(ce,ye);break}d(ce,ye),ye=ye.sibling}(ye=CS(Te,ce.mode,gt)).return=ce,ce=ye}return Q(ce);case S:return Se(ce,ye,(lt=Te._init)(Te._payload),gt)}if(A(Te))return st(ce,ye,Te,gt);if(D(Te))return $t(ce,ye,Te,gt);Pe(ce,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,ye!==null&&ye.tag===6?(y(ce,ye.sibling),(ye=I(ye,Te)).return=ce,ce=ye):(y(ce,ye),(ye=TS(Te,ce.mode,gt)).return=ce,ce=ye),Q(ce)):y(ce,ye)}}var Ve=Ge(!0),Rt=Ge(!1),un={},Pt=Ji(un),Dt=Ji(un),Ct=Ji(un);function qe(c){if(c===un)throw Error(s(174));return c}function pn(c,d){sn(Ct,d),sn(Dt,c),sn(Pt,un),c=C(d),dn(Pt),sn(Pt,c)}function Un(){dn(Pt),dn(Dt),dn(Ct)}function rr(c){var d=qe(Ct.current),y=qe(Pt.current);y!==(d=k(y,c.type,d))&&(sn(Dt,c),sn(Pt,d))}function Nn(c){Dt.current===c&&(dn(Pt),dn(Dt))}var Ft=Ji(0);function ci(c){for(var d=c;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&((y=y.dehydrated)===null||Kt(y)||En(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(128&d.flags)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var bi=[];function ns(){for(var c=0;c<bi.length;c++){var d=bi[c];Ye?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}bi.length=0}var rs=o.ReactCurrentDispatcher,As=o.ReactCurrentBatchConfig,Cr=0,on=null,an=null,ln=null,Si=!1,Go=!1,Hs=0,Ws=0;function is(){throw Error(s(321))}function Vb(c,d){if(d===null)return!1;for(var y=0;y<d.length&&y<c.length;y++)if(!_i(c[y],d[y]))return!1;return!0}function qb(c,d,y,E,I,F){if(Cr=F,on=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,rs.current=c===null||c.memoizedState===null?fj:pj,c=y(E,I),Go){F=0;do{if(Go=!1,Hs=0,25<=F)throw Error(s(301));F+=1,ln=an=null,d.updateQueue=null,rs.current=mj,c=y(E,I)}while(Go)}if(rs.current=bv,d=an!==null&&an.next!==null,Cr=0,ln=an=on=null,Si=!1,d)throw Error(s(300));return c}function Xb(){var c=Hs!==0;return Hs=0,c}function vl(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?on.memoizedState=ln=c:ln=ln.next=c,ln}function Vo(){if(an===null){var c=on.alternate;c=c!==null?c.memoizedState:null}else c=an.next;var d=ln===null?on.memoizedState:ln.next;if(d!==null)ln=d,an=c;else{if(c===null)throw Error(s(310));c={memoizedState:(an=c).memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},ln===null?on.memoizedState=ln=c:ln=ln.next=c}return ln}function lg(c,d){return typeof d=="function"?d(c):d}function Kb(c){var d=Vo(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=c;var E=an,I=E.baseQueue,F=y.pending;if(F!==null){if(I!==null){var Q=I.next;I.next=F.next,F.next=Q}E.baseQueue=I=F,y.pending=null}if(I!==null){F=I.next,E=E.baseState;var se=Q=null,fe=null,ve=F;do{var be=ve.lane;if((Cr&be)===be)fe!==null&&(fe=fe.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),E=ve.hasEagerState?ve.eagerState:c(E,ve.action);else{var De={lane:be,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};fe===null?(se=fe=De,Q=E):fe=fe.next=De,on.lanes|=be,jh|=be}ve=ve.next}while(ve!==null&&ve!==F);fe===null?Q=E:fe.next=se,_i(E,d.memoizedState)||(Gs=!0),d.memoizedState=E,d.baseState=Q,d.baseQueue=fe,y.lastRenderedState=E}if((c=y.interleaved)!==null){I=c;do F=I.lane,on.lanes|=F,jh|=F,I=I.next;while(I!==c)}else I===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function Qb(c){var d=Vo(),y=d.queue;if(y===null)throw Error(s(311));y.lastRenderedReducer=c;var E=y.dispatch,I=y.pending,F=d.memoizedState;if(I!==null){y.pending=null;var Q=I=I.next;do F=c(F,Q.action),Q=Q.next;while(Q!==I);_i(F,d.memoizedState)||(Gs=!0),d.memoizedState=F,d.baseQueue===null&&(d.baseState=F),y.lastRenderedState=F}return[F,E]}function HP(){}function WP(c,d){var y=on,E=Vo(),I=d(),F=!_i(E.memoizedState,I);if(F&&(E.memoizedState=I,Gs=!0),E=E.queue,Yb(qP.bind(null,y,E,c),[c]),E.getSnapshot!==d||F||ln!==null&&1&ln.memoizedState.tag){if(y.flags|=2048,ug(9,VP.bind(null,y,E,I,d),void 0,null),Ei===null)throw Error(s(349));30&Cr||GP(y,d,I)}return I}function GP(c,d,y){c.flags|=16384,c={getSnapshot:d,value:y},(d=on.updateQueue)===null?(d={lastEffect:null,stores:null},on.updateQueue=d,d.stores=[c]):(y=d.stores)===null?d.stores=[c]:y.push(c)}function VP(c,d,y,E){d.value=y,d.getSnapshot=E,XP(d)&&KP(c)}function qP(c,d,y){return y(function(){XP(d)&&KP(c)})}function XP(c){var d=c.getSnapshot;c=c.value;try{var y=d();return!_i(c,y)}catch{return!0}}function KP(c){var d=Es(c,1);d!==null&&qo(d,c,1,-1)}function QP(c){var d=vl();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lg,lastRenderedState:c},d.queue=c,c=c.dispatch=dj.bind(null,on,c),[d.memoizedState,c]}function ug(c,d,y,E){return c={tag:c,create:d,destroy:y,deps:E,next:null},(d=on.updateQueue)===null?(d={lastEffect:null,stores:null},on.updateQueue=d,d.lastEffect=c.next=c):(y=d.lastEffect)===null?d.lastEffect=c.next=c:(E=y.next,y.next=c,c.next=E,d.lastEffect=c),c}function YP(){return Vo().memoizedState}function xv(c,d,y,E){var I=vl();on.flags|=c,I.memoizedState=ug(1|d,y,void 0,E===void 0?null:E)}function _v(c,d,y,E){var I=Vo();E=E===void 0?null:E;var F=void 0;if(an!==null){var Q=an.memoizedState;if(F=Q.destroy,E!==null&&Vb(E,Q.deps))return void(I.memoizedState=ug(d,y,F,E))}on.flags|=c,I.memoizedState=ug(1|d,y,F,E)}function ZP(c,d){return xv(8390656,8,c,d)}function Yb(c,d){return _v(2048,8,c,d)}function JP(c,d){return _v(4,2,c,d)}function ek(c,d){return _v(4,4,c,d)}function tk(c,d){return typeof d=="function"?(c=c(),d(c),function(){d(null)}):d!=null?(c=c(),d.current=c,function(){d.current=null}):void 0}function nk(c,d,y){return y=y!=null?y.concat([c]):null,_v(4,4,tk.bind(null,d,c),y)}function Zb(){}function rk(c,d){var y=Vo();d=d===void 0?null:d;var E=y.memoizedState;return E!==null&&d!==null&&Vb(d,E[1])?E[0]:(y.memoizedState=[c,d],c)}function ik(c,d){var y=Vo();d=d===void 0?null:d;var E=y.memoizedState;return E!==null&&d!==null&&Vb(d,E[1])?E[0]:(c=c(),y.memoizedState=[c,d],c)}function sk(c,d,y){return 21&Cr?(_i(y,d)||(y=hv(),on.lanes|=y,jh|=y,c.baseState=!0),d):(c.baseState&&(c.baseState=!1,Gs=!0),c.memoizedState=y)}function cj(c,d){var y=Wt;Wt=y!==0&&4>y?y:4,c(!0);var E=As.transition;As.transition={};try{c(!1),d()}finally{Wt=y,As.transition=E}}function ok(){return Vo().memoizedState}function hj(c,d,y){var E=fc(c);y={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null},ak(c)?lk(d,y):(y=mu(c,d,y,E))!==null&&(qo(y,c,E,os()),uk(y,d,E))}function dj(c,d,y){var E=fc(c),I={lane:E,action:y,hasEagerState:!1,eagerState:null,next:null};if(ak(c))lk(d,I);else{var F=c.alternate;if(c.lanes===0&&(F===null||F.lanes===0)&&(F=d.lastRenderedReducer)!==null)try{var Q=d.lastRenderedState,se=F(Q,y);if(I.hasEagerState=!0,I.eagerState=se,_i(se,Q)){var fe=d.interleaved;return fe===null?(I.next=I,Ef(d)):(I.next=fe.next,fe.next=I),void(d.interleaved=I)}}catch{}(y=mu(c,d,I,E))!==null&&(qo(y,c,E,I=os()),uk(y,d,E))}}function ak(c){var d=c.alternate;return c===on||d!==null&&d===on}function lk(c,d){Go=Si=!0;var y=c.pending;y===null?d.next=d:(d.next=y.next,y.next=d),c.pending=d}function uk(c,d,y){if(4194240&y){var E=d.lanes;y|=E&=c.pendingLanes,d.lanes=y,Dh(c,y)}}var bv={readContext:js,useCallback:is,useContext:is,useEffect:is,useImperativeHandle:is,useInsertionEffect:is,useLayoutEffect:is,useMemo:is,useReducer:is,useRef:is,useState:is,useDebugValue:is,useDeferredValue:is,useTransition:is,useMutableSource:is,useSyncExternalStore:is,useId:is,unstable_isNewReconciler:!1},fj={readContext:js,useCallback:function(c,d){return vl().memoizedState=[c,d===void 0?null:d],c},useContext:js,useEffect:ZP,useImperativeHandle:function(c,d,y){return y=y!=null?y.concat([c]):null,xv(4194308,4,tk.bind(null,d,c),y)},useLayoutEffect:function(c,d){return xv(4194308,4,c,d)},useInsertionEffect:function(c,d){return xv(4,2,c,d)},useMemo:function(c,d){var y=vl();return d=d===void 0?null:d,c=c(),y.memoizedState=[c,d],c},useReducer:function(c,d,y){var E=vl();return d=y!==void 0?y(d):d,E.memoizedState=E.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},E.queue=c,c=c.dispatch=hj.bind(null,on,c),[E.memoizedState,c]},useRef:function(c){return c={current:c},vl().memoizedState=c},useState:QP,useDebugValue:Zb,useDeferredValue:function(c){return vl().memoizedState=c},useTransition:function(){var c=QP(!1),d=c[0];return c=cj.bind(null,c[1]),vl().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,y){var E=on,I=vl();if(fn){if(y===void 0)throw Error(s(407));y=y()}else{if(y=d(),Ei===null)throw Error(s(349));30&Cr||GP(E,d,y)}I.memoizedState=y;var F={value:y,getSnapshot:d};return I.queue=F,ZP(qP.bind(null,E,F,c),[c]),E.flags|=2048,ug(9,VP.bind(null,E,F,y,d),void 0,null),y},useId:function(){var c=vl(),d=Ei.identifierPrefix;if(fn){var y=Yr;d=":"+d+"R"+(y=(ui&~(1<<32-co(ui)-1)).toString(32)+y),0<(y=Hs++)&&(d+="H"+y.toString(32)),d+=":"}else d=":"+d+"r"+(y=Ws++).toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},pj={readContext:js,useCallback:rk,useContext:js,useEffect:Yb,useImperativeHandle:nk,useInsertionEffect:JP,useLayoutEffect:ek,useMemo:ik,useReducer:Kb,useRef:YP,useState:function(){return Kb(lg)},useDebugValue:Zb,useDeferredValue:function(c){return sk(Vo(),an.memoizedState,c)},useTransition:function(){return[Kb(lg)[0],Vo().memoizedState]},useMutableSource:HP,useSyncExternalStore:WP,useId:ok,unstable_isNewReconciler:!1},mj={readContext:js,useCallback:rk,useContext:js,useEffect:Yb,useImperativeHandle:nk,useInsertionEffect:JP,useLayoutEffect:ek,useMemo:ik,useReducer:Qb,useRef:YP,useState:function(){return Qb(lg)},useDebugValue:Zb,useDeferredValue:function(c){var d=Vo();return an===null?d.memoizedState=c:sk(d,an.memoizedState,c)},useTransition:function(){return[Qb(lg)[0],Vo().memoizedState]},useMutableSource:HP,useSyncExternalStore:WP,useId:ok,unstable_isNewReconciler:!1};function If(c,d){try{var y="",E=d;do y+=$h(E),E=E.return;while(E);var I=y}catch(F){I=`
Error generating stack: `+F.message+`
`+F.stack}return{value:c,source:d,stack:I,digest:null}}function Jb(c,d,y){return{value:c,source:null,stack:y??null,digest:d??null}}function eS(c,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var gj=typeof WeakMap=="function"?WeakMap:Map;function ck(c,d,y){(y=Ho(-1,y)).tag=3,y.payload={element:null};var E=d.value;return y.callback=function(){Lv||(Lv=!0,wS=E),eS(0,d)},y}function hk(c,d,y){(y=Ho(-1,y)).tag=3;var E=c.type.getDerivedStateFromError;if(typeof E=="function"){var I=d.value;y.payload=function(){return E(I)},y.callback=function(){eS(0,d)}}var F=c.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(y.callback=function(){eS(0,d),typeof E!="function"&&(hc===null?hc=new Set([this]):hc.add(this));var Q=d.stack;this.componentDidCatch(d.value,{componentStack:Q!==null?Q:""})}),y}function dk(c,d,y){var E=c.pingCache;if(E===null){E=c.pingCache=new gj;var I=new Set;E.set(d,I)}else(I=E.get(d))===void 0&&(I=new Set,E.set(d,I));I.has(y)||(I.add(y),c=Aj.bind(null,c,d,y),d.then(c,c))}function fk(c){do{var d;if((d=c.tag===13)&&(d=(d=c.memoizedState)===null||d.dehydrated!==null),d)return c;c=c.return}while(c!==null);return null}function pk(c,d,y,E,I){return 1&c.mode?(c.flags|=65536,c.lanes=I,c):(c===d?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:((d=Ho(-1,1)).tag=2,Wo(y,d,1))),y.lanes|=1),c)}var yj=o.ReactCurrentOwner,Gs=!1;function Vs(c,d,y,E){d.child=c===null?Rt(d,null,y,E):Ve(d,c.child,y,E)}function mk(c,d,y,E,I){y=y.render;var F=d.ref;return pu(d,I),E=qb(c,d,y,E,F,I),y=Xb(),c===null||Gs?(fn&&y&&ig(d),d.flags|=1,Vs(c,d,E,I),d.child):(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~I,gu(c,d,I))}function gk(c,d,y,E,I){if(c===null){var F=y.type;return typeof F!="function"||AS(F)||F.defaultProps!==void 0||y.compare!==null||y.defaultProps!==void 0?((c=jv(y.type,null,E,d,d.mode,I)).ref=d.ref,c.return=d,d.child=c):(d.tag=15,d.type=F,yk(c,d,F,E,I))}if(F=c.child,(c.lanes&I)==0){var Q=F.memoizedProps;if((y=(y=y.compare)!==null?y:po)(Q,E)&&c.ref===d.ref)return gu(c,d,I)}return d.flags|=1,(c=mc(F,E)).ref=d.ref,c.return=d,d.child=c}function yk(c,d,y,E,I){if(c!==null){var F=c.memoizedProps;if(po(F,E)&&c.ref===d.ref){if(Gs=!1,d.pendingProps=E=F,(c.lanes&I)==0)return d.lanes=c.lanes,gu(c,d,I);131072&c.flags&&(Gs=!0)}}return tS(c,d,y,E,I)}function vk(c,d,y){var E=d.pendingProps,I=E.children,F=c!==null?c.memoizedState:null;if(E.mode==="hidden")if(!(1&d.mode))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(Pf,mo),mo|=y;else{if(!(1073741824&y))return c=F!==null?F.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,sn(Pf,mo),mo|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=F!==null?F.baseLanes:y,sn(Pf,mo),mo|=E}else F!==null?(E=F.baseLanes|y,d.memoizedState=null):E=y,sn(Pf,mo),mo|=E;return Vs(c,d,I,y),d.child}function wk(c,d){var y=d.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function tS(c,d,y,E,I){var F=ts(y)?ul:Cn.current;return F=cl(d,F),pu(d,I),y=qb(c,d,y,E,F,I),E=Xb(),c===null||Gs?(fn&&E&&ig(d),d.flags|=1,Vs(c,d,y,I),d.child):(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~I,gu(c,d,I))}function xk(c,d,y,E,I){if(ts(y)){var F=!0;Bh(d)}else F=!1;if(pu(d,I),d.stateNode===null)Tv(c,d),ie(d,y,E),xe(d,y,E,I),E=!0;else if(c===null){var Q=d.stateNode,se=d.memoizedProps;Q.props=se;var fe=Q.context,ve=y.contextType;typeof ve=="object"&&ve!==null?ve=js(ve):ve=cl(d,ve=ts(y)?ul:Cn.current);var be=y.getDerivedStateFromProps,De=typeof be=="function"||typeof Q.getSnapshotBeforeUpdate=="function";De||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(se!==E||fe!==ve)&&de(d,Q,E,ve),$n=!1;var _e=d.memoizedState;Q.state=_e,Tf(d,E,Q,I),fe=d.memoizedState,se!==E||_e!==fe||Oi.current||$n?(typeof be=="function"&&(W(d,y,be,E),fe=d.memoizedState),(se=$n||J(d,y,se,E,_e,fe,ve))?(De||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=fe),Q.props=E,Q.state=fe,Q.context=ve,E=se):(typeof Q.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{Q=d.stateNode,Tr(c,d),se=d.memoizedProps,ve=d.type===d.elementType?se:$s(d.type,se),Q.props=ve,De=d.pendingProps,_e=Q.context,typeof(fe=y.contextType)=="object"&&fe!==null?fe=js(fe):fe=cl(d,fe=ts(y)?ul:Cn.current);var ke=y.getDerivedStateFromProps;(be=typeof ke=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(se!==De||_e!==fe)&&de(d,Q,E,fe),$n=!1,_e=d.memoizedState,Q.state=_e,Tf(d,E,Q,I);var st=d.memoizedState;se!==De||_e!==st||Oi.current||$n?(typeof ke=="function"&&(W(d,y,ke,E),st=d.memoizedState),(ve=$n||J(d,y,ve,E,_e,st,fe)||!1)?(be||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(E,st,fe),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(E,st,fe)),typeof Q.componentDidUpdate=="function"&&(d.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Q.componentDidUpdate!="function"||se===c.memoizedProps&&_e===c.memoizedState||(d.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&_e===c.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=st),Q.props=E,Q.state=st,Q.context=fe,E=ve):(typeof Q.componentDidUpdate!="function"||se===c.memoizedProps&&_e===c.memoizedState||(d.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&_e===c.memoizedState||(d.flags|=1024),E=!1)}return nS(c,d,y,E,F,I)}function nS(c,d,y,E,I,F){wk(c,d);var Q=(128&d.flags)!=0;if(!E&&!Q)return I&&eg(d,y,!1),gu(c,d,F);E=d.stateNode,yj.current=d;var se=Q&&typeof y.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,c!==null&&Q?(d.child=Ve(d,c.child,null,F),d.child=Ve(d,null,se,F)):Vs(c,d,se,F),d.memoizedState=E.state,I&&eg(d,y,!0),d.child}function _k(c){var d=c.stateNode;d.pendingContext?lv(0,d.pendingContext,d.pendingContext!==d.context):d.context&&lv(0,d.context,!1),pn(c,d.containerInfo)}function bk(c,d,y,E,I){return ml(),og(I),d.flags|=256,Vs(c,d,y,E),d.child}var cg,hg,Sv,Ev,rS={dehydrated:null,treeContext:null,retryLane:0};function iS(c){return{baseLanes:c,cachePool:null,transitions:null}}function Sk(c,d,y){var E,I=d.pendingProps,F=Ft.current,Q=!1,se=(128&d.flags)!=0;if((E=se)||(E=(c===null||c.memoizedState!==null)&&(2&F)!=0),E?(Q=!0,d.flags&=-129):c!==null&&c.memoizedState===null||(F|=1),sn(Ft,1&F),c===null)return wf(d),(c=d.memoizedState)!==null&&(c=c.dehydrated)!==null?(1&d.mode?En(c)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(se=I.children,c=I.fallback,Q?(I=d.mode,Q=d.child,se={mode:"hidden",children:se},!(1&I)&&Q!==null?(Q.childLanes=0,Q.pendingProps=se):Q=Hv(se,I,0,null),c=Gh(c,I,y,null),Q.return=d,c.return=d,Q.sibling=c,d.child=Q,d.child.memoizedState=iS(y),d.memoizedState=rS,c):sS(d,se));if((F=c.memoizedState)!==null&&(E=F.dehydrated)!==null)return function(ve,be,De,_e,ke,st,$t){if(De)return 256&be.flags?(be.flags&=-257,Av(ve,be,$t,_e=Jb(Error(s(422))))):be.memoizedState!==null?(be.child=ve.child,be.flags|=128,null):(st=_e.fallback,ke=be.mode,_e=Hv({mode:"visible",children:_e.children},ke,0,null),(st=Gh(st,ke,$t,null)).flags|=2,_e.return=be,st.return=be,_e.sibling=st,be.child=_e,1&be.mode&&Ve(be,ve.child,null,$t),be.child.memoizedState=iS($t),be.memoizedState=rS,st);if(!(1&be.mode))return Av(ve,be,$t,null);if(En(ke))return _e=Sa(ke).digest,st=Error(s(419)),_e=Jb(st,_e,void 0),Av(ve,be,$t,_e);if(De=($t&ve.childLanes)!=0,Gs||De){if((_e=Ei)!==null){switch($t&-$t){case 4:ke=2;break;case 16:ke=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ke=32;break;case 536870912:ke=268435456;break;default:ke=0}(ke=ke&(_e.suspendedLanes|$t)?0:ke)!==0&&ke!==st.retryLane&&(st.retryLane=ke,Es(ve,ke),qo(_e,ve,ke,-1))}return ES(),Av(ve,be,$t,_e=Jb(Error(s(421))))}return Kt(ke)?(be.flags|=128,be.child=ve.child,be=Tj.bind(null,ve),er(ke,be),null):(ve=st.treeContext,ft&&(Vr=Tn(ke),Ar=be,fn=!0,ho=null,jo=!1,ve!==null&&(li[Bi++]=ui,li[Bi++]=Yr,li[Bi++]=hu,ui=ve.id,Yr=ve.overflow,hu=be)),be=sS(be,_e.children),be.flags|=4096,be)}(c,d,se,I,E,F,y);if(Q){Q=I.fallback,se=d.mode,E=(F=c.child).sibling;var fe={mode:"hidden",children:I.children};return!(1&se)&&d.child!==F?((I=d.child).childLanes=0,I.pendingProps=fe,d.deletions=null):(I=mc(F,fe)).subtreeFlags=14680064&F.subtreeFlags,E!==null?Q=mc(E,Q):(Q=Gh(Q,se,y,null)).flags|=2,Q.return=d,I.return=d,I.sibling=Q,d.child=I,I=Q,Q=d.child,se=(se=c.child.memoizedState)===null?iS(y):{baseLanes:se.baseLanes|y,cachePool:null,transitions:se.transitions},Q.memoizedState=se,Q.childLanes=c.childLanes&~y,d.memoizedState=rS,I}return c=(Q=c.child).sibling,I=mc(Q,{mode:"visible",children:I.children}),!(1&d.mode)&&(I.lanes=y),I.return=d,I.sibling=null,c!==null&&((y=d.deletions)===null?(d.deletions=[c],d.flags|=16):y.push(c)),d.child=I,d.memoizedState=null,I}function sS(c,d){return(d=Hv({mode:"visible",children:d},c.mode,0,null)).return=c,c.child=d}function Av(c,d,y,E){return E!==null&&og(E),Ve(d,c.child,null,y),(c=sS(d,d.pendingProps.children)).flags|=2,d.memoizedState=null,c}function Ek(c,d,y){c.lanes|=d;var E=c.alternate;E!==null&&(E.lanes|=d),Sf(c.return,d,y)}function oS(c,d,y,E,I){var F=c.memoizedState;F===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:y,tailMode:I}:(F.isBackwards=d,F.rendering=null,F.renderingStartTime=0,F.last=E,F.tail=y,F.tailMode=I)}function Ak(c,d,y){var E=d.pendingProps,I=E.revealOrder,F=E.tail;if(Vs(c,d,E.children,y),(2&(E=Ft.current))!=0)E=1&E|2,d.flags|=128;else{if(c!==null&&128&c.flags)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Ek(c,y,d);else if(c.tag===19)Ek(c,y,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}E&=1}if(sn(Ft,E),(1&d.mode)==0)d.memoizedState=null;else switch(I){case"forwards":for(y=d.child,I=null;y!==null;)(c=y.alternate)!==null&&ci(c)===null&&(I=y),y=y.sibling;(y=I)===null?(I=d.child,d.child=null):(I=y.sibling,y.sibling=null),oS(d,!1,I,y,F);break;case"backwards":for(y=null,I=d.child,d.child=null;I!==null;){if((c=I.alternate)!==null&&ci(c)===null){d.child=I;break}c=I.sibling,I.sibling=y,y=I,I=c}oS(d,!0,y,null,F);break;case"together":oS(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Tv(c,d){!(1&d.mode)&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function gu(c,d,y){if(c!==null&&(d.dependencies=c.dependencies),jh|=d.lanes,(y&d.childLanes)==0)return null;if(c!==null&&d.child!==c.child)throw Error(s(153));if(d.child!==null){for(y=mc(c=d.child,c.pendingProps),d.child=y,y.return=d;c.sibling!==null;)c=c.sibling,(y=y.sibling=mc(c,c.pendingProps)).return=d;y.sibling=null}return d.child}function wl(c){c.flags|=4}function Tk(c,d){if(c!==null&&c.child===d.child)return!0;if(16&d.flags)return!1;for(c=d.child;c!==null;){if(12854&c.flags||12854&c.subtreeFlags)return!1;c=c.sibling}return!0}if(Ce)cg=function(c,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)T(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},hg=function(){},Sv=function(c,d,y,E,I){if((c=c.memoizedProps)!==E){var F=d.stateNode,Q=qe(Pt.current);y=oe(F,y,c,E,I,Q),(d.updateQueue=y)&&wl(d)}},Ev=function(c,d,y,E){y!==E&&wl(d)};else if(ze){cg=function(c,d,y,E){for(var I=d.child;I!==null;){if(I.tag===5){var F=I.stateNode;y&&E&&(F=bn(F,I.type,I.memoizedProps,I)),T(c,F)}else if(I.tag===6)F=I.stateNode,y&&E&&(F=Dr(F,I.memoizedProps,I)),T(c,F);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)(F=I.child)!==null&&(F.return=I),cg(c,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===d)break;for(;I.sibling===null;){if(I.return===null||I.return===d)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var Ck=function(c,d,y,E){for(var I=d.child;I!==null;){if(I.tag===5){var F=I.stateNode;y&&E&&(F=bn(F,I.type,I.memoizedProps,I)),Jn(c,F)}else if(I.tag===6)F=I.stateNode,y&&E&&(F=Dr(F,I.memoizedProps,I)),Jn(c,F);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)(F=I.child)!==null&&(F.return=I),Ck(c,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===d)break;for(;I.sibling===null;){if(I.return===null||I.return===d)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};hg=function(c,d){var y=d.stateNode;if(!Tk(c,d)){c=y.containerInfo;var E=Zn(c);Ck(E,d,!1,!1),y.pendingChildren=E,wl(d),mf(c,E)}},Sv=function(c,d,y,E,I){var F=c.stateNode,Q=c.memoizedProps;if((c=Tk(c,d))&&Q===E)d.stateNode=F;else{var se=d.stateNode,fe=qe(Pt.current),ve=null;Q!==E&&(ve=oe(se,y,Q,E,I,fe)),c&&ve===null?d.stateNode=F:(F=pf(F,ve,y,Q,E,d,c,se),V(F,y,E,I,fe)&&wl(d),d.stateNode=F,c?wl(d):cg(F,d,!1,!1))}},Ev=function(c,d,y,E){y!==E?(c=qe(Ct.current),y=qe(Pt.current),d.stateNode=we(E,c,y,d),wl(d)):d.stateNode=c.stateNode}}else hg=function(){},Sv=function(){},Ev=function(){};function dg(c,d){if(!fn)switch(c.tailMode){case"hidden":d=c.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var E=null;y!==null;)y.alternate!==null&&(E=y),y=y.sibling;E===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:E.sibling=null}}function Ts(c){var d=c.alternate!==null&&c.alternate.child===c.child,y=0,E=0;if(d)for(var I=c.child;I!==null;)y|=I.lanes|I.childLanes,E|=14680064&I.subtreeFlags,E|=14680064&I.flags,I.return=c,I=I.sibling;else for(I=c.child;I!==null;)y|=I.lanes|I.childLanes,E|=I.subtreeFlags,E|=I.flags,I.return=c,I=I.sibling;return c.subtreeFlags|=E,c.childLanes=y,d}function vj(c,d,y){var E=d.pendingProps;switch(sg(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ts(d),null;case 1:case 17:return ts(d.type)&&Jm(),Ts(d),null;case 3:return y=d.stateNode,Un(),dn(Oi),dn(Cn),ns(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),c!==null&&c.child!==null||(pl(d)?wl(d):c===null||c.memoizedState.isDehydrated&&!(256&d.flags)||(d.flags|=1024,ho!==null&&(bS(ho),ho=null))),hg(c,d),Ts(d),null;case 5:Nn(d),y=qe(Ct.current);var I=d.type;if(c!==null&&d.stateNode!=null)Sv(c,d,I,E,y),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(s(166));return Ts(d),null}if(c=qe(Pt.current),pl(d)){if(!ft)throw Error(s(175));c=yf(d.stateNode,d.type,d.memoizedProps,y,c,d,!jo),d.updateQueue=c,c!==null&&wl(d)}else{var F=N(I,E,y,c,d);cg(F,d,!1,!1),d.stateNode=F,V(F,I,E,y,c)&&wl(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Ts(d),null;case 6:if(c&&d.stateNode!=null)Ev(c,d,c.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(s(166));if(c=qe(Ct.current),y=qe(Pt.current),pl(d)){if(!ft)throw Error(s(176));if(c=d.stateNode,y=d.memoizedProps,(E=Fn(c,y,d,!jo))&&(I=Ar)!==null)switch(I.tag){case 3:Ea(I.stateNode.containerInfo,c,y,(1&I.mode)!=0);break;case 5:nc(I.type,I.memoizedProps,I.stateNode,c,y,(1&I.mode)!=0)}E&&wl(d)}else d.stateNode=we(E,c,y,d)}return Ts(d),null;case 13:if(dn(Ft),E=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(fn&&Vr!==null&&1&d.mode&&!(128&d.flags))vv(),ml(),d.flags|=98560,I=!1;else if(I=pl(d),E!==null&&E.dehydrated!==null){if(c===null){if(!I)throw Error(s(318));if(!ft)throw Error(s(344));if(!(I=(I=d.memoizedState)!==null?I.dehydrated:null))throw Error(s(317));tr(I,d)}else ml(),!(128&d.flags)&&(d.memoizedState=null),d.flags|=4;Ts(d),I=!1}else ho!==null&&(bS(ho),ho=null),I=!0;if(!I)return 65536&d.flags?d:null}return 128&d.flags?(d.lanes=y,d):((y=E!==null)!=(c!==null&&c.memoizedState!==null)&&y&&(d.child.flags|=8192,1&d.mode&&(c===null||1&Ft.current?hi===0&&(hi=3):ES())),d.updateQueue!==null&&(d.flags|=4),Ts(d),null);case 4:return Un(),hg(c,d),c===null&&vt(d.stateNode.containerInfo),Ts(d),null;case 10:return bf(d.type._context),Ts(d),null;case 19:if(dn(Ft),(I=d.memoizedState)===null)return Ts(d),null;if(E=(128&d.flags)!=0,(F=I.rendering)===null)if(E)dg(I,!1);else{if(hi!==0||c!==null&&128&c.flags)for(c=d.child;c!==null;){if((F=ci(c))!==null){for(d.flags|=128,dg(I,!1),(c=F.updateQueue)!==null&&(d.updateQueue=c,d.flags|=4),d.subtreeFlags=0,c=y,y=d.child;y!==null;)I=c,(E=y).flags&=14680066,(F=E.alternate)===null?(E.childLanes=0,E.lanes=I,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=F.childLanes,E.lanes=F.lanes,E.child=F.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=F.memoizedProps,E.memoizedState=F.memoizedState,E.updateQueue=F.updateQueue,E.type=F.type,I=F.dependencies,E.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),y=y.sibling;return sn(Ft,1&Ft.current|2),d.child}c=c.sibling}I.tail!==null&&Fr()>vS&&(d.flags|=128,E=!0,dg(I,!1),d.lanes=4194304)}else{if(!E)if((c=ci(F))!==null){if(d.flags|=128,E=!0,(c=c.updateQueue)!==null&&(d.updateQueue=c,d.flags|=4),dg(I,!0),I.tail===null&&I.tailMode==="hidden"&&!F.alternate&&!fn)return Ts(d),null}else 2*Fr()-I.renderingStartTime>vS&&y!==1073741824&&(d.flags|=128,E=!0,dg(I,!1),d.lanes=4194304);I.isBackwards?(F.sibling=d.child,d.child=F):((c=I.last)!==null?c.sibling=F:d.child=F,I.last=F)}return I.tail!==null?(d=I.tail,I.rendering=d,I.tail=d.sibling,I.renderingStartTime=Fr(),d.sibling=null,c=Ft.current,sn(Ft,E?1&c|2:1&c),d):(Ts(d),null);case 22:case 23:return SS(),y=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==y&&(d.flags|=8192),y&&1&d.mode?1073741824&mo&&(Ts(d),Ce&&6&d.subtreeFlags&&(d.flags|=8192)):Ts(d),null;case 24:case 25:return null}throw Error(s(156,d.tag))}function wj(c,d){switch(sg(d),d.tag){case 1:return ts(d.type)&&Jm(),65536&(c=d.flags)?(d.flags=-65537&c|128,d):null;case 3:return Un(),dn(Oi),dn(Cn),ns(),65536&(c=d.flags)&&!(128&c)?(d.flags=-65537&c|128,d):null;case 5:return Nn(d),null;case 13:if(dn(Ft),(c=d.memoizedState)!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(s(340));ml()}return 65536&(c=d.flags)?(d.flags=-65537&c|128,d):null;case 19:return dn(Ft),null;case 4:return Un(),null;case 10:return bf(d.type._context),null;case 22:case 23:return SS(),null;default:return null}}var Cv=!1,ss=!1,xj=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Rf(c,d){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(E){pr(c,d,E)}else y.current=null}function Ik(c,d,y){try{y()}catch(E){pr(c,d,E)}}var Rk=!1;function fg(c,d,y){var E=d.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var I=E=E.next;do{if((I.tag&c)===c){var F=I.destroy;I.destroy=void 0,F!==void 0&&Ik(d,y,F)}I=I.next}while(I!==E)}}function Iv(c,d){if((d=(d=d.updateQueue)!==null?d.lastEffect:null)!==null){var y=d=d.next;do{if((y.tag&c)===c){var E=y.create;y.destroy=E()}y=y.next}while(y!==d)}}function aS(c){var d=c.ref;if(d!==null){var y=c.stateNode;c.tag===5?c=O(y):c=y,typeof d=="function"?d(c):d.current=c}}function Pk(c){var d=c.alternate;d!==null&&(c.alternate=null,Pk(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode)!==null&&Ut(d),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function kk(c){return c.tag===5||c.tag===3||c.tag===4}function Mk(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||kk(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(2&c.flags||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(2&c.flags))return c.stateNode}}function lS(c,d,y){var E=c.tag;if(E===5||E===6)c=c.stateNode,d?re(y,c,d):en(y,c);else if(E!==4&&(c=c.child)!==null)for(lS(c,d,y),c=c.sibling;c!==null;)lS(c,d,y),c=c.sibling}function uS(c,d,y){var E=c.tag;if(E===5||E===6)c=c.stateNode,d?X(y,c,d):br(y,c);else if(E!==4&&(c=c.child)!==null)for(uS(c,d,y),c=c.sibling;c!==null;)uS(c,d,y),c=c.sibling}var Cs=null,xl=!1;function _l(c,d,y){for(y=y.child;y!==null;)cS(c,d,y),y=y.sibling}function cS(c,d,y){if(Ni&&typeof Ni.onCommitFiberUnmount=="function")try{Ni.onCommitFiberUnmount(Uh,y)}catch{}switch(y.tag){case 5:ss||Rf(y,d);case 6:if(Ce){var E=Cs,I=xl;Cs=null,_l(c,d,y),xl=I,(Cs=E)!==null&&(xl?me(Cs,y.stateNode):ue(Cs,y.stateNode))}else _l(c,d,y);break;case 18:Ce&&Cs!==null&&(xl?ll(Cs,y.stateNode):dr(Cs,y.stateNode));break;case 4:Ce?(E=Cs,I=xl,Cs=y.stateNode.containerInfo,xl=!0,_l(c,d,y),Cs=E,xl=I):(ze&&(E=y.stateNode.containerInfo,I=Zn(E),je(E,I)),_l(c,d,y));break;case 0:case 11:case 14:case 15:if(!ss&&(E=y.updateQueue)!==null&&(E=E.lastEffect)!==null){I=E=E.next;do{var F=I,Q=F.destroy;F=F.tag,Q!==void 0&&(2&F||4&F)&&Ik(y,d,Q),I=I.next}while(I!==E)}_l(c,d,y);break;case 1:if(!ss&&(Rf(y,d),typeof(E=y.stateNode).componentWillUnmount=="function"))try{E.props=y.memoizedProps,E.state=y.memoizedState,E.componentWillUnmount()}catch(se){pr(y,d,se)}_l(c,d,y);break;case 21:_l(c,d,y);break;case 22:1&y.mode?(ss=(E=ss)||y.memoizedState!==null,_l(c,d,y),ss=E):_l(c,d,y);break;default:_l(c,d,y)}}function Ok(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new xj),d.forEach(function(E){var I=Cj.bind(null,c,E);y.has(E)||(y.add(E),E.then(I,I))})}}function Ca(c,d){var y=d.deletions;if(y!==null)for(var E=0;E<y.length;E++){var I=y[E];try{var F=c,Q=d;if(Ce){var se=Q;e:for(;se!==null;){switch(se.tag){case 5:Cs=se.stateNode,xl=!1;break e;case 3:case 4:Cs=se.stateNode.containerInfo,xl=!0;break e}se=se.return}if(Cs===null)throw Error(s(160));cS(F,Q,I),Cs=null,xl=!1}else cS(F,Q,I);var fe=I.alternate;fe!==null&&(fe.return=null),I.return=null}catch(ve){pr(I,d,ve)}}if(12854&d.subtreeFlags)for(d=d.child;d!==null;)Nk(d,c),d=d.sibling}function Nk(c,d){var y=c.alternate,E=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ca(d,c),bl(c),4&E){try{fg(3,c,c.return),Iv(3,c)}catch(_e){pr(c,c.return,_e)}try{fg(5,c,c.return)}catch(_e){pr(c,c.return,_e)}}break;case 1:Ca(d,c),bl(c),512&E&&y!==null&&Rf(y,y.return);break;case 5:if(Ca(d,c),bl(c),512&E&&y!==null&&Rf(y,y.return),Ce){if(32&c.flags){var I=c.stateNode;try{_t(I)}catch(_e){pr(c,c.return,_e)}}if(4&E&&(I=c.stateNode)!=null){var F=c.memoizedProps;if(y=y!==null?y.memoizedProps:F,E=c.type,d=c.updateQueue,c.updateQueue=null,d!==null)try{M(I,d,E,y,F,c)}catch(_e){pr(c,c.return,_e)}}}break;case 6:if(Ca(d,c),bl(c),4&E&&Ce){if(c.stateNode===null)throw Error(s(162));I=c.stateNode,F=c.memoizedProps,y=y!==null?y.memoizedProps:F;try{$(I,y,F)}catch(_e){pr(c,c.return,_e)}}break;case 3:if(Ca(d,c),bl(c),4&E){if(Ce&&ft&&y!==null&&y.memoizedState.isDehydrated)try{Sr(d.containerInfo)}catch(_e){pr(c,c.return,_e)}if(ze){I=d.containerInfo,F=d.pendingChildren;try{je(I,F)}catch(_e){pr(c,c.return,_e)}}}break;case 4:if(Ca(d,c),bl(c),4&E&&ze){I=(F=c.stateNode).containerInfo,F=F.pendingChildren;try{je(I,F)}catch(_e){pr(c,c.return,_e)}}break;case 13:Ca(d,c),bl(c),8192&(I=c.child).flags&&(F=I.memoizedState!==null,I.stateNode.isHidden=F,!F||I.alternate!==null&&I.alternate.memoizedState!==null||(yS=Fr())),4&E&&Ok(c);break;case 22:var Q=y!==null&&y.memoizedState!==null;if(1&c.mode?(ss=(y=ss)||Q,Ca(d,c),ss=y):Ca(d,c),bl(c),8192&E){if(y=c.memoizedState!==null,(c.stateNode.isHidden=y)&&!Q&&(1&c.mode)!=0)for(Ze=c,E=c.child;E!==null;){for(d=Ze=E;Ze!==null;){var se=(Q=Ze).child;switch(Q.tag){case 0:case 11:case 14:case 15:fg(4,Q,Q.return);break;case 1:Rf(Q,Q.return);var fe=Q.stateNode;if(typeof fe.componentWillUnmount=="function"){var ve=Q,be=Q.return;try{var De=ve;fe.props=De.memoizedProps,fe.state=De.memoizedState,fe.componentWillUnmount()}catch(_e){pr(ve,be,_e)}}break;case 5:Rf(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Dk(d);continue}}se!==null?(se.return=Q,Ze=se):Dk(d)}E=E.sibling}if(Ce){e:if(E=null,Ce)for(d=c;;){if(d.tag===5){if(E===null){E=d;try{I=d.stateNode,y?Tt(I):_n(d.stateNode,d.memoizedProps)}catch(_e){pr(c,c.return,_e)}}}else if(d.tag===6){if(E===null)try{F=d.stateNode,y?at(F):wt(F,d.memoizedProps)}catch(_e){pr(c,c.return,_e)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;E===d&&(E=null),d=d.return}E===d&&(E=null),d.sibling.return=d.return,d=d.sibling}}}break;case 19:Ca(d,c),bl(c),4&E&&Ok(c);break;case 21:break;default:Ca(d,c),bl(c)}}function bl(c){var d=c.flags;if(2&d){try{if(Ce){e:{for(var y=c.return;y!==null;){if(kk(y)){var E=y;break e}y=y.return}throw Error(s(160))}switch(E.tag){case 5:var I=E.stateNode;32&E.flags&&(_t(I),E.flags&=-33),uS(c,Mk(c),I);break;case 3:case 4:var F=E.stateNode.containerInfo;lS(c,Mk(c),F);break;default:throw Error(s(161))}}}catch(Q){pr(c,c.return,Q)}c.flags&=-3}4096&d&&(c.flags&=-4097)}function _j(c,d,y){Ze=c,Bk(c)}function Bk(c,d,y){for(var E=(1&c.mode)!=0;Ze!==null;){var I=Ze,F=I.child;if(I.tag===22&&E){var Q=I.memoizedState!==null||Cv;if(!Q){var se=I.alternate,fe=se!==null&&se.memoizedState!==null||ss;se=Cv;var ve=ss;if(Cv=Q,(ss=fe)&&!ve)for(Ze=I;Ze!==null;)fe=(Q=Ze).child,Q.tag===22&&Q.memoizedState!==null?Fk(I):fe!==null?(fe.return=Q,Ze=fe):Fk(I);for(;F!==null;)Ze=F,Bk(F),F=F.sibling;Ze=I,Cv=se,ss=ve}Lk(c)}else 8772&I.subtreeFlags&&F!==null?(F.return=I,Ze=F):Lk(c)}}function Lk(c){for(;Ze!==null;){var d=Ze;if(8772&d.flags){var y=d.alternate;try{if(8772&d.flags)switch(d.tag){case 0:case 11:case 15:ss||Iv(5,d);break;case 1:var E=d.stateNode;if(4&d.flags&&!ss)if(y===null)E.componentDidMount();else{var I=d.elementType===d.type?y.memoizedProps:$s(d.type,y.memoizedProps);E.componentDidUpdate(I,y.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var F=d.updateQueue;F!==null&&Cf(d,F,E);break;case 3:var Q=d.updateQueue;if(Q!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=O(d.child.stateNode);break;case 1:y=d.child.stateNode}Cf(d,Q,y)}break;case 5:var se=d.stateNode;y===null&&4&d.flags&&P(se,d.type,d.memoizedProps,d);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(ft&&d.memoizedState===null){var fe=d.alternate;if(fe!==null){var ve=fe.memoizedState;if(ve!==null){var be=ve.dehydrated;be!==null&&hr(be)}}}break;default:throw Error(s(163))}ss||512&d.flags&&aS(d)}catch(De){pr(d,d.return,De)}}if(d===c){Ze=null;break}if((y=d.sibling)!==null){y.return=d.return,Ze=y;break}Ze=d.return}}function Dk(c){for(;Ze!==null;){var d=Ze;if(d===c){Ze=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Ze=y;break}Ze=d.return}}function Fk(c){for(;Ze!==null;){var d=Ze;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{Iv(4,d)}catch(fe){pr(d,y,fe)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var I=d.return;try{E.componentDidMount()}catch(fe){pr(d,I,fe)}}var F=d.return;try{aS(d)}catch(fe){pr(d,F,fe)}break;case 5:var Q=d.return;try{aS(d)}catch(fe){pr(d,Q,fe)}}}catch(fe){pr(d,d.return,fe)}if(d===c){Ze=null;break}var se=d.sibling;if(se!==null){se.return=d.return,Ze=se;break}Ze=d.return}}var Rv=0,Pv=1,kv=2,Mv=3,Ov=4;if(typeof Symbol=="function"&&Symbol.for){var pg=Symbol.for;Rv=pg("selector.component"),Pv=pg("selector.has_pseudo_class"),kv=pg("selector.role"),Mv=pg("selector.test_id"),Ov=pg("selector.text")}function hS(c){var d=xt(c);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(s(364));return d}if((c=qt(c))===null)throw Error(s(362));return c.stateNode.current}function dS(c,d){switch(d.$$typeof){case Rv:if(c.type===d.value)return!0;break;case Pv:e:{d=d.value,c=[c,0];for(var y=0;y<c.length;){var E=c[y++],I=c[y++],F=d[I];if(E.tag!==5||!Et(E)){for(;F!=null&&dS(E,F);)F=d[++I];if(I===d.length){d=!0;break e}for(E=E.child;E!==null;)c.push(E,I),E=E.sibling}}d=!1}return d;case kv:if(c.tag===5&&nt(c.stateNode,d.value))return!0;break;case Ov:if((c.tag===5||c.tag===6)&&(c=Ke(c))!==null&&0<=c.indexOf(d.value))return!0;break;case Mv:if(c.tag===5&&typeof(c=c.memoizedProps["data-testname"])=="string"&&c.toLowerCase()===d.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function fS(c){switch(c.$$typeof){case Rv:return"<"+(j(c.value)||"Unknown")+">";case Pv:return":has("+(fS(c)||"")+")";case kv:return'[role="'+c.value+'"]';case Ov:return'"'+c.value+'"';case Mv:return'[data-testname="'+c.value+'"]';default:throw Error(s(365))}}function Uk(c,d){var y=[];c=[c,0];for(var E=0;E<c.length;){var I=c[E++],F=c[E++],Q=d[F];if(I.tag!==5||!Et(I)){for(;Q!=null&&dS(I,Q);)Q=d[++F];if(F===d.length)y.push(I);else for(I=I.child;I!==null;)c.push(I,F),I=I.sibling}}return y}function pS(c,d){if(!Bt)throw Error(s(363));c=Uk(c=hS(c),d),d=[],c=Array.from(c);for(var y=0;y<c.length;){var E=c[y++];if(E.tag===5)Et(E)||d.push(E.stateNode);else for(E=E.child;E!==null;)c.push(E),E=E.sibling}return d}var bj=Math.ceil,Nv=o.ReactCurrentDispatcher,mS=o.ReactCurrentOwner,qr=o.ReactCurrentBatchConfig,tn=0,Ei=null,Zr=null,Li=0,mo=0,Pf=Ji(0),hi=0,mg=null,jh=0,Bv=0,gS=0,gg=null,go=null,yS=0,vS=1/0,cc=null;function kf(){vS=Fr()+500}var zk,Lv=!1,wS=null,hc=null,Dv=!1,dc=null,Fv=0,yg=0,xS=null,Uv=-1,zv=0;function os(){return 6&tn?Fr():Uv!==-1?Uv:Uv=Fr()}function fc(c){return 1&c.mode?2&tn&&Li!==0?Li&-Li:fu.transition!==null?(zv===0&&(zv=hv()),zv):(c=Wt)!==0?c:Yn():1}function qo(c,d,y,E){if(50<yg)throw yg=0,xS=null,Error(s(185));dl(c,y,E),2&tn&&c===Ei||(c===Ei&&(!(2&tn)&&(Bv|=y),hi===4&&pc(c,Li)),qs(c,E),y===1&&tn===0&&!(1&d.mode)&&(kf(),zh&&ai()))}function qs(c,d){var y=c.callbackNode;(function(I,F){for(var Q=I.suspendedLanes,se=I.pingedLanes,fe=I.expirationTimes,ve=I.pendingLanes;0<ve;){var be=31-co(ve),De=1<<be,_e=fe[be];_e===-1?De&Q&&!(De&se)||(fe[be]=Gb(De,F)):_e<=F&&(I.expiredLanes|=De),ve&=~De}})(c,d);var E=sc(c,c===Ei?Li:0);if(E===0)y!==null&&fv(y),c.callbackNode=null,c.callbackPriority=0;else if(d=E&-E,c.callbackPriority!==d){if(y!=null&&fv(y),d===1)c.tag===0?function(I){zh=!0,zn(I)}(jk.bind(null,c)):zn(jk.bind(null,c)),Nt?lo(function(){!(6&tn)&&ai()}):fl(Fh,ai),y=null;else{switch(dv(E)){case 1:y=Fh;break;case 4:y=oc;break;case 16:default:y=cu;break;case 536870912:y=mv}y=Qk(y,$k.bind(null,c))}c.callbackPriority=d,c.callbackNode=y}}function $k(c,d){if(Uv=-1,zv=0,(6&tn)!=0)throw Error(s(327));var y=c.callbackNode;if(Wh()&&c.callbackNode!==y)return null;var E=sc(c,c===Ei?Li:0);if(E===0)return null;if(30&E||E&c.expiredLanes||d)d=$v(c,E);else{d=E;var I=tn;tn|=2;var F=Gk();for(Ei===c&&Li===d||(cc=null,kf(),Hh(c,d));;)try{Ej();break}catch(se){Wk(c,se)}_f(),Nv.current=F,tn=I,Zr!==null?d=0:(Ei=null,Li=0,d=hi)}if(d!==0){if(d===2&&(I=ng(c))!==0&&(E=I,d=_S(c,I)),d===1)throw y=mg,Hh(c,0),pc(c,E),qs(c,Fr()),y;if(d===6)pc(c,E);else{if(I=c.current.alternate,(30&E)==0&&!function(se){for(var fe=se;;){if(16384&fe.flags){var ve=fe.updateQueue;if(ve!==null&&(ve=ve.stores)!==null)for(var be=0;be<ve.length;be++){var De=ve[be],_e=De.getSnapshot;De=De.value;try{if(!_i(_e(),De))return!1}catch{return!1}}}if(ve=fe.child,16384&fe.subtreeFlags&&ve!==null)ve.return=fe,fe=ve;else{if(fe===se)break;for(;fe.sibling===null;){if(fe.return===null||fe.return===se)return!0;fe=fe.return}fe.sibling.return=fe.return,fe=fe.sibling}}return!0}(I)&&((d=$v(c,E))===2&&(F=ng(c))!==0&&(E=F,d=_S(c,F)),d===1))throw y=mg,Hh(c,0),pc(c,E),qs(c,Fr()),y;switch(c.finishedWork=I,c.finishedLanes=E,d){case 0:case 1:throw Error(s(345));case 2:case 5:Mf(c,go,cc);break;case 3:if(pc(c,E),(130023424&E)===E&&10<(d=yS+500-Fr())){if(sc(c,0)!==0)break;if(((I=c.suspendedLanes)&E)!==E){os(),c.pingedLanes|=c.suspendedLanes&I;break}c.timeoutHandle=Re(Mf.bind(null,c,go,cc),d);break}Mf(c,go,cc);break;case 4:if(pc(c,E),(4194240&E)===E)break;for(d=c.eventTimes,I=-1;0<E;){var Q=31-co(E);F=1<<Q,(Q=d[Q])>I&&(I=Q),E&=~F}if(E=I,10<(E=(120>(E=Fr()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*bj(E/1960))-E)){c.timeoutHandle=Re(Mf.bind(null,c,go,cc),E);break}Mf(c,go,cc);break;default:throw Error(s(329))}}}return qs(c,Fr()),c.callbackNode===y?$k.bind(null,c):null}function _S(c,d){var y=gg;return c.current.memoizedState.isDehydrated&&(Hh(c,d).flags|=256),(c=$v(c,d))!==2&&(d=go,go=y,d!==null&&bS(d)),c}function bS(c){go===null?go=c:go.push.apply(go,c)}function pc(c,d){for(d&=~gS,d&=~Bv,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var y=31-co(d),E=1<<y;c[y]=-1,d&=~E}}function jk(c){if(6&tn)throw Error(s(327));Wh();var d=sc(c,0);if(!(1&d))return qs(c,Fr()),null;var y=$v(c,d);if(c.tag!==0&&y===2){var E=ng(c);E!==0&&(d=E,y=_S(c,E))}if(y===1)throw y=mg,Hh(c,0),pc(c,d),qs(c,Fr()),y;if(y===6)throw Error(s(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Mf(c,go,cc),qs(c,Fr()),null}function Hk(c){dc!==null&&dc.tag===0&&!(6&tn)&&Wh();var d=tn;tn|=1;var y=qr.transition,E=Wt;try{if(qr.transition=null,Wt=1,c)return c()}finally{Wt=E,qr.transition=y,!(6&(tn=d))&&ai()}}function SS(){mo=Pf.current,dn(Pf)}function Hh(c,d){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==Ue&&(c.timeoutHandle=Ue,Ne(y)),Zr!==null)for(y=Zr.return;y!==null;){var E=y;switch(sg(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&Jm();break;case 3:Un(),dn(Oi),dn(Cn),ns();break;case 5:Nn(E);break;case 4:Un();break;case 13:case 19:dn(Ft);break;case 10:bf(E.type._context);break;case 22:case 23:SS()}y=y.return}if(Ei=c,Zr=c=mc(c.current,null),Li=mo=d,hi=0,mg=null,gS=Bv=jh=0,go=gg=null,gl!==null){for(d=0;d<gl.length;d++)if((E=(y=gl[d]).interleaved)!==null){y.interleaved=null;var I=E.next,F=y.pending;if(F!==null){var Q=F.next;F.next=I,E.next=Q}y.pending=E}gl=null}return c}function Wk(c,d){for(;;){var y=Zr;try{if(_f(),rs.current=bv,Si){for(var E=on.memoizedState;E!==null;){var I=E.queue;I!==null&&(I.pending=null),E=E.next}Si=!1}if(Cr=0,ln=an=on=null,Go=!1,Hs=0,mS.current=null,y===null||y.return===null){hi=1,mg=d,Zr=null;break}e:{var F=c,Q=y.return,se=y,fe=d;if(d=Li,se.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var ve=fe,be=se,De=be.tag;if(!(1&be.mode)&&(De===0||De===11||De===15)){var _e=be.alternate;_e?(be.updateQueue=_e.updateQueue,be.memoizedState=_e.memoizedState,be.lanes=_e.lanes):(be.updateQueue=null,be.memoizedState=null)}var ke=fk(Q);if(ke!==null){ke.flags&=-257,pk(ke,Q,se,0,d),1&ke.mode&&dk(F,ve,d),fe=ve;var st=(d=ke).updateQueue;if(st===null){var $t=new Set;$t.add(fe),d.updateQueue=$t}else st.add(fe);break e}if(!(1&d)){dk(F,ve,d),ES();break e}fe=Error(s(426))}else if(fn&&1&se.mode){var Se=fk(Q);if(Se!==null){!(65536&Se.flags)&&(Se.flags|=256),pk(Se,Q,se,0,d),og(If(fe,se));break e}}F=fe=If(fe,se),hi!==4&&(hi=2),gg===null?gg=[F]:gg.push(F),F=Q;do{switch(F.tag){case 3:F.flags|=65536,d&=-d,F.lanes|=d,wv(F,ck(0,fe,d));break e;case 1:se=fe;var ce=F.type,ye=F.stateNode;if(!(128&F.flags)&&(typeof ce.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(hc===null||!hc.has(ye)))){F.flags|=65536,d&=-d,F.lanes|=d,wv(F,hk(F,se,d));break e}}F=F.return}while(F!==null)}qk(y)}catch(Te){d=Te,Zr===y&&y!==null&&(Zr=y=y.return);continue}break}}function Gk(){var c=Nv.current;return Nv.current=bv,c===null?bv:c}function ES(){hi!==0&&hi!==3&&hi!==2||(hi=4),Ei===null||!(268435455&jh)&&!(268435455&Bv)||pc(Ei,Li)}function $v(c,d){var y=tn;tn|=2;var E=Gk();for(Ei===c&&Li===d||(cc=null,Hh(c,d));;)try{Sj();break}catch(I){Wk(c,I)}if(_f(),tn=y,Nv.current=E,Zr!==null)throw Error(s(261));return Ei=null,Li=0,hi}function Sj(){for(;Zr!==null;)Vk(Zr)}function Ej(){for(;Zr!==null&&!pv();)Vk(Zr)}function Vk(c){var d=zk(c.alternate,c,mo);c.memoizedProps=c.pendingProps,d===null?qk(c):Zr=d,mS.current=null}function qk(c){var d=c;do{var y=d.alternate;if(c=d.return,(32768&d.flags)==0){if((y=vj(y,d,mo))!==null)return void(Zr=y)}else{if((y=wj(y,d))!==null)return y.flags&=32767,void(Zr=y);if(c===null)return hi=6,void(Zr=null);c.flags|=32768,c.subtreeFlags=0,c.deletions=null}if((d=d.sibling)!==null)return void(Zr=d);Zr=d=c}while(d!==null);hi===0&&(hi=5)}function Mf(c,d,y){var E=Wt,I=qr.transition;try{qr.transition=null,Wt=1,function(F,Q,se,fe){do Wh();while(dc!==null);if(6&tn)throw Error(s(327));se=F.finishedWork;var ve=F.finishedLanes;if(se===null)return null;if(F.finishedWork=null,F.finishedLanes=0,se===F.current)throw Error(s(177));F.callbackNode=null,F.callbackPriority=0;var be=se.lanes|se.childLanes;if(function(ke,st){var $t=ke.pendingLanes&~st;ke.pendingLanes=st,ke.suspendedLanes=0,ke.pingedLanes=0,ke.expiredLanes&=st,ke.mutableReadLanes&=st,ke.entangledLanes&=st,st=ke.entanglements;var Se=ke.eventTimes;for(ke=ke.expirationTimes;0<$t;){var ce=31-co($t),ye=1<<ce;st[ce]=0,Se[ce]=-1,ke[ce]=-1,$t&=~ye}}(F,be),F===Ei&&(Zr=Ei=null,Li=0),!(2064&se.subtreeFlags)&&!(2064&se.flags)||Dv||(Dv=!0,Qk(cu,function(){return Wh(),null})),be=(15990&se.flags)!=0,(15990&se.subtreeFlags)!=0||be){be=qr.transition,qr.transition=null;var De=Wt;Wt=1;var _e=tn;tn|=4,mS.current=null,function(ke,st){for(U(ke.containerInfo),Ze=st;Ze!==null;)if(st=(ke=Ze).child,(1028&ke.subtreeFlags)!=0&&st!==null)st.return=ke,Ze=st;else for(;Ze!==null;){ke=Ze;try{var $t=ke.alternate;if(1024&ke.flags)switch(ke.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if($t!==null){var Se=$t.memoizedProps,ce=$t.memoizedState,ye=ke.stateNode,Te=ye.getSnapshotBeforeUpdate(ke.elementType===ke.type?Se:$s(ke.type,Se),ce);ye.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:Ce&&ur(ke.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(gt){pr(ke,ke.return,gt)}if((st=ke.sibling)!==null){st.return=ke.return,Ze=st;break}Ze=ke.return}$t=Rk,Rk=!1}(F,se),Nk(se,F),z(F.containerInfo),F.current=se,_j(se),rg(),tn=_e,Wt=De,qr.transition=be}else F.current=se;if(Dv&&(Dv=!1,dc=F,Fv=ve),be=F.pendingLanes,be===0&&(hc=null),function(ke){if(Ni&&typeof Ni.onCommitFiberRoot=="function")try{Ni.onCommitFiberRoot(Uh,ke,void 0,(128&ke.current.flags)==128)}catch{}}(se.stateNode),qs(F,Fr()),Q!==null)for(fe=F.onRecoverableError,se=0;se<Q.length;se++)ve=Q[se],fe(ve.value,{componentStack:ve.stack,digest:ve.digest});if(Lv)throw Lv=!1,F=wS,wS=null,F;1&Fv&&F.tag!==0&&Wh(),be=F.pendingLanes,1&be?F===xS?yg++:(yg=0,xS=F):yg=0,ai()}(c,d,y,E)}finally{qr.transition=I,Wt=E}return null}function Wh(){if(dc!==null){var c=dv(Fv),d=qr.transition,y=Wt;try{if(qr.transition=null,Wt=16>c?16:c,dc===null)var E=!1;else{if(c=dc,dc=null,Fv=0,(6&tn)!=0)throw Error(s(331));var I=tn;for(tn|=4,Ze=c.current;Ze!==null;){var F=Ze,Q=F.child;if(16&Ze.flags){var se=F.deletions;if(se!==null){for(var fe=0;fe<se.length;fe++){var ve=se[fe];for(Ze=ve;Ze!==null;){var be=Ze;switch(be.tag){case 0:case 11:case 15:fg(8,be,F)}var De=be.child;if(De!==null)De.return=be,Ze=De;else for(;Ze!==null;){var _e=(be=Ze).sibling,ke=be.return;if(Pk(be),be===ve){Ze=null;break}if(_e!==null){_e.return=ke,Ze=_e;break}Ze=ke}}}var st=F.alternate;if(st!==null){var $t=st.child;if($t!==null){st.child=null;do{var Se=$t.sibling;$t.sibling=null,$t=Se}while($t!==null)}}Ze=F}}if(2064&F.subtreeFlags&&Q!==null)Q.return=F,Ze=Q;else e:for(;Ze!==null;){if(2048&(F=Ze).flags)switch(F.tag){case 0:case 11:case 15:fg(9,F,F.return)}var ce=F.sibling;if(ce!==null){ce.return=F.return,Ze=ce;break e}Ze=F.return}}var ye=c.current;for(Ze=ye;Ze!==null;){var Te=(Q=Ze).child;if(2064&Q.subtreeFlags&&Te!==null)Te.return=Q,Ze=Te;else e:for(Q=ye;Ze!==null;){if(2048&(se=Ze).flags)try{switch(se.tag){case 0:case 11:case 15:Iv(9,se)}}catch(Rn){pr(se,se.return,Rn)}if(se===Q){Ze=null;break e}var gt=se.sibling;if(gt!==null){gt.return=se.return,Ze=gt;break e}Ze=se.return}}if(tn=I,ai(),Ni&&typeof Ni.onPostCommitFiberRoot=="function")try{Ni.onPostCommitFiberRoot(Uh,c)}catch{}E=!0}return E}finally{Wt=y,qr.transition=d}}return!1}function Xk(c,d,y){c=Wo(c,d=ck(0,d=If(y,d),1),1),d=os(),c!==null&&(dl(c,1,d),qs(c,d))}function pr(c,d,y){if(c.tag===3)Xk(c,c,y);else for(;d!==null;){if(d.tag===3){Xk(d,c,y);break}if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(hc===null||!hc.has(E))){d=Wo(d,c=hk(d,c=If(y,c),1),1),c=os(),d!==null&&(dl(d,1,c),qs(d,c));break}}d=d.return}}function Aj(c,d,y){var E=c.pingCache;E!==null&&E.delete(d),d=os(),c.pingedLanes|=c.suspendedLanes&y,Ei===c&&(Li&y)===y&&(hi===4||hi===3&&(130023424&Li)===Li&&500>Fr()-yS?Hh(c,0):gS|=y),qs(c,d)}function Kk(c,d){d===0&&(1&c.mode?(d=ic,!(130023424&(ic<<=1))&&(ic=4194304)):d=1);var y=os();(c=Es(c,d))!==null&&(dl(c,d,y),qs(c,y))}function Tj(c){var d=c.memoizedState,y=0;d!==null&&(y=d.retryLane),Kk(c,y)}function Cj(c,d){var y=0;switch(c.tag){case 13:var E=c.stateNode,I=c.memoizedState;I!==null&&(y=I.retryLane);break;case 19:E=c.stateNode;break;default:throw Error(s(314))}E!==null&&E.delete(d),Kk(c,y)}function Qk(c,d){return fl(c,d)}function Ij(c,d,y,E){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xo(c,d,y,E){return new Ij(c,d,y,E)}function AS(c){return!(!(c=c.prototype)||!c.isReactComponent)}function mc(c,d){var y=c.alternate;return y===null?((y=Xo(c.tag,d,c.key,c.mode)).elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=d,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=14680064&c.flags,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,d=c.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function jv(c,d,y,E,I,F){var Q=2;if(E=c,typeof c=="function")AS(c)&&(Q=1);else if(typeof c=="string")Q=5;else e:switch(c){case u:return Gh(y.children,I,F,d);case h:Q=8,I|=8;break;case f:return(c=Xo(12,y,d,2|I)).elementType=f,c.lanes=F,c;case v:return(c=Xo(13,y,d,I)).elementType=v,c.lanes=F,c;case x:return(c=Xo(19,y,d,I)).elementType=x,c.lanes=F,c;case _:return Hv(y,I,F,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case p:Q=10;break e;case m:Q=9;break e;case g:Q=11;break e;case b:Q=14;break e;case S:Q=16,E=null;break e}throw Error(s(130,c==null?c:typeof c,""))}return(d=Xo(Q,y,d,I)).elementType=c,d.type=E,d.lanes=F,d}function Gh(c,d,y,E){return(c=Xo(7,c,E,d)).lanes=y,c}function Hv(c,d,y,E){return(c=Xo(22,c,E,d)).elementType=_,c.lanes=y,c.stateNode={isHidden:!1},c}function TS(c,d,y){return(c=Xo(6,c,null,d)).lanes=y,c}function CS(c,d,y){return(d=Xo(4,c.children!==null?c.children:[],c.key,d)).lanes=y,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function Rj(c,d,y,E,I){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=E,this.onRecoverableError=I,ft&&(this.mutableSourceEagerHydrationData=null)}function Yk(c,d,y,E,I,F,Q,se,fe){return c=new Rj(c,d,y,se,fe),d===1?(d=1,F===!0&&(d|=8)):d=0,F=Xo(3,null,null,d),c.current=F,F.stateNode=c,F.memoizedState={element:E,isDehydrated:y,cache:null,transitions:null,pendingSuspenseBoundaries:null},Af(F),c}function Zk(c){if(!c)return es;e:{if(G(c=c._reactInternals)!==c||c.tag!==1)throw Error(s(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(ts(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(s(171))}if(c.tag===1){var y=c.type;if(ts(y))return uv(c,y,d)}return d}function Jk(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(s(188)):(c=Object.keys(c).join(","),Error(s(268,c)));return(c=ne(d))===null?null:c.stateNode}function eM(c,d){if((c=c.memoizedState)!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<d?y:d}}function Wv(c,d){eM(c,d),(c=c.alternate)&&eM(c,d)}function Pj(c){return(c=ne(c))===null?null:c.stateNode}function kj(){return null}return zk=function(c,d,y){if(c!==null)if(c.memoizedProps!==d.pendingProps||Oi.current)Gs=!0;else{if(!(c.lanes&y)&&!(128&d.flags))return Gs=!1,function(De,_e,ke){switch(_e.tag){case 3:_k(_e),ml();break;case 5:rr(_e);break;case 1:ts(_e.type)&&Bh(_e);break;case 4:pn(_e,_e.stateNode.containerInfo);break;case 10:ag(0,_e.type._context,_e.memoizedProps.value);break;case 13:var st=_e.memoizedState;if(st!==null)return st.dehydrated!==null?(sn(Ft,1&Ft.current),_e.flags|=128,null):ke&_e.child.childLanes?Sk(De,_e,ke):(sn(Ft,1&Ft.current),(De=gu(De,_e,ke))!==null?De.sibling:null);sn(Ft,1&Ft.current);break;case 19:if(st=(ke&_e.childLanes)!=0,(128&De.flags)!=0){if(st)return Ak(De,_e,ke);_e.flags|=128}var $t=_e.memoizedState;if($t!==null&&($t.rendering=null,$t.tail=null,$t.lastEffect=null),sn(Ft,Ft.current),st)break;return null;case 22:case 23:return _e.lanes=0,vk(De,_e,ke)}return gu(De,_e,ke)}(c,d,y);Gs=(131072&c.flags)!=0}else Gs=!1,fn&&1048576&d.flags&&gv(d,In,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;Tv(c,d),c=d.pendingProps;var I=cl(d,Cn.current);pu(d,y),I=qb(null,d,E,c,I,y);var F=Xb();return d.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,ts(E)?(F=!0,Bh(d)):F=!1,d.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,Af(d),I.updater=Z,d.stateNode=I,I._reactInternals=d,xe(d,E,c,y),d=nS(null,d,E,!0,F,y)):(d.tag=0,fn&&F&&ig(d),Vs(null,d,I,y),d=d.child),d;case 16:E=d.elementType;e:{switch(Tv(c,d),c=d.pendingProps,E=(I=E._init)(E._payload),d.type=E,I=d.tag=function(De){if(typeof De=="function")return AS(De)?1:0;if(De!=null){if((De=De.$$typeof)===g)return 11;if(De===b)return 14}return 2}(E),c=$s(E,c),I){case 0:d=tS(null,d,E,c,y);break e;case 1:d=xk(null,d,E,c,y);break e;case 11:d=mk(null,d,E,c,y);break e;case 14:d=gk(null,d,E,$s(E.type,c),y);break e}throw Error(s(306,E,""))}return d;case 0:return E=d.type,I=d.pendingProps,tS(c,d,E,I=d.elementType===E?I:$s(E,I),y);case 1:return E=d.type,I=d.pendingProps,xk(c,d,E,I=d.elementType===E?I:$s(E,I),y);case 3:e:{if(_k(d),c===null)throw Error(s(387));E=d.pendingProps,I=(F=d.memoizedState).element,Tr(c,d),Tf(d,E,null,y);var Q=d.memoizedState;if(E=Q.element,ft&&F.isDehydrated){if(F={element:E,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},d.updateQueue.baseState=F,d.memoizedState=F,256&d.flags){d=bk(c,d,E,y,I=If(Error(s(423)),d));break e}if(E!==I){d=bk(c,d,E,y,I=If(Error(s(424)),d));break e}for(ft&&(Vr=cr(d.stateNode.containerInfo),Ar=d,fn=!0,ho=null,jo=!1),y=Rt(d,null,E,y),d.child=y;y;)y.flags=-3&y.flags|4096,y=y.sibling}else{if(ml(),E===I){d=gu(c,d,y);break e}Vs(c,d,E,y)}d=d.child}return d;case 5:return rr(d),c===null&&wf(d),E=d.type,I=d.pendingProps,F=c!==null?c.memoizedProps:null,Q=I.children,ge(E,I)?Q=null:F!==null&&ge(E,F)&&(d.flags|=32),wk(c,d),Vs(c,d,Q,y),d.child;case 6:return c===null&&wf(d),null;case 13:return Sk(c,d,y);case 4:return pn(d,d.stateNode.containerInfo),E=d.pendingProps,c===null?d.child=Ve(d,null,E,y):Vs(c,d,E,y),d.child;case 11:return E=d.type,I=d.pendingProps,mk(c,d,E,I=d.elementType===E?I:$s(E,I),y);case 7:return Vs(c,d,d.pendingProps,y),d.child;case 8:case 12:return Vs(c,d,d.pendingProps.children,y),d.child;case 10:e:{if(E=d.type._context,I=d.pendingProps,F=d.memoizedProps,ag(0,E,Q=I.value),F!==null)if(_i(F.value,Q)){if(F.children===I.children&&!Oi.current){d=gu(c,d,y);break e}}else for((F=d.child)!==null&&(F.return=d);F!==null;){var se=F.dependencies;if(se!==null){Q=F.child;for(var fe=se.firstContext;fe!==null;){if(fe.context===E){if(F.tag===1){(fe=Ho(-1,y&-y)).tag=2;var ve=F.updateQueue;if(ve!==null){var be=(ve=ve.shared).pending;be===null?fe.next=fe:(fe.next=be.next,be.next=fe),ve.pending=fe}}F.lanes|=y,(fe=F.alternate)!==null&&(fe.lanes|=y),Sf(F.return,y,d),se.lanes|=y;break}fe=fe.next}}else if(F.tag===10)Q=F.type===d.type?null:F.child;else if(F.tag===18){if((Q=F.return)===null)throw Error(s(341));Q.lanes|=y,(se=Q.alternate)!==null&&(se.lanes|=y),Sf(Q,y,d),Q=F.sibling}else Q=F.child;if(Q!==null)Q.return=F;else for(Q=F;Q!==null;){if(Q===d){Q=null;break}if((F=Q.sibling)!==null){F.return=Q.return,Q=F;break}Q=Q.return}F=Q}Vs(c,d,I.children,y),d=d.child}return d;case 9:return I=d.type,E=d.pendingProps.children,pu(d,y),E=E(I=js(I)),d.flags|=1,Vs(c,d,E,y),d.child;case 14:return I=$s(E=d.type,d.pendingProps),gk(c,d,E,I=$s(E.type,I),y);case 15:return yk(c,d,d.type,d.pendingProps,y);case 17:return E=d.type,I=d.pendingProps,I=d.elementType===E?I:$s(E,I),Tv(c,d),d.tag=1,ts(E)?(c=!0,Bh(d)):c=!1,pu(d,y),ie(d,E,I),xe(d,E,I,y),nS(null,d,E,!0,c,y);case 19:return Ak(c,d,y);case 22:return vk(c,d,y)}throw Error(s(156,d.tag))},e.attemptContinuousHydration=function(c){if(c.tag===13){var d=Es(c,134217728);d!==null&&qo(d,c,134217728,os()),Wv(c,134217728)}},e.attemptDiscreteHydration=function(c){if(c.tag===13){var d=Es(c,1);d!==null&&qo(d,c,1,os()),Wv(c,1)}},e.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var d=fc(c),y=Es(c,d);y!==null&&qo(y,c,d,os()),Wv(c,d)}},e.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var y=Lh(d.pendingLanes);y!==0&&(Dh(d,1|y),qs(d,Fr()),!(6&tn)&&(kf(),ai()))}break;case 13:Hk(function(){var E=Es(c,1);if(E!==null){var I=os();qo(E,c,1,I)}}),Wv(c,1)}},e.batchedUpdates=function(c,d){var y=tn;tn|=1;try{return c(d)}finally{(tn=y)===0&&(kf(),zh&&ai())}},e.createComponentSelector=function(c){return{$$typeof:Rv,value:c}},e.createContainer=function(c,d,y,E,I,F,Q){return Yk(c,d,!1,null,0,E,0,F,Q)},e.createHasPseudoClassSelector=function(c){return{$$typeof:Pv,value:c}},e.createHydrationContainer=function(c,d,y,E,I,F,Q,se,fe){return(c=Yk(y,E,!0,c,0,F,0,se,fe)).context=Zk(null),y=c.current,(F=Ho(E=os(),I=fc(y))).callback=d??null,Wo(y,F,I),c.current.lanes=I,dl(c,I,E),qs(c,E),c},e.createPortal=function(c,d,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:c,containerInfo:d,implementation:y}},e.createRoleSelector=function(c){return{$$typeof:kv,value:c}},e.createTestNameSelector=function(c){return{$$typeof:Mv,value:c}},e.createTextSelector=function(c){return{$$typeof:Ov,value:c}},e.deferredUpdates=function(c){var d=Wt,y=qr.transition;try{return qr.transition=null,Wt=16,c()}finally{Wt=d,qr.transition=y}},e.discreteUpdates=function(c,d,y,E,I){var F=Wt,Q=qr.transition;try{return qr.transition=null,Wt=1,c(d,y,E,I)}finally{Wt=F,qr.transition=Q,tn===0&&kf()}},e.findAllNodes=pS,e.findBoundingRects=function(c,d){if(!Bt)throw Error(s(363));d=pS(c,d),c=[];for(var y=0;y<d.length;y++)c.push(mt(d[y]));for(d=c.length-1;0<d;d--)for(var E=(y=c[d]).x,I=E+y.width,F=y.y,Q=F+y.height,se=d-1;0<=se;se--)if(d!==se){var fe=c[se],ve=fe.x,be=ve+fe.width,De=fe.y,_e=De+fe.height;if(E>=ve&&F>=De&&I<=be&&Q<=_e){c.splice(d,1);break}if(!(E!==ve||y.width!==fe.width||_e<F||De>Q)){De>F&&(fe.height+=De-F,fe.y=F),_e<Q&&(fe.height=Q-De),c.splice(d,1);break}if(!(F!==De||y.height!==fe.height||be<E||ve>I)){ve>E&&(fe.width+=ve-E,fe.x=E),be<I&&(fe.width=I-ve),c.splice(d,1);break}}return c},e.findHostInstance=Jk,e.findHostInstanceWithNoPortals=function(c){return(c=(c=te(c))!==null?L(c):null)===null?null:c.stateNode},e.findHostInstanceWithWarning=function(c){return Jk(c)},e.flushControlled=function(c){var d=tn;tn|=1;var y=qr.transition,E=Wt;try{qr.transition=null,Wt=1,c()}finally{Wt=E,qr.transition=y,(tn=d)===0&&(kf(),ai())}},e.flushPassiveEffects=Wh,e.flushSync=Hk,e.focusWithin=function(c,d){if(!Bt)throw Error(s(363));for(d=Uk(c=hS(c),d),d=Array.from(d),c=0;c<d.length;){var y=d[c++];if(!Et(y)){if(y.tag===5&&Ot(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Wt},e.getFindAllNodesFailureDescription=function(c,d){if(!Bt)throw Error(s(363));var y=0,E=[];c=[hS(c),0];for(var I=0;I<c.length;){var F=c[I++],Q=c[I++],se=d[Q];if((F.tag!==5||!Et(F))&&(dS(F,se)&&(E.push(fS(se)),++Q>y&&(y=Q)),Q<d.length))for(F=F.child;F!==null;)c.push(F,Q),F=F.sibling}if(y<d.length){for(c=[];y<d.length;y++)c.push(fS(d[y]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+c.join(" > ")}return null},e.getPublicRootInstance=function(c){return(c=c.current).child?c.child.tag===5?O(c.child.stateNode):c.child.stateNode:null},e.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Pj,findFiberByHostInstance:c.findFiberByHostInstance||kj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)c=!0;else{try{Uh=d.inject(c),Ni=d}catch{}c=!!d.checkDCE}}return c},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(c,d,y,E){if(!Bt)throw Error(s(363));c=pS(c,d);var I=Xt(c,y,E).disconnect;return{disconnect:function(){I()}}},e.registerMutableSourceForHydration=function(c,d){var y=d._getVersion;y=y(d._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[d,y]:c.mutableSourceEagerHydrationData.push(d,y)},e.runWithPriority=function(c,d){var y=Wt;try{return Wt=c,d()}finally{Wt=y}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(c,d,y,E){var I=d.current,F=os(),Q=fc(I);return y=Zk(y),d.context===null?d.context=y:d.pendingContext=y,(d=Ho(F,Q)).payload={element:c},(E=E===void 0?null:E)!==null&&(d.callback=E),(c=Wo(I,d,Q))!==null&&(qo(c,I,Q,F),yl(c,I,Q)),Q},e}),ZO}({get exports(){return U2},set exports(n){U2=n}}).exports=eZ();var tZ=CY(U2),EU={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},$2={},B1={get exports(){return $2},set exports(n){$2=n}};(function(){var n,e,t,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?B1.exports=function(){return performance.now()}:typeof Mg<"u"&&Mg!==null&&Mg.hrtime?(B1.exports=function(){return(n()-i)/1e6},e=Mg.hrtime,r=(n=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*Mg.uptime(),i=r-s):Date.now?(B1.exports=function(){return Date.now()-t},t=Date.now()):(B1.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(TY);var tN,vp={},Xh={};({get exports(){return vp},set exports(n){vp=n}}).exports=(tN||(tN=1,Xh.ConcurrentRoot=1,Xh.ContinuousEventPriority=4,Xh.DefaultEventPriority=16,Xh.DiscreteEventPriority=1,Xh.IdleEventPriority=536870912,Xh.LegacyRoot=0),Xh);var nZ={};function GE(n,e){n.addChild&&(n.addChild(e),typeof e.didMount=="function"&&e.didMount(e,n))}function AU(n,e){var t,r,i;(t=n.willUnmount)===null||t===void 0||t.call(n,n,e),((r=n.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=n.children)!==null&&i!==void 0&&i.length&&Ku(n.children).forEach(function(s){AU(s,n)})}function nN(n,e){var t;AU(e,n),n.removeChild(e);var r=(t=e.config)!==null&&t!==void 0?t:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,l=r.destroyTexture,u=l!==void 0&&l,h=r.destroyBaseTexture,f=h!==void 0&&h;s&&e.destroy({children:a,texture:u,baseTexture:f})}function rN(n,e,t){var r,i;Gr(e!==t,"Cannot insert node before itself"),n.children.indexOf(e)!==-1&&n.removeChild(e);var s=n.getChildIndex(t);n.addChildAt(e,s),(r=n.__reactpixi)===null||r===void 0||(i=r.root)===null||i===void 0||i.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var iN=null,qa=tZ({getRootHostContext:function(){return nZ},getChildHostContext:function(n){return n},getChildHostContextForEventComponent:function(n){return n},getPublicInstance:function(n){return n},getCurrentEventPriority:function(){return function(){var n,e;if(typeof window>"u")return vp.DefaultEventPriority;switch((n=window)===null||n===void 0||(e=n.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return vp.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return vp.ContinuousEventPriority;default:return vp.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(n){var e,t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=QY[n];if(typeof s=="function"&&(e=s(i,r)),!e){var o=SU[n];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:eu)(e,{},r)),e},hideInstance:function(n){n.visible=!1},unhideInstance:function(n,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;n.visible=t},finalizeInitialChildren:function(n,e,t){return!1},prepareUpdate:function(n,e,t,r,i,s){return iN=function(o,a,l,u){var h=null;for(var f in l)!u.hasOwnProperty(f)&&l.hasOwnProperty(f)&&l[f]!==null&&(f===D2||(h||(h=[]),h.push(f,null)));for(var p in u){var m=u[p],g=l!==null?l[p]:void 0;!u.hasOwnProperty(p)||m===g||m===null&&g===null||p===D2||(h||(h=[]),h.push(p,m))}return h}(0,0,t,r)},shouldSetTextContent:function(n,e){return!1},shouldDeprioritizeSubtree:function(n,e){var t=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(t&&r&&i)},createTextInstance:function(n,e,t){Gr(!1,'Error trying to add text node "'.concat(n,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(n,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:$2,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var n,e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=GE.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var n,e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=GE.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=GE.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var n,e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=nN.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var n,e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=nN.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:rN,insertInContainerBefore:function(){for(var n,e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var s=rN.apply(null,r);return(n=r[0].__reactpixi)===null||n===void 0||(e=n.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(n,e,t,r,i){var s,o,a=n&&n.applyProps;typeof a!="function"&&(a=eu),(a(n,r,i)||iN)&&((s=n.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(n,e,t,r,i){},commitTextUpdate:function(n,e,t){},resetTextContent:function(n){},clearContainer:function(n){},getFundamentalComponentInstance:function(n){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(n){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(n){throw new Error("Not yet implemented.")},getInstanceFromNode:function(n){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(n){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(n){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(n){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(n){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(n){}}),rZ=EU.dependencies["react-dom"].replace(/[^0-9.]/g,""),iZ=EU.name;qa.injectIntoDevTools({bundleType:0,version:rZ,rendererPackageName:iZ,findHostInstanceByFiber:qa.findHostInstance});var yh=new Map;function TU(n){if(Gr(Zi.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`."),yh.has(n)){var e=yh.get(n).pixiFiberContainer;qa.updateContainer(null,e,void 0,function(){yh.delete(n)})}}function CU(n){Gr(Zi.prototype.isPrototypeOf(n),"Invalid argument `container`, expected instance of `Container`.");var e=yh.get(n);if(Gr(!e,"createRoot should only be called once"),!e){var t=qa.createContainer(n);e={pixiFiberContainer:t,reactRoot:{render:function(r){return qa.updateContainer(r,t,void 0),qa.getPublicRootInstance(t)},unmount:function(){TU(n),yh.delete(n)}}},yh.set(n,e)}return e.reactRoot}function sZ(n,e,t){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),yh.has(e)?r=yh.get(e).reactRoot:r=CU(e),r.render(n)}function oZ(n){TU(n)}function sy(){return sy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sy.apply(this,arguments)}function aZ(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function lZ(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,xU(r.key),r)}}function xu(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Ox(n,e){return Ox=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},Ox(n,e)}function uZ(n,e){if(e&&(ko(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xu(n)}function Nx(n){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nx(n)}var ob=kt.createContext(null),IU=ob.Provider,RU=ob.Consumer,cZ=function(n){var e=kt.forwardRef(function(t,r){return kt.createElement(RU,null,function(i){return kt.createElement(n,sy({},t,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(n.displayName||n.name,")"),e};function hZ(n){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,r=Nx(n);if(e){var i=Nx(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return uZ(this,t)}}function sN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function L1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?sN(Object(t),!0).forEach(function(r){Xr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):sN(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var oN=function(){},PU={width:sr.number,height:sr.number,onMount:sr.func,onUnmount:sr.func,raf:sr.bool,renderOnComponentChange:sr.bool,children:sr.node,options:sr.shape({autoStart:sr.bool,width:sr.number,height:sr.number,useContextAlpha:sr.bool,backgroundAlpha:sr.number,autoDensity:sr.bool,antialias:sr.bool,preserveDrawingBuffer:sr.bool,resolution:sr.number,forceCanvas:sr.bool,backgroundColor:sr.number,clearBeforeRender:sr.bool,powerPreference:sr.string,sharedTicker:sr.bool,sharedLoader:sr.bool,resizeTo:function(n,e){var t=n[e];t&&Gr(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(ko(t),", expect `window` or an `HTMLElement`."))},view:function(n,e,t){var r=n[e];r&&Gr(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(ko(r),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},dZ={width:800,height:600,onMount:oN,onUnmount:oN,raf:!0,renderOnComponentChange:!0},j2=function(n){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Ox(s,o)})(i,kt.Component);var e,t,r=hZ(i);function i(){var s;aZ(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return Xr(xu(s=r.call.apply(r,[this].concat(a))),"_canvas",null),Xr(xu(s),"_mediaQuery",null),Xr(xu(s),"_ticker",null),Xr(xu(s),"_needsUpdate",!0),Xr(xu(s),"app",null),Xr(xu(s),"updateSize",function(){var u=s.props,h=u.width,f=u.height,p=u.options;p!=null&&p.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(h,f)}),Xr(xu(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Xr(xu(s),"renderStage",function(){var u=s.props,h=u.renderOnComponentChange;!u.raf&&h&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(t=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,l=s.height,u=s.options,h=s.raf,f=s.renderOnComponentChange;this.app=new eb(L1(L1({width:a,height:l,view:this._canvas},u),{},{autoDensity:(u==null?void 0:u.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[h?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=qa.createContainer(this.app.stage),qa.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),u!=null&&u.autoDensity&&window.matchMedia&&(u==null?void 0:u.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),f&&!h&&(this._ticker=new wr,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var l,u=this.props,h=u.width,f=u.height,p=u.raf,m=u.renderOnComponentChange,g=u.options;(g==null?void 0:g.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(g==null?void 0:g.resolution)&&(this.app.renderer.resolution=g.resolution,this.resetInteractionManager()),s.height===f&&s.width===h&&((l=s.options)===null||l===void 0?void 0:l.resolution)===(g==null?void 0:g.resolution)||this.updateSize(),s.raf!==p&&this.app.ticker[p?"start":"stop"](),qa.updateContainer(this.getChildren(),this.mountNode,this),s.width===h&&s.height===f&&s.raf===p&&s.renderOnComponentChange===m&&s.options===g||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return kt.createElement(IU,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),qa.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,l=this.props.options;return l&&l.view?(Gr(l.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):kt.createElement("canvas",sy({},(s=this.props,o=[].concat(Ku(Object.keys(PU)),Ku(Object.keys(F2))),Object.keys(s).filter(function(u){return!o.includes(u)}).reduce(function(u,h){return L1(L1({},u),{},Xr({},h,s[h]))},{})),{ref:function(u){return a._canvas=u}}))}}])&&lZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}();j2.propTypes=PU,j2.defaultProps=dZ;var fZ=j2;function kU(){var n=Y.useContext(ob);return Gr(n instanceof eb,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),n}function pZ(n){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=kU();Gr(typeof n=="function","`useTick` needs a callback function."),Gr(t instanceof eb,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var r=Y.useRef(null);Y.useEffect(function(){r.current=n},[n]),Y.useEffect(function(){if(e){var i=function(s){return r.current.apply(t.ticker,[s,t.ticker])};return t.ticker.add(i),function(){t.ticker&&t.ticker.remove(i)}}},[e])}function mZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H2(n,e,t){return H2=mZ()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&Ox(a,s.prototype),a},H2.apply(null,arguments)}var gZ=["children","apply"];function aN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function D1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aN(Object(t),!0).forEach(function(r){Xr(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aN(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var yZ=function(n,e){Gr(ko(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=Oh(i,gZ),l=Y.useRef(Y.useMemo(function(){return t.map(function(f){var p,m=(a==null||(p=a[f])===null||p===void 0?void 0:p.construct)||[];return H2(e[f],Ku(m))})},[t])),u=Y.useMemo(function(){return t.reduce(function(f,p,m){return D1(D1({},f),{},Xr({},p,l.current[m]))},{})},[t]),h=Y.useMemo(function(){return Object.keys(a).filter(bU(_U(t))).reduce(function(f,p){return D1(D1({},f),{},Xr({},p,a[p]))},{})},[a,t]);return t.forEach(function(f,p){return Object.assign(l.current[p],a[f])}),o&&function(){for(var f=arguments.length,p=new Array(f),m=0;m<f;m++)p[m]=arguments[m];return p.every(function(g){return typeof g=="function"})}(o)&&o.call(n,u),kt.createElement(n,sy({},h,{filters:l.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:sr.node,apply:sr.func},r},vZ=ao.BitmapText,wZ=ao.Container,xZ=ao.Graphics,_Z=ao.NineSlicePlane,bZ=ao.ParticleContainer,SZ=ao.Sprite,EZ=ao.AnimatedSprite,AZ=ao.Text,TZ=ao.TilingSprite,CZ=ao.SimpleMesh,IZ=ao.SimpleRope;const RZ=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:EZ,AppConsumer:RU,AppContext:ob,AppProvider:IU,BitmapText:vZ,Container:wZ,Graphics:xZ,NineSlicePlane:_Z,ParticleContainer:bZ,PixiComponent:YY,PixiFiber:qa,SimpleMesh:CZ,SimpleRope:IZ,Sprite:SZ,Stage:fZ,TYPES:ao,Text:AZ,TilingSprite:TZ,applyDefaultProps:eu,createRoot:CU,eventHandlers:Mx,render:sZ,unmountComponentAtNode:oZ,useApp:kU,useTick:pZ,withFilters:yZ,withPixiApp:cZ},Symbol.toStringTag,{value:"Module"})),PZ=Lm(RZ);sb.exports=PZ;var Co=sb.exports;const kZ=({textureUrl:n,spritesheetData:e,x:t,y:r,orientation:i,isMoving:s=!1,isThinking:o=!1,isSpeaking:a=!1,emoji:l="",isViewer:u=!1,speed:h=.1,onClick:f})=>{const[p,m]=Y.useState();Y.useEffect(()=>{(async()=>{const S=new Rx(Mt.from(n,{scaleMode:da.NEAREST}),e);await S.parse(),m(S)})()},[]);const g=Math.floor(i/90),v=["right","down","left","up"][g],x=Y.useRef(null);return Y.useEffect(()=>{var b;s&&((b=x.current)==null||b.play())},[v,s]),p?q.jsxs(Co.Container,{x:t,y:r,interactive:!0,pointerdown:f,cursor:"pointer",children:[o&&q.jsx(Co.Text,{x:-20,y:-10,scale:{x:-.8,y:.8},text:"",anchor:{x:.5,y:.5}}),a&&q.jsx(Co.Text,{x:18,y:-10,scale:.8,text:"",anchor:{x:.5,y:.5}}),u&&q.jsx(MZ,{}),q.jsx(Co.AnimatedSprite,{ref:x,isPlaying:s,textures:p.animations[v],animationSpeed:h,anchor:{x:.5,y:.5}}),l&&q.jsx(Co.Text,{x:0,y:-24,scale:{x:-.8,y:.8},text:l,anchor:{x:.5,y:.5}})]}):null};function MZ(){const n=Y.useCallback(e=>{e.clear(),e.beginFill(16776971,.5),e.drawRoundedRect(-10,10,20,10,100),e.endFill()},[]);return q.jsx(Co.Graphics,{draw:n})}var Gl=[],Qo=[],OZ=Uint8Array,VE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $f=0,NZ=VE.length;$f<NZ;++$f)Gl[$f]=VE[$f],Qo[VE.charCodeAt($f)]=$f;Qo["-".charCodeAt(0)]=62;Qo["_".charCodeAt(0)]=63;function BZ(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function LZ(n,e,t){return(e+t)*3/4-t}function oy(n){var e,t=BZ(n),r=t[0],i=t[1],s=new OZ(LZ(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Qo[n.charCodeAt(l)]<<18|Qo[n.charCodeAt(l+1)]<<12|Qo[n.charCodeAt(l+2)]<<6|Qo[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Qo[n.charCodeAt(l)]<<2|Qo[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Qo[n.charCodeAt(l)]<<10|Qo[n.charCodeAt(l+1)]<<4|Qo[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function DZ(n){return Gl[n>>18&63]+Gl[n>>12&63]+Gl[n>>6&63]+Gl[n&63]}function FZ(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(DZ(r));return i.join("")}function ay(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(FZ(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(Gl[e>>2]+Gl[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Gl[e>>10]+Gl[e>>4&63]+Gl[e<<2&63]+"=")),i.join("")}function aa(n){if(n===void 0)return{};if(!MU(n))throw new Error(`The arguments to a Convex function must be an object. Received: ${n}`);return n}function UZ(n){if(typeof n>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof n!="string")throw new Error(`Invalid deployment address: found ${n}".`);if(!(n.startsWith("http:")||n.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${n}".`);try{new URL(n)}catch{throw new Error(`Invalid deployment address: "${n}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(n.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${n}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function MU(n){var i;const e=typeof n=="object",t=Object.getPrototypeOf(n),r=t===null||t===Object.prototype||((i=t==null?void 0:t.constructor)==null?void 0:i.name)==="Object";return e&&r}const OU=!0,xm=BigInt("-9223372036854775808"),pR=BigInt("9223372036854775807"),W2=BigInt("0"),zZ=BigInt("8"),$Z=BigInt("256");function NU(n){return Number.isNaN(n)||!Number.isFinite(n)||Object.is(n,-0)}function jZ(n){n<W2&&(n-=xm+xm);let e=n.toString(16);e.length%2===1&&(e="0"+e);const t=new Uint8Array(new ArrayBuffer(8));let r=0;for(const i of e.match(/.{2}/g).reverse())t.set([parseInt(i,16)],r++),n>>=zZ;return ay(t)}function HZ(n){const e=oy(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);let t=W2,r=W2;for(const i of e)t+=BigInt(i)*$Z**r,r++;return t>pR&&(t+=xm+xm),t}function WZ(n){if(n<xm||pR<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);const e=new ArrayBuffer(8);return new DataView(e).setBigInt64(0,n,!0),ay(new Uint8Array(e))}function GZ(n){const e=oy(n);if(e.byteLength!==8)throw new Error(`Received ${e.byteLength} bytes, expected 8 for $integer`);return new DataView(e.buffer).getBigInt64(0,!0)}const VZ=DataView.prototype.setBigInt64?WZ:jZ,qZ=DataView.prototype.getBigInt64?GZ:HZ,lN=1024;function G2(n){if(n.length>lN)throw new Error(`Field name ${n} exceeds maximum field name length ${lN}.`);if(n.startsWith("$"))throw new Error(`Field name ${n} starts with a '$', which is reserved.`);for(let e=0;e<n.length;e+=1){const t=n.charCodeAt(e);if(t<32||t>=127)throw new Error(`Field name ${n} has invalid character '${n[e]}': Field names can only contain non-control ASCII characters`)}}function _s(n){if(n===null||typeof n=="boolean"||typeof n=="number"||typeof n=="string")return n;if(Array.isArray(n))return n.map(r=>_s(r));if(typeof n!="object")throw new Error(`Unexpected type of ${n}`);const e=Object.entries(n);if(e.length===1){const r=e[0][0];if(r==="$bytes"){if(typeof n.$bytes!="string")throw new Error(`Malformed $bytes field on ${n}`);return oy(n.$bytes).buffer}if(r==="$integer"){if(typeof n.$integer!="string")throw new Error(`Malformed $integer field on ${n}`);return qZ(n.$integer)}if(r==="$float"){if(typeof n.$float!="string")throw new Error(`Malformed $float field on ${n}`);const i=oy(n.$float);if(i.byteLength!==8)throw new Error(`Received ${i.byteLength} bytes, expected 8 for $float`);const o=new DataView(i.buffer).getFloat64(0,OU);if(!NU(o))throw new Error(`Float ${o} should be encoded as a number`);return o}if(r==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(r==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const t={};for(const[r,i]of Object.entries(n))G2(r),t[r]=_s(i);return t}function $p(n){return JSON.stringify(n,(e,t)=>t===void 0?"undefined":typeof t=="bigint"?`${t.toString()}n`:t)}function ly(n,e,t,r){var o;if(n===void 0){const a=t&&` (present at path ${t} in original object ${$p(e)})`;throw new Error(`undefined is not a valid Convex value${a}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(n===null)return n;if(typeof n=="bigint"){if(n<xm||pR<n)throw new Error(`BigInt ${n} does not fit into a 64-bit signed integer.`);return{$integer:VZ(n)}}if(typeof n=="number")if(NU(n)){const a=new ArrayBuffer(8);return new DataView(a).setFloat64(0,n,OU),{$float:ay(new Uint8Array(a))}}else return n;if(typeof n=="boolean"||typeof n=="string")return n;if(n instanceof ArrayBuffer)return{$bytes:ay(new Uint8Array(n))};if(Array.isArray(n))return n.map((a,l)=>ly(a,e,t+`[${l}]`,!1));if(n instanceof Set)throw new Error(qE(t,"Set",[...n],e));if(n instanceof Map)throw new Error(qE(t,"Map",[...n],e));if(!MU(n)){const a=(o=n==null?void 0:n.constructor)==null?void 0:o.name,l=a?`${a} `:"";throw new Error(qE(t,l,n,e))}const i={},s=Object.entries(n);s.sort(([a,l],[u,h])=>a===u?0:a<u?-1:1);for(const[a,l]of s)l!==void 0?(G2(a),i[a]=ly(l,e,t+`.${a}`,!1)):r&&(G2(a),i[a]=BU(l,e,t+`.${a}`));return i}function qE(n,e,t,r){return n?`${e}${$p(t)} is not a supported Convex type (present at path ${n} in original object ${$p(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${e}${$p(t)} is not a supported Convex type.`}function BU(n,e,t){if(n===void 0)return{$undefined:null};if(e===void 0)throw new Error(`Programming error. Current value is ${$p(n)} but original value is undefined`);return ly(n,e,t,!1)}function Qn(n){return ly(n,n,"",!1)}function mR(n){return BU(n,n,"")}function XZ(n){return ly(n,n,"",!0)}var KZ=Object.defineProperty,QZ=(n,e,t)=>e in n?KZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,xr=(n,e,t)=>QZ(n,typeof e!="symbol"?e+"":e,t);class Lo{constructor({isOptional:e}){xr(this,"type"),xr(this,"fieldPaths"),xr(this,"isOptional"),xr(this,"isConvexValidator"),this.isOptional=e,this.isConvexValidator=!0}get optional(){return this.isOptional==="optional"}}class gR extends Lo{constructor({isOptional:e,tableName:t}){super({isOptional:e}),xr(this,"tableName"),xr(this,"kind","id"),this.tableName=t}get json(){return{type:"id",tableName:this.tableName}}asOptional(){return new gR({isOptional:"optional",tableName:this.tableName})}}class Bx extends Lo{constructor(){super(...arguments),xr(this,"kind","float64")}get json(){return{type:"number"}}asOptional(){return new Bx({isOptional:"optional"})}}class Lx extends Lo{constructor(){super(...arguments),xr(this,"kind","int64")}get json(){return{type:"bigint"}}asOptional(){return new Lx({isOptional:"optional"})}}class yR extends Lo{constructor(){super(...arguments),xr(this,"kind","boolean")}get json(){return{type:this.kind}}asOptional(){return new yR({isOptional:"optional"})}}class vR extends Lo{constructor(){super(...arguments),xr(this,"kind","bytes")}get json(){return{type:this.kind}}asOptional(){return new vR({isOptional:"optional"})}}class wR extends Lo{constructor(){super(...arguments),xr(this,"kind","string")}get json(){return{type:this.kind}}asOptional(){return new wR({isOptional:"optional"})}}class xR extends Lo{constructor(){super(...arguments),xr(this,"kind","null")}get json(){return{type:this.kind}}asOptional(){return new xR({isOptional:"optional"})}}class _R extends Lo{constructor(){super(...arguments),xr(this,"kind","any")}get json(){return{type:this.kind}}asOptional(){return new _R({isOptional:"optional"})}}class bR extends Lo{constructor({isOptional:e,fields:t}){super({isOptional:e}),xr(this,"fields"),xr(this,"kind","object"),this.fields=t}get json(){return{type:this.kind,value:globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([e,t])=>[e,{fieldType:t.json,optional:t.isOptional==="optional"}]))}}asOptional(){return new bR({isOptional:"optional",fields:this.fields})}}class SR extends Lo{constructor({isOptional:e,value:t}){super({isOptional:e}),xr(this,"value"),xr(this,"kind","literal"),this.value=t}get json(){return{type:this.kind,value:Qn(this.value)}}asOptional(){return new SR({isOptional:"optional",value:this.value})}}class ER extends Lo{constructor({isOptional:e,element:t}){super({isOptional:e}),xr(this,"element"),xr(this,"kind","array"),this.element=t}get json(){return{type:this.kind,value:this.element.json}}asOptional(){return new ER({isOptional:"optional",element:this.element})}}class AR extends Lo{constructor({isOptional:e,key:t,value:r}){if(super({isOptional:e}),xr(this,"key"),xr(this,"value"),xr(this,"kind","record"),t.isOptional==="optional")throw new Error("Record validator cannot have optional keys");if(r.isOptional==="optional")throw new Error("Record validator cannot have optional values");this.key=t,this.value=r}get json(){return{type:this.kind,keys:this.key.json,values:{fieldType:this.value.json,optional:!1}}}asOptional(){return new AR({isOptional:"optional",key:this.key,value:this.value})}}class TR extends Lo{constructor({isOptional:e,members:t}){super({isOptional:e}),xr(this,"members"),xr(this,"kind","union"),this.members=t}get json(){return{type:this.kind,value:this.members.map(e=>e.json)}}asOptional(){return new TR({isOptional:"optional",members:this.members})}}function LU(n){return!!n.isConvexValidator}function DU(n){return LU(n)?n:le.object(n)}const le={id:n=>new gR({isOptional:"required",tableName:n}),null:()=>new xR({isOptional:"required"}),number:()=>new Bx({isOptional:"required"}),float64:()=>new Bx({isOptional:"required"}),bigint:()=>new Lx({isOptional:"required"}),int64:()=>new Lx({isOptional:"required"}),boolean:()=>new yR({isOptional:"required"}),string:()=>new wR({isOptional:"required"}),bytes:()=>new vR({isOptional:"required"}),literal:n=>new SR({isOptional:"required",value:n}),array:n=>new ER({isOptional:"required",element:n}),object:n=>new bR({isOptional:"required",fields:n}),record:(n,e)=>new AR({isOptional:"required",key:n,value:e}),union:(...n)=>new TR({isOptional:"required",members:n}),any:()=>new _R({isOptional:"required"}),optional:n=>n.asOptional()};var YZ=Object.defineProperty,ZZ=(n,e,t)=>e in n?YZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,XE=(n,e,t)=>ZZ(n,typeof e!="symbol"?e+"":e,t),uN,cN;const JZ=Symbol.for("ConvexError");class Dx extends(cN=Error,uN=JZ,cN){constructor(e){super(typeof e=="string"?e:$p(e)),XE(this,"name","ConvexError"),XE(this,"data"),XE(this,uN,!0),this.data=e}}const CR=le.object({x:le.number(),y:le.number()}),eJ=le.object({dx:le.number(),dy:le.number()}),tJ=le.array(le.array(le.number()));function F1(n,e){return FU(n[e])}function Kh(n){return[n.position.x,n.position.y,n.facing.dx,n.facing.dy,n.t]}function FU(n){return{position:{x:n[0],y:n[1]},facing:{dx:n[2],dy:n[3]},t:n[4]}}function la(n,e){const t=n.x-e.x,r=n.y-e.y;return Math.sqrt(t*t+r*r)}function IR(n,e){return n.x==e.x&&n.y==e.y}function U1(n,e){return Math.abs(n.x-e.x)+Math.abs(n.y-e.y)}function UU(n,e){if(n.length<2)throw new Error(`Invalid path: ${JSON.stringify(n)}`);const t=F1(n,0);if(e<t.t)return{position:t.position,facing:t.facing,velocity:0};const r=F1(n,n.length-1);if(r.t<e)return{position:r.position,facing:r.facing,velocity:0};for(let i=0;i<n.length-1;i++){const s=F1(n,i),o=F1(n,i+1);if(s.t<=e&&e<=o.t){const a=(e-s.t)/(o.t-s.t);return{position:{x:s.position.x+a*(o.position.x-s.position.x),y:s.position.y+a*(o.position.y-s.position.y)},facing:s.facing,velocity:la(s.position,o.position)/(o.t-s.t)}}}throw new Error("Timestamp checks not exhaustive?")}const Fx=1e-4;function nJ(n,e){const t=e.x-n.x,r=e.y-n.y;return{dx:t,dy:r}}function zU(n){return Math.sqrt(n.dx*n.dx+n.dy*n.dy)}function rJ(n){const e=zU(n);if(e<Fx)return null;const{dx:t,dy:r}=n;return{dx:t/e,dy:r/e}}function iJ(n){if(Math.sqrt(n.dx*n.dx+n.dy*n.dy)<Fx)throw new Error(`Can't compute the orientation of too small vector ${JSON.stringify(n)}`);const e=2*Math.PI;return(Math.atan2(n.dy,n.dx)+e)%e/e*360}function sJ(n){if(n.map(Kh),n.length<=2)return n.map(Kh);const e=[Kh(n[0])];let t=n[0],r;for(const i of n.slice(1)){if(!r){r=i;continue}const{position:s,facing:o}=UU([Kh(t),Kh(i)],r.t),a=la(s,r.position)<Fx,l={dx:o.dx-r.facing.dx,dy:o.dy-r.facing.dy},u=zU(l)<Fx;if(a&&u){r=i;continue}e.push(Kh(r)),t=r,r=i}return r&&e.push(Kh(r)),e}const wc={frames:{left:{frame:{x:0,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left2:{frame:{x:32,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},left3:{frame:{x:64,y:32,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right:{frame:{x:0,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right2:{frame:{x:32,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},right3:{frame:{x:64,y:64,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up:{frame:{x:0,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up2:{frame:{x:32,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},up3:{frame:{x:64,y:96,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down:{frame:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down2:{frame:{x:32,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}},down3:{frame:{x:64,y:0,w:32,h:32},sourceSize:{w:32,h:32},spriteSourceSize:{x:0,y:0}}},meta:{scale:"1"},animations:{left:["left","left2","left3"],right:["right","right2","right3"],up:["up","up2","up3"],down:["down","down2","down3"]}},$U=[{name:"f1",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f2",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f3",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f4",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f5",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f6",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f7",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1},{name:"f8",textureUrl:"/assets/hugo.png",spritesheetData:wc,speed:.1}],oJ=.75;function jU(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=jU(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function th(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=jU(n))&&(r&&(r+=" "),r+=e);return r}const S0=n=>typeof n=="number"&&!isNaN(n),Qd=n=>typeof n=="string",no=n=>typeof n=="function",Ow=n=>Qd(n)||no(n)?n:null,KE=n=>Y.isValidElement(n)||Qd(n)||no(n)||S0(n);function aJ(n,e,t){t===void 0&&(t=300);const{scrollHeight:r,style:i}=n;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function ab(n){let{enter:e,exit:t,appendPosition:r=!1,collapse:i=!0,collapseDuration:s=300}=n;return function(o){let{children:a,position:l,preventExitTransition:u,done:h,nodeRef:f,isIn:p}=o;const m=r?`${e}--${l}`:e,g=r?`${t}--${l}`:t,v=Y.useRef(0);return Y.useLayoutEffect(()=>{const x=f.current,b=m.split(" "),S=_=>{_.target===f.current&&(x.dispatchEvent(new Event("d")),x.removeEventListener("animationend",S),x.removeEventListener("animationcancel",S),v.current===0&&_.type!=="animationcancel"&&x.classList.remove(...b))};x.classList.add(...b),x.addEventListener("animationend",S),x.addEventListener("animationcancel",S)},[]),Y.useEffect(()=>{const x=f.current,b=()=>{x.removeEventListener("animationend",b),i?aJ(x,h,s):h()};p||(u?b():(v.current=1,x.className+=` ${g}`,x.addEventListener("animationend",b)))},[p]),kt.createElement(kt.Fragment,null,a)}}function hN(n,e){return n!=null?{content:n.content,containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,status:e}:{}}const ta={list:new Map,emitQueue:new Map,on(n,e){return this.list.has(n)||this.list.set(n,[]),this.list.get(n).push(e),this},off(n,e){if(e){const t=this.list.get(n).filter(r=>r!==e);return this.list.set(n,t),this}return this.list.delete(n),this},cancelEmit(n){const e=this.emitQueue.get(n);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(n)),this},emit(n){this.list.has(n)&&this.list.get(n).forEach(e=>{const t=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(n)||this.emitQueue.set(n,[]),this.emitQueue.get(n).push(t)})}},z1=n=>{let{theme:e,type:t,...r}=n;return kt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...r})},QE={info:function(n){return kt.createElement(z1,{...n},kt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(n){return kt.createElement(z1,{...n},kt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(n){return kt.createElement(z1,{...n},kt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(n){return kt.createElement(z1,{...n},kt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return kt.createElement("div",{className:"Toastify__spinner"})}};function lJ(n){const[,e]=Y.useReducer(m=>m+1,0),[t,r]=Y.useState([]),i=Y.useRef(null),s=Y.useRef(new Map).current,o=m=>t.indexOf(m)!==-1,a=Y.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:n,containerId:null,isToastActive:o,getToast:m=>s.get(m)}).current;function l(m){let{containerId:g}=m;const{limit:v}=a.props;!v||g&&a.containerId!==g||(a.count-=a.queue.length,a.queue=[])}function u(m){r(g=>m==null?[]:g.filter(v=>v!==m))}function h(){const{toastContent:m,toastProps:g,staleId:v}=a.queue.shift();p(m,g,v)}function f(m,g){let{delay:v,staleId:x,...b}=g;if(!KE(m)||function(ee){return!i.current||a.props.enableMultiContainer&&ee.containerId!==a.props.containerId||s.has(ee.toastId)&&ee.updateId==null}(b))return;const{toastId:S,updateId:_,data:R}=b,{props:D}=a,j=()=>u(S),H=_==null;H&&a.count++;const G={...D,style:D.toastStyle,key:a.toastKey++,...Object.fromEntries(Object.entries(b).filter(ee=>{let[L,w]=ee;return w!=null})),toastId:S,updateId:_,data:R,closeToast:j,isIn:!1,className:Ow(b.className||D.toastClassName),bodyClassName:Ow(b.bodyClassName||D.bodyClassName),progressClassName:Ow(b.progressClassName||D.progressClassName),autoClose:!b.isLoading&&(K=b.autoClose,te=D.autoClose,K===!1||S0(K)&&K>0?K:te),deleteToast(){const ee=hN(s.get(S),"removed");s.delete(S),ta.emit(4,ee);const L=a.queue.length;if(a.count=S==null?a.count-a.displayedToast:a.count-1,a.count<0&&(a.count=0),L>0){const w=S==null?a.props.limit:1;if(L===1||w===1)a.displayedToast++,h();else{const A=w>L?L:w;a.displayedToast=A;for(let O=0;O<A;O++)h()}}else e()}};var K,te;G.iconOut=function(ee){let{theme:L,type:w,isLoading:A,icon:O}=ee,C=null;const k={theme:L,type:w};return O===!1||(no(O)?C=O(k):Y.isValidElement(O)?C=Y.cloneElement(O,k):Qd(O)||S0(O)?C=O:A?C=QE.spinner():(U=>U in QE)(w)&&(C=QE[w](k))),C}(G),no(b.onOpen)&&(G.onOpen=b.onOpen),no(b.onClose)&&(G.onClose=b.onClose),G.closeButton=D.closeButton,b.closeButton===!1||KE(b.closeButton)?G.closeButton=b.closeButton:b.closeButton===!0&&(G.closeButton=!KE(D.closeButton)||D.closeButton);let ne=m;Y.isValidElement(m)&&!Qd(m.type)?ne=Y.cloneElement(m,{closeToast:j,toastProps:G,data:R}):no(m)&&(ne=m({closeToast:j,toastProps:G,data:R})),D.limit&&D.limit>0&&a.count>D.limit&&H?a.queue.push({toastContent:ne,toastProps:G,staleId:x}):S0(v)?setTimeout(()=>{p(ne,G,x)},v):p(ne,G,x)}function p(m,g,v){const{toastId:x}=g;v&&s.delete(v);const b={content:m,props:g};s.set(x,b),r(S=>[...S,x].filter(_=>_!==v)),ta.emit(4,hN(b,b.props.updateId==null?"added":"updated"))}return Y.useEffect(()=>(a.containerId=n.containerId,ta.cancelEmit(3).on(0,f).on(1,m=>i.current&&u(m)).on(5,l).emit(2,a),()=>{s.clear(),ta.emit(3,a)}),[]),Y.useEffect(()=>{a.props=n,a.isToastActive=o,a.displayedToast=t.length}),{getToastToRender:function(m){const g=new Map,v=Array.from(s.values());return n.newestOnTop&&v.reverse(),v.forEach(x=>{const{position:b}=x.props;g.has(b)||g.set(b,[]),g.get(b).push(x)}),Array.from(g,x=>m(x[0],x[1]))},containerRef:i,isToastActive:o}}function dN(n){return n.targetTouches&&n.targetTouches.length>=1?n.targetTouches[0].clientX:n.clientX}function fN(n){return n.targetTouches&&n.targetTouches.length>=1?n.targetTouches[0].clientY:n.clientY}function uJ(n){const[e,t]=Y.useState(!1),[r,i]=Y.useState(!1),s=Y.useRef(null),o=Y.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,a=Y.useRef(n),{autoClose:l,pauseOnHover:u,closeToast:h,onClick:f,closeOnClick:p}=n;function m(R){if(n.draggable){R.nativeEvent.type==="touchstart"&&R.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",b),document.addEventListener("mouseup",S),document.addEventListener("touchmove",b),document.addEventListener("touchend",S);const D=s.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=D.getBoundingClientRect(),D.style.transition="",o.x=dN(R.nativeEvent),o.y=fN(R.nativeEvent),n.draggableDirection==="x"?(o.start=o.x,o.removalDistance=D.offsetWidth*(n.draggablePercent/100)):(o.start=o.y,o.removalDistance=D.offsetHeight*(n.draggablePercent===80?1.5*n.draggablePercent:n.draggablePercent/100))}}function g(R){if(o.boundingRect){const{top:D,bottom:j,left:H,right:G}=o.boundingRect;R.nativeEvent.type!=="touchend"&&n.pauseOnHover&&o.x>=H&&o.x<=G&&o.y>=D&&o.y<=j?x():v()}}function v(){t(!0)}function x(){t(!1)}function b(R){const D=s.current;o.canDrag&&D&&(o.didMove=!0,e&&x(),o.x=dN(R),o.y=fN(R),o.delta=n.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),D.style.transform=`translate${n.draggableDirection}(${o.delta}px)`,D.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function S(){document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",S),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",S);const R=s.current;if(o.canDrag&&o.didMove&&R){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),void n.closeToast();R.style.transition="transform 0.2s, opacity 0.2s",R.style.transform=`translate${n.draggableDirection}(0)`,R.style.opacity="1"}}Y.useEffect(()=>{a.current=n}),Y.useEffect(()=>(s.current&&s.current.addEventListener("d",v,{once:!0}),no(n.onOpen)&&n.onOpen(Y.isValidElement(n.children)&&n.children.props),()=>{const R=a.current;no(R.onClose)&&R.onClose(Y.isValidElement(R.children)&&R.children.props)}),[]),Y.useEffect(()=>(n.pauseOnFocusLoss&&(document.hasFocus()||x(),window.addEventListener("focus",v),window.addEventListener("blur",x)),()=>{n.pauseOnFocusLoss&&(window.removeEventListener("focus",v),window.removeEventListener("blur",x))}),[n.pauseOnFocusLoss]);const _={onMouseDown:m,onTouchStart:m,onMouseUp:g,onTouchEnd:g};return l&&u&&(_.onMouseEnter=x,_.onMouseLeave=v),p&&(_.onClick=R=>{f&&f(R),o.canCloseOnClick&&h()}),{playToast:v,pauseToast:x,isRunning:e,preventExitTransition:r,toastRef:s,eventHandlers:_}}function HU(n){let{closeToast:e,theme:t,ariaLabel:r="close"}=n;return kt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":r},kt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},kt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function cJ(n){let{delay:e,isRunning:t,closeToast:r,type:i="default",hide:s,className:o,style:a,controlledProgress:l,progress:u,rtl:h,isIn:f,theme:p}=n;const m=s||l&&u===0,g={...a,animationDuration:`${e}ms`,animationPlayState:t?"running":"paused",opacity:m?0:1};l&&(g.transform=`scaleX(${u})`);const v=th("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":h}),x=no(o)?o({rtl:h,type:i,defaultClassName:v}):th(v,o);return kt.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:x,style:g,[l&&u>=1?"onTransitionEnd":"onAnimationEnd"]:l&&u<1?null:()=>{f&&r()}})}const hJ=n=>{const{isRunning:e,preventExitTransition:t,toastRef:r,eventHandlers:i}=uJ(n),{closeButton:s,children:o,autoClose:a,onClick:l,type:u,hideProgressBar:h,closeToast:f,transition:p,position:m,className:g,style:v,bodyClassName:x,bodyStyle:b,progressClassName:S,progressStyle:_,updateId:R,role:D,progress:j,rtl:H,toastId:G,deleteToast:K,isIn:te,isLoading:ne,iconOut:ee,closeOnClick:L,theme:w}=n,A=th("Toastify__toast",`Toastify__toast-theme--${w}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":L}),O=no(g)?g({rtl:H,position:m,type:u,defaultClassName:A}):th(A,g),C=!!j||!a,k={closeToast:f,type:u,theme:w};let U=null;return s===!1||(U=no(s)?s(k):Y.isValidElement(s)?Y.cloneElement(s,k):HU(k)),kt.createElement(p,{isIn:te,done:K,position:m,preventExitTransition:t,nodeRef:r},kt.createElement("div",{id:G,onClick:l,className:O,...i,style:v,ref:r},kt.createElement("div",{...te&&{role:D},className:no(x)?x({type:u}):th("Toastify__toast-body",x),style:b},ee!=null&&kt.createElement("div",{className:th("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!ne})},ee),kt.createElement("div",null,o)),U,kt.createElement(cJ,{...R&&!C?{key:`pb-${R}`}:{},rtl:H,theme:w,delay:a,isRunning:e,isIn:te,closeToast:f,hide:h,type:u,style:_,className:S,controlledProgress:C,progress:j||0})))},lb=function(n,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}},dJ=ab(lb("bounce",!0));ab(lb("slide",!0));ab(lb("zoom"));ab(lb("flip"));const Ux=Y.forwardRef((n,e)=>{const{getToastToRender:t,containerRef:r,isToastActive:i}=lJ(n),{className:s,style:o,rtl:a,containerId:l}=n;function u(h){const f=th("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":a});return no(s)?s({position:h,rtl:a,defaultClassName:f}):th(f,Ow(s))}return Y.useEffect(()=>{e&&(e.current=r.current)},[]),kt.createElement("div",{ref:r,className:"Toastify",id:l},t((h,f)=>{const p=f.length?{...o}:{...o,pointerEvents:"none"};return kt.createElement("div",{className:u(h),style:p,key:`container-${h}`},f.map((m,g)=>{let{content:v,props:x}=m;return kt.createElement(hJ,{...x,isIn:i(x.toastId),style:{...x.style,"--nth":g+1,"--len":f.length},key:`toast-${x.key}`},v)}))}))});Ux.displayName="ToastContainer",Ux.defaultProps={position:"top-right",transition:dJ,autoClose:5e3,closeButton:HU,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let YE,id=new Map,e0=[],fJ=1;function WU(){return""+fJ++}function pJ(n){return n&&(Qd(n.toastId)||S0(n.toastId))?n.toastId:WU()}function E0(n,e){return id.size>0?ta.emit(0,n,e):e0.push({content:n,options:e}),e.toastId}function zx(n,e){return{...e,type:e&&e.type||n,toastId:pJ(e)}}function $1(n){return(e,t)=>E0(e,zx(n,t))}function Vn(n,e){return E0(n,zx("default",e))}Vn.loading=(n,e)=>E0(n,zx("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),Vn.promise=function(n,e,t){let r,{pending:i,error:s,success:o}=e;i&&(r=Qd(i)?Vn.loading(i,t):Vn.loading(i.render,{...t,...i}));const a={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(h,f,p)=>{if(f==null)return void Vn.dismiss(r);const m={type:h,...a,...t,data:p},g=Qd(f)?{render:f}:f;return r?Vn.update(r,{...m,...g}):Vn(g.render,{...m,...g}),p},u=no(n)?n():n;return u.then(h=>l("success",o,h)).catch(h=>l("error",s,h)),u},Vn.success=$1("success"),Vn.info=$1("info"),Vn.error=$1("error"),Vn.warning=$1("warning"),Vn.warn=Vn.warning,Vn.dark=(n,e)=>E0(n,zx("default",{theme:"dark",...e})),Vn.dismiss=n=>{id.size>0?ta.emit(1,n):e0=e0.filter(e=>n!=null&&e.options.toastId!==n)},Vn.clearWaitingQueue=function(n){return n===void 0&&(n={}),ta.emit(5,n)},Vn.isActive=n=>{let e=!1;return id.forEach(t=>{t.isToastActive&&t.isToastActive(n)&&(e=!0)}),e},Vn.update=function(n,e){e===void 0&&(e={}),setTimeout(()=>{const t=function(r,i){let{containerId:s}=i;const o=id.get(s||YE);return o&&o.getToast(r)}(n,e);if(t){const{props:r,content:i}=t,s={delay:100,...r,...e,toastId:e.toastId||n,updateId:WU()};s.toastId!==n&&(s.staleId=n);const o=s.render||i;delete s.render,E0(o,s)}},0)},Vn.done=n=>{Vn.update(n,{progress:1})},Vn.onChange=n=>(ta.on(4,n),()=>{ta.off(4,n)}),Vn.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Vn.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},ta.on(2,n=>{YE=n.containerId||n,id.set(YE,n),e0.forEach(e=>{ta.emit(0,e.content,e.options)}),e0=[]}).on(3,n=>{id.delete(n.containerId||n),id.size===0&&ta.off(0).off(1).off(5)});const mJ=[{name:"x",precision:8},{name:"y",precision:8},{name:"dx",precision:8},{name:"dy",precision:8},{name:"speed",precision:16}];function gJ(n){return{x:n.position.x,y:n.position.y,dx:n.facing.dx,dy:n.facing.dy,speed:n.speed}}const jf=2654435761,Hf=2246822519,j1=3266489917,pN=668265263,mN=374761393;function yJ(n){const e=[];for(let t=0,r=n.length;t<r;++t){const i=n.charCodeAt(t);if(i<128)e.push(i);else if(i<2048)e.push(192|i>>6,128|i&63);else if(i<55296||i>=57344)e.push(224|i>>12,128|i>>6&63,128|i&63);else{const s=65536+((i&1023)<<10|n.charCodeAt(++t)&1023);e.push(240|s>>18&7,128|s>>12&63,128|s>>6&63,128|s&63)}}return new Uint8Array(e)}function vJ(n,e=0){n=typeof n=="string"?yJ(n):n;const t=n;let r=e+mN&4294967295,i=0;if(t.length>=16){const o=[e+jf+Hf&4294967295,e+Hf&4294967295,e+0&4294967295,e-jf&4294967295],a=n,l=a.length-16;let u=0;for(i=0;(i&4294967280)<=l;i+=4){const h=i,f=a[h+0]+(a[h+1]<<8),p=a[h+2]+(a[h+3]<<8),m=f*Hf+(p*Hf<<16);let g=o[u]+m&4294967295;g=g<<13|g>>>19;const v=g&65535,x=g>>>16;o[u]=v*jf+(x*jf<<16)&4294967295,u=u+1&3}r=(o[0]<<1|o[0]>>>31)+(o[1]<<7|o[1]>>>25)+(o[2]<<12|o[2]>>>20)+(o[3]<<18|o[3]>>>14)&4294967295}r=r+n.length&4294967295;const s=n.length-4;for(;i<=s;i+=4){const o=i,a=t[o+0]+(t[o+1]<<8),l=t[o+2]+(t[o+3]<<8),u=a*j1+(l*j1<<16);r=r+u&4294967295,r=r<<17|r>>>15,r=(r&65535)*pN+((r>>>16)*pN<<16)&4294967295}for(;i<t.length;++i){const o=t[i];r=r+o*mN,r=r<<11|r>>>21,r=(r&65535)*jf+((r>>>16)*jf<<16)&4294967295}return r=r^r>>>15,r=((r&65535)*Hf&4294967295)+((r>>>16)*Hf<<16),r=r^r>>>13,r=((r&65535)*j1&4294967295)+((r>>>16)*j1<<16),r=r^r>>>16,r<0?r+4294967296:r}function Og(n){return n>>1^-(n&1)}function gN(n){for(var e=[],t=new Int8Array(n),r=t.length,i=0;r>i;){var s=t[i++],o=s&127;if(s>=0){e.push(Og(o));continue}if(s=t[i++],o|=(s&127)<<7,s>=0){e.push(Og(o));continue}if(s=t[i++],o|=(s&127)<<14,s>=0){e.push(Og(o));continue}if(s=t[i++],o|=(s&127)<<21,s>=0){e.push(Og(o));continue}s=t[i++],o|=s<<28,e.push(Og(o))}return e}function wJ(n,e){const t=1/(1<<e);return n.map(r=>r*t)}function yN(n,e=0){let t=e;const r=[];for(const i of n){const s=t+i;r.push(s),t=s}return r}function vN(n){if(n.length%2!==0)throw new Error(`Invalid RLE encoded length: ${n.length}`);const e=[];for(let t=0;t<n.length;t+=2){const r=n[t],i=n[t+1];for(let s=0;s<i;s++)e.push(r)}return e}const xJ=1;function _J(n){const e=new ArrayBuffer(1024),t=new DataView(e);let r=0;t.setUint8(r,xJ),r+=1;const i=new TextEncoder;for(const s of n){const o=i.encode(s.name);t.setUint8(r,o.length),r+=1,new Uint8Array(e,r,o.length).set(o),r+=o.length,t.setUint8(r,s.precision),r+=1}return e.slice(0,r)}function bJ(n,e){const t=new DataView(e);let r=0;const i=SJ(n),s=vJ(new Uint8Array(_J(i))),o=t.getUint32(r,!0);if(r+=4,o!==s)throw new Error(`Config hash mismatch: ${o} !== ${s}`);const a={};for(;r<e.byteLength;){const l=t.getUint8(r);r+=1;const u=l&15,h=(l&16)!==0,f=i[u];if(!f)throw new Error(`Invalid field number: ${u}`);const p=Number(t.getBigUint64(r,!0));r+=8;const m=t.getUint16(r,!0);r+=2;const g=e.slice(r,r+m);r+=m;const v=[p,...yN(vN(gN(g)),p)],x=t.getUint16(r,!0);r+=2;const b=e.slice(r,r+x);r+=x;const S=gN(b),_=h?vN(S):S,R=yN(_),D=wJ(R,f.precision);if(v.length+1!==D.length)throw new Error(`Invalid sample record: ${v.length} + 1 !== ${D.length}`);const j=D[0],H=[];for(let K=0;K<v.length;K++){const te=v[K],ne=D[K+1];H.push({value:ne,time:te})}const G={initialValue:j,samples:H};a[f.name]=G}return a}function SJ(n){return n.map(e=>typeof e=="string"?{name:e,precision:0}:e)}function EJ(n,e,t,r){const i=Y.useRef(new AJ),s=Y.useMemo(()=>{if(!(!t||!r)){if(!(r instanceof ArrayBuffer))throw new Error(`Expected ArrayBuffer, found ${typeof r}`);return bJ(n,r)}},[t&&r]);if(s&&i.current.receive(s),t===void 0)return;if(!e)return t;const o=i.current.query(e);return{...t,...o}}class AJ{constructor(){this.histories={}}receive(e){for(const[t,r]of Object.entries(e)){let i=this.histories[t];i||(i=[],this.histories[t]=i),i[i.length-1]!=r&&i.push(r)}}query(e){const t={};for(const[r,i]of Object.entries(this.histories)){if(i.length==0)continue;let s=null,o=i[0].initialValue;for(let a=0;a<i.length;a++){const l=i[a];for(const u of l.samples){if(u.time>e){s=a;break}o=u.value}if(s!==null)break}s!==null&&(this.histories[r]=i.slice(s)),t[r]=o}return t}}const wN=new Set,TJ=({game:n,isViewer:e,player:t,onClick:r,historicalTime:i})=>{var m,g,v;const s=(m=n.playerDescriptions.get(t.id))==null?void 0:m.character;if(!s)throw new Error(`Player ${t.id} has no character`);const o=$U.find(x=>x.name===s),a=(g=n.world.historicalLocations)==null?void 0:g.get(t.id),l=EJ(mJ,i,gJ(t),a);if(!o)return wN.has(s)||(wN.add(s),Vn.error(`Unknown character ${s}`)),null;if(!l)return null;const u=!![...n.world.conversations.values()].find(x=>{var b;return((b=x.isTyping)==null?void 0:b.playerId)===t.id}),h=!u&&!![...n.world.agents.values()].find(x=>x.playerId===t.id&&!!x.inProgressOperation),f=n.worldMap.tileDim,p={dx:l.dx,dy:l.dy};return q.jsx(q.Fragment,{children:q.jsx(kZ,{x:l.x*f+f/2,y:l.y*f+f/2,orientation:iJ(p),isMoving:l.speed>0,isThinking:h,isSpeaking:u,emoji:t.activity&&t.activity.until>(i??Date.now())?(v=t.activity)==null?void 0:v.emoji:void 0,isViewer:e,textureUrl:o.textureUrl,spritesheetData:o.spritesheetData,speed:o.speed,onClick:()=>{r({kind:"player",id:t.id})}})})},GU={"pixels_large1.png":{frame:{x:0,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large2.png":{frame:{x:32,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large3.png":{frame:{x:64,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large4.png":{frame:{x:96,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}},VU={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png"]},qU={image:"./spritesheets/campfire.png",format:"RGBA8888",size:{w:128,h:32},scale:"1"},CJ={frames:GU,animations:VU,meta:qU},IJ=Object.freeze(Object.defineProperty({__proto__:null,animations:VU,default:CJ,frames:GU,meta:qU},Symbol.toStringTag,{value:"Module"})),XU={"pixels_large1.png":{frame:{x:0,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large2.png":{frame:{x:32,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},"pixels_large3.png":{frame:{x:64,y:0,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}}},KU={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png"]},QU={image:"./spritesheets/gentlesparkle32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},RJ={frames:XU,animations:KU,meta:QU},PJ=Object.freeze(Object.defineProperty({__proto__:null,animations:KU,default:RJ,frames:XU,meta:QU},Symbol.toStringTag,{value:"Module"})),YU={"pixels_large1.png":{frame:{x:0,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large2.png":{frame:{x:32,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large3.png":{frame:{x:64,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large4.png":{frame:{x:96,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large5.png":{frame:{x:128,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}},"pixels_large6.png":{frame:{x:160,y:32,w:32,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:96},sourceSize:{w:32,h:96}}},ZU={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png"]},JU={image:"./spritesheets/gentlewaterfall32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},kJ={frames:YU,animations:ZU,meta:JU},MJ=Object.freeze(Object.defineProperty({__proto__:null,animations:ZU,default:kJ,frames:YU,meta:JU},Symbol.toStringTag,{value:"Module"})),e6={"pixels_large1.png":{frame:{x:0,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large2.png":{frame:{x:32,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large3.png":{frame:{x:64,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large4.png":{frame:{x:64,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large5.png":{frame:{x:128,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}},"pixels_large6.png":{frame:{x:160,y:192,w:32,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:64},sourceSize:{w:32,h:64}}},t6={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png"]},n6={image:"./spritesheets/gentlewaterfall32.png",format:"RGBA8888",size:{w:192,h:320},scale:"1"},OJ={frames:e6,animations:t6,meta:n6},NJ=Object.freeze(Object.defineProperty({__proto__:null,animations:t6,default:OJ,frames:e6,meta:n6},Symbol.toStringTag,{value:"Module"})),r6={"pixels_large1.png":{frame:{x:0,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large2.png":{frame:{x:208,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large3.png":{frame:{x:416,y:0,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large4.png":{frame:{x:0,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large5.png":{frame:{x:208,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large6.png":{frame:{x:416,y:208,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large7.png":{frame:{x:0,y:416,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}},"pixels_large8.png":{frame:{x:208,y:416,w:208,h:208},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:208,h:208},sourceSize:{w:208,h:208}}},i6={pixels_large:["pixels_large1.png","pixels_large2.png","pixels_large3.png","pixels_large4.png","pixels_large5.png","pixels_large6.png","pixels_large7.png","pixels_large8.png"]},s6={image:"./spritesheets/windmill.png",format:"RGBA8888",size:{w:624,h:624},scale:"1"},BJ={frames:r6,animations:i6,meta:s6},LJ=Object.freeze(Object.defineProperty({__proto__:null,animations:i6,default:BJ,frames:r6,meta:s6},Symbol.toStringTag,{value:"Module"})),DJ={"campfire.json":{spritesheet:IJ,url:"/assets/spritesheets/campfire.png"},"gentlesparkle.json":{spritesheet:PJ,url:"/assets/spritesheets/gentlesparkle32.png"},"gentlewaterfall.json":{spritesheet:MJ,url:"/assets/spritesheets/gentlewaterfall32.png"},"windmill.json":{spritesheet:LJ,url:"/assets/spritesheets/windmill.png"},"gentlesplash.json":{spritesheet:NJ,url:"/assets/spritesheets/gentlewaterfall32.png"}},FJ=Co.PixiComponent("StaticMap",{create:n=>{const e=n.map,t=Math.floor(e.tileSetDimX/e.tileDim),r=Math.floor(e.tileSetDimY/e.tileDim),i=Mt.from(e.tileSetUrl,{scaleMode:da.NEAREST}),s=[];for(let f=0;f<t;f++)for(let p=0;p<r;p++)s[f+p*t]=new Fe(i,new It(f*e.tileDim,p*e.tileDim,e.tileDim,e.tileDim));const o=e.bgTiles[0].length,a=e.bgTiles[0][0].length,l=new Zi,u=[...e.bgTiles,...e.objectTiles];for(let f=0;f<o*a;f++){const p=f%o,m=Math.floor(f/o),g=p*e.tileDim,v=m*e.tileDim;for(const x of u){const b=x[p][m];if(b===-1)continue;const S=new sl(s[b]);S.x=g,S.y=v,l.addChild(S)}}const h=new Map;for(const f of e.animatedSprites){const p=f.sheet;h.has(p)||h.set(p,[]),h.get(p).push(f)}for(const[f,p]of h.entries()){const m=DJ[f];if(!m){console.error("Could not find animation",f);continue}const{spritesheet:g,url:v}=m,x=Mt.from(v,{scaleMode:da.NEAREST}),b=new Rx(x,g);b.parse().then(()=>{for(const S of p){const _=b.animations[S.animation];if(!_){console.error("Failed to load animation",S);continue}const R=new wm(_);R.animationSpeed=.1,R.autoUpdate=!0,R.x=S.x,R.y=S.y,R.width=S.w,R.height=S.h,l.addChild(R),R.play()}})}return l.x=0,l.y=0,l.interactive=!0,l.hitArea=new It(0,0,o*e.tileDim,a*e.tileDim),l},applyProps:(n,e,t)=>{Co.applyDefaultProps(n,e,t)}});class _a{constructor(e){this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var UJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof kx<"u"?kx:typeof self<"u"?self:{};function zJ(n,e,t){return t={path:e,exports:{},require:function(r,i){return $J(r,i??t.path)}},n(t,t.exports),t.exports}function $J(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var xN=zJ(function(n,e){(function(){var t,r;r=function(i){return n.exports=i},t={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var l,u,h;return h=1.70158,u=0,l=o,i===0||(i/=a),u||(u=a*.3),l<Math.abs(o)?(l=o,h=u/4):h=u/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-h)*(2*Math.PI)/u))+s},easeOutElastic:function(i,s,o,a){var l,u,h;return h=1.70158,u=0,l=o,i===0||(i/=a),u||(u=a*.3),l<Math.abs(o)?(l=o,h=u/4):h=u/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*i)*Math.sin((i*a-h)*(2*Math.PI)/u)+o+s},easeInOutElastic:function(i,s,o,a){var l,u,h;return h=1.70158,u=0,l=o,i===0||(i/=a/2),u||(u=a*(.3*1.5)),l<Math.abs(o)?(l=o,h=u/4):h=u/(2*Math.PI)*Math.asin(o/l),i<1?-.5*(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-h)*(2*Math.PI)/u))+s:l*Math.pow(2,-10*(i-=1))*Math.sin((i*a-h)*(2*Math.PI)/u)*.5+o+s},easeInBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*(i/=a)*i*((l+1)*i-l)+s},easeOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*((i=i/a-1)*i*((l+1)*i+l)+1)+s},easeInOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),(i/=a/2)<1?o/2*(i*i*(((l*=1.525)+1)*i-l))+s:o/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+s},easeInBounce:function(i,s,o,a){var l;return l=t.easeOutBounce(a-i,0,o,a),o-l+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var l;return i<a/2?(l=t.easeInBounce(i*2,0,o,a),l*.5+s):(l=t.easeOutBounce(i*2-a,0,o,a),l*.5+o*.5+s)}},r(t)}).call(UJ)});function ub(n,e){if(n){if(typeof n=="function")return n;if(typeof n=="string")return xN[n]}else return xN[e]}const jJ={removeOnInterrupt:!1,ease:"linear",time:1e3};class Eu extends _a{__init(){this.startWidth=null}__init2(){this.startHeight=null}__init3(){this.deltaWidth=null}__init4(){this.deltaHeight=null}__init5(){this.width=null}__init6(){this.height=null}__init7(){this.time=0}constructor(e,t={}){super(e),Eu.prototype.__init.call(this),Eu.prototype.__init2.call(this),Eu.prototype.__init3.call(this),Eu.prototype.__init4.call(this),Eu.prototype.__init5.call(this),Eu.prototype.__init6.call(this),Eu.prototype.__init7.call(this),this.options=Object.assign({},jJ,t),this.options.ease=ub(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const t=new St(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new St(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}}}function H1(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const HJ={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class WJ extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},HJ,t),this.ease=ub(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const t=this.toX;t.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),t.time>=this.options.time?(this.parent.x=t.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(t.time,t.start,t.delta,this.options.time)}if(this.toY){const t=this.toY;t.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),t.time>=this.options.time?(this.parent.y=t.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(t.time,t.start,t.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const t=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<t,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new St(t*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new St(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new St(0,0),bottomRight:new St(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let e,t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.x&&t.percentChangeX===H1([t,"access",s=>s.options,"optionalAccess",s=>s.friction])||t.y&&t.percentChangeY===H1([t,"access",s=>s.options,"optionalAccess",s=>s.friction]))&&(e=this.oob(),(e.left&&this.left||e.right&&this.right)&&(t.percentChangeX=this.options.friction),(e.top&&this.top||e.bottom&&this.bottom)&&(t.percentChangeY=this.options.friction));const r=this.parent.plugins.get("drag",!0)||{},i=this.parent.plugins.get("pinch",!0)||{};if(t=t||{},!H1([r,"optionalAccess",s=>s.active])&&!H1([i,"optionalAccess",s=>s.active])&&(!this.toX||!this.toY)&&(!t.x||!t.y)){e=e||this.oob();const s=e.topLeft,o=e.bottomRight;if(!this.toX&&!t.x){let a=null;e.left&&this.left?a=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-s.x:e.right&&this.right&&(a=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-o.x),a!==null&&this.parent.x!==a&&(this.toX={time:0,start:this.parent.x,delta:a-this.parent.x,end:a},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!t.y){let a=null;e.top&&this.top?a=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-s.y:e.bottom&&this.bottom&&(a=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-o.y),a!==null&&this.parent.y!==a&&(this.toY={time:0,start:this.parent.y,delta:a-this.parent.y,end:a},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const GJ={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class VJ extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},GJ,t),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e={x:this.parent.x,y:this.parent.y},t=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,t.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,t.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,t.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,t.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const qJ={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class XJ extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},qJ,t),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&t<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&t>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},t={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")t.x=this.options.maxScale,t.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;t.x=typeof s.x>"u"?null:s.x,t.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),t.x!==null&&r>t.x&&(r=t.x),e.y!==null&&i<e.y&&(i=e.y),t.y!==null&&i>t.y&&(i=t.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const KJ={friction:.98,bounce:.8,minSpeed:.01},xc=16;class QJ extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},KJ,t),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.moved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}moved(e){if(this.saved.length){const t=this.saved[this.saved.length-1];e.type==="clamp-x"?t.x===e.original.x&&(t.x=this.parent.x):e.type==="clamp-y"&&t.y===e.original.y&&(t.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const t of this.saved)if(t.time>=e-100){const r=e-t.time;this.x=(this.parent.x-t.x)/r,this.y=(this.parent.y-t.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const t=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*xc/o*(Math.pow(s,i/xc)-Math.pow(s,r/xc)),this.x*=Math.pow(this.percentChangeX,e/xc)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*xc/o*(Math.pow(s,i/xc)-Math.pow(s,r/xc)),this.y*=Math.pow(this.percentChangeY,e/xc)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),t&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const YJ={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class RR extends _a{__init(){this.windowEventHandlers=new Array}constructor(e,t={}){super(e),RR.prototype.__init.call(this),this.options=Object.assign({},YJ,t),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const t=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",t)}addWindowEventHandler(e,t){window.addEventListener(e,t),this.windowEventHandlers.push({event:e,handler:t})}destroy(){this.windowEventHandlers.forEach(({event:e,handler:t})=>{window.removeEventListener(e,t)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const t=e.data.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!t||this.mouse[e.data.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.data.global.x,y:e.data.global.y},this.current=e.data.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const t=e.data.global.x,r=e.data.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=t-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:t,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new St(this.last.x,this.last.y),world:this.parent.toWorld(new St(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const t=this.parent.input.touches;if(t.length===1){const r=t[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new St(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const t=this.parent.plugins.get("wheel",!0);if(!t||!t.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const ZJ={speed:0,acceleration:null,radius:null};class JJ extends _a{constructor(e,t,r={}){super(e),this.target=t,this.options=Object.assign({},ZJ,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const t=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-t.y,2)+Math.pow(this.target.x-t.x,2))>this.options.radius){const l=Math.atan2(this.target.y-t.y,this.target.x-t.x);r=this.target.x-Math.cos(l)*this.options.radius,i=this.target.y-Math.sin(l)*this.options.radius}else return;const s=r-t.x,o=i-t.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-t.y,r-t.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const u=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>u?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const h=Math.cos(a)*this.velocity.x,f=Math.sin(a)*this.velocity.y,p=Math.abs(h)>Math.abs(s)?r:t.x+h,m=Math.abs(f)>Math.abs(o)?i:t.y+f;this.parent.moveCenter(p,m),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-t.y,r-t.x),l=Math.cos(a)*this.options.speed,u=Math.sin(a)*this.options.speed,h=Math.abs(l)>Math.abs(s)?r:t.x+l,f=Math.abs(u)>Math.abs(o)?i:t.y+u;this.parent.moveCenter(h,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const eee={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class tee extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},eee,t),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.data.pointerType!=="mouse"&&e.data.identifier!==1||!this.options.allowButtons&&e.data.buttons!==0)return!1;const t=e.data.global.x,r=e.data.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-t,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const o=Math.atan2(i.y-r,i.x-t);this.options.linear?(this.horizontal=Math.round(Math.cos(o))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(o))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(o)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(o)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&t<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&t>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const nee={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class A0 extends _a{__init(){this.active=!1}__init2(){this.pinching=!1}__init3(){this.moved=!1}constructor(e,t={}){super(e),A0.prototype.__init.call(this),A0.prototype.__init2.call(this),A0.prototype.__init3.call(this),this.options=Object.assign({},nee,t)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const t=e.data.global.x,r=e.data.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.data.pointerId?s.last={x:t,y:r,data:e.data}:o.id===e.data.pointerId&&(o.last={x:t,y:r,data:e.data}),a){let l;const u={x:s.last.x+(o.last.x-s.last.x)/2,y:s.last.y+(o.last.y-s.last.y)/2};this.options.center||(l=this.parent.toLocal(u));let h=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));h=h===0?h=1e-10:h;const f=(1-a/h)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=f),this.isAxisY()&&(this.parent.scale.y+=f),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:u});const p=this.parent.plugins.get("clamp-zoom",!0);if(p&&p.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const m=this.parent.toGlobal(l);this.parent.x+=(u.x-m.x)*this.options.factor,this.parent.y+=(u.y-m.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(u.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(u.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=u,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const ree={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class iee extends _a{constructor(e,t,r,i={}){super(e),this.options=Object.assign({},ree,i),this.ease=ub(i.ease,"easeInOutSine"),this.x=t,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const t=this.snapping;t.time+=e;let r,i,s;const o=this.startX,a=this.startY,l=this.deltaX,u=this.deltaY;if(t.time>this.options.time)r=!0,i=o+l,s=a+u;else{const h=this.ease(t.time,0,1,this.options.time);i=o+l*h,s=a+u*h}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;(t.x!==this.x||t.y!==this.y)&&this.snapStart()}}}const see={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class oee extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},see,t),this.ease=ub(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):t.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,t=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:t,deltaX:r-e,deltaY:i-t},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let t;if(!this.options.center&&!this.options.noMove&&(t=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(t))}}resume(){this.snapping=null,super.resume()}}const aee={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class lee extends _a{constructor(e,t={}){super(e),this.options=Object.assign({},aee,t),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){window.addEventListener("keydown",t=>{e.includes(t.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",t=>{e.includes(t.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,t=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=t.x),this.isAxisY()&&(this.parent.scale.y+=t.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const t=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=t.x-a.x,this.parent.y+=t.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:e.deltaX,dy:e.deltaY,dz:e.deltaZ},event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const t=this.parent.input.getPointerPosition(e),i=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,s=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const o={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+o.x)*s-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+o.y)*s-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=t}else{let o;this.options.center||(o=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x*=s),this.isAxisY()&&(this.parent.scale.y*=s),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const l=this.parent.toGlobal(o);this.parent.x+=t.x-l.x,this.parent.y+=t.y-l.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:e.deltaX,dy:e.deltaY,dz:e.deltaZ},event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class uee{constructor(e){this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new It(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(e){if(this.viewport.pause||!this.viewport.worldVisible)return;if(e.data.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.data.pointerId)||this.touches.push({id:e.data.pointerId,last:null}),this.count()===1){this.last=e.data.global.clone();const r=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);(!r||!r.isActive())&&(!i||!i.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const t=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.data.global.x-this.last.x,i=e.data.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}t&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.data.pointerType==="mouse"&&(this.isMouseDown=!1),e.data.pointerType!=="mouse"&&this.remove(e.data.pointerId);const t=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),t&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const t=new St;if(this.viewport.options.interaction)this.viewport.options.interaction.mapPositionToPoint(t,e.clientX,e.clientY);else if(this.viewport.options.useDivWheelForInputManager&&this.viewport.options.divWheel){const r=this.viewport.options.divWheel.getBoundingClientRect();t.x=e.clientX-r.left,t.y=e.clientY-r.top}else t.x=e.clientX,t.y=e.clientY;return t}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible||this.viewport.options.interaction&&this.viewport.options.interaction.interactionDOMElement!==e.target)return;const t=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=t.x&&t.x<=this.viewport.right&&this.viewport.top<=t.y&&t.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const t of this.touches)if(t.id===e)return t;return null}remove(e){for(let t=0;t<this.touches.length;t++)if(this.touches[t].id===e){this.touches.splice(t,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}function W1(n){let e,t=n[0],r=1;for(;r<n.length;){const i=n[r],s=n[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&t==null)return;i==="access"||i==="optionalAccess"?(e=t,t=s(t)):(i==="call"||i==="optionalCall")&&(t=s((...o)=>t.call(e,...o)),e=void 0)}return t}const Ng=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class cee{constructor(e){this.viewport=e,this.list=[],this.plugins={}}add(e,t,r=Ng.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=t;const s=Ng.indexOf(e);s!==-1&&Ng.splice(s,1),Ng.splice(r,0,e),this.sort()}get(e,t){return t&&W1([this,"access",r=>r.plugins,"access",r=>r[e],"optionalAccess",r=>r.paused])?null:this.plugins[e]}update(e){for(const t of this.list)t.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){this.plugins[e]&&(W1([this,"access",t=>t.plugins,"access",t=>t[e],"optionalAccess",t=>t.destroy,"call",t=>t()]),delete this.plugins[e],this.viewport.emit(`${e}-remove`),this.sort())}pause(e){W1([this,"access",t=>t.plugins,"access",t=>t[e],"optionalAccess",t=>t.pause,"call",t=>t()])}resume(e){W1([this,"access",t=>t.plugins,"access",t=>t[e],"optionalAccess",t=>t.resume,"call",t=>t()])}sort(){this.list=[];for(const e of Ng)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let t=!1;for(const r of this.list)r.down(e)&&(t=!0);return t}move(e){let t=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(t=!0);return t}up(e){let t=!1;for(const r of this.list)r.up(e)&&(t=!0);return t}wheel(e){let t=!1;for(const r of this.list)r.wheel(e)&&(t=!0);return t}}const hee={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1,ticker:wr.shared};class PR extends Zi{__init(){this._disableOnContextMenu=e=>e.preventDefault()}constructor(e={}){super(),PR.prototype.__init.call(this),this.options=Object.assign({},{divWheel:document.body},hee,e),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&this.options.divWheel.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new uee(this),this.plugins=new cee(this)}destroy(e){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.divWheel.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new It(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=window.innerWidth,t=window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=t,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new It(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,t){return arguments.length===2?this.toLocal(new St(e,t)):this.toLocal(e)}toScreen(e,t){return arguments.length===2?this.toGlobal(new St(e,t)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new St(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let t,r;typeof e[0]=="number"?(t=e[0],r=e[1]):(t=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-t)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new St(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let t,r;return e.length===1?(t=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(t=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(t!==this.x||r!==this.y)&&(this.position.set(t,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,t){const r=this.screenWidth/e,i=this.screenHeight/t;return Math.min(r,i)}findCover(e,t){const r=this.screenWidth/e,i=this.screenHeight/t;return Math.max(r,i)}fitWidth(e=this.worldWidth,t,r=!0,i){let s;t&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),t&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,t,r=!0,i){let s;t&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),t&&s&&this.moveCenter(s),this}fitWorld(e){let t;e&&(t=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&t&&this.moveCenter(t),this}fit(e,t=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/t,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,t){let r;t&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&r&&this.moveCenter(r),this}zoomPercent(e,t){return this.setZoom(this.scale.x+this.scale.x*e,t)}zoom(e,t){return this.fitWidth(e+this.worldScreenWidth,t),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new oee(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new St(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new It(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new RR(this,e)),this}clamp(e){return this.plugins.add("clamp",new VJ(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new QJ(this,e)),this}bounce(e){return this.plugins.add("bounce",new WJ(this,e)),this}pinch(e){return this.plugins.add("pinch",new A0(this,e)),this}snap(e,t,r){return this.plugins.add("snap",new iee(this,e,t,r)),this}follow(e,t){return this.plugins.add("follow",new JJ(this,e,t)),this}wheel(e){return this.plugins.add("wheel",new lee(this,e)),this}animate(e){return this.plugins.add("animate",new Eu(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new XJ(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new tee(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,t,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),t<this.top?(this.top=t,o=!0):t+i>this.bottom&&(this.bottom=t+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const dee=Co.PixiComponent("Viewport",{create(n){const{app:e,children:t,viewportRef:r,...i}=n,s=new PR({events:e.renderer.events,passiveWheel:!1,...i});return r&&(r.current=s),s.drag().pinch({}).wheel().decelerate().clamp({direction:"all",underflow:"center"}).setZoom(-10).clampZoom({minScale:1.04*n.screenWidth/(n.worldWidth/2),maxScale:3}),s},applyProps(n,e,t){Object.keys(t).forEach(r=>{r!=="app"&&r!=="viewportRef"&&r!=="children"&&e[r]!==t[r]&&(n[r]=t[r])})}}),tl="1.17.3";var fee=Object.defineProperty,pee=(n,e,t)=>e in n?fee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_N=(n,e,t)=>pee(n,typeof e!="symbol"?e+"":e,t);const mee="color:rgb(0, 145, 255)";function o6(n){switch(n){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class gee{constructor(e){_N(this,"_onLogLineFuncs"),_N(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let r=0;r<10&&this._onLogLineFuncs[t]!==void 0;r++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(const t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(const t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(const t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(const t of Object.values(this._onLogLineFuncs))t("error",...e)}}function a6(n){const e=new gee(n);return e.addLogLineListener((t,...r)=>{switch(t){case"debug":console.debug(...r);break;case"info":console.log(...r);break;case"warn":console.warn(...r);break;case"error":console.error(...r);break;default:console.log(...r)}}),e}function $x(n,e,t,r,i){const s=o6(t);if(typeof i=="object"&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),e==="info"){const o=i.match(/^\[.*?\] /);if(o===null){n.error(`[CONVEX ${s}(${r})] Could not parse console.log`);return}const a=i.slice(1,o[0].length-2),l=i.slice(o[0].length);n.log(`%c[CONVEX ${s}(${r})] [${a}]`,mee,l)}else n.error(`[CONVEX ${s}(${r})] ${i}`)}function yee(n,e){const t=`[CONVEX FATAL ERROR] ${e}`;return n.error(t),new Error(t)}function wp(n,e,t){return`[CONVEX ${o6(n)}(${e})] ${t.errorMessage}
  Called by client`}function V2(n,e){return e.data=n.errorData,e}function jx(n){const e=n.split(":");let t,r;return e.length===1?(t=e[0],r="default"):(t=e.slice(0,e.length-1).join(":"),r=e[e.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${r}`}function Dd(n,e){return JSON.stringify({udfPath:jx(n),args:Qn(e)})}var vee=Object.defineProperty,wee=(n,e,t)=>e in n?vee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Al=(n,e,t)=>wee(n,typeof e!="symbol"?e+"":e,t);class xee{constructor(){Al(this,"nextQueryId"),Al(this,"querySetVersion"),Al(this,"querySet"),Al(this,"queryIdToToken"),Al(this,"identityVersion"),Al(this,"auth"),Al(this,"outstandingQueriesOlderThanRestart"),Al(this,"outstandingAuthOlderThanRestart"),Al(this,"paused"),Al(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,r,i){const s=jx(e),o=Dd(s,t),a=this.querySet.get(o);if(a!==void 0)return a.numSubscribers+=1,{queryToken:o,modification:null,unsubscribe:()=>this.removeSubscriber(o)};{const l=this.nextQueryId++,u={id:l,canonicalizedUdfPath:s,args:t,numSubscribers:1,journal:r,componentPath:i};this.querySet.set(o,u),this.queryIdToToken.set(l,o);const h=this.querySetVersion,f=this.querySetVersion+1,p={type:"Add",queryId:l,udfPath:s,args:[Qn(t)],journal:r,componentPath:i};return this.paused?this.pendingQuerySetModifications.set(l,p):this.querySetVersion=f,{queryToken:o,modification:{type:"ModifyQuerySet",baseVersion:h,newVersion:f,modifications:[p]},unsubscribe:()=>this.removeSubscriber(o)}}}transition(e){for(const t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);const r=t.journal;if(r!==void 0){const i=this.queryIdToToken.get(t.queryId);i!==void 0&&(this.querySet.get(i).journal=r)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);break}default:throw new Error(`Invalid modification ${t.type}`)}}queryId(e,t){const r=jx(e),i=Dd(r,t),s=this.querySet.get(i);return s!==void 0?s.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){const r={tokenType:"Admin",value:e,impersonating:t};this.auth=r;const i=this.identityVersion;return this.paused||(this.identityVersion=i+1),{type:"Authenticate",baseVersion:i,...r}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){var t;return((t=this.auth)==null?void 0:t.value)!==e}queryPath(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){const t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){var t;return(t=this.querySet.get(e))==null?void 0:t.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const t=[];for(const s of this.querySet.values()){const o={type:"Add",queryId:s.id,udfPath:s.canonicalizedUdfPath,args:[Qn(s.args)],journal:s.journal,componentPath:s.componentPath};t.push(o),e.has(s.id)||this.outstandingQueriesOlderThanRestart.add(s.id)}this.querySetVersion=1;const r={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[r,void 0];this.outstandingAuthOlderThanRestart=!0;const i={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[r,i]}pause(){this.paused=!0}resume(){const e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){const t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);const r=this.querySetVersion,i=this.querySetVersion+1,s={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,s):this.querySetVersion=i,{type:"ModifyQuerySet",baseVersion:r,newVersion:i,modifications:[s]}}}}var _ee=Object.defineProperty,bee=(n,e,t)=>e in n?_ee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bN=(n,e,t)=>bee(n,typeof e!="symbol"?e+"":e,t);class See{constructor(e){this.logger=e,bN(this,"inflightRequests"),bN(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){return new Promise(i=>{const s=t?"Requested":"NotSent";this.inflightRequests.set(e.requestId,{message:e,status:{status:s,requestedAt:new Date,onResult:i}})})}onResponse(e){const t=this.inflightRequests.get(e.requestId);if(t===void 0||t.status.status==="Completed")return null;const r=t.message.type==="Mutation"?"mutation":"action",i=t.message.udfPath;for(const a of e.logLines)$x(this.logger,"info",r,i,a);const s=t.status;let o;if(e.success)o=()=>s.onResult({success:!0,logLines:e.logLines,value:_s(e.result)});else{const a=e.result,{errorData:l}=e;$x(this.logger,"error",r,i,a),o=()=>s.onResult({success:!1,errorMessage:a,errorData:l!==void 0?_s(l):void 0,logLines:e.logLines})}return e.type==="ActionResponse"||!e.success?(o(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),e.requestId):(t.status={status:"Completed",ts:e.ts,onResolve:o},null)}removeCompleted(e){const t=new Set;for(const[r,i]of this.inflightRequests.entries()){const s=i.status;s.status==="Completed"&&s.ts.lessThanOrEqual(e)&&(s.onResolve(),t.add(r),this.inflightRequests.delete(r),this.requestsOlderThanRestart.delete(r))}return t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const e=[];for(const[t,r]of this.inflightRequests){if(r.status.status==="NotSent"){r.status.status="Requested",e.push(r.message);continue}if(r.message.type==="Mutation")e.push(r.message);else{if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),r.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");r.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){const e=[];for(const[,t]of this.inflightRequests)if(t.status.status==="NotSent"){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(const e of this.inflightRequests.values())if(e.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let e=Date.now();for(const t of this.inflightRequests.values())t.status.status!=="Completed"&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}}const uy=Symbol.for("functionName"),Eee=Symbol.for("toReferencePath");function Aee(n){return n[Eee]??null}function Tee(n){return n.startsWith("function://")}function cb(n){let e;if(typeof n=="string")Tee(n)?e={functionHandle:n}:e={name:n};else if(n[uy])e={name:n[uy]};else{const t=Aee(n);if(!t)throw new Error(`${n} is not a functionReference`);e={reference:t}}return e}function Ro(n){const e=cb(n);if(e.name===void 0)throw e.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${e.functionHandle}`):e.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${e.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(e)}`);if(typeof n=="string")return n;const t=n[uy];if(!t)throw new Error(`${n} is not a functionReference`);return t}function l6(n){return{[uy]:n}}function u6(n=[]){const e={get(t,r){if(typeof r=="string"){const i=[...n,r];return u6(i)}else if(r===uy){if(n.length<2){const o=["api",...n].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${o}\``)}const i=n.slice(0,-1).join("/"),s=n[n.length-1];return s==="default"?i:i+":"+s}else return r===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},e)}const Cee=u6();var Iee=Object.defineProperty,Ree=(n,e,t)=>e in n?Iee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Hx=(n,e,t)=>Ree(n,typeof e!="symbol"?e+"":e,t);class cy{constructor(e){Hx(this,"queryResults"),Hx(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){const r=aa(t[0]),i=Ro(e),s=this.queryResults.get(Dd(i,r));if(s!==void 0)return cy.queryValue(s.result)}getAllQueries(e){const t=[],r=Ro(e);for(const i of this.queryResults.values())i.udfPath===jx(r)&&t.push({args:i.args,value:cy.queryValue(i.result)});return t}setQuery(e,t,r){const i=aa(t),s=Ro(e),o=Dd(s,i);let a;r===void 0?a=void 0:a={success:!0,value:r,logLines:[]};const l={udfPath:s,args:i,result:a};this.queryResults.set(o,l),this.modifiedQueries.push(o)}static queryValue(e){if(e!==void 0)return e.success?e.value:void 0}}class Pee{constructor(){Hx(this,"queryResults"),Hx(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(o=>!t.has(o.mutationId));const r=this.queryResults;this.queryResults=new Map(e);const i=new cy(this.queryResults);for(const o of this.optimisticUpdates)o.update(i);const s=[];for(const[o,a]of this.queryResults){const l=r.get(o);(l===void 0||l.result!==a.result)&&s.push(o)}return s}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});const r=new cy(this.queryResults);return e(r),r.modifiedQueries}queryResult(e){const t=this.queryResults.get(e);if(t===void 0)return;const r=t.result;if(r!==void 0){if(r.success)return r.value;throw r.errorData!==void 0?V2(r,new Dx(wp("query",t.udfPath,r))):new Error(wp("query",t.udfPath,r))}}hasQueryResult(e){return this.queryResults.get(e)!==void 0}queryLogs(e){var r;const t=this.queryResults.get(e);return(r=t==null?void 0:t.result)==null?void 0:r.logLines}}var kee=Object.defineProperty,Mee=(n,e,t)=>e in n?kee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ZE=(n,e,t)=>Mee(n,typeof e!="symbol"?e+"":e,t);class _o{constructor(e,t){ZE(this,"low"),ZE(this,"high"),ZE(this,"__isUnsignedLong__"),this.low=e|0,this.high=t|0,this.__isUnsignedLong__=!0}static isLong(e){return(e&&e.__isUnsignedLong__)===!0}static fromBytesLE(e){return new _o(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){const e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?SN:e>=Oee?Nee:new _o(e%T0|0,e/T0|0)}toString(){return(BigInt(this.high)*BigInt(T0)+BigInt(this.low)).toString()}equals(e){return _o.isLong(e)||(e=_o.fromValue(e)),this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return _o.isLong(e)||(e=_o.fromValue(e)),this.equals(e)?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return this.comp(e)<=0}static fromValue(e){return typeof e=="number"?_o.fromNumber(e):new _o(e.low,e.high)}}const SN=new _o(0,0),EN=65536,T0=EN*EN,Oee=T0*T0,Nee=new _o(-1,-1);var Bee=Object.defineProperty,Lee=(n,e,t)=>e in n?Bee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,G1=(n,e,t)=>Lee(n,typeof e!="symbol"?e+"":e,t);class AN{constructor(e,t){G1(this,"version"),G1(this,"remoteQuerySet"),G1(this,"queryPath"),G1(this,"logger"),this.version={querySet:0,ts:_o.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){const t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw new Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}`);for(const r of e.modifications)switch(r.type){case"QueryUpdated":{const i=this.queryPath(r.queryId);if(i)for(const o of r.logLines)$x(this.logger,"info","query",i,o);const s=_s(r.value??null);this.remoteQuerySet.set(r.queryId,{success:!0,value:s,logLines:r.logLines});break}case"QueryFailed":{const i=this.queryPath(r.queryId);if(i)for(const o of r.logLines)$x(this.logger,"info","query",i,o);const{errorData:s}=r;this.remoteQuerySet.set(r.queryId,{success:!1,errorMessage:r.errorMessage,errorData:s!==void 0?_s(s):void 0,logLines:r.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(r.queryId);break}default:throw new Error(`Invalid modification ${r.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function JE(n){const e=oy(n);return _o.fromBytesLE(Array.from(e))}function Dee(n){const e=new Uint8Array(n.toBytesLE());return ay(e)}function Fee(n){switch(n.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...n};case"MutationResponse":return n.success?{...n,ts:JE(n.ts)}:{...n};case"Transition":return{...n,startVersion:{...n.startVersion,ts:JE(n.startVersion.ts)},endVersion:{...n.endVersion,ts:JE(n.endVersion.ts)}}}}function Uee(n){switch(n.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...n};case"Connect":return n.maxObservedTimestamp!==void 0?{...n,maxObservedTimestamp:Dee(n.maxObservedTimestamp)}:{...n,maxObservedTimestamp:void 0}}}var zee=Object.defineProperty,$ee=(n,e,t)=>e in n?zee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Xs=(n,e,t)=>$ee(n,typeof e!="symbol"?e+"":e,t);const jee=1e3,Hee=1001,Wee=1005,Gee=4040;class Vee{constructor(e,t,r,i){Xs(this,"socket"),Xs(this,"connectionCount"),Xs(this,"lastCloseReason"),Xs(this,"initialBackoff"),Xs(this,"maxBackoff"),Xs(this,"retries"),Xs(this,"serverInactivityThreshold"),Xs(this,"reconnectDueToServerInactivityTimeout"),Xs(this,"uri"),Xs(this,"onOpen"),Xs(this,"onResume"),Xs(this,"onMessage"),Xs(this,"webSocketConstructor"),Xs(this,"logger"),this.webSocketConstructor=r,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.logger=i,this.connect()}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.socket={state:"connecting",ws:e,paused:"no"},this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.socket={state:"ready",ws:e,paused:this.socket.paused==="yes"?"uninitialized":"no"},this.resetServerInactivityTimeout(),this.socket.paused==="no"&&this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason}),this.lastCloseReason!=="InitialConnect"&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=t=>{const r=t.message;this.logger.log(`WebSocket error: ${r}`)},e.onmessage=t=>{this.resetServerInactivityTimeout();const r=Fee(JSON.parse(t.data));this._logVerbose(`received ws message with type ${r.type}`),this.onMessage(r).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=t=>{if(this._logVerbose("begin ws.onclose"),this.lastCloseReason===null&&(this.lastCloseReason=t.reason??"OnCloseInvoked"),t.code!==jee&&t.code!==Hee&&t.code!==Wee&&t.code!==Gee){let r=`WebSocket closed with code ${t.code}`;t.reason&&(r+=`: ${t.reason}`),this.logger.log(r)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){if(this._logVerbose(`sending message with type ${e.type}`),this.socket.state==="ready"&&this.socket.paused==="no"){const t=Uee(e),r=JSON.stringify(t);try{this.socket.ws.send(r)}catch(i){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${i}`),this.closeAndReconnect("FailedToSendMessage")}return!0}return!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};const e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=e,this.close(),this.scheduleReconnect();return}default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const e=this.socket.ws;return new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");const e=this.socket.ws,t=new Promise(r=>{e.onclose=()=>{r()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const e=this.close();return this.socket={state:"terminated"},e}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}restart(){switch(this.socket.state){case"stopped":break;case"terminated":return;case"connecting":case"ready":case"disconnected":throw new Error("`restart()` is only valid after `stop()`");default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){const e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;const t=Math.min(e,this.maxBackoff),r=t*(Math.random()-.5);return t+r}}function qee(){return Xee()}function Xee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{const e=Math.random()*16|0;return(n==="x"?e:e&3|8).toString(16)})}function q2(n){this.message=n}q2.prototype=new Error,q2.prototype.name="InvalidCharacterError";var TN=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new q2("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,i=0,s=0,o="";r=e.charAt(s++);~r&&(t=i%4?64*t+r:r,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function Kee(n){var e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(t){return decodeURIComponent(TN(t).replace(/(.)/g,function(r,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return TN(e)}}function Wx(n){this.message=n}function Qee(n,e){if(typeof n!="string")throw new Wx("Invalid token specified");var t=(e=e||{}).header===!0?0:1;try{return JSON.parse(Kee(n.split(".")[t]))}catch(r){throw new Wx("Invalid token specified: "+r.message)}}Wx.prototype=new Error,Wx.prototype.name="InvalidTokenError";var Yee=Object.defineProperty,Zee=(n,e,t)=>e in n?Yee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ka=(n,e,t)=>Zee(n,typeof e!="symbol"?e+"":e,t);const Jee=20*24*60*60*1e3;class ete{constructor(e,t,r){ka(this,"authState",{state:"noAuth"}),ka(this,"configVersion",0),ka(this,"syncState"),ka(this,"authenticate"),ka(this,"stopSocket"),ka(this,"restartSocket"),ka(this,"pauseSocket"),ka(this,"resumeSocket"),ka(this,"clearAuth"),ka(this,"logger"),ka(this,"refreshTokenLeewaySeconds"),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.restartSocket=t.restartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=r.logger,this.refreshTokenLeewaySeconds=r.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const r=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});r.isFromOutdatedConfig||(r.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(r.value),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket()):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()))}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){const{baseVersion:t}=e;if(t!=null){if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e);return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if(this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this._logVerbose("attempting to reauthenticate"),await this.stopSocket();const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.restartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("resuming WS after auth token fetch (if currently paused)"),this.resumeSocket())}scheduleTokenRefetch(e){if(this.authState.state==="noAuth")return;const t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:r,exp:i}=t;if(!r||!i){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const s=i-r;if(s<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let o=Math.min(Jee,(s-this.refreshTokenLeewaySeconds)*1e3);o<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${s}s`),o=0);const a=setTimeout(()=>{this.refetchToken()},o);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:a,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${o}ms`)}async fetchTokenAndGuardAgainstRace(e,t){const r=++this.configVersion,i=await e(t);return this.configVersion!==r?{isFromOutdatedConfig:!0}:{isFromOutdatedConfig:!1,value:i}}stop(){this.resetAuthState(),this.configVersion++}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return Qee(e)}catch(t){return this._logVerbose(`Error decoding token: ${t instanceof Error?t.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}const tte=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function nte(n,e){const t={sessionId:e};typeof performance>"u"||!performance.mark||performance.mark(n,{detail:t})}function rte(n){let e=n.name.slice(6);return e=e.charAt(0).toLowerCase()+e.slice(1),{name:e,startTime:n.startTime}}function ite(n){if(typeof performance>"u"||!performance.getEntriesByName)return[];const e=[];for(const t of tte){const r=performance.getEntriesByName(t).filter(i=>i.entryType==="mark").filter(i=>i.detail.sessionId===n);e.push(...r)}return e.map(rte)}var ste=Object.defineProperty,ote=(n,e,t)=>e in n?ste(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Is=(n,e,t)=>ote(n,typeof e!="symbol"?e+"":e,t);class ate{constructor(e,t,r){if(Is(this,"address"),Is(this,"state"),Is(this,"requestManager"),Is(this,"webSocketManager"),Is(this,"authenticationManager"),Is(this,"remoteQuerySet"),Is(this,"optimisticQueryResults"),Is(this,"onTransition"),Is(this,"_nextRequestId"),Is(this,"_sessionId"),Is(this,"firstMessageReceived",!1),Is(this,"debug"),Is(this,"logger"),Is(this,"maxObservedTimestamp"),Is(this,"mark",p=>{this.debug&&nte(p,this.sessionId)}),typeof e=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(r==null?void 0:r.skipConvexDeploymentUrlCheck)!==!0&&UZ(e),r={...r};const i=r.authRefreshTokenLeewaySeconds??2;let s=r.webSocketConstructor;if(!s&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");s=s||WebSocket,this.debug=r.reportDebugInfoToConvex??!1,this.address=e,this.logger=r.logger??a6({verbose:r.verbose??!1});const o=e.search("://");if(o===-1)throw new Error("Provided address was not an absolute URL.");const a=e.substring(o+3),l=e.substring(0,o);let u;if(l==="http")u="ws";else if(l==="https")u="wss";else throw new Error(`Unknown parent protocol ${l}`);const h=`${u}://${a}/api/${tl}/sync`;this.state=new xee,this.remoteQuerySet=new AN(p=>this.state.queryPath(p),this.logger),this.requestManager=new See(this.logger),this.authenticationManager=new ete(this.state,{authenticate:p=>{const m=this.state.setAuth(p);this.webSocketManager.sendMessage(m)},stopSocket:()=>this.webSocketManager.stop(),restartSocket:()=>this.webSocketManager.restart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:i}),this.optimisticQueryResults=new Pee,this.onTransition=t,this._nextRequestId=0,this._sessionId=qee();const{unsavedChangesWarning:f}=r;if(typeof window>"u"||typeof window.addEventListener>"u"){if(f===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else f!==!1&&window.addEventListener("beforeunload",p=>{if(this.requestManager.hasIncompleteRequests()){p.preventDefault();const m="Are you sure you want to leave? Your changes may not be saved.";return(p||window.event).returnValue=m,m}});this.webSocketManager=new Vee(h,{onOpen:p=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...p,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const m=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new AN(x=>this.state.queryPath(x),this.logger);const[g,v]=this.state.restart(m);v&&this.webSocketManager.sendMessage(v),this.webSocketManager.sendMessage(g);for(const x of this.requestManager.restart())this.webSocketManager.sendMessage(x)},onResume:()=>{const[p,m]=this.state.resume();m&&this.webSocketManager.sendMessage(m),p&&this.webSocketManager.sendMessage(p);for(const g of this.requestManager.resume())this.webSocketManager.sendMessage(g)},onMessage:p=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),p.type){case"Transition":{this.observedTimestamp(p.endVersion.ts),this.authenticationManager.onTransition(p),this.remoteQuerySet.transition(p),this.state.transition(p);const m=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(m);break}case"MutationResponse":{p.success&&this.observedTimestamp(p.ts);const m=this.requestManager.onResponse(p);m!==null&&this.notifyOnQueryResultChanges(new Set([m]));break}case"ActionResponse":{this.requestManager.onResponse(p);break}case"AuthError":{this.authenticationManager.onAuthError(p);break}case"FatalError":{const m=yee(this.logger,p.error);throw this.webSocketManager.terminate(),m}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},s,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){const t=this.remoteQuerySet.remoteQueryResults(),r=new Map;for(const[i,s]of t){const o=this.state.queryToken(i);if(o!==null){const a={result:s,udfPath:this.state.queryPath(i),args:this.state.queryArgs(i)};r.set(o,a)}}this.onTransition(this.optimisticQueryResults.ingestQueryResultsFromServer(r,e))}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){const r=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(r)}clearAuth(){const e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,r){const i=aa(t),{modification:s,queryToken:o,unsubscribe:a}=this.state.subscribe(e,i,r==null?void 0:r.journal,r==null?void 0:r.componentPath);return s!==null&&this.webSocketManager.sendMessage(s),{queryToken:o,unsubscribe:()=>{const l=a();l&&this.webSocketManager.sendMessage(l)}}}localQueryResult(e,t){const r=aa(t),i=Dd(e,r);return this.optimisticQueryResults.queryResult(i)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){const r=aa(t),i=Dd(e,r);return this.optimisticQueryResults.queryLogs(i)}queryJournal(e,t){const r=aa(t),i=Dd(e,r);return this.state.queryJournal(i)}connectionState(){return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:this.webSocketManager.socketState()==="ready",timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,t,r){const i=await this.mutationInternal(e,t,r);if(!i.success)throw i.errorData!==void 0?V2(i,new Dx(wp("mutation",e,i))):new Error(wp("mutation",e,i));return i.value}async mutationInternal(e,t,r,i){const s=aa(t);this.tryReportLongDisconnect();const o=this.nextRequestId;if(this._nextRequestId++,r!==void 0){const u=r.optimisticUpdate;if(u!==void 0){const h=p=>{u(p,s)},f=this.optimisticQueryResults.applyOptimisticUpdate(h,o);this.onTransition(f)}}const a={type:"Mutation",requestId:o,udfPath:e,componentPath:i,args:[Qn(s)]},l=this.webSocketManager.sendMessage(a);return this.requestManager.request(a,l)}async action(e,t){const r=await this.actionInternal(e,t);if(!r.success)throw r.errorData!==void 0?V2(r,new Dx(wp("action",e,r))):new Error(wp("action",e,r));return r.value}async actionInternal(e,t,r){const i=aa(t),s=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const o={type:"Action",requestId:s,udfPath:e,componentPath:r,args:[Qn(i)]},a=this.webSocketManager.sendMessage(o);return this.requestManager.request(o,a)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const e=ite(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;const e=this.connectionState().timeOfOldestInflightRequest;if(e===null||Date.now()-e.getTime()<=60*1e3)return;const t=`${this.address}/api/debug_event`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${tl}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(r=>{r.ok||this.logger.warn("Analytics request failed with response:",r.body)}).catch(r=>{this.logger.warn("Analytics response failed with error:",r)})}}var lte=Object.defineProperty,ute=(n,e,t)=>e in n?lte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_c=(n,e,t)=>ute(n,typeof e!="symbol"?e+"":e,t);if(typeof kt>"u")throw new Error("Required dependency 'react' not found");if(typeof vF>"u")throw new Error("Required dependency 'react-dom' not found");function c6(n,e,t){function r(i){return hte(i),e.mutation(n,i,{optimisticUpdate:t})}return r.withOptimisticUpdate=function(s){if(t!==void 0)throw new Error(`Already specified optimistic update for mutation ${Ro(n)}`);return c6(n,e,s)},r}class cte{constructor(e,t){if(_c(this,"address"),_c(this,"cachedSync"),_c(this,"listeners"),_c(this,"options"),_c(this,"closed",!1),_c(this,"_logger"),_c(this,"adminAuth"),_c(this,"fakeUserIdentity"),e===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof e!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=(t==null?void 0:t.logger)??a6({verbose:(t==null?void 0:t.verbose)??!1}),this.options={...t,logger:this._logger}}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new ate(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedSync)}setAuth(e,t){if(typeof e=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){const[r,i]=t,s=Ro(e);return{onUpdate:o=>{const{queryToken:a,unsubscribe:l}=this.sync.subscribe(s,r,i),u=this.listeners.get(a);return u!==void 0?u.add(o):this.listeners.set(a,new Set([o])),()=>{if(this.closed)return;const h=this.listeners.get(a);h.delete(o),h.size===0&&this.listeners.delete(a),l()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(s,r)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(s,r)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(s,r)}}}mutation(e,...t){const[r,i]=t,s=Ro(e);return this.sync.mutation(s,r,i)}action(e,...t){const r=Ro(e);return this.sync.action(r,...t)}query(e,...t){const r=this.watchQuery(e,...t),i=r.localQueryResult();return i!==void 0?Promise.resolve(i):new Promise((s,o)=>{const a=r.onUpdate(()=>{a();try{s(r.localQueryResult())}catch(l){o(l)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){const e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){vF.unstable_batchedUpdates(()=>{for(const t of e){const r=this.listeners.get(t);if(r)for(const i of r)i()}})}}const kR=kt.createContext(void 0);function MR(){return Y.useContext(kR)}const h6=({client:n,children:e})=>kt.createElement(kR.Provider,{value:n},e);function wa(n,...e){const t=e[0]==="skip",r=e[0]==="skip"?{}:aa(e[0]),i=typeof n=="string"?l6(n):n,s=Ro(i),o=Y.useMemo(()=>t?{}:{query:{query:i,args:r}},[JSON.stringify(Qn(r)),s,t]),l=gte(o).query;if(l instanceof Error)throw l;return l}function d6(n){const e=typeof n=="string"?l6(n):n,t=Y.useContext(kR);if(t===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return Y.useMemo(()=>c6(e,t),[t,Ro(e)])}function hte(n){if(typeof n=="object"&&n!==null&&"bubbles"in n&&"persist"in n&&"isDefaultPrevented"in n)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var dte=Object.defineProperty,fte=(n,e,t)=>e in n?dte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eA=(n,e,t)=>fte(n,typeof e!="symbol"?e+"":e,t);class pte{constructor(e){eA(this,"createWatch"),eA(this,"queries"),eA(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(const t of Object.keys(e)){const{query:r,args:i}=e[t];if(Ro(r),this.queries[t]===void 0)this.addQuery(t,r,i);else{const s=this.queries[t];(Ro(r)!==Ro(s.query)||JSON.stringify(Qn(i))!==JSON.stringify(Qn(s.args)))&&(this.removeQuery(t),this.addQuery(t,r,i))}}for(const t of Object.keys(this.queries))e[t]===void 0&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){const t={};for(const r of Object.keys(e)){const{query:i,args:s}=e[r];Ro(i);const o=this.createWatch(i,s);let a;try{a=o.localQueryResult()}catch(l){if(l instanceof Error)a=l;else throw l}t[r]=a}return t}setCreateWatch(e){this.createWatch=e;for(const t of Object.keys(this.queries)){const{query:r,args:i,watch:s}=this.queries[t],o=s.journal();this.removeQuery(t),this.addQuery(t,r,i,o)}}destroy(){for(const e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,r,i){if(this.queries[e]!==void 0)throw new Error(`Tried to add a new query with identifier ${e} when it already exists.`);const s=this.createWatch(t,r,i),o=s.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:r,watch:s,unsubscribe:o}}removeQuery(e){const t=this.queries[e];if(t===void 0)throw new Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(const e of this.listeners)e()}}function mte({getCurrentValue:n,subscribe:e}){const[t,r]=Y.useState(()=>({getCurrentValue:n,subscribe:e,value:n()}));let i=t.value;return(t.getCurrentValue!==n||t.subscribe!==e)&&(i=n(),r({getCurrentValue:n,subscribe:e,value:i})),Y.useEffect(()=>{let s=!1;const o=()=>{s||r(l=>{if(l.getCurrentValue!==n||l.subscribe!==e)return l;const u=n();return l.value===u?l:{...l,value:u}})},a=e(o);return o(),()=>{s=!0,a()}},[n,e]),i}function gte(n){const e=MR();if(e===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const t=Y.useMemo(()=>(r,i,s)=>e.watchQuery(r,i,{journal:s}),[e]);return yte(n,t)}function yte(n,e){const[t]=Y.useState(()=>new pte(e));t.createWatch!==e&&t.setCreateWatch(e),Y.useEffect(()=>()=>t.destroy(),[t]);const r=Y.useMemo(()=>({getCurrentValue:()=>t.getLocalResults(n),subscribe:i=>(t.setQueries(n),t.subscribe(i))}),[t,n]);return mte(r)}function X2(n,e){if(typeof Convex>"u"||Convex.syscall===void 0)throw new Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");const t=Convex.syscall(n,JSON.stringify(e));return JSON.parse(t)}async function Qi(n,e){if(typeof Convex>"u"||Convex.asyncSyscall===void 0)throw new Error("The Convex database and auth objects are being used outside of a Convex backend. Did you mean to use `useQuery` or `useMutation` to call a Convex function?");let t;try{t=await Convex.asyncSyscall(n,JSON.stringify(e))}catch(r){if(r.data!==void 0){const i=new Dx(r.message);throw i.data=_s(r.data),i}throw new Error(r.message)}return JSON.parse(t)}function vr(n,e,t,r){if(n===void 0)throw new TypeError(`Must provide arg ${e} \`${r}\` to \`${t}\``)}function vte(n,e,t,r){if(!Number.isInteger(n)||n<0)throw new TypeError(`Arg ${e} \`${r}\` to \`${t}\` must be a non-negative integer`)}function f6(n){return{getUserIdentity:async()=>await Qi("1.0/getUserIdentity",{requestId:n})}}var wte=Object.defineProperty,xte=(n,e,t)=>e in n?wte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,CN=(n,e,t)=>xte(n,typeof e!="symbol"?e+"":e,t);class _te{constructor(){CN(this,"_isExpression"),CN(this,"_value")}}var bte=Object.defineProperty,Ste=(n,e,t)=>e in n?bte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ete=(n,e,t)=>Ste(n,typeof e!="symbol"?e+"":e,t);class Fi extends _te{constructor(e){super(),Ete(this,"inner"),this.inner=e}serialize(){return this.inner}}function jn(n){return n instanceof Fi?n.serialize():{$literal:mR(n)}}const Ate={eq(n,e){return new Fi({$eq:[jn(n),jn(e)]})},neq(n,e){return new Fi({$neq:[jn(n),jn(e)]})},lt(n,e){return new Fi({$lt:[jn(n),jn(e)]})},lte(n,e){return new Fi({$lte:[jn(n),jn(e)]})},gt(n,e){return new Fi({$gt:[jn(n),jn(e)]})},gte(n,e){return new Fi({$gte:[jn(n),jn(e)]})},add(n,e){return new Fi({$add:[jn(n),jn(e)]})},sub(n,e){return new Fi({$sub:[jn(n),jn(e)]})},mul(n,e){return new Fi({$mul:[jn(n),jn(e)]})},div(n,e){return new Fi({$div:[jn(n),jn(e)]})},mod(n,e){return new Fi({$mod:[jn(n),jn(e)]})},neg(n){return new Fi({$neg:jn(n)})},and(...n){return new Fi({$and:n.map(jn)})},or(...n){return new Fi({$or:n.map(jn)})},not(n){return new Fi({$not:jn(n)})},field(n){return new Fi({$field:n})}};var Tte=Object.defineProperty,Cte=(n,e,t)=>e in n?Tte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ite=(n,e,t)=>Cte(n,typeof e!="symbol"?e+"":e,t);class Rte{constructor(){Ite(this,"_isIndexRange")}}var Pte=Object.defineProperty,kte=(n,e,t)=>e in n?Pte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,IN=(n,e,t)=>kte(n,typeof e!="symbol"?e+"":e,t);class Bc extends Rte{constructor(e){super(),IN(this,"rangeExpressions"),IN(this,"isConsumed"),this.rangeExpressions=e,this.isConsumed=!1}static new(){return new Bc([])}consume(){if(this.isConsumed)throw new Error("IndexRangeBuilder has already been used! Chain your method calls like `q => q.eq(...).eq(...)`. See https://docs.convex.dev/using/indexes");this.isConsumed=!0}eq(e,t){return this.consume(),new Bc(this.rangeExpressions.concat({type:"Eq",fieldPath:e,value:mR(t)}))}gt(e,t){return this.consume(),new Bc(this.rangeExpressions.concat({type:"Gt",fieldPath:e,value:Qn(t)}))}gte(e,t){return this.consume(),new Bc(this.rangeExpressions.concat({type:"Gte",fieldPath:e,value:Qn(t)}))}lt(e,t){return this.consume(),new Bc(this.rangeExpressions.concat({type:"Lt",fieldPath:e,value:Qn(t)}))}lte(e,t){return this.consume(),new Bc(this.rangeExpressions.concat({type:"Lte",fieldPath:e,value:Qn(t)}))}export(){return this.consume(),this.rangeExpressions}}var Mte=Object.defineProperty,Ote=(n,e,t)=>e in n?Mte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Nte=(n,e,t)=>Ote(n,typeof e!="symbol"?e+"":e,t);class Bte{constructor(){Nte(this,"_isSearchFilter")}}var Lte=Object.defineProperty,Dte=(n,e,t)=>e in n?Lte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,RN=(n,e,t)=>Dte(n,typeof e!="symbol"?e+"":e,t);class C0 extends Bte{constructor(e){super(),RN(this,"filters"),RN(this,"isConsumed"),this.filters=e,this.isConsumed=!1}static new(){return new C0([])}consume(){if(this.isConsumed)throw new Error("SearchFilterBuilder has already been used! Chain your method calls like `q => q.search(...).eq(...)`.");this.isConsumed=!0}search(e,t){return vr(e,1,"search","fieldName"),vr(t,2,"search","query"),this.consume(),new C0(this.filters.concat({type:"Search",fieldPath:e,value:t}))}eq(e,t){return vr(e,1,"eq","fieldName"),arguments.length!==2&&vr(t,2,"search","value"),this.consume(),new C0(this.filters.concat({type:"Eq",fieldPath:e,value:mR(t)}))}export(){return this.consume(),this.filters}}var Fte=Object.defineProperty,Ute=(n,e,t)=>e in n?Fte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,p6=(n,e,t)=>Ute(n,typeof e!="symbol"?e+"":e,t);class m6{constructor(e){p6(this,"tableName"),this.tableName=e}withIndex(e,t){vr(e,1,"withIndex","indexName");let r=Bc.new();return t!==void 0&&(r=t(r)),new vh({source:{type:"IndexRange",indexName:this.tableName+"."+e,range:r.export(),order:null},operators:[]})}withSearchIndex(e,t){vr(e,1,"withSearchIndex","indexName"),vr(t,2,"withSearchIndex","searchFilter");const r=C0.new();return new vh({source:{type:"Search",indexName:this.tableName+"."+e,filters:t(r).export()},operators:[]})}fullTableScan(){return new vh({source:{type:"FullTableScan",tableName:this.tableName,order:null},operators:[]})}order(e){return this.fullTableScan().order(e)}async count(){const e=await Qi("1.0/count",{table:this.tableName});return _s(e)}filter(e){return this.fullTableScan().filter(e)}limit(e){return this.fullTableScan().limit(e)}collect(){return this.fullTableScan().collect()}take(e){return this.fullTableScan().take(e)}paginate(e){return this.fullTableScan().paginate(e)}first(){return this.fullTableScan().first()}unique(){return this.fullTableScan().unique()}[Symbol.asyncIterator](){return this.fullTableScan()[Symbol.asyncIterator]()}}function PN(n){throw new Error(n==="consumed"?"This query is closed and can't emit any more values.":"This query has been chained with another operator and can't be reused.")}class vh{constructor(e){p6(this,"state"),this.state={type:"preparing",query:e}}takeQuery(){if(this.state.type!=="preparing")throw new Error("A query can only be chained once and can't be chained after iteration begins.");const e=this.state.query;return this.state={type:"closed"},e}startQuery(){if(this.state.type==="executing")throw new Error("Iteration can only begin on a query once.");(this.state.type==="closed"||this.state.type==="consumed")&&PN(this.state.type);const e=this.state.query,{queryId:t}=X2("1.0/queryStream",{query:e,version:tl});return this.state={type:"executing",queryId:t},t}closeQuery(){if(this.state.type==="executing"){const e=this.state.queryId;X2("1.0/queryCleanup",{queryId:e})}this.state={type:"consumed"}}order(e){vr(e,1,"order","order");const t=this.takeQuery();if(t.source.type==="Search")throw new Error("Search queries must always be in relevance order. Can not set order manually.");if(t.source.order!==null)throw new Error("Queries may only specify order at most once");return t.source.order=e,new vh(t)}filter(e){vr(e,1,"filter","predicate");const t=this.takeQuery();return t.operators.push({filter:jn(e(Ate))}),new vh(t)}limit(e){vr(e,1,"limit","n");const t=this.takeQuery();return t.operators.push({limit:e}),new vh(t)}[Symbol.asyncIterator](){return this.startQuery(),this}async next(){(this.state.type==="closed"||this.state.type==="consumed")&&PN(this.state.type);const e=this.state.type==="preparing"?this.startQuery():this.state.queryId,{value:t,done:r}=await Qi("1.0/queryStreamNext",{queryId:e});return r&&this.closeQuery(),{value:_s(t),done:r}}return(){return this.closeQuery(),Promise.resolve({done:!0,value:void 0})}async paginate(e){if(vr(e,1,"paginate","options"),typeof(e==null?void 0:e.numItems)!="number"||e.numItems<0)throw new Error(`\`options.numItems\` must be a positive number. Received \`${e==null?void 0:e.numItems}\`.`);const t=this.takeQuery(),r=e.numItems,i=e.cursor,s=(e==null?void 0:e.endCursor)??null,o=e.maximumRowsRead??null,{page:a,isDone:l,continueCursor:u,splitCursor:h,pageStatus:f}=await Qi("1.0/queryPage",{query:t,cursor:i,endCursor:s,pageSize:r,maximumRowsRead:o,maximumBytesRead:e.maximumBytesRead,version:tl});return{page:a.map(p=>_s(p)),isDone:l,continueCursor:u,splitCursor:h,pageStatus:f}}async collect(){const e=[];for await(const t of this)e.push(t);return e}async take(e){return vr(e,1,"take","n"),vte(e,1,"take","n"),this.limit(e).collect()}async first(){const e=await this.take(1);return e.length===0?null:e[0]}async unique(){const e=await this.take(2);if(e.length===0)return null;if(e.length===2)throw new Error("unique() query returned more than one result");return e[0]}}async function g6(n,e){if(vr(n,1,"get","id"),typeof n!="string")throw new Error(`Invalid argument \`id\` for \`db.get\`, expected string but got '${typeof n}': ${n}`);const t={id:Qn(n),isSystem:e,version:tl},r=await Qi("1.0/get",t);return _s(r)}function y6(){const n=(i=!1)=>({get:async s=>await g6(s,i),query:s=>new K2(s,i).query(),normalizeId:(s,o)=>{vr(s,1,"normalizeId","tableName"),vr(o,2,"normalizeId","id");const a=s.startsWith("_");if(a!==i)throw new Error(`${a?"System":"User"} tables can only be accessed from db.${i?"":"system."}normalizeId().`);const l=X2("1.0/db/normalizeId",{table:s,idString:o});return _s(l).id},system:null,table:s=>new K2(s,i)}),{system:e,...t}=n(!0),r=n();return r.system=t,r}async function v6(n,e){if(n.startsWith("_"))throw new Error("System tables (prefixed with `_`) are read-only.");vr(n,1,"insert","table"),vr(e,2,"insert","value");const t=await Qi("1.0/insert",{table:n,value:Qn(e)});return _s(t)._id}async function w6(n,e){vr(n,1,"patch","id"),vr(e,2,"patch","value"),await Qi("1.0/shallowMerge",{id:Qn(n),value:XZ(e)})}async function x6(n,e){vr(n,1,"replace","id"),vr(e,2,"replace","value"),await Qi("1.0/replace",{id:Qn(n),value:Qn(e)})}async function _6(n){vr(n,1,"delete","id"),await Qi("1.0/remove",{id:Qn(n)})}function zte(){const n=y6();return{get:n.get,query:n.query,normalizeId:n.normalizeId,system:n.system,insert:async(e,t)=>await v6(e,t),patch:async(e,t)=>await w6(e,t),replace:async(e,t)=>await x6(e,t),delete:async e=>await _6(e),table:e=>new $te(e,!1)}}class K2{constructor(e,t){this.tableName=e,this.isSystem=t}async get(e){return g6(e,this.isSystem)}query(){const e=this.tableName.startsWith("_");if(e!==this.isSystem)throw new Error(`${e?"System":"User"} tables can only be accessed from db.${this.isSystem?"":"system."}query().`);return new m6(this.tableName)}}class $te extends K2{async insert(e){return v6(this.tableName,e)}async patch(e,t){return w6(e,t)}async replace(e,t){return x6(e,t)}async delete(e){return _6(e)}}function jte(){return{runAfter:async(n,e,t)=>{const r=Hte(n,e,t);return await Qi("1.0/schedule",r)},runAt:async(n,e,t)=>{const r=Wte(n,e,t);return await Qi("1.0/schedule",r)},cancel:async n=>{vr(n,1,"cancel","id");const e={id:Qn(n)};await Qi("1.0/cancel_job",e)}}}function Hte(n,e,t){if(typeof n!="number")throw new Error("`delayMs` must be a number");if(!isFinite(n))throw new Error("`delayMs` must be a finite number");if(n<0)throw new Error("`delayMs` must be non-negative");const r=aa(t),i=cb(e),s=(Date.now()+n)/1e3;return{...i,ts:s,args:Qn(r),version:tl}}function Wte(n,e,t){let r;if(n instanceof Date)r=n.valueOf()/1e3;else if(typeof n=="number")r=n/1e3;else throw new Error("The invoke time must a Date or a timestamp");const i=cb(e),s=aa(t);return{...i,ts:r,args:Qn(s),version:tl}}function b6(n){return{getUrl:async e=>(vr(e,1,"getUrl","storageId"),await Qi("1.0/storageGetUrl",{requestId:n,version:tl,storageId:e})),getMetadata:async e=>await Qi("1.0/storageGetMetadata",{requestId:n,version:tl,storageId:e})}}function Gte(n){const e=b6(n);return{generateUploadUrl:async()=>await Qi("1.0/storageGenerateUploadUrl",{requestId:n,version:tl}),delete:async t=>{await Qi("1.0/storageDelete",{requestId:n,version:tl,storageId:t})},getUrl:e.getUrl,getMetadata:e.getMetadata}}async function Vte(n,e){const t="",r=_s(JSON.parse(e)),i={db:zte(),auth:f6(t),storage:Gte(t),scheduler:jte(),runQuery:(o,a)=>Q2("query",o,a),runMutation:(o,a)=>Q2("mutation",o,a)},s=await E6(n,i,r);return S6(s),JSON.stringify(Qn(s===void 0?null:s))}function S6(n){if(n instanceof m6||n instanceof vh)throw new Error("Return value is a Query. Results must be retrieved with `.collect()`, `.take(n), `.unique()`, or `.first()`.")}async function E6(n,e,t){let r;try{r=await Promise.resolve(n(e,...t))}catch(i){throw qte(i)}return r}function qte(n){if(typeof n=="object"&&n!==null&&Symbol.for("ConvexError")in n){const e=n;return e.data=JSON.stringify(Qn(e.data===void 0?null:e.data)),e.ConvexErrorSymbol=Symbol.for("ConvexError"),e}else return n}function A6(){var e,t;if(typeof window>"u"||!window.__convexAllowFunctionsInBrowser)return;if(((t=(e=Object.getOwnPropertyDescriptor(globalThis,"window"))==null?void 0:e.get)==null?void 0:t.toString().includes("[native code]"))??!1)throw new Error("Convex functions should not be imported in the browser.")}function T6(n){return()=>{let e=le.any();return typeof n=="object"&&n.args!==void 0&&(e=DU(n.args)),JSON.stringify(e.json)}}function C6(n){return()=>{let e;return typeof n=="object"&&n.returns!==void 0&&(e=DU(n.returns)),JSON.stringify(e?e.json:null)}}const Xte=n=>{const e=typeof n=="function"?n:n.handler,t=(r,i)=>e(r,i);return A6(),t.isMutation=!0,t.isInternal=!0,t.invokeMutation=r=>Vte(t,r),t.exportArgs=T6(n),t.exportReturns=C6(n),t._handler=e,t};async function Kte(n,e){const t="",r=_s(JSON.parse(e)),i={db:y6(),auth:f6(t),storage:b6(t),runQuery:(o,a)=>Q2("query",o,a)},s=await E6(n,i,r);return S6(s),JSON.stringify(Qn(s===void 0?null:s))}const Qte=n=>{const e=typeof n=="function"?n:n.handler,t=(r,i)=>e(r,i);return A6(),t.isQuery=!0,t.isInternal=!0,t.invokeQuery=r=>Kte(t,r),t.exportArgs=T6(n),t.exportReturns=C6(n),t._handler=e,t};async function Q2(n,e,t){const r=aa(t),i={udfType:n,args:Qn(r),...cb(e)},s=await Qi("1.0/runUdf",i);return _s(s)}var Yte=Object.defineProperty,Zte=(n,e,t)=>e in n?Yte(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,wd=(n,e,t)=>Zte(n,typeof e!="symbol"?e+"":e,t);class kN{constructor(e){wd(this,"indexes"),wd(this,"searchIndexes"),wd(this,"vectorIndexes"),wd(this,"validator"),this.indexes=[],this.searchIndexes=[],this.vectorIndexes=[],this.validator=e}index(e,t){return this.indexes.push({indexDescriptor:e,fields:t}),this}searchIndex(e,t){return this.searchIndexes.push({indexDescriptor:e,searchField:t.searchField,filterFields:t.filterFields||[]}),this}vectorIndex(e,t){return this.vectorIndexes.push({indexDescriptor:e,vectorField:t.vectorField,dimensions:t.dimensions,filterFields:t.filterFields||[]}),this}self(){return this}export(){return{indexes:this.indexes,searchIndexes:this.searchIndexes,vectorIndexes:this.vectorIndexes,documentType:this.validator.json}}}function Gx(n){return LU(n)?new kN(n):new kN(le.object(n))}class Jte{constructor(e,t){wd(this,"tables"),wd(this,"strictTableNameTypes"),wd(this,"schemaValidation"),this.tables=e,this.schemaValidation=(t==null?void 0:t.schemaValidation)===void 0?!0:t.schemaValidation}export(){return JSON.stringify({tables:Object.entries(this.tables).map(([e,t])=>{const{indexes:r,searchIndexes:i,vectorIndexes:s,documentType:o}=t.export();return{tableName:e,indexes:r,searchIndexes:i,vectorIndexes:s,documentType:o}}),schemaValidation:this.schemaValidation})}}function ene(n,e){return new Jte(n,e)}ene({_scheduled_functions:Gx({name:le.string(),args:le.array(le.any()),scheduledTime:le.float64(),completedTime:le.optional(le.float64()),state:le.union(le.object({kind:le.literal("pending")}),le.object({kind:le.literal("inProgress")}),le.object({kind:le.literal("success")}),le.object({kind:le.literal("failed"),error:le.string()}),le.object({kind:le.literal("canceled")}))}),_storage:Gx({sha256:le.string(),size:le.float64(),contentType:le.optional(le.string())})});const bs=Cee;async function tne(n,e){const t=n.watchQuery(bs.aiTown.main.inputStatus,{inputId:e});let r=t.localQueryResult();if(r==null){let i;try{await new Promise((s,o)=>{i=t.onUpdate(()=>{try{r=t.localQueryResult()}catch(a){o(a);return}r!=null&&s()})})}finally{i&&i()}}if(!r)throw new Error(`Input ${e} was never processed.`);if(r.kind==="error")throw new Error(r.message);return r.value}function xp(n,e){const t=MR();return async r=>{const i=await t.mutation(bs.world.sendWorldInput,{engineId:n,name:e,args:r});return await tne(t,i)}}async function t0(n){try{return await n}catch(e){throw Vn.error(e.message),e}}function nne({player:n,tileDim:e}){var i;const t=((i=n.pathfinding)==null?void 0:i.state.kind)=="moving"&&n.pathfinding.state.path,r=Y.useCallback(s=>{if(s.clear(),!t)return;let o=!0;for(const a of t){const{position:l}=FU(a),u=l.x*e+e/2,h=l.y*e+e/2;o?(s.moveTo(u,h),s.lineStyle(2,rne(n.id),.5),o=!1):s.lineTo(u,h)}},[t]);return t?q.jsx(Co.Graphics,{draw:r}):null}function rne(n){return{h:0,s:50,l:90}}const MN=500,ine=.25;function sne(n){const{destination:e,tileDim:t}=n,r=i=>{i.clear();const s=Date.now();if(e.t+MN<=s)return;const o=(s-e.t)/MN,a=e.x*t,l=e.y*t;i.lineStyle(1.5,{h:0,s:50,l:90},.5),i.drawCircle(a,l,ine*o*t)};return q.jsx(Co.Graphics,{draw:r})}const one=n=>{var v;const e=Co.useApp(),t=Y.useRef(),r=wa(bs.world.userStatus,{worldId:n.worldId})??null,i=(v=[...n.game.world.players.values()].find(x=>x.human===r))==null?void 0:v.id,s=xp(n.engineId,"moveTo"),o=Y.useRef(null),a=x=>{o.current={screenX:x.screenX,screenY:x.screenY}},[l,u]=Y.useState(null),h=async x=>{if(o.current){const{screenX:j,screenY:H}=o.current;o.current=null;const[G,K]=[j-x.screenX,H-x.screenY],te=Math.sqrt(G*G+K*K);if(te>10){console.log(`Skipping navigation on drag event (${te}px)`);return}}if(!i)return;const b=t.current;if(!b)return;const S=b.toWorld(x.screenX,x.screenY),_=n.game.worldMap.tileDim,R={x:S.x/_,y:S.y/_};u({t:Date.now(),...R});const D={x:Math.floor(R.x),y:Math.floor(R.y)};console.log(`Moving to ${JSON.stringify(D)}`),await t0(s({playerId:i,destination:D}))},{width:f,height:p,tileDim:m}=n.game.worldMap,g=[...n.game.world.players.values()];return Y.useEffect(()=>{if(!t.current||i===void 0)return;const x=n.game.world.players.get(i);t.current.animate({position:new St(x.position.x*m,x.position.y*m),scale:1.5})},[i]),q.jsxs(dee,{app:e,screenWidth:n.width,screenHeight:n.height,worldWidth:f*m,worldHeight:p*m,viewportRef:t,children:[q.jsx(FJ,{map:n.game.worldMap,onpointerup:h,onpointerdown:a}),g.map(x=>(g5||x.id===i)&&q.jsx(nne,{player:x,tileDim:m},`path-${x.id}`)),l&&q.jsx(sne,{destination:l,tileDim:m}),g.map(x=>q.jsx(TJ,{game:n.game,player:x,isViewer:x.id===i,onClick:n.setSelectedElement,historicalTime:n.historicalTime},`player-${x.id}`))]})};var ane=typeof oi=="object"&&oi&&oi.Object===Object&&oi,lne=typeof self=="object"&&self&&self.Object===Object&&self;ane||lne||Function("return this")();var I6=typeof window<"u"?Y.useLayoutEffect:Y.useEffect;function une(n,e,t,r){const i=Y.useRef(e);I6(()=>{i.current=e},[e]),Y.useEffect(()=>{const s=(t==null?void 0:t.current)??window;if(!(s&&s.addEventListener))return;const o=a=>{i.current(a)};return s.addEventListener(n,o,r),()=>{s.removeEventListener(n,o,r)}},[n,t,r])}function cne(n={}){const{initializeWithValue:e=!0}=n,[t,r]=Y.useState(null),i=Y.useCallback(()=>({width:(t==null?void 0:t.offsetWidth)??void 0,height:(t==null?void 0:t.offsetHeight)??void 0}),[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]),[s,o]=Y.useState(()=>e?i():{width:void 0,height:void 0}),a=Y.useCallback(()=>{o(i())},[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]);une("resize",a),I6(()=>{a()},[t==null?void 0:t.offsetHeight,t==null?void 0:t.offsetWidth]);const l=[r,s];return l.ref=l[0],l.width=s.width,l.height=s.height,l}const hne="/assets/close-964dab82.svg";function R6(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=R6(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Vx(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=R6(n))&&(r&&(r+=" "),r+=e);return r}function dne({worldId:n,engineId:e,humanPlayer:t,conversation:r}){var p;const i=wa(bs.world.gameDescriptions,{worldId:n}),s=(p=i==null?void 0:i.playerDescriptions.find(m=>m.playerId===t.id))==null?void 0:p.name,o=Y.useRef(null),a=Y.useRef(),l=d6(bs.messages.writeMessage),u=xp(e,"startTyping"),h=r.isTyping,f=async m=>{if(m.stopPropagation(),m.key!=="Enter"){if(console.log(a.current),h||a.current!==void 0)return;a.current=crypto.randomUUID();try{await u({playerId:t.id,conversationId:r.id,messageUuid:a.current})}finally{a.current=void 0}return}if(m.preventDefault(),!o.current)return;const g=o.current.innerText;if(o.current.innerText="",!g)return;let v=a.current;h&&h.playerId===t.id&&(v=h.messageUuid),v=v||crypto.randomUUID(),await l({worldId:n,playerId:t.id,conversationId:r.id,text:g,messageUuid:v})};return q.jsxs("div",{className:"leading-tight mb-6",children:[q.jsx("div",{className:"flex gap-4",children:q.jsx("span",{className:"uppercase flex-grow",children:s})}),q.jsx("div",{className:Vx("bubble","bubble-mine"),children:q.jsx("p",{className:"bg-white -mx-3 -my-1",ref:o,contentEditable:!0,style:{outline:"none"},tabIndex:0,placeholder:"Type here",onKeyDown:m=>f(m)})})]})}function ON({worldId:n,engineId:e,conversation:t,inConversationWithMe:r,humanPlayer:i,scrollViewRef:s}){var b,S,_;const o=i==null?void 0:i.id,a=wa(bs.world.gameDescriptions,{worldId:n}),l=wa(bs.messages.listMessages,{worldId:n,conversationId:t.doc.id});let u=t.kind==="active"?t.doc.isTyping:void 0;l!==void 0&&u&&l.find(R=>R.messageUuid===u.messageUuid)&&(u=void 0);const h=u&&((b=a==null?void 0:a.playerDescriptions.find(R=>R.playerId===(u==null?void 0:u.playerId)))==null?void 0:b.name),f=s.current,p=Y.useRef(!1);if(Y.useEffect(()=>{if(!f)return;const R=()=>{p.current=!!(f&&f.scrollHeight-f.scrollTop-50<=f.clientHeight)};return f.addEventListener("scroll",R),()=>f.removeEventListener("scroll",R)},[f]),Y.useEffect(()=>{var R;p.current&&((R=s.current)==null||R.scrollTo({top:s.current.scrollHeight,behavior:"smooth"}))},[l,u]),l===void 0||l.length===0&&!r)return null;const m=l.map(R=>({node:q.jsxs("div",{className:"leading-tight mb-6",children:[q.jsxs("div",{className:"flex gap-4",children:[q.jsx("span",{className:"uppercase flex-grow",children:R.authorName}),q.jsx("time",{dateTime:R._creationTime.toString(),children:new Date(R._creationTime).toLocaleString()})]}),q.jsx("div",{className:Vx("bubble",R.author===o&&"bubble-mine"),children:q.jsx("p",{className:"bg-white -mx-3 -my-1",children:R.text})})]},`text-${R._id}`),time:R._creationTime})),g=l.map(R=>R._creationTime).reduce((R,D)=>Math.max(R,D),0),v=[];if(t.kind==="active")for(const[R,D]of t.doc.participants){const j=(S=a==null?void 0:a.playerDescriptions.find(G=>G.playerId===R))==null?void 0:S.name;let H;D.status.kind==="participating"&&(H=D.status.started),H&&v.push({node:q.jsx("div",{className:"leading-tight mb-6",children:q.jsxs("p",{className:"text-brown-700 text-center",children:[j," joined the conversation."]})},`joined-${R}`),time:H})}else for(const R of t.doc.participants){const D=(_=a==null?void 0:a.playerDescriptions.find(G=>G.playerId===R))==null?void 0:_.name,j=t.doc.created;v.push({node:q.jsx("div",{className:"leading-tight mb-6",children:q.jsxs("p",{className:"text-brown-700 text-center",children:[D," joined the conversation."]})},`joined-${R}`),time:j});const H=t.doc.ended;v.push({node:q.jsx("div",{className:"leading-tight mb-6",children:q.jsxs("p",{className:"text-brown-700 text-center",children:[D," left the conversation."]})},`left-${R}`),time:Math.max(g+1,H)})}const x=[...m,...v];return x.sort((R,D)=>R.time-D.time),q.jsx("div",{className:"chats text-base sm:text-sm",children:q.jsxs("div",{className:"bg-brown-200 text-black p-2",children:[x.length>0&&x.map(R=>R.node),u&&u.playerId!==o&&q.jsxs("div",{className:"leading-tight mb-6",children:[q.jsxs("div",{className:"flex gap-4",children:[q.jsx("span",{className:"uppercase flex-grow",children:h}),q.jsx("time",{dateTime:u.since.toString(),children:new Date(u.since).toLocaleString()})]}),q.jsx("div",{className:Vx("bubble"),children:q.jsx("p",{className:"bg-white -mx-3 -my-1",children:q.jsx("i",{children:"typing..."})})})]},"typing"),i&&r&&t.kind==="active"&&q.jsx(dne,{worldId:n,engineId:e,conversation:t.doc,humanPlayer:i})]})})}function fne({worldId:n,engineId:e,game:t,playerId:r,setSelectedElement:i,scrollViewRef:s}){var O,C,k;const o=wa(bs.world.userStatus,{worldId:n}),l=[...t.world.players.values()].find(U=>U.human===o),u=l?t.world.playerConversation(l):void 0;l&&u&&(r=[...u.participants.keys()].filter(z=>z!==l.id)[0]);const h=r&&t.world.players.get(r),f=h&&t.world.playerConversation(h),p=wa(bs.world.previousConversation,r?{worldId:n,playerId:r}:"skip"),m=r&&t.playerDescriptions.get(r),g=xp(e,"startConversation"),v=xp(e,"acceptInvite"),x=xp(e,"rejectInvite"),b=xp(e,"leaveConversation");if(!r)return q.jsx("div",{className:"h-full text-xl flex text-center items-center p-4",children:"Click on an agent on the map to see chat history."});if(!h)return null;const S=l&&h.id===l.id,_=!S&&!f&&l&&!u,R=!S&&l&&u&&f&&u.id===f.id,D=l&&u&&((O=u.participants.get(l.id))==null?void 0:O.status),j=f&&((C=f.participants.get(r))==null?void 0:C.status),H=R&&(D==null?void 0:D.kind)==="invited",G=R&&((k=f.participants.get(r))==null?void 0:k.status.kind)==="invited",K=R&&(j==null?void 0:j.kind)==="walkingOver"&&(D==null?void 0:D.kind)==="walkingOver",te=R&&(j==null?void 0:j.kind)==="participating"&&(D==null?void 0:D.kind)==="participating",ne=async()=>{!l||!r||(console.log("Starting conversation"),await t0(g({playerId:l.id,invitee:r})))},ee=async()=>{!l||!u||!r||await t0(v({playerId:l.id,conversationId:u.id}))},L=async()=>{!l||!u||await t0(x({playerId:l.id,conversationId:u.id}))},w=async()=>{!l||!te||!u||await t0(b({playerId:l.id,conversationId:u.id}))},A=U=>"";return q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"flex gap-4",children:[q.jsx("div",{className:"box w-3/4 sm:w-full mr-auto",children:q.jsx("h2",{className:"bg-brown-700 p-2 font-display text-2xl sm:text-4xl tracking-wider shadow-solid text-center",children:m==null?void 0:m.name})}),q.jsx("a",{className:"button text-white shadow-solid text-2xl cursor-pointer pointer-events-auto",onClick:()=>i(void 0),children:q.jsx("h2",{className:"h-full bg-clay-700",children:q.jsx("img",{className:"w-4 h-4 sm:w-5 sm:h-5",src:hne})})})]}),_&&q.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+A(),onClick:ne,children:q.jsx("div",{className:"h-full bg-clay-700 text-center",children:q.jsx("span",{children:"Start conversation"})})}),G&&q.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto opacity-50",children:q.jsx("div",{className:"h-full bg-clay-700 text-center",children:q.jsx("span",{children:"Waiting for accept..."})})}),K&&q.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto opacity-50",children:q.jsx("div",{className:"h-full bg-clay-700 text-center",children:q.jsx("span",{children:"Walking over..."})})}),te&&q.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+A(),onClick:w,children:q.jsx("div",{className:"h-full bg-clay-700 text-center",children:q.jsx("span",{children:"Leave conversation"})})}),H&&q.jsxs(q.Fragment,{children:[q.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+A(),onClick:ee,children:q.jsx("div",{className:"h-full bg-clay-700 text-center",children:q.jsx("span",{children:"Accept"})})}),q.jsx("a",{className:"mt-6 button text-white shadow-solid text-xl cursor-pointer pointer-events-auto"+A(),onClick:L,children:q.jsx("div",{className:"h-full bg-clay-700 text-center",children:q.jsx("span",{children:"Reject"})})})]}),!f&&h.activity&&h.activity.until>Date.now()&&q.jsx("div",{className:"box flex-grow mt-6",children:q.jsx("h2",{className:"bg-brown-700 text-base sm:text-lg text-center",children:h.activity.description})}),q.jsx("div",{className:"desc my-6",children:q.jsxs("p",{className:"leading-tight -m-4 bg-brown-700 text-base sm:text-sm",children:[!S&&(m==null?void 0:m.description),S&&q.jsx("i",{children:"This is you!"}),!S&&te&&q.jsxs(q.Fragment,{children:[q.jsx("br",{}),q.jsx("br",{}),"(",q.jsx("i",{children:"Conversing with you!"}),")"]})]})}),!S&&f&&(j==null?void 0:j.kind)==="participating"&&q.jsx(ON,{worldId:n,engineId:e,inConversationWithMe:te??!1,conversation:{kind:"active",doc:f},humanPlayer:l,scrollViewRef:s}),!f&&p&&q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"box flex-grow",children:q.jsx("h2",{className:"bg-brown-700 text-lg text-center",children:"Previous conversation"})}),q.jsx(ON,{worldId:n,engineId:e,inConversationWithMe:!1,conversation:{kind:"archived",doc:p},humanPlayer:l,scrollViewRef:s})]})]})}const pne=12e4,NN=60*1e3,mne=60*1e3,gne=1e3,P6=1.3,yne=4,vne=15*1e3,wne=.75,Y2=8,xne=15e3,_ne=6e4,bne=.8,Sne=6e4,BN=6e4,Ene=10*6e4,Ane=8,Tne=2e3,Cne=5*60*1e3,LN=16;function Ine(){const n=wa(bs.world.defaultWorldStatus),e=n==null?void 0:n.worldId,t=d6(bs.world.heartbeatWorld);Y.useEffect(()=>{const r=()=>{n&&(Date.now()-NN/2<n.lastViewed||t({worldId:n.worldId}))};r();const i=setInterval(r,NN);return()=>clearInterval(i)},[e,t])}function Rne(n){const e=Y.useRef(new Pne),t=Y.useRef(),[r,i]=Y.useState(void 0);n&&e.current.receive(n);const s=o=>{const a=Date.now();i(e.current.historicalServerTime(a)),t.current=requestAnimationFrame(s)};return Y.useEffect(()=>(t.current=requestAnimationFrame(s),()=>cancelAnimationFrame(t.current)),[]),{historicalTime:r,timeManager:e.current}}class Pne{constructor(){this.intervals=[],this.totalDuration=0}receive(e){if(this.latestEngineStatus=e,!e.currentTime||!e.lastStepTs)return;const t=this.intervals[this.intervals.length-1];if(t){if(t.endTs===e.currentTime)return;if(t.endTs>e.currentTime)throw new Error("Received out-of-order engine status")}const r={startTs:e.lastStepTs,endTs:e.currentTime};this.intervals.push(r),this.totalDuration+=r.endTs-r.startTs}historicalServerTime(e){if(this.intervals.length==0)return;if(e===this.prevClientTs)return this.prevServerTs;const t=this.prevClientTs??e,r=this.prevServerTs??this.intervals[0].startTs,i=this.intervals[this.intervals.length-1].endTs,s=i-r;let o=1;s<One?o=.8:s>Mne&&(o=1.2);let a=Math.max(r+(e-t)*o,i-kne),l=null;for(let h=0;h<this.intervals.length;h++){const f=this.intervals[h];if(!(f.endTs<a)){if(a>=f.startTs){l=h;break}a<f.startTs&&(a=f.startTs,l=h)}}l===null&&(a=this.intervals.at(-1).endTs,l=this.intervals.length-1);const u=Math.max(l-1,0);if(u>0){for(const h of this.intervals.slice(0,u))this.totalDuration-=h.endTs-h.startTs;this.intervals=this.intervals.slice(u)}return this.prevClientTs=e,this.prevServerTs=a,a}bufferHealth(){if(!this.intervals.length)return 0;const e=this.prevServerTs??this.intervals[0].startTs;return this.intervals[this.intervals.length-1].endTs-e}clockSkew(){return!this.prevClientTs||!this.prevServerTs?0:this.prevClientTs-this.prevServerTs}}const kne=1500,Mne=1250,One=250,Nne=!0,wi="u-",Bne="uplot",Lne=wi+"hz",Dne=wi+"vt",Fne=wi+"title",Une=wi+"wrap",zne=wi+"under",$ne=wi+"over",jne=wi+"axis",hd=wi+"off",Hne=wi+"select",Wne=wi+"cursor-x",Gne=wi+"cursor-y",Vne=wi+"cursor-pt",qne=wi+"legend",Xne=wi+"live",Kne=wi+"inline",Qne=wi+"series",Yne=wi+"marker",DN=wi+"label",Zne=wi+"value",n0="width",r0="height",Bg="top",FN="bottom",Wf="left",tA="right",OR="#000",UN=OR+"0",zN="mousemove",$N="mousedown",nA="mouseup",jN="mouseenter",HN="mouseleave",WN="dblclick",Jne="resize",ere="scroll",GN="change",qx="dppxchange",NR="--",$m=typeof window<"u",Z2=$m?document:null,jp=$m?window:null,tre=$m?navigator:null;let An,V1;function J2(){let n=devicePixelRatio;An!=n&&(An=n,V1&&tC(GN,V1,J2),V1=matchMedia(`(min-resolution: ${An-.001}dppx) and (max-resolution: ${An+.001}dppx)`),Fd(GN,V1,J2),jp.dispatchEvent(new CustomEvent(qx)))}function vo(n,e){if(e!=null){let t=n.classList;!t.contains(e)&&t.add(e)}}function eC(n,e){let t=n.classList;t.contains(e)&&t.remove(e)}function or(n,e,t){n.style[e]=t+"px"}function Ba(n,e,t,r){let i=Z2.createElement(n);return e!=null&&vo(i,e),t!=null&&t.insertBefore(i,r),i}function Ko(n,e){return Ba("div",n,e)}const VN=new WeakMap;function Tl(n,e,t,r,i){let s="translate("+e+"px,"+t+"px)",o=VN.get(n);s!=o&&(n.style.transform=s,VN.set(n,s),e<0||t<0||e>r||t>i?vo(n,hd):eC(n,hd))}const qN=new WeakMap;function XN(n,e,t){let r=e+t,i=qN.get(n);r!=i&&(qN.set(n,r),n.style.background=e,n.style.borderColor=t)}const KN=new WeakMap;function QN(n,e,t,r){let i=e+""+t,s=KN.get(n);i!=s&&(KN.set(n,i),n.style.height=t+"px",n.style.width=e+"px",n.style.marginLeft=r?-e/2+"px":0,n.style.marginTop=r?-t/2+"px":0)}const BR={passive:!0},nre={...BR,capture:!0};function Fd(n,e,t,r){e.addEventListener(n,t,r?nre:BR)}function tC(n,e,t,r){e.removeEventListener(n,t,BR)}$m&&J2();function $a(n,e,t,r){let i;t=t||0,r=r||e.length-1;let s=r<=2147483647;for(;r-t>1;)i=s?t+r>>1:Mo((t+r)/2),e[i]<n?t=i:r=i;return n-e[t]<=e[r]-n?t:r}function _m(n,e,t,r){for(let i=r==1?e:t;i>=e&&i<=t;i+=r)if(n[i]!=null)return i;return-1}function rre(n,e,t,r){let i=Zt,s=-Zt;if(r==1)i=n[e],s=n[t];else if(r==-1)i=n[t],s=n[e];else for(let o=e;o<=t;o++){let a=n[o];a!=null&&(a<i&&(i=a),a>s&&(s=a))}return[i,s]}function ire(n,e,t){let r=Zt,i=-Zt;for(let s=e;s<=t;s++){let o=n[s];o!=null&&o>0&&(o<r&&(r=o),o>i&&(i=o))}return[r,i]}function hb(n,e,t,r){let i=JN(n),s=JN(e);n==e&&(i==-1?(n*=t,e/=t):(n/=t,e*=t));let o=t==10?Uu:k6,a=i==1?Mo:na,l=s==1?na:Mo,u=a(o(gi(n))),h=l(o(gi(e))),f=bm(t,u),p=bm(t,h);return t==10&&(u<0&&(f=Wn(f,-u)),h<0&&(p=Wn(p,-h))),r||t==2?(n=f*i,e=p*s):(n=N6(n,f),e=db(e,p)),[n,e]}function LR(n,e,t,r){let i=hb(n,e,t,r);return n==0&&(i[0]=0),e==0&&(i[1]=0),i}const DR=.1,YN={mode:3,pad:DR},I0={pad:0,soft:null,mode:0},sre={min:I0,max:I0};function Xx(n,e,t,r){return fb(t)?ZN(n,e,t):(I0.pad=t,I0.soft=r?0:null,I0.mode=r?3:0,ZN(n,e,sre))}function wn(n,e){return n??e}function ore(n,e,t){for(e=wn(e,0),t=wn(t,n.length-1);e<=t;){if(n[e]!=null)return!0;e++}return!1}function ZN(n,e,t){let r=t.min,i=t.max,s=wn(r.pad,0),o=wn(i.pad,0),a=wn(r.hard,-Zt),l=wn(i.hard,Zt),u=wn(r.soft,Zt),h=wn(i.soft,-Zt),f=wn(r.mode,0),p=wn(i.mode,0),m=e-n,g=Uu(m),v=gs(gi(n),gi(e)),x=Uu(v),b=gi(x-g);(m<1e-24||b>10)&&(m=0,(n==0||e==0)&&(m=1e-24,f==2&&u!=Zt&&(s=0),p==2&&h!=-Zt&&(o=0)));let S=m||v||1e3,_=Uu(S),R=bm(10,Mo(_)),D=S*(m==0?n==0?.1:1:s),j=Wn(N6(n-D,R/10),24),H=n>=u&&(f==1||f==3&&j<=u||f==2&&j>=u)?u:Zt,G=gs(a,j<H&&n>=H?H:ua(H,j)),K=S*(m==0?e==0?.1:1:o),te=Wn(db(e+K,R/10),24),ne=e<=h&&(p==1||p==3&&te>=h||p==2&&te<=h)?h:-Zt,ee=ua(l,te>ne&&e<=ne?ne:gs(ne,te));return G==ee&&G==0&&(ee=100),[G,ee]}const are=new Intl.NumberFormat($m?tre.language:"en-US"),FR=n=>are.format(n),Do=Math,Nw=Do.PI,gi=Do.abs,Mo=Do.floor,pi=Do.round,na=Do.ceil,ua=Do.min,gs=Do.max,bm=Do.pow,JN=Do.sign,Uu=Do.log10,k6=Do.log2,lre=(n,e=1)=>Do.sinh(n)*e,rA=(n,e=1)=>Do.asinh(n/e),Zt=1/0;function eB(n){return(Uu((n^n>>31)-(n>>31))|0)+1}function nC(n,e,t){return ua(gs(n,e),t)}function Qt(n){return typeof n=="function"?n:()=>n}const ure=()=>{},M6=n=>n,O6=(n,e)=>e,cre=n=>null,tB=n=>!0,nB=(n,e)=>n==e,hre=/\.\d*?(?=9{6,}|0{6,})/gm,Yd=n=>{if(L6(n)||Ah.has(n))return n;const e=`${n}`,t=e.match(hre);if(t==null)return n;let r=t[0].length-1;if(e.indexOf("e-")!=-1){let[i,s]=e.split("e");return+`${Yd(i)}e${s}`}return Wn(n,r)};function sd(n,e){return Yd(Wn(Yd(n/e))*e)}function db(n,e){return Yd(na(Yd(n/e))*e)}function N6(n,e){return Yd(Mo(Yd(n/e))*e)}function Wn(n,e=0){if(L6(n))return n;let t=10**e,r=n*t*(1+Number.EPSILON);return pi(r)/t}const Ah=new Map;function B6(n){return((""+n).split(".")[1]||"").length}function hy(n,e,t,r){let i=[],s=r.map(B6);for(let o=e;o<t;o++){let a=gi(o),l=Wn(bm(n,o),a);for(let u=0;u<r.length;u++){let h=n==10?+`${r[u]}e${o}`:r[u]*l,f=(o>=0?0:a)+(o>=s[u]?0:s[u]),p=n==10?h:Wn(h,f);i.push(p),Ah.set(p,f)}}return i}const R0={},UR=[],Sm=[null,null],Lc=Array.isArray,L6=Number.isInteger,dre=n=>n===void 0;function rB(n){return typeof n=="string"}function fb(n){let e=!1;if(n!=null){let t=n.constructor;e=t==null||t==Object}return e}function fre(n){return n!=null&&typeof n=="object"}const pre=Object.getPrototypeOf(Uint8Array),D6="__proto__";function Em(n,e=fb){let t;if(Lc(n)){let r=n.find(i=>i!=null);if(Lc(r)||e(r)){t=Array(n.length);for(let i=0;i<n.length;i++)t[i]=Em(n[i],e)}else t=n.slice()}else if(n instanceof pre)t=n.slice();else if(e(n)){t={};for(let r in n)r!=D6&&(t[r]=Em(n[r],e))}else t=n;return t}function ti(n){let e=arguments;for(let t=1;t<e.length;t++){let r=e[t];for(let i in r)i!=D6&&(fb(n[i])?ti(n[i],Em(r[i])):n[i]=Em(r[i]))}return n}const mre=0,gre=1,yre=2;function vre(n,e,t){for(let r=0,i,s=-1;r<e.length;r++){let o=e[r];if(o>s){for(i=o-1;i>=0&&n[i]==null;)n[i--]=null;for(i=o+1;i<t&&n[i]==null;)n[s=i++]=null}}}function wre(n,e){if(bre(n)){let o=n[0].slice();for(let a=1;a<n.length;a++)o.push(...n[a].slice(1));return Sre(o[0])||(o=_re(o)),o}let t=new Set;for(let o=0;o<n.length;o++){let l=n[o][0],u=l.length;for(let h=0;h<u;h++)t.add(l[h])}let r=[Array.from(t).sort((o,a)=>o-a)],i=r[0].length,s=new Map;for(let o=0;o<i;o++)s.set(r[0][o],o);for(let o=0;o<n.length;o++){let a=n[o],l=a[0];for(let u=1;u<a.length;u++){let h=a[u],f=Array(i).fill(void 0),p=e?e[o][u]:gre,m=[];for(let g=0;g<h.length;g++){let v=h[g],x=s.get(l[g]);v===null?p!=mre&&(f[x]=v,p==yre&&m.push(x)):f[x]=v}vre(f,m,i),r.push(f)}}return r}const xre=typeof queueMicrotask>"u"?n=>Promise.resolve().then(n):queueMicrotask;function _re(n){let e=n[0],t=e.length,r=Array(t);for(let s=0;s<r.length;s++)r[s]=s;r.sort((s,o)=>e[s]-e[o]);let i=[];for(let s=0;s<n.length;s++){let o=n[s],a=Array(t);for(let l=0;l<t;l++)a[l]=o[r[l]];i.push(a)}return i}function bre(n){let e=n[0][0],t=e.length;for(let r=1;r<n.length;r++){let i=n[r][0];if(i.length!=t)return!1;if(i!=e){for(let s=0;s<t;s++)if(i[s]!=e[s])return!1}}return!0}function Sre(n,e=100){const t=n.length;if(t<=1)return!0;let r=0,i=t-1;for(;r<=i&&n[r]==null;)r++;for(;i>=r&&n[i]==null;)i--;if(i<=r)return!0;const s=gs(1,Mo((i-r+1)/e));for(let o=n[r],a=r+s;a<=i;a+=s){const l=n[a];if(l!=null){if(l<=o)return!1;o=l}}return!0}const F6=["January","February","March","April","May","June","July","August","September","October","November","December"],U6=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function z6(n){return n.slice(0,3)}const Ere=U6.map(z6),Are=F6.map(z6),Tre={MMMM:F6,MMM:Are,WWWW:U6,WWW:Ere};function Lg(n){return(n<10?"0":"")+n}function Cre(n){return(n<10?"00":n<100?"0":"")+n}const Ire={YYYY:n=>n.getFullYear(),YY:n=>(n.getFullYear()+"").slice(2),MMMM:(n,e)=>e.MMMM[n.getMonth()],MMM:(n,e)=>e.MMM[n.getMonth()],MM:n=>Lg(n.getMonth()+1),M:n=>n.getMonth()+1,DD:n=>Lg(n.getDate()),D:n=>n.getDate(),WWWW:(n,e)=>e.WWWW[n.getDay()],WWW:(n,e)=>e.WWW[n.getDay()],HH:n=>Lg(n.getHours()),H:n=>n.getHours(),h:n=>{let e=n.getHours();return e==0?12:e>12?e-12:e},AA:n=>n.getHours()>=12?"PM":"AM",aa:n=>n.getHours()>=12?"pm":"am",a:n=>n.getHours()>=12?"p":"a",mm:n=>Lg(n.getMinutes()),m:n=>n.getMinutes(),ss:n=>Lg(n.getSeconds()),s:n=>n.getSeconds(),fff:n=>Cre(n.getMilliseconds())};function zR(n,e){e=e||Tre;let t=[],r=/\{([a-z]+)\}|[^{]+/gi,i;for(;i=r.exec(n);)t.push(i[0][0]=="{"?Ire[i[1]]:i[0]);return s=>{let o="";for(let a=0;a<t.length;a++)o+=typeof t[a]=="string"?t[a]:t[a](s,e);return o}}const Rre=new Intl.DateTimeFormat().resolvedOptions().timeZone;function Pre(n,e){let t;return e=="UTC"||e=="Etc/UTC"?t=new Date(+n+n.getTimezoneOffset()*6e4):e==Rre?t=n:(t=new Date(n.toLocaleString("en-US",{timeZone:e})),t.setMilliseconds(n.getMilliseconds())),t}const $6=n=>n%1==0,Kx=[1,2,2.5,5],kre=hy(10,-32,0,Kx),j6=hy(10,0,32,Kx),Mre=j6.filter($6),od=kre.concat(j6),$R=`
`,H6="{YYYY}",iB=$R+H6,W6="{M}/{D}",i0=$R+W6,q1=i0+"/{YY}",G6="{aa}",Ore="{h}:{mm}",ep=Ore+G6,sB=$R+ep,oB=":{ss}",kn=null;function V6(n){let e=n*1e3,t=e*60,r=t*60,i=r*24,s=i*30,o=i*365,l=(n==1?hy(10,0,3,Kx).filter($6):hy(10,-3,0,Kx)).concat([e,e*5,e*10,e*15,e*30,t,t*5,t*10,t*15,t*30,r,r*2,r*3,r*4,r*6,r*8,r*12,i,i*2,i*3,i*4,i*5,i*6,i*7,i*8,i*9,i*10,i*15,s,s*2,s*3,s*4,s*6,o,o*2,o*5,o*10,o*25,o*50,o*100]);const u=[[o,H6,kn,kn,kn,kn,kn,kn,1],[i*28,"{MMM}",iB,kn,kn,kn,kn,kn,1],[i,W6,iB,kn,kn,kn,kn,kn,1],[r,"{h}"+G6,q1,kn,i0,kn,kn,kn,1],[t,ep,q1,kn,i0,kn,kn,kn,1],[e,oB,q1+" "+ep,kn,i0+" "+ep,kn,sB,kn,1],[n,oB+".{fff}",q1+" "+ep,kn,i0+" "+ep,kn,sB,kn,1]];function h(f){return(p,m,g,v,x,b)=>{let S=[],_=x>=o,R=x>=s&&x<o,D=f(g),j=Wn(D*n,3),H=iA(D.getFullYear(),_?0:D.getMonth(),R||_?1:D.getDate()),G=Wn(H*n,3);if(R||_){let K=R?x/s:0,te=_?x/o:0,ne=j==G?j:Wn(iA(H.getFullYear()+te,H.getMonth()+K,1)*n,3),ee=new Date(pi(ne/n)),L=ee.getFullYear(),w=ee.getMonth();for(let A=0;ne<=v;A++){let O=iA(L+te*A,w+K*A,1),C=O-f(Wn(O*n,3));ne=Wn((+O+C)*n,3),ne<=v&&S.push(ne)}}else{let K=x>=i?i:x,te=Mo(g)-Mo(j),ne=G+te+db(j-G,K);S.push(ne);let ee=f(ne),L=ee.getHours()+ee.getMinutes()/t+ee.getSeconds()/r,w=x/r,A=p.axes[m]._space,O=b/A;for(;ne=Wn(ne+x,n==1?0:3),!(ne>v);)if(w>1){let C=Mo(Wn(L+w,6))%24,z=f(ne).getHours()-C;z>1&&(z=-1),ne-=z*r,L=(L+w)%24;let N=S[S.length-1];Wn((ne-N)/x,3)*O>=.7&&S.push(ne)}else S.push(ne)}return S}}return[l,u,h]}const[Nre,Bre,Lre]=V6(1),[Dre,Fre,Ure]=V6(.001);hy(2,-53,53,[1]);function aB(n,e){return n.map(t=>t.map((r,i)=>i==0||i==8||r==null?r:e(i==1||t[8]==0?r:t[1]+r)))}function lB(n,e){return(t,r,i,s,o)=>{let a=e.find(g=>o>=g[0])||e[e.length-1],l,u,h,f,p,m;return r.map(g=>{let v=n(g),x=v.getFullYear(),b=v.getMonth(),S=v.getDate(),_=v.getHours(),R=v.getMinutes(),D=v.getSeconds(),j=x!=l&&a[2]||b!=u&&a[3]||S!=h&&a[4]||_!=f&&a[5]||R!=p&&a[6]||D!=m&&a[7]||a[1];return l=x,u=b,h=S,f=_,p=R,m=D,j(v)})}}function zre(n,e){let t=zR(e);return(r,i,s,o,a)=>i.map(l=>t(n(l)))}function iA(n,e,t){return new Date(n,e,t)}function uB(n,e){return e(n)}const $re="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function cB(n,e){return(t,r,i,s)=>s==null?NR:e(n(r))}function jre(n,e){let t=n.series[e];return t.width?t.stroke(n,e):t.points.width?t.points.stroke(n,e):null}function Hre(n,e){return n.series[e].fill(n,e)}const Wre={show:!0,live:!0,isolate:!1,mount:ure,markers:{show:!0,width:2,stroke:jre,fill:Hre,dash:"solid"},idx:null,idxs:null,values:[]};function Gre(n,e){let t=n.cursor.points,r=Ko(),i=t.size(n,e);or(r,n0,i),or(r,r0,i);let s=i/-2;or(r,"marginLeft",s),or(r,"marginTop",s);let o=t.width(n,e,i);return o&&or(r,"borderWidth",o),r}function Vre(n,e){let t=n.series[e].points;return t._fill||t._stroke}function qre(n,e){let t=n.series[e].points;return t._stroke||t._fill}function Xre(n,e){return n.series[e].points.size}const sA=[0,0];function Kre(n,e,t){return sA[0]=e,sA[1]=t,sA}function X1(n,e,t,r=!0){return i=>{i.button==0&&(!r||i.target==e)&&t(i)}}function oA(n,e,t,r=!0){return i=>{(!r||i.target==e)&&t(i)}}const Qre={show:!0,x:!0,y:!0,lock:!1,move:Kre,points:{one:!1,show:Gre,size:Xre,width:0,stroke:qre,fill:Vre},bind:{mousedown:X1,mouseup:X1,click:X1,dblclick:X1,mousemove:oA,mouseleave:oA,mouseenter:oA},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(n,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(n,e,t,r,i)=>r-i,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},q6={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},jR=ti({},q6,{filter:O6}),X6=ti({},jR,{size:10}),K6=ti({},q6,{show:!1}),HR='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Q6="bold "+HR,Y6=1.5,hB={show:!0,scale:"x",stroke:OR,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Q6,side:2,grid:jR,ticks:X6,border:K6,font:HR,lineGap:Y6,rotate:0},Yre="Value",Zre="Time",dB={show:!0,scale:"x",auto:!1,sorted:1,min:Zt,max:-Zt,idxs:[]};function Jre(n,e,t,r,i){return e.map(s=>s==null?"":FR(s))}function eie(n,e,t,r,i,s,o){let a=[],l=Ah.get(i)||0;t=o?t:Wn(db(t,i),l);for(let u=t;u<=r;u=Wn(u+i,l))a.push(Object.is(u,-0)?0:u);return a}function rC(n,e,t,r,i,s,o){const a=[],l=n.scales[n.axes[e].scale].log,u=l==10?Uu:k6,h=Mo(u(t));i=bm(l,h),l==10&&(i=od[$a(i,od)]);let f=t,p=i*l;l==10&&(p=od[$a(p,od)]);do a.push(f),f=f+i,l==10&&!Ah.has(f)&&(f=Wn(f,Ah.get(i))),f>=p&&(i=f,p=i*l,l==10&&(p=od[$a(p,od)]));while(f<=r);return a}function tie(n,e,t,r,i,s,o){let l=n.scales[n.axes[e].scale].asinh,u=r>l?rC(n,e,gs(l,t),r,i):[l],h=r>=0&&t<=0?[0]:[];return(t<-l?rC(n,e,gs(l,-r),-t,i):[l]).reverse().map(p=>-p).concat(h,u)}const Z6=/./,nie=/[12357]/,rie=/[125]/,fB=/1/,iC=(n,e,t,r)=>n.map((i,s)=>e==4&&i==0||s%r==0&&t.test(i.toExponential()[i<0?1:0])?i:null);function iie(n,e,t,r,i){let s=n.axes[t],o=s.scale,a=n.scales[o],l=n.valToPos,u=s._space,h=l(10,o),f=l(9,o)-h>=u?Z6:l(7,o)-h>=u?nie:l(5,o)-h>=u?rie:fB;if(f==fB){let p=gi(l(1,o)-h);if(p<u)return iC(e.slice().reverse(),a.distr,f,na(u/p)).reverse()}return iC(e,a.distr,f,1)}function sie(n,e,t,r,i){let s=n.axes[t],o=s.scale,a=s._space,l=n.valToPos,u=gi(l(1,o)-l(2,o));return u<a?iC(e.slice().reverse(),3,Z6,na(a/u)).reverse():e}function oie(n,e,t,r){return r==null?NR:e==null?"":FR(e)}const pB={show:!0,scale:"y",stroke:OR,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Q6,side:3,grid:jR,ticks:X6,border:K6,font:HR,lineGap:Y6,rotate:0};function aie(n,e){let t=3+(n||1)*2;return Wn(t*e,3)}function lie(n,e){let{scale:t,idxs:r}=n.series[0],i=n._data[0],s=n.valToPos(i[r[0]],t,!0),o=n.valToPos(i[r[1]],t,!0),a=gi(o-s),l=n.series[e],u=a/(l.points.space*An);return r[1]-r[0]<=u}const mB={scale:null,auto:!0,sorted:0,min:Zt,max:-Zt},J6=(n,e,t,r,i)=>i,gB={show:!0,auto:!0,sorted:0,gaps:J6,alpha:1,facets:[ti({},mB,{scale:"x"}),ti({},mB,{scale:"y"})]},yB={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:J6,alpha:1,points:{show:lie,filter:null},values:null,min:Zt,max:-Zt,idxs:[],path:null,clip:null};function uie(n,e,t,r,i){return t/10}const e5={time:Nne,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},cie=ti({},e5,{time:!1,ori:1}),vB={};function t5(n,e){let t=vB[n];return t||(t={key:n,plots:[],sub(r){t.plots.push(r)},unsub(r){t.plots=t.plots.filter(i=>i!=r)},pub(r,i,s,o,a,l,u){for(let h=0;h<t.plots.length;h++)t.plots[h]!=i&&t.plots[h].pub(r,i,s,o,a,l,u)}},n!=null&&(vB[n]=t)),t}const Am=1,sC=2;function lf(n,e,t){const r=n.mode,i=n.series[e],s=r==2?n._data[e]:n._data,o=n.scales,a=n.bbox;let l=s[0],u=r==2?s[1]:s[e],h=r==2?o[i.facets[0].scale]:o[n.series[0].scale],f=r==2?o[i.facets[1].scale]:o[i.scale],p=a.left,m=a.top,g=a.width,v=a.height,x=n.valToPosH,b=n.valToPosV;return h.ori==0?t(i,l,u,h,f,x,b,p,m,g,v,mb,jm,yb,r5,s5):t(i,l,u,h,f,b,x,m,p,v,g,gb,Hm,VR,i5,o5)}function WR(n,e){let t=0,r=0,i=wn(n.bands,UR);for(let s=0;s<i.length;s++){let o=i[s];o.series[0]==e?t=o.dir:o.series[1]==e&&(o.dir==1?r|=1:r|=2)}return[t,r==1?-1:r==2?1:r==3?2:0]}function hie(n,e,t,r,i){let s=n.mode,o=n.series[e],a=s==2?o.facets[1].scale:o.scale,l=n.scales[a];return i==-1?l.min:i==1?l.max:l.distr==3?l.dir==1?l.min:l.max:0}function zu(n,e,t,r,i,s){return lf(n,e,(o,a,l,u,h,f,p,m,g,v,x)=>{let b=o.pxRound;const S=u.dir*(u.ori==0?1:-1),_=u.ori==0?jm:Hm;let R,D;S==1?(R=t,D=r):(R=r,D=t);let j=b(f(a[R],u,v,m)),H=b(p(l[R],h,x,g)),G=b(f(a[D],u,v,m)),K=b(p(s==1?h.max:h.min,h,x,g)),te=new Path2D(i);return _(te,G,K),_(te,j,K),_(te,j,H),te})}function pb(n,e,t,r,i,s){let o=null;if(n.length>0){o=new Path2D;const a=e==0?yb:VR;let l=t;for(let f=0;f<n.length;f++){let p=n[f];if(p[1]>p[0]){let m=p[0]-l;m>0&&a(o,l,r,m,r+s),l=p[1]}}let u=t+i-l,h=10;u>0&&a(o,l,r-h/2,u,r+s+h)}return o}function die(n,e,t){let r=n[n.length-1];r&&r[0]==e?r[1]=t:n.push([e,t])}function GR(n,e,t,r,i,s,o){let a=[],l=n.length;for(let u=i==1?t:r;u>=t&&u<=r;u+=i)if(e[u]===null){let f=u,p=u;if(i==1)for(;++u<=r&&e[u]===null;)p=u;else for(;--u>=t&&e[u]===null;)p=u;let m=s(n[f]),g=p==f?m:s(n[p]),v=f-i;m=o<=0&&v>=0&&v<l?s(n[v]):m;let b=p+i;g=o>=0&&b>=0&&b<l?s(n[b]):g,g>=m&&a.push([m,g])}return a}function wB(n){return n==0?M6:n==1?pi:e=>sd(e,n)}function n5(n){let e=n==0?mb:gb,t=n==0?(i,s,o,a,l,u)=>{i.arcTo(s,o,a,l,u)}:(i,s,o,a,l,u)=>{i.arcTo(o,s,l,a,u)},r=n==0?(i,s,o,a,l)=>{i.rect(s,o,a,l)}:(i,s,o,a,l)=>{i.rect(o,s,l,a)};return(i,s,o,a,l,u=0,h=0)=>{u==0&&h==0?r(i,s,o,a,l):(u=ua(u,a/2,l/2),h=ua(h,a/2,l/2),e(i,s+u,o),t(i,s+a,o,s+a,o+l,u),t(i,s+a,o+l,s,o+l,h),t(i,s,o+l,s,o,h),t(i,s,o,s+a,o,u),i.closePath())}}const mb=(n,e,t)=>{n.moveTo(e,t)},gb=(n,e,t)=>{n.moveTo(t,e)},jm=(n,e,t)=>{n.lineTo(e,t)},Hm=(n,e,t)=>{n.lineTo(t,e)},yb=n5(0),VR=n5(1),r5=(n,e,t,r,i,s)=>{n.arc(e,t,r,i,s)},i5=(n,e,t,r,i,s)=>{n.arc(t,e,r,i,s)},s5=(n,e,t,r,i,s,o)=>{n.bezierCurveTo(e,t,r,i,s,o)},o5=(n,e,t,r,i,s,o)=>{n.bezierCurveTo(t,e,i,r,o,s)};function a5(n){return(e,t,r,i,s)=>lf(e,t,(o,a,l,u,h,f,p,m,g,v,x)=>{let{pxRound:b,points:S}=o,_,R;u.ori==0?(_=mb,R=r5):(_=gb,R=i5);const D=Wn(S.width*An,3);let j=(S.size-S.width)/2*An,H=Wn(j*2,3),G=new Path2D,K=new Path2D,{left:te,top:ne,width:ee,height:L}=e.bbox;yb(K,te-H,ne-H,ee+H*2,L+H*2);const w=A=>{if(l[A]!=null){let O=b(f(a[A],u,v,m)),C=b(p(l[A],h,x,g));_(G,O+j,C),R(G,O,C,j,0,Nw*2)}};if(s)s.forEach(w);else for(let A=r;A<=i;A++)w(A);return{stroke:D>0?G:null,fill:G,clip:K,flags:Am|sC}})}function l5(n){return(e,t,r,i,s,o)=>{r!=i&&(s!=r&&o!=r&&n(e,t,r),s!=i&&o!=i&&n(e,t,i),n(e,t,o))}}const fie=l5(jm),pie=l5(Hm);function u5(n){const e=wn(n==null?void 0:n.alignGaps,0);return(t,r,i,s)=>lf(t,r,(o,a,l,u,h,f,p,m,g,v,x)=>{let b=o.pxRound,S=T=>b(f(T,u,v,m)),_=T=>b(p(T,h,x,g)),R,D;u.ori==0?(R=jm,D=fie):(R=Hm,D=pie);const j=u.dir*(u.ori==0?1:-1),H={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Am},G=H.stroke;let K=Zt,te=-Zt,ne,ee,L,w=S(a[j==1?i:s]),A=_m(l,i,s,1*j),O=_m(l,i,s,-1*j),C=S(a[A]),k=S(a[O]),U=!1;for(let T=j==1?i:s;T>=i&&T<=s;T+=j){let V=S(a[T]),oe=l[T];V==w?oe!=null?(ee=_(oe),K==Zt&&(R(G,V,ee),ne=ee),K=ua(ee,K),te=gs(ee,te)):oe===null&&(U=!0):(K!=Zt&&(D(G,w,K,te,ne,ee),L=w),oe!=null?(ee=_(oe),R(G,V,ee),K=te=ne=ee):(K=Zt,te=-Zt,oe===null&&(U=!0)),w=V)}K!=Zt&&K!=te&&L!=w&&D(G,w,K,te,ne,ee);let[z,N]=WR(t,r);if(o.fill!=null||z!=0){let T=H.fill=new Path2D(G),V=o.fillTo(t,r,o.min,o.max,z),oe=_(V);R(T,k,oe),R(T,C,oe)}if(!o.spanGaps){let T=[];U&&T.push(...GR(a,l,i,s,j,S,e)),H.gaps=T=o.gaps(t,r,i,s,T),H.clip=pb(T,u.ori,m,g,v,x)}return N!=0&&(H.band=N==2?[zu(t,r,i,s,G,-1),zu(t,r,i,s,G,1)]:zu(t,r,i,s,G,N)),H})}function mie(n){const e=wn(n.align,1),t=wn(n.ascDesc,!1),r=wn(n.alignGaps,0),i=wn(n.extend,!1);return(s,o,a,l)=>lf(s,o,(u,h,f,p,m,g,v,x,b,S,_)=>{let R=u.pxRound,{left:D,width:j}=s.bbox,H=z=>R(g(z,p,S,x)),G=z=>R(v(z,m,_,b)),K=p.ori==0?jm:Hm;const te={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Am},ne=te.stroke,ee=p.dir*(p.ori==0?1:-1);a=_m(f,a,l,1),l=_m(f,a,l,-1);let L=G(f[ee==1?a:l]),w=H(h[ee==1?a:l]),A=w,O=w;i&&e==-1&&(O=D,K(ne,O,L)),K(ne,w,L);for(let z=ee==1?a:l;z>=a&&z<=l;z+=ee){let N=f[z];if(N==null)continue;let T=H(h[z]),V=G(N);e==1?K(ne,T,L):K(ne,A,V),K(ne,T,V),L=V,A=T}let C=A;i&&e==1&&(C=D+j,K(ne,C,L));let[k,U]=WR(s,o);if(u.fill!=null||k!=0){let z=te.fill=new Path2D(ne),N=u.fillTo(s,o,u.min,u.max,k),T=G(N);K(z,C,T),K(z,O,T)}if(!u.spanGaps){let z=[];z.push(...GR(h,f,a,l,ee,H,r));let N=u.width*An/2,T=t||e==1?N:-N,V=t||e==-1?-N:N;z.forEach(oe=>{oe[0]+=T,oe[1]+=V}),te.gaps=z=u.gaps(s,o,a,l,z),te.clip=pb(z,p.ori,x,b,S,_)}return U!=0&&(te.band=U==2?[zu(s,o,a,l,ne,-1),zu(s,o,a,l,ne,1)]:zu(s,o,a,l,ne,U)),te})}function xB(n,e,t,r,i,s,o=Zt){if(n.length>1){let a=null;for(let l=0,u=1/0;l<n.length;l++)if(e[l]!==void 0){if(a!=null){let h=gi(n[l]-n[a]);h<u&&(u=h,o=gi(t(n[l],r,i,s)-t(n[a],r,i,s)))}a=l}}return o}function gie(n){n=n||R0;const e=wn(n.size,[.6,Zt,1]),t=n.align||0,r=n.gap||0;let i=n.radius;i=i==null?[0,0]:typeof i=="number"?[i,0]:i;const s=Qt(i),o=1-e[0],a=wn(e[1],Zt),l=wn(e[2],1),u=wn(n.disp,R0),h=wn(n.each,m=>{}),{fill:f,stroke:p}=u;return(m,g,v,x)=>lf(m,g,(b,S,_,R,D,j,H,G,K,te,ne)=>{let ee=b.pxRound,L=t,w=r*An,A=a*An,O=l*An,C,k;R.ori==0?[C,k]=s(m,g):[k,C]=s(m,g);const U=R.dir*(R.ori==0?1:-1);let z=R.ori==0?yb:VR,N=R.ori==0?h:(nt,Ot,Xt,br,en,$,P)=>{h(nt,Ot,Xt,en,br,P,$)},T=wn(m.bands,UR).find(nt=>nt.series[0]==g),V=T!=null?T.dir:0,oe=b.fillTo(m,g,b.min,b.max,V),ge=ee(H(oe,D,ne,K)),we,Re,Ne,Ue=te,Ye=ee(b.width*An),Ce=!1,ze=null,ft=null,xt=null,vt=null;f!=null&&(Ye==0||p!=null)&&(Ce=!0,ze=f.values(m,g,v,x),ft=new Map,new Set(ze).forEach(nt=>{nt!=null&&ft.set(nt,new Path2D)}),Ye>0&&(xt=p.values(m,g,v,x),vt=new Map,new Set(xt).forEach(nt=>{nt!=null&&vt.set(nt,new Path2D)})));let{x0:Yn,size:Ut}=u;if(Yn!=null&&Ut!=null){L=1,S=Yn.values(m,g,v,x),Yn.unit==2&&(S=S.map(Xt=>m.posToVal(G+Xt*te,R.key,!0)));let nt=Ut.values(m,g,v,x);Ut.unit==2?Re=nt[0]*te:Re=j(nt[0],R,te,G)-j(0,R,te,G),Ue=xB(S,_,j,R,te,G,Ue),Ne=Ue-Re+w}else Ue=xB(S,_,j,R,te,G,Ue),Ne=Ue*o+w,Re=Ue-Ne;Ne<1&&(Ne=0),Ye>=Re/2&&(Ye=0),Ne<5&&(ee=M6);let Nt=Ne>0,lo=Ue-Ne-(Nt?Ye:0);Re=ee(nC(lo,O,A)),we=(L==0?Re/2:L==U?0:Re)-L*U*((L==0?w/2:0)+(Nt?Ye/2:0));const Bt={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},qt=Ce?null:new Path2D;let mt=null;if(T!=null)mt=m.data[T.series[1]];else{let{y0:nt,y1:Ot}=u;nt!=null&&Ot!=null&&(_=Ot.values(m,g,v,x),mt=nt.values(m,g,v,x))}let Ke=C*Re,Et=k*Re;for(let nt=U==1?v:x;nt>=v&&nt<=x;nt+=U){let Ot=_[nt];if(Ot==null)continue;if(mt!=null){let re=mt[nt]??0;if(Ot-re==0)continue;ge=H(re,D,ne,K)}let Xt=R.distr!=2||u!=null?S[nt]:nt,br=j(Xt,R,te,G),en=H(wn(Ot,oe),D,ne,K),$=ee(br-we),P=ee(gs(en,ge)),M=ee(ua(en,ge)),X=P-M;if(Ot!=null){let re=Ot<0?Et:Ke,ue=Ot<0?Ke:Et;Ce?(Ye>0&&xt[nt]!=null&&z(vt.get(xt[nt]),$,M+Mo(Ye/2),Re,gs(0,X-Ye),re,ue),ze[nt]!=null&&z(ft.get(ze[nt]),$,M+Mo(Ye/2),Re,gs(0,X-Ye),re,ue)):z(qt,$,M+Mo(Ye/2),Re,gs(0,X-Ye),re,ue),N(m,g,nt,$-Ye/2,M,Re+Ye,X)}}return Ye>0?Bt.stroke=Ce?vt:qt:Ce||(Bt._fill=b.width==0?b._fill:b._stroke??b._fill,Bt.width=0),Bt.fill=Ce?ft:qt,Bt})}function yie(n,e){const t=wn(e==null?void 0:e.alignGaps,0);return(r,i,s,o)=>lf(r,i,(a,l,u,h,f,p,m,g,v,x,b)=>{let S=a.pxRound,_=C=>S(p(C,h,x,g)),R=C=>S(m(C,f,b,v)),D,j,H;h.ori==0?(D=mb,H=jm,j=s5):(D=gb,H=Hm,j=o5);const G=h.dir*(h.ori==0?1:-1);s=_m(u,s,o,1),o=_m(u,s,o,-1);let K=_(l[G==1?s:o]),te=K,ne=[],ee=[];for(let C=G==1?s:o;C>=s&&C<=o;C+=G)if(u[C]!=null){let U=l[C],z=_(U);ne.push(te=z),ee.push(R(u[C]))}const L={stroke:n(ne,ee,D,H,j,S),fill:null,clip:null,band:null,gaps:null,flags:Am},w=L.stroke;let[A,O]=WR(r,i);if(a.fill!=null||A!=0){let C=L.fill=new Path2D(w),k=a.fillTo(r,i,a.min,a.max,A),U=R(k);H(C,te,U),H(C,K,U)}if(!a.spanGaps){let C=[];C.push(...GR(l,u,s,o,G,_,t)),L.gaps=C=a.gaps(r,i,s,o,C),L.clip=pb(C,h.ori,g,v,x,b)}return O!=0&&(L.band=O==2?[zu(r,i,s,o,w,-1),zu(r,i,s,o,w,1)]:zu(r,i,s,o,w,O)),L})}function vie(n){return yie(wie,n)}function wie(n,e,t,r,i,s){const o=n.length;if(o<2)return null;const a=new Path2D;if(t(a,n[0],e[0]),o==2)r(a,n[1],e[1]);else{let l=Array(o),u=Array(o-1),h=Array(o-1),f=Array(o-1);for(let p=0;p<o-1;p++)h[p]=e[p+1]-e[p],f[p]=n[p+1]-n[p],u[p]=h[p]/f[p];l[0]=u[0];for(let p=1;p<o-1;p++)u[p]===0||u[p-1]===0||u[p-1]>0!=u[p]>0?l[p]=0:(l[p]=3*(f[p-1]+f[p])/((2*f[p]+f[p-1])/u[p-1]+(f[p]+2*f[p-1])/u[p]),isFinite(l[p])||(l[p]=0));l[o-1]=u[o-2];for(let p=0;p<o-1;p++)i(a,n[p]+f[p]/3,e[p]+l[p]*f[p]/3,n[p+1]-f[p]/3,e[p+1]-l[p+1]*f[p]/3,n[p+1],e[p+1])}return a}const oC=new Set;function _B(){for(let n of oC)n.syncRect(!0)}$m&&(Fd(Jne,jp,_B),Fd(ere,jp,_B,!0),Fd(qx,jp,()=>{vs.pxRatio=An}));const xie=u5(),_ie=a5();function bB(n,e,t,r){return(r?[n[0],n[1]].concat(n.slice(2)):[n[0]].concat(n.slice(1))).map((s,o)=>aC(s,o,e,t))}function bie(n,e){return n.map((t,r)=>r==0?{}:ti({},e,t))}function aC(n,e,t,r){return ti({},e==0?t:r,n)}function c5(n,e,t){return e==null?Sm:[e,t]}const Sie=c5;function Eie(n,e,t){return e==null?Sm:Xx(e,t,DR,!0)}function h5(n,e,t,r){return e==null?Sm:hb(e,t,n.scales[r].log,!1)}const Aie=h5;function d5(n,e,t,r){return e==null?Sm:LR(e,t,n.scales[r].log,!1)}const Tie=d5;function Cie(n,e,t,r,i){let s=gs(eB(n),eB(e)),o=e-n,a=$a(i/r*o,t);do{let l=t[a],u=r*l/o;if(u>=i&&s+(l<5?Ah.get(l):0)<=17)return[l,u]}while(++a<t.length);return[0,0]}function SB(n){let e,t;return n=n.replace(/(\d+)px/,(r,i)=>(e=pi((t=+i)*An))+"px"),[n,e,t]}function Iie(n){n.show&&[n.font,n.labelFont].forEach(e=>{let t=Wn(e[2]*An,1);e[0]=e[0].replace(/[0-9.]+px/,t+"px"),e[1]=t})}function vs(n,e,t){const r={mode:wn(n.mode,1)},i=r.mode;function s(B,W){return((W.distr==3?Uu(B>0?B:W.clamp(r,B,W.min,W.max,W.key)):W.distr==4?rA(B,W.asinh):W.distr==100?W.fwd(B):B)-W._min)/(W._max-W._min)}function o(B,W,Z,J){let ie=s(B,W);return J+Z*(W.dir==-1?1-ie:ie)}function a(B,W,Z,J){let ie=s(B,W);return J+Z*(W.dir==-1?ie:1-ie)}function l(B,W,Z,J){return W.ori==0?o(B,W,Z,J):a(B,W,Z,J)}r.valToPosH=o,r.valToPosV=a;let u=!1;r.status=0;const h=r.root=Ko(Bne);if(n.id!=null&&(h.id=n.id),vo(h,n.class),n.title){let B=Ko(Fne,h);B.textContent=n.title}const f=Ba("canvas"),p=r.ctx=f.getContext("2d"),m=Ko(Une,h);Fd("click",m,B=>{B.target===v&&(On!=Ni||zn!=_i)&&fr.click(r,B)},!0);const g=r.under=Ko(zne,m);m.appendChild(f);const v=r.over=Ko($ne,m);n=Em(n);const x=+wn(n.pxAlign,1),b=wB(x);(n.plugins||[]).forEach(B=>{B.opts&&(n=B.opts(r,n)||n)});const S=n.ms||.001,_=r.series=i==1?bB(n.series||[],dB,yB,!1):bie(n.series||[null],gB),R=r.axes=bB(n.axes||[],hB,pB,!0),D=r.scales={},j=r.bands=n.bands||[];j.forEach(B=>{B.fill=Qt(B.fill||null),B.dir=wn(B.dir,-1)});const H=i==2?_[1].facets[0].scale:_[0].scale,G={axes:hv,series:uv},K=(n.drawOrder||["axes","series"]).map(B=>G[B]);function te(B){let W=D[B];if(W==null){let Z=(n.scales||R0)[B]||R0;if(Z.from!=null)te(Z.from),D[B]=ti({},D[Z.from],Z,{key:B});else{W=D[B]=ti({},B==H?e5:cie,Z),W.key=B;let J=W.time,ie=W.range,de=Lc(ie);if((B!=H||i==2&&!J)&&(de&&(ie[0]==null||ie[1]==null)&&(ie={min:ie[0]==null?YN:{mode:1,hard:ie[0],soft:ie[0]},max:ie[1]==null?YN:{mode:1,hard:ie[1],soft:ie[1]}},de=!1),!de&&fb(ie))){let xe=ie;ie=(Ee,Pe,He)=>Pe==null?Sm:Xx(Pe,He,xe)}W.range=Qt(ie||(J?Sie:B==H?W.distr==3?Aie:W.distr==4?Tie:c5:W.distr==3?h5:W.distr==4?d5:Eie)),W.auto=Qt(de?!1:W.auto),W.clamp=Qt(W.clamp||uie),W._min=W._max=null}}}te("x"),te("y"),i==1&&_.forEach(B=>{te(B.scale)}),R.forEach(B=>{te(B.scale)});for(let B in n.scales)te(B);const ne=D[H],ee=ne.distr;let L,w;ne.ori==0?(vo(h,Lne),L=o,w=a):(vo(h,Dne),L=a,w=o);const A={};for(let B in D){let W=D[B];(W.min!=null||W.max!=null)&&(A[B]={min:W.min,max:W.max},W.min=W.max=null)}const O=n.tzDate||(B=>new Date(pi(B/S))),C=n.fmtDate||zR,k=S==1?Lre(O):Ure(O),U=lB(O,aB(S==1?Bre:Fre,C)),z=cB(O,uB($re,C)),N=[],T=r.legend=ti({},Wre,n.legend),V=T.show,oe=T.markers;T.idxs=N,oe.width=Qt(oe.width),oe.dash=Qt(oe.dash),oe.stroke=Qt(oe.stroke),oe.fill=Qt(oe.fill);let ge,we,Re,Ne=[],Ue=[],Ye,Ce=!1,ze={};if(T.live){const B=_[1]?_[1].values:null;Ce=B!=null,Ye=Ce?B(r,1,0):{_:0};for(let W in Ye)ze[W]=NR}if(V)if(ge=Ba("table",qne,h),Re=Ba("tbody",null,ge),T.mount(r,ge),Ce){we=Ba("thead",null,ge,Re);let B=Ba("tr",null,we);Ba("th",null,B);for(var ft in Ye)Ba("th",DN,B).textContent=ft}else vo(ge,Kne),T.live&&vo(ge,Xne);const xt={show:!0},vt={show:!1};function Yn(B,W){if(W==0&&(Ce||!T.live||i==2))return Sm;let Z=[],J=Ba("tr",Qne,Re,Re.childNodes[W]);vo(J,B.class),B.show||vo(J,hd);let ie=Ba("th",null,J);if(oe.show){let Ee=Ko(Yne,ie);if(W>0){let Pe=oe.width(r,W);Pe&&(Ee.style.border=Pe+"px "+oe.dash(r,W)+" "+oe.stroke(r,W)),Ee.style.background=oe.fill(r,W)}}let de=Ko(DN,ie);de.textContent=B.label,W>0&&(oe.show||(de.style.color=B.width>0?oe.stroke(r,W):oe.fill(r,W)),Nt("click",ie,Ee=>{if(je._lock)return;bn(Ee);let Pe=_.indexOf(B);if((Ee.ctrlKey||Ee.metaKey)!=T.isolate){let He=_.some((Ge,Ve)=>Ve>0&&Ve!=Pe&&Ge.show);_.forEach((Ge,Ve)=>{Ve>0&&Yr(Ve,He?Ve==Pe?xt:vt:xt,!0,Tr.setSeries)})}else Yr(Pe,{show:!B.show},!0,Tr.setSeries)},!1),Mn&&Nt(jN,ie,Ee=>{je._lock||(bn(Ee),Yr(_.indexOf(B),jo,!0,Tr.setSeries))},!1));for(var xe in Ye){let Ee=Ba("td",Zne,J);Ee.textContent="--",Z.push(Ee)}return[J,Z]}const Ut=new Map;function Nt(B,W,Z,J=!0){const ie=Ut.get(W)||{},de=je.bind[B](r,W,Z,J);de&&(Fd(B,W,ie[B]=de),Ut.set(W,ie))}function lo(B,W,Z){const J=Ut.get(W)||{};for(let ie in J)(B==null||ie==B)&&(tC(ie,W,J[ie]),delete J[ie]);B==null&&Ut.delete(W)}let Bt=0,qt=0,mt=0,Ke=0,Et=0,nt=0,Ot=Et,Xt=nt,br=mt,en=Ke,$=0,P=0,M=0,X=0;r.bbox={};let re=!1,ue=!1,me=!1,_t=!1,Tt=!1,at=!1;function _n(B,W,Z){(Z||B!=r.width||W!=r.height)&&wt(B,W),hl(!1),me=!0,ue=!0,fl()}function wt(B,W){r.width=Bt=mt=B,r.height=qt=Ke=W,Et=nt=0,Jn(),mf();let Z=r.bbox;$=Z.left=sd(Et*An,.5),P=Z.top=sd(nt*An,.5),M=Z.width=sd(mt*An,.5),X=Z.height=sd(Ke*An,.5)}const ur=3;function pf(){let B=!1,W=0;for(;!B;){W++;let Z=Gb(W),J=ng(W);B=W==ur||Z&&J,B||(wt(r.width,r.height),ue=!0)}}function Zn({width:B,height:W}){_n(B,W)}r.setSize=Zn;function Jn(){let B=!1,W=!1,Z=!1,J=!1;R.forEach((ie,de)=>{if(ie.show&&ie._show){let{side:xe,_size:Ee}=ie,Pe=xe%2,He=ie.label!=null?ie.labelSize:0,Ge=Ee+He;Ge>0&&(Pe?(mt-=Ge,xe==3?(Et+=Ge,J=!0):Z=!0):(Ke-=Ge,xe==0?(nt+=Ge,B=!0):W=!0))}}),Tn[0]=B,Tn[1]=Z,Tn[2]=W,Tn[3]=J,mt-=Fs[1]+Fs[3],Et+=Fs[3],Ke-=Fs[2]+Fs[0],nt+=Fs[0]}function mf(){let B=Et+mt,W=nt+Ke,Z=Et,J=nt;function ie(de,xe){switch(de){case 1:return B+=xe,B-xe;case 2:return W+=xe,W-xe;case 3:return Z-=xe,Z+xe;case 0:return J-=xe,J+xe}}R.forEach((de,xe)=>{if(de.show&&de._show){let Ee=de.side;de._pos=ie(Ee,de._size),de.label!=null&&(de._lpos=ie(Ee,de.labelSize))}})}const je=r.cursor=ti({},Qre,{drag:{y:i==2}},n.cursor);if(je.dataIdx==null){let B=je.hover,W=B.skip=new Set(B.skip??[]);W.add(void 0);let Z=B.prox=Qt(B.prox),J=B.bias??(B.bias=0);je.dataIdx=(ie,de,xe,Ee)=>{if(de==0)return xe;let Pe=xe,He=Z(ie,de,xe,Ee)??Zt,Ge=He>=0&&He<Zt,Ve=ne.ori==0?mt:Ke,Rt=je.left,un=e[0],Pt=e[de];if(W.has(Pt[xe])){Pe=null;let Dt=null,Ct=null,qe;if(J==0||J==-1)for(qe=xe;Dt==null&&qe-- >0;)W.has(Pt[qe])||(Dt=qe);if(J==0||J==1)for(qe=xe;Ct==null&&qe++<Pt.length;)W.has(Pt[qe])||(Ct=qe);if(Dt!=null||Ct!=null)if(Ge){let pn=Dt==null?-1/0:L(un[Dt],ne,Ve,0),Un=Ct==null?1/0:L(un[Ct],ne,Ve,0),rr=Rt-pn,Nn=Un-Rt;rr<=Nn?rr<=He&&(Pe=Dt):Nn<=He&&(Pe=Ct)}else Pe=Ct==null?Dt:Dt==null?Ct:xe-Dt<=Ct-xe?Dt:Ct}else Ge&&gi(Rt-L(un[xe],ne,Ve,0))>He&&(Pe=null);return Pe}}const bn=B=>{je.event=B};je.idxs=N,je._lock=!1;let Dr=je.points;Dr.show=Qt(Dr.show),Dr.size=Qt(Dr.size),Dr.stroke=Qt(Dr.stroke),Dr.width=Qt(Dr.width),Dr.fill=Qt(Dr.fill);const Sn=r.focus=ti({},n.focus||{alpha:.3},je.focus),Mn=Sn.prox>=0,ba=Mn&&Dr.one;let Kt=[],En=[],Sa=[];function er(B,W){let Z=Dr.show(r,W);if(Z)return vo(Z,Vne),vo(Z,B.class),Tl(Z,-10,-10,mt,Ke),v.insertBefore(Z,Kt[W]),Z}function Dn(B,W){if(i==1||W>0){let Z=i==1&&D[B.scale].time,J=B.value;B.value=Z?rB(J)?cB(O,uB(J,C)):J||z:J||oie,B.label=B.label||(Z?Zre:Yre)}if(ba||W>0){B.width=B.width==null?1:B.width,B.paths=B.paths||xie||cre,B.fillTo=Qt(B.fillTo||hie),B.pxAlign=+wn(B.pxAlign,x),B.pxRound=wB(B.pxAlign),B.stroke=Qt(B.stroke||null),B.fill=Qt(B.fill||null),B._stroke=B._fill=B._paths=B._focus=null;let Z=aie(gs(1,B.width),1),J=B.points=ti({},{size:Z,width:gs(1,Z*.2),stroke:B.stroke,space:Z*2,paths:_ie,_stroke:null,_fill:null},B.points);J.show=Qt(J.show),J.filter=Qt(J.filter),J.fill=Qt(J.fill),J.stroke=Qt(J.stroke),J.paths=Qt(J.paths),J.pxAlign=B.pxAlign}if(V){let Z=Yn(B,W);Ne.splice(W,0,Z[0]),Ue.splice(W,0,Z[1]),T.values.push(null)}if(je.show){N.splice(W,0,null);let Z=null;ba?W==0&&(Z=er(B,W)):W>0&&(Z=er(B,W)),Kt.splice(W,0,Z),En.splice(W,0,0),Sa.splice(W,0,0)}$n("addSeries",W)}function gf(B,W){W=W??_.length,B=i==1?aC(B,W,dB,yB):aC(B,W,{},gB),_.splice(W,0,B),Dn(_[W],W)}r.addSeries=gf;function cr(B){if(_.splice(B,1),V){T.values.splice(B,1),Ue.splice(B,1);let W=Ne.splice(B,1)[0];lo(null,W.firstChild),W.remove()}je.show&&(N.splice(B,1),Kt.splice(B,1)[0].remove(),En.splice(B,1),Sa.splice(B,1)),$n("delSeries",B)}r.delSeries=cr;const Tn=[!1,!1,!1,!1];function yf(B,W){if(B._show=B.show,B.show){let Z=B.side%2,J=D[B.scale];J==null&&(B.scale=Z?_[1].scale:H,J=D[B.scale]);let ie=J.time;B.size=Qt(B.size),B.space=Qt(B.space),B.rotate=Qt(B.rotate),Lc(B.incrs)&&B.incrs.forEach(xe=>{!Ah.has(xe)&&Ah.set(xe,B6(xe))}),B.incrs=Qt(B.incrs||(J.distr==2?Mre:ie?S==1?Nre:Dre:od)),B.splits=Qt(B.splits||(ie&&J.distr==1?k:J.distr==3?rC:J.distr==4?tie:eie)),B.stroke=Qt(B.stroke),B.grid.stroke=Qt(B.grid.stroke),B.ticks.stroke=Qt(B.ticks.stroke),B.border.stroke=Qt(B.border.stroke);let de=B.values;B.values=Lc(de)&&!Lc(de[0])?Qt(de):ie?Lc(de)?lB(O,aB(de,C)):rB(de)?zre(O,de):de||U:de||Jre,B.filter=Qt(B.filter||(J.distr>=3&&J.log==10?iie:J.distr==3&&J.log==2?sie:O6)),B.font=SB(B.font),B.labelFont=SB(B.labelFont),B._size=B.size(r,null,W,0),B._space=B._rotate=B._incrs=B._found=B._splits=B._values=null,B._size>0&&(Tn[W]=!0,B._el=Ko(jne,m))}}function Fn(B,W,Z,J){let[ie,de,xe,Ee]=Z,Pe=W%2,He=0;return Pe==0&&(Ee||de)&&(He=W==0&&!ie||W==2&&!xe?pi(hB.size/3):0),Pe==1&&(ie||xe)&&(He=W==1&&!de||W==3&&!Ee?pi(pB.size/2):0),He}const tr=r.padding=(n.padding||[Fn,Fn,Fn,Fn]).map(B=>Qt(wn(B,Fn))),Fs=r._padding=tr.map((B,W)=>B(r,W,Tn,0));let Sr,hr=null,dr=null;const ll=i==1?_[0].idxs:null;let Mi=null,Ea=!1;function nc(B,W){if(e=B??[],r.data=r._data=e,i==2){Sr=0;for(let Z=1;Z<_.length;Z++)Sr+=e[Z][0].length}else{e.length==0&&(r.data=r._data=e=[[]]),Mi=e[0],Sr=Mi.length;let Z=e;if(ee==2){Z=e.slice();let J=Z[0]=Array(Sr);for(let ie=0;ie<Sr;ie++)J[ie]=ie}r._data=e=Z}if(hl(!0),$n("setData"),ee==2&&(me=!0),W!==!1){let Z=ne;Z.auto(r,Ea)?uo():ui(H,Z.min,Z.max),_t=_t||je.left>=0,at=!0,fl()}}r.setData=nc;function uo(){Ea=!0;let B,W;i==1&&(Sr>0?(hr=ll[0]=0,dr=ll[1]=Sr-1,B=e[0][hr],W=e[0][dr],ee==2?(B=hr,W=dr):B==W&&(ee==3?[B,W]=hb(B,B,ne.log,!1):ee==4?[B,W]=LR(B,B,ne.log,!1):ne.time?W=B+pi(86400/S):[B,W]=Xx(B,W,DR,!0))):(hr=ll[0]=B=null,dr=ll[1]=W=null)),ui(H,B,W)}let zo,Us,uu,Aa,zs,Ji,dn,sn,es,Cn;function Oi(B,W,Z,J,ie,de){B??(B=UN),Z??(Z=UR),J??(J="butt"),ie??(ie=UN),de??(de="round"),B!=zo&&(p.strokeStyle=zo=B),ie!=Us&&(p.fillStyle=Us=ie),W!=uu&&(p.lineWidth=uu=W),de!=zs&&(p.lineJoin=zs=de),J!=Ji&&(p.lineCap=Ji=J),Z!=Aa&&p.setLineDash(Aa=Z)}function ul(B,W,Z,J){W!=Us&&(p.fillStyle=Us=W),B!=dn&&(p.font=dn=B),Z!=sn&&(p.textAlign=sn=Z),J!=es&&(p.textBaseline=es=J)}function cl(B,W,Z,J,ie=0){if(J.length>0&&B.auto(r,Ea)&&(W==null||W.min==null)){let de=wn(hr,0),xe=wn(dr,J.length-1),Ee=Z.min==null?B.distr==3?ire(J,de,xe):rre(J,de,xe,ie):[Z.min,Z.max];B.min=ua(B.min,Z.min=Ee[0]),B.max=gs(B.max,Z.max=Ee[1])}}const ts={min:null,max:null};function Jm(){for(let J in D){let ie=D[J];A[J]==null&&(ie.min==null||A[H]!=null&&ie.auto(r,Ea))&&(A[J]=ts)}for(let J in D){let ie=D[J];A[J]==null&&ie.from!=null&&A[ie.from]!=null&&(A[J]=ts)}A[H]!=null&&hl(!0);let B={};for(let J in A){let ie=A[J];if(ie!=null){let de=B[J]=Em(D[J],fre);if(ie.min!=null)ti(de,ie);else if(J!=H||i==2)if(Sr==0&&de.from==null){let xe=de.range(r,null,null,J);de.min=xe[0],de.max=xe[1]}else de.min=Zt,de.max=-Zt}}if(Sr>0){_.forEach((J,ie)=>{if(i==1){let de=J.scale,xe=A[de];if(xe==null)return;let Ee=B[de];if(ie==0){let Pe=Ee.range(r,Ee.min,Ee.max,de);Ee.min=Pe[0],Ee.max=Pe[1],hr=$a(Ee.min,e[0]),dr=$a(Ee.max,e[0]),dr-hr>1&&(e[0][hr]<Ee.min&&hr++,e[0][dr]>Ee.max&&dr--),J.min=Mi[hr],J.max=Mi[dr]}else J.show&&J.auto&&cl(Ee,xe,J,e[ie],J.sorted);J.idxs[0]=hr,J.idxs[1]=dr}else if(ie>0&&J.show&&J.auto){let[de,xe]=J.facets,Ee=de.scale,Pe=xe.scale,[He,Ge]=e[ie],Ve=B[Ee],Rt=B[Pe];Ve!=null&&cl(Ve,A[Ee],de,He,de.sorted),Rt!=null&&cl(Rt,A[Pe],xe,Ge,xe.sorted),J.min=xe.min,J.max=xe.max}});for(let J in B){let ie=B[J],de=A[J];if(ie.from==null&&(de==null||de.min==null)){let xe=ie.range(r,ie.min==Zt?null:ie.min,ie.max==-Zt?null:ie.max,J);ie.min=xe[0],ie.max=xe[1]}}}for(let J in B){let ie=B[J];if(ie.from!=null){let de=B[ie.from];if(de.min==null)ie.min=ie.max=null;else{let xe=ie.range(r,de.min,de.max,J);ie.min=xe[0],ie.max=xe[1]}}}let W={},Z=!1;for(let J in B){let ie=B[J],de=D[J];if(de.min!=ie.min||de.max!=ie.max){de.min=ie.min,de.max=ie.max;let xe=de.distr;de._min=xe==3?Uu(de.min):xe==4?rA(de.min,de.asinh):xe==100?de.fwd(de.min):de.min,de._max=xe==3?Uu(de.max):xe==4?rA(de.max,de.asinh):xe==100?de.fwd(de.max):de.max,W[J]=Z=!0}}if(Z){_.forEach((J,ie)=>{i==2?ie>0&&W.y&&(J._paths=null):W[J.scale]&&(J._paths=null)});for(let J in W)me=!0,$n("setScale",J);je.show&&je.left>=0&&(_t=at=!0)}for(let J in A)A[J]=null}function lv(B){let W=nC(hr-1,0,Sr-1),Z=nC(dr+1,0,Sr-1);for(;B[W]==null&&W>0;)W--;for(;B[Z]==null&&Z<Sr-1;)Z++;return[W,Z]}function uv(){Sr>0&&(_.forEach((B,W)=>{if(W>0&&B.show&&(Bh(W,!1),Bh(W,!0),B._paths==null)){Cn!=B.alpha&&(p.globalAlpha=Cn=B.alpha);let Z=i==2?[0,e[W][0].length-1]:lv(e[W]);B._paths=B.paths(r,W,Z[0],Z[1]),Cn!=1&&(p.globalAlpha=Cn=1)}}),_.forEach((B,W)=>{if(W>0&&B.show){Cn!=B.alpha&&(p.globalAlpha=Cn=B.alpha),B._paths!=null&&eg(W,!1);{let Z=B._paths!=null?B._paths.gaps:null,J=B.points.show(r,W,hr,dr,Z),ie=B.points.filter(r,W,J,Z);(J||ie)&&(B.points._paths=B.points.paths(r,W,hr,dr,ie),eg(W,!0))}Cn!=1&&(p.globalAlpha=Cn=1),$n("drawSeries",W)}}))}function Bh(B,W){let Z=W?_[B].points:_[B];Z._stroke=Z.stroke(r,B),Z._fill=Z.fill(r,B)}function eg(B,W){let Z=W?_[B].points:_[B],{stroke:J,fill:ie,clip:de,flags:xe,_stroke:Ee=Z._stroke,_fill:Pe=Z._fill,_width:He=Z.width}=Z._paths;He=Wn(He*An,3);let Ge=null,Ve=He%2/2;W&&Pe==null&&(Pe=He>0?"#fff":Ee);let Rt=Z.pxAlign==1&&Ve>0;if(Rt&&p.translate(Ve,Ve),!W){let un=$-He/2,Pt=P-He/2,Dt=M+He,Ct=X+He;Ge=new Path2D,Ge.rect(un,Pt,Dt,Ct)}W?tg(Ee,He,Z.dash,Z.cap,Pe,J,ie,xe,de):co(B,Ee,He,Z.dash,Z.cap,Pe,J,ie,xe,Ge,de),Rt&&p.translate(-Ve,-Ve)}function co(B,W,Z,J,ie,de,xe,Ee,Pe,He,Ge){let Ve=!1;Pe!=0&&j.forEach((Rt,un)=>{if(Rt.series[0]==B){let Pt=_[Rt.series[1]],Dt=e[Rt.series[1]],Ct=(Pt._paths||R0).band;Lc(Ct)&&(Ct=Rt.dir==1?Ct[0]:Ct[1]);let qe,pn=null;Pt.show&&Ct&&ore(Dt,hr,dr)?(pn=Rt.fill(r,un)||de,qe=Pt._paths.clip):Ct=null,tg(W,Z,J,ie,pn,xe,Ee,Pe,He,Ge,qe,Ct),Ve=!0}}),Ve||tg(W,Z,J,ie,de,xe,Ee,Pe,He,Ge)}const cv=Am|sC;function tg(B,W,Z,J,ie,de,xe,Ee,Pe,He,Ge,Ve){Oi(B,W,Z,J,ie),(Pe||He||Ve)&&(p.save(),Pe&&p.clip(Pe),He&&p.clip(He)),Ve?(Ee&cv)==cv?(p.clip(Ve),Ge&&p.clip(Ge),ic(ie,xe),rc(B,de,W)):Ee&sC?(ic(ie,xe),p.clip(Ve),rc(B,de,W)):Ee&Am&&(p.save(),p.clip(Ve),Ge&&p.clip(Ge),ic(ie,xe),p.restore(),rc(B,de,W)):(ic(ie,xe),rc(B,de,W)),(Pe||He||Ve)&&p.restore()}function rc(B,W,Z){Z>0&&(W instanceof Map?W.forEach((J,ie)=>{p.strokeStyle=zo=ie,p.stroke(J)}):W!=null&&B&&p.stroke(W))}function ic(B,W){W instanceof Map?W.forEach((Z,J)=>{p.fillStyle=Us=J,p.fill(Z)}):W!=null&&B&&p.fill(W)}function Lh(B,W,Z,J){let ie=R[B],de;if(J<=0)de=[0,0];else{let xe=ie._space=ie.space(r,B,W,Z,J),Ee=ie._incrs=ie.incrs(r,B,W,Z,J,xe);de=Cie(W,Z,Ee,J,xe)}return ie._found=de}function sc(B,W,Z,J,ie,de,xe,Ee,Pe,He){let Ge=xe%2/2;x==1&&p.translate(Ge,Ge),Oi(Ee,xe,Pe,He,Ee),p.beginPath();let Ve,Rt,un,Pt,Dt=ie+(J==0||J==3?-de:de);Z==0?(Rt=ie,Pt=Dt):(Ve=ie,un=Dt);for(let Ct=0;Ct<B.length;Ct++)W[Ct]!=null&&(Z==0?Ve=un=B[Ct]:Rt=Pt=B[Ct],p.moveTo(Ve,Rt),p.lineTo(un,Pt));p.stroke(),x==1&&p.translate(-Ge,-Ge)}function Gb(B){let W=!0;return R.forEach((Z,J)=>{if(!Z.show)return;let ie=D[Z.scale];if(ie.min==null){Z._show&&(W=!1,Z._show=!1,hl(!1));return}else Z._show||(W=!1,Z._show=!0,hl(!1));let de=Z.side,xe=de%2,{min:Ee,max:Pe}=ie,[He,Ge]=Lh(J,Ee,Pe,xe==0?mt:Ke);if(Ge==0)return;let Ve=ie.distr==2,Rt=Z._splits=Z.splits(r,J,Ee,Pe,He,Ge,Ve),un=ie.distr==2?Rt.map(qe=>Mi[qe]):Rt,Pt=ie.distr==2?Mi[Rt[1]]-Mi[Rt[0]]:He,Dt=Z._values=Z.values(r,Z.filter(r,un,J,Ge,Pt),J,Ge,Pt);Z._rotate=de==2?Z.rotate(r,Dt,J,Ge):0;let Ct=Z._size;Z._size=na(Z.size(r,Dt,J,B)),Ct!=null&&Z._size!=Ct&&(W=!1)}),W}function ng(B){let W=!0;return tr.forEach((Z,J)=>{let ie=Z(r,J,Tn,B);ie!=Fs[J]&&(W=!1),Fs[J]=ie}),W}function hv(){for(let B=0;B<R.length;B++){let W=R[B];if(!W.show||!W._show)continue;let Z=W.side,J=Z%2,ie,de,xe=W.stroke(r,B),Ee=Z==0||Z==3?-1:1;if(W.label){let ln=W.labelGap*Ee,Si=pi((W._lpos+ln)*An);ul(W.labelFont[0],xe,"center",Z==2?Bg:FN),p.save(),J==1?(ie=de=0,p.translate(Si,pi(P+X/2)),p.rotate((Z==3?-Nw:Nw)/2)):(ie=pi($+M/2),de=Si),p.fillText(W.label,ie,de),p.restore()}let[Pe,He]=W._found;if(He==0)continue;let Ge=D[W.scale],Ve=J==0?M:X,Rt=J==0?$:P,un=pi(W.gap*An),Pt=W._splits,Dt=Ge.distr==2?Pt.map(ln=>Mi[ln]):Pt,Ct=Ge.distr==2?Mi[Pt[1]]-Mi[Pt[0]]:Pe,qe=W.ticks,pn=W.border,Un=qe.show?pi(qe.size*An):0,rr=W._rotate*-Nw/180,Nn=b(W._pos*An),Ft=(Un+un)*Ee,ci=Nn+Ft;de=J==0?ci:0,ie=J==1?ci:0;let bi=W.font[0],ns=W.align==1?Wf:W.align==2?tA:rr>0?Wf:rr<0?tA:J==0?"center":Z==3?tA:Wf,rs=rr||J==1?"middle":Z==2?Bg:FN;ul(bi,xe,ns,rs);let As=W.font[1]*W.lineGap,Cr=Pt.map(ln=>b(l(ln,Ge,Ve,Rt))),on=W._values;for(let ln=0;ln<on.length;ln++){let Si=on[ln];if(Si!=null){J==0?ie=Cr[ln]:de=Cr[ln],Si=""+Si;let Go=Si.indexOf(`
`)==-1?[Si]:Si.split(/\n/gm);for(let Hs=0;Hs<Go.length;Hs++){let Ws=Go[Hs];rr?(p.save(),p.translate(ie,de+Hs*As),p.rotate(rr),p.fillText(Ws,0,0),p.restore()):p.fillText(Ws,ie,de+Hs*As)}}}qe.show&&sc(Cr,qe.filter(r,Dt,B,He,Ct),J,Z,Nn,Un,Wn(qe.width*An,3),qe.stroke(r,B),qe.dash,qe.cap);let an=W.grid;an.show&&sc(Cr,an.filter(r,Dt,B,He,Ct),J,J==0?2:1,J==0?P:$,J==0?X:M,Wn(an.width*An,3),an.stroke(r,B),an.dash,an.cap),pn.show&&sc([Nn],[1],J==0?1:0,J==0?1:2,J==1?P:$,J==1?X:M,Wn(pn.width*An,3),pn.stroke(r,B),pn.dash,pn.cap)}$n("drawAxes")}function hl(B){_.forEach((W,Z)=>{Z>0&&(W._paths=null,B&&(i==1?(W.min=null,W.max=null):W.facets.forEach(J=>{J.min=null,J.max=null})))})}let dl=!1,Dh=!1,Wt=[];function dv(){Dh=!1;for(let B=0;B<Wt.length;B++)$n(...Wt[B]);Wt.length=0}function fl(){dl||(xre(pv),dl=!0)}function fv(B,W=!1){dl=!0,Dh=W,B(r),pv(),W&&Wt.length>0&&queueMicrotask(dv)}r.batch=fv;function pv(){if(re&&(Jm(),re=!1),me&&(pf(),me=!1),ue){if(or(g,Wf,Et),or(g,Bg,nt),or(g,n0,mt),or(g,r0,Ke),or(v,Wf,Et),or(v,Bg,nt),or(v,n0,mt),or(v,r0,Ke),or(m,n0,Bt),or(m,r0,qt),f.width=pi(Bt*An),f.height=pi(qt*An),R.forEach(({_el:B,_show:W,_size:Z,_pos:J,side:ie})=>{if(B!=null)if(W){let de=ie===3||ie===0?Z:0,xe=ie%2==1;or(B,xe?"left":"top",J-de),or(B,xe?"width":"height",Z),or(B,xe?"top":"left",xe?nt:Et),or(B,xe?"height":"width",xe?Ke:mt),eC(B,hd)}else vo(B,hd)}),zo=Us=uu=zs=Ji=dn=sn=es=Aa=null,Cn=1,$h(!0),Et!=Ot||nt!=Xt||mt!=br||Ke!=en){hl(!1);let B=mt/br,W=Ke/en;if(je.show&&!_t&&je.left>=0){je.left*=B,je.top*=W,oc&&Tl(oc,pi(je.left),0,mt,Ke),cu&&Tl(cu,0,pi(je.top),mt,Ke);for(let Z=0;Z<Kt.length;Z++){let J=Kt[Z];J!=null&&(En[Z]*=B,Sa[Z]*=W,Tl(J,na(En[Z]),na(Sa[Z]),mt,Ke))}}if(In.show&&!Tt&&In.left>=0&&In.width>0){In.left*=B,In.width*=B,In.top*=W,In.height*=W;for(let Z in uc)or(li,Z,In[Z])}Ot=Et,Xt=nt,br=mt,en=Ke}$n("setSize"),ue=!1}Bt>0&&qt>0&&(p.clearRect(0,0,f.width,f.height),$n("drawClear"),K.forEach(B=>B()),$n("draw")),In.show&&Tt&&(Bi(In),Tt=!1),je.show&&_t&&(fu(null,!0,!1),_t=!1),T.show&&T.live&&at&&(ml(),at=!1),u||(u=!0,r.status=1,$n("ready")),Ea=!1,dl=!1}r.redraw=(B,W)=>{me=W||!1,B!==!1?ui(H,ne.min,ne.max):fl()};function rg(B,W){let Z=D[B];if(Z.from==null){if(Sr==0){let J=Z.range(r,W.min,W.max,B);W.min=J[0],W.max=J[1]}if(W.min>W.max){let J=W.min;W.min=W.max,W.max=J}if(Sr>1&&W.min!=null&&W.max!=null&&W.max-W.min<1e-16)return;B==H&&Z.distr==2&&Sr>0&&(W.min=$a(W.min,e[0]),W.max=$a(W.max,e[0]),W.min==W.max&&W.max++),A[B]=W,re=!0,fl()}}r.setScale=rg;let Fr,Fh,oc,cu,mv,Uh,Ni,_i,$o,zh,On,zn,ai=!1;const fr=je.drag;let nr=fr.x,Er=fr.y;je.show&&(je.x&&(Fr=Ko(Wne,v)),je.y&&(Fh=Ko(Gne,v)),ne.ori==0?(oc=Fr,cu=Fh):(oc=Fh,cu=Fr),On=je.left,zn=je.top);const In=r.select=ti({show:!0,over:!0,left:0,width:0,top:0,height:0},n.select),li=In.show?Ko(Hne,In.over?v:g):null;function Bi(B,W){if(In.show){for(let Z in B)In[Z]=B[Z],Z in uc&&or(li,Z,B[Z]);W!==!1&&$n("setSelect")}}r.setSelect=Bi;function hu(B,W){let Z=_[B],J=V?Ne[B]:null;if(Z.show)J&&eC(J,hd);else{J&&vo(J,hd);let ie=ba?Kt[0]:Kt[B];Tl(ie,-10,-10,mt,Ke)}}function ui(B,W,Z){rg(B,{min:W,max:Z})}function Yr(B,W,Z,J){W.focus!=null&&ho(B),W.show!=null&&_.forEach((ie,de)=>{de>0&&(B==de||B==null)&&(ie.show=W.show,hu(de,W.show),i==2?(ui(ie.facets[0].scale,null,null),ui(ie.facets[1].scale,null,null)):ui(ie.scale,null,null),fl())}),Z!==!1&&$n("setSeries",B,W),J&&yl("setSeries",r,B,W)}r.setSeries=Yr;function du(B,W){ti(j[B],W)}function gv(B,W){B.fill=Qt(B.fill||null),B.dir=wn(B.dir,-1),W=W??j.length,j.splice(W,0,B)}function ig(B){B==null?j.length=0:j.splice(B,1)}r.addBand=gv,r.setBand=du,r.delBand=ig;function sg(B,W){_[B].alpha=W,je.show&&Kt[B]&&(Kt[B].style.opacity=W),V&&Ne[B]&&(Ne[B].style.opacity=W)}let Ar,Vr,fn;const jo={focus:!0};function ho(B){if(B!=fn){let W=B==null,Z=Sn.alpha!=1;_.forEach((J,ie)=>{if(i==1||ie>0){let de=W||ie==0||ie==B;J._focus=W?null:de,Z&&sg(ie,de?1:Sn.alpha)}}),fn=B,Z&&fl()}}V&&Mn&&Nt(HN,ge,B=>{je._lock||(bn(B),fn!=null&&Yr(null,jo,!0,Tr.setSeries))});function fo(B,W,Z){let J=D[W];Z&&(B=B/An-(J.ori==1?nt:Et));let ie=mt;J.ori==1&&(ie=Ke,B=ie-B),J.dir==-1&&(B=ie-B);let de=J._min,xe=J._max,Ee=B/ie,Pe=de+(xe-de)*Ee,He=J.distr;return He==3?bm(10,Pe):He==4?lre(Pe,J.asinh):He==100?J.bwd(Pe):Pe}function yv(B,W){let Z=fo(B,H,W);return $a(Z,e[0],hr,dr)}r.valToIdx=B=>$a(B,e[0]),r.posToIdx=yv,r.posToVal=fo,r.valToPos=(B,W,Z)=>D[W].ori==0?o(B,D[W],Z?M:mt,Z?$:0):a(B,D[W],Z?X:Ke,Z?P:0),r.setCursor=(B,W,Z)=>{On=B.left,zn=B.top,fu(null,W,Z)};function vf(B,W){or(li,Wf,In.left=B),or(li,n0,In.width=W)}function wf(B,W){or(li,Bg,In.top=B),or(li,r0,In.height=W)}let ac=ne.ori==0?vf:wf,pl=ne.ori==1?vf:wf;function vv(){if(V&&T.live)for(let B=i==2?1:0;B<_.length;B++){if(B==0&&Ce)continue;let W=T.values[B],Z=0;for(let J in W)Ue[B][Z++].firstChild.nodeValue=W[J]}}function ml(B,W){if(B!=null&&(B.idxs?B.idxs.forEach((Z,J)=>{N[J]=Z}):dre(B.idx)||N.fill(B.idx),T.idx=N[0]),V&&T.live){for(let Z=0;Z<_.length;Z++)(Z>0||i==1&&!Ce)&&og(Z,N[Z]);vv()}at=!1,W!==!1&&$n("setLegend")}r.setLegend=ml;function og(B,W){let Z=_[B],J=B==0&&ee==2?Mi:e[B],ie;Ce?ie=Z.values(r,B,W)??ze:(ie=Z.value(r,W==null?null:J[W],B,W),ie=ie==null?ze:{_:ie}),T.values[B]=ie}function fu(B,W,Z){$o=On,zh=zn,[On,zn]=je.move(r,On,zn),je.left=On,je.top=zn,je.show&&(oc&&Tl(oc,pi(On),0,mt,Ke),cu&&Tl(cu,0,pi(zn),mt,Ke));let J,ie=hr>dr;Ar=Zt,Vr=null;let de=ne.ori==0?mt:Ke,xe=ne.ori==1?mt:Ke;if(On<0||Sr==0||ie){J=je.idx=null;for(let Ee=0;Ee<_.length;Ee++){let Pe=Kt[Ee];Pe!=null&&Tl(Pe,-10,-10,mt,Ke)}Mn&&Yr(null,jo,!0,B==null&&Tr.setSeries),T.live&&(N.fill(J),at=!0)}else{let Ee,Pe,He;i==1&&(Ee=ne.ori==0?On:zn,Pe=fo(Ee,H),J=je.idx=$a(Pe,e[0],hr,dr),He=L(e[0][J],ne,de,0));let Ge=-10,Ve=-10,Rt=0,un=0,Pt=!0,Dt="",Ct="";for(let qe=i==2?1:0;qe<_.length;qe++){let pn=_[qe],Un=N[qe],rr=Un==null?null:i==1?e[qe][Un]:e[qe][1][Un],Nn=je.dataIdx(r,qe,J,Pe),Ft=Nn==null?null:i==1?e[qe][Nn]:e[qe][1][Nn];at=at||Ft!=rr||Nn!=Un,N[qe]=Nn;let ci=Nn==J?He:L(i==1?e[0][Nn]:e[qe][0][Nn],ne,de,0);if(qe>0&&pn.show){let bi=Ft==null?-10:w(Ft,i==1?D[pn.scale]:D[pn.facets[1].scale],xe,0);if(Mn&&Ft!=null){let ns=ne.ori==1?On:zn,rs=gi(Sn.dist(r,qe,Nn,bi,ns));if(rs<Ar){let As=Sn.bias;if(As!=0){let Cr=fo(ns,pn.scale),on=Ft>=0?1:-1,an=Cr>=0?1:-1;an==on&&(an==1?As==1?Ft>=Cr:Ft<=Cr:As==1?Ft<=Cr:Ft>=Cr)&&(Ar=rs,Vr=qe)}else Ar=rs,Vr=qe}}if(at||ba){let ns,rs;ne.ori==0?(ns=ci,rs=bi):(ns=bi,rs=ci);let As,Cr,on,an,ln,Si,Go=!0,Hs=Dr.bbox;if(Hs!=null){Go=!1;let Ws=Hs(r,qe);on=Ws.left,an=Ws.top,As=Ws.width,Cr=Ws.height}else on=ns,an=rs,As=Cr=Dr.size(r,qe);if(Si=Dr.fill(r,qe),ln=Dr.stroke(r,qe),ba)qe==Vr&&Ar<=Sn.prox&&(Ge=on,Ve=an,Rt=As,un=Cr,Pt=Go,Dt=Si,Ct=ln);else{let Ws=Kt[qe];Ws!=null&&(En[qe]=on,Sa[qe]=an,QN(Ws,As,Cr,Go),XN(Ws,Si,ln),Tl(Ws,na(on),na(an),mt,Ke))}}}}if(ba){let qe=Sn.prox,pn=fn==null?Ar<=qe:Ar>qe||Vr!=fn;if(at||pn){let Un=Kt[0];En[0]=Ge,Sa[0]=Ve,QN(Un,Rt,un,Pt),XN(Un,Dt,Ct),Tl(Un,na(Ge),na(Ve),mt,Ke)}}}if(In.show&&ai)if(B!=null){let[Ee,Pe]=Tr.scales,[He,Ge]=Tr.match,[Ve,Rt]=B.cursor.sync.scales,un=B.cursor.drag;if(nr=un._x,Er=un._y,nr||Er){let{left:Pt,top:Dt,width:Ct,height:qe}=B.select,pn=B.scales[Ve].ori,Un=B.posToVal,rr,Nn,Ft,ci,bi,ns=Ee!=null&&He(Ee,Ve),rs=Pe!=null&&Ge(Pe,Rt);ns&&nr?(pn==0?(rr=Pt,Nn=Ct):(rr=Dt,Nn=qe),Ft=D[Ee],ci=L(Un(rr,Ve),Ft,de,0),bi=L(Un(rr+Nn,Ve),Ft,de,0),ac(ua(ci,bi),gi(bi-ci))):ac(0,de),rs&&Er?(pn==1?(rr=Pt,Nn=Ct):(rr=Dt,Nn=qe),Ft=D[Pe],ci=w(Un(rr,Rt),Ft,xe,0),bi=w(Un(rr+Nn,Rt),Ft,xe,0),pl(ua(ci,bi),gi(bi-ci))):pl(0,xe)}else Ta()}else{let Ee=gi($o-mv),Pe=gi(zh-Uh);if(ne.ori==1){let Rt=Ee;Ee=Pe,Pe=Rt}nr=fr.x&&Ee>=fr.dist,Er=fr.y&&Pe>=fr.dist;let He=fr.uni;He!=null?nr&&Er&&(nr=Ee>=He,Er=Pe>=He,!nr&&!Er&&(Pe>Ee?Er=!0:nr=!0)):fr.x&&fr.y&&(nr||Er)&&(nr=Er=!0);let Ge,Ve;nr&&(ne.ori==0?(Ge=Ni,Ve=On):(Ge=_i,Ve=zn),ac(ua(Ge,Ve),gi(Ve-Ge)),Er||pl(0,xe)),Er&&(ne.ori==1?(Ge=Ni,Ve=On):(Ge=_i,Ve=zn),pl(ua(Ge,Ve),gi(Ve-Ge)),nr||ac(0,de)),!nr&&!Er&&(ac(0,0),pl(0,0))}if(fr._x=nr,fr._y=Er,B==null){if(Z){if(Ho!=null){let[Ee,Pe]=Tr.scales;Tr.values[0]=Ee!=null?fo(ne.ori==0?On:zn,Ee):null,Tr.values[1]=Pe!=null?fo(ne.ori==1?On:zn,Pe):null}yl(zN,r,On,zn,mt,Ke,J)}if(Mn){let Ee=Z&&Tr.setSeries,Pe=Sn.prox;fn==null?Ar<=Pe&&Yr(Vr,jo,!0,Ee):Ar>Pe?Yr(null,jo,!0,Ee):Vr!=fn&&Yr(Vr,jo,!0,Ee)}}at&&(T.idx=J,ml()),W!==!1&&$n("setCursor")}let po=null;Object.defineProperty(r,"rect",{get(){return po==null&&$h(!1),po}});function $h(B=!1){B?po=null:(po=v.getBoundingClientRect(),$n("syncRect",po))}function $s(B,W,Z,J,ie,de,xe){je._lock||ai&&B!=null&&B.movementX==0&&B.movementY==0||(lc(B,W,Z,J,ie,de,xe,!1,B!=null),B!=null?fu(null,!0,!0):fu(W,!0,!1))}function lc(B,W,Z,J,ie,de,xe,Ee,Pe){if(po==null&&$h(!1),bn(B),B!=null)Z=B.clientX-po.left,J=B.clientY-po.top;else{if(Z<0||J<0){On=-10,zn=-10;return}let[He,Ge]=Tr.scales,Ve=W.cursor.sync,[Rt,un]=Ve.values,[Pt,Dt]=Ve.scales,[Ct,qe]=Tr.match,pn=W.axes[0].side%2==1,Un=ne.ori==0?mt:Ke,rr=ne.ori==1?mt:Ke,Nn=pn?de:ie,Ft=pn?ie:de,ci=pn?J:Z,bi=pn?Z:J;if(Pt!=null?Z=Ct(He,Pt)?l(Rt,D[He],Un,0):-10:Z=Un*(ci/Nn),Dt!=null?J=qe(Ge,Dt)?l(un,D[Ge],rr,0):-10:J=rr*(bi/Ft),ne.ori==1){let ns=Z;Z=J,J=ns}}Pe&&((Z<=1||Z>=mt-1)&&(Z=sd(Z,mt)),(J<=1||J>=Ke-1)&&(J=sd(J,Ke))),Ee?(mv=Z,Uh=J,[Ni,_i]=je.move(r,Z,J)):(On=Z,zn=J)}const uc={width:0,height:0,left:0,top:0};function Ta(){Bi(uc,!1)}let xf,_f,ag,bf;function Sf(B,W,Z,J,ie,de,xe){ai=!0,nr=Er=fr._x=fr._y=!1,lc(B,W,Z,J,ie,de,xe,!0,!1),B!=null&&(Nt(nA,Z2,pu,!1),yl($N,r,Ni,_i,mt,Ke,null));let{left:Ee,top:Pe,width:He,height:Ge}=In;xf=Ee,_f=Pe,ag=He,bf=Ge,Ta()}function pu(B,W,Z,J,ie,de,xe){ai=fr._x=fr._y=!1,lc(B,W,Z,J,ie,de,xe,!1,!0);let{left:Ee,top:Pe,width:He,height:Ge}=In,Ve=He>0||Ge>0,Rt=xf!=Ee||_f!=Pe||ag!=He||bf!=Ge;if(Ve&&Rt&&Bi(In),fr.setScale&&Ve&&Rt){let un=Ee,Pt=He,Dt=Pe,Ct=Ge;if(ne.ori==1&&(un=Pe,Pt=Ge,Dt=Ee,Ct=He),nr&&ui(H,fo(un,H),fo(un+Pt,H)),Er)for(let qe in D){let pn=D[qe];qe!=H&&pn.from==null&&pn.min!=Zt&&ui(qe,fo(Dt+Ct,qe),fo(Dt,qe))}Ta()}else je.lock&&(je._lock=!je._lock,fu(null,!0,!1));B!=null&&(lo(nA,Z2),yl(nA,r,On,zn,mt,Ke,null))}function js(B,W,Z,J,ie,de,xe){if(je._lock)return;bn(B);let Ee=ai;if(ai){let Pe=!0,He=!0,Ge=10,Ve,Rt;ne.ori==0?(Ve=nr,Rt=Er):(Ve=Er,Rt=nr),Ve&&Rt&&(Pe=On<=Ge||On>=mt-Ge,He=zn<=Ge||zn>=Ke-Ge),Ve&&Pe&&(On=On<Ni?0:mt),Rt&&He&&(zn=zn<_i?0:Ke),fu(null,!0,!0),ai=!1}On=-10,zn=-10,fu(null,!0,!0),Ee&&(ai=Ee)}function gl(B,W,Z,J,ie,de,xe){je._lock||(bn(B),uo(),Ta(),B!=null&&yl(WN,r,On,zn,mt,Ke,null))}function Ef(){R.forEach(Iie),_n(r.width,r.height,!0)}Fd(qx,jp,Ef);const mu={};mu.mousedown=Sf,mu.mousemove=$s,mu.mouseup=pu,mu.dblclick=gl,mu.setSeries=(B,W,Z,J)=>{let ie=Tr.match[2];Z=ie(r,W,Z),Z!=-1&&Yr(Z,J,!0,!1)},je.show&&(Nt($N,v,Sf),Nt(zN,v,$s),Nt(jN,v,B=>{bn(B),$h(!1)}),Nt(HN,v,js),Nt(WN,v,gl),oC.add(r),r.syncRect=$h);const Es=r.hooks=n.hooks||{};function $n(B,W,Z){Dh?Wt.push([B,W,Z]):B in Es&&Es[B].forEach(J=>{J.call(null,r,W,Z)})}(n.plugins||[]).forEach(B=>{for(let W in B.hooks)Es[W]=(Es[W]||[]).concat(B.hooks[W])});const Af=(B,W,Z)=>Z,Tr=ti({key:null,setSeries:!1,filters:{pub:tB,sub:tB},scales:[H,_[1]?_[1].scale:null],match:[nB,nB,Af],values:[null,null]},je.sync);Tr.match.length==2&&Tr.match.push(Af),je.sync=Tr;const Ho=Tr.key,Wo=t5(Ho);function yl(B,W,Z,J,ie,de,xe){Tr.filters.pub(B,W,Z,J,ie,de,xe)&&Wo.pub(B,W,Z,J,ie,de,xe)}Wo.sub(r);function wv(B,W,Z,J,ie,de,xe){Tr.filters.sub(B,W,Z,J,ie,de,xe)&&mu[B](null,W,Z,J,ie,de,xe)}r.pub=wv;function Tf(){Wo.unsub(r),oC.delete(r),Ut.clear(),tC(qx,jp,Ef),h.remove(),ge==null||ge.remove(),$n("destroy")}r.destroy=Tf;function Cf(){$n("init",n,e),nc(e||n.data,!1),A[H]?rg(H,A[H]):uo(),Tt=In.show&&(In.width>0||In.height>0),_t=at=!0,_n(n.width,n.height)}return _.forEach(Dn),R.forEach(yf),t?t instanceof HTMLElement?(t.appendChild(h),Cf()):t(r,Cf):Cf(),r}vs.assign=ti;vs.fmtNum=FR;vs.rangeNum=Xx;vs.rangeLog=hb;vs.rangeAsinh=LR;vs.orient=lf;vs.pxRatio=An;vs.join=wre;vs.fmtDate=zR,vs.tzDate=Pre;vs.sync=t5;{vs.addGap=die,vs.clipGaps=pb;let n=vs.paths={points:a5};n.linear=u5,n.stepped=mie,n.bars=gie,n.spline=vie}const aA=1e4;function Rie(n){var h;const[e,t]=Y.useState(null),[r,i]=Y.useState();Y.useLayoutEffect(()=>{if(!e)return;const f={width:n.width,height:n.height,series:[{},{stroke:"white",spanGaps:!0,pxAlign:0,points:{show:!1},label:"Buffer health"}],scales:{y:{distr:1}},axes:[{side:0,show:!1},{ticks:{size:0},side:1,stroke:"white"}],legend:{show:!1}},p=[[],[]],m=new vs(f,p,e);i(m)},[e,n.width,n.height]);const s=n.timeManager,[o,a]=Y.useState([...s.intervals]);Y.useEffect(()=>{let f=0;const p={t:[],bufferHealth:[]},m=()=>{if(r){p.t.length>aA&&(p.t=p.t.slice(-aA),p.bufferHealth=p.bufferHealth.slice(-aA));const g=Date.now()/1e3;p.t.push(g),p.bufferHealth.push(s.bufferHealth()),a([...s.intervals]),r.setData([p.t,p.bufferHealth],!0),r.setScale("x",{min:g-10,max:g})}f=requestAnimationFrame(m)};return m(),()=>cancelAnimationFrame(f)},[r,s]);let l=null;if(o.length>0){const f=o[0].startTs,p=Date.now()-f;l=q.jsxs("div",{style:{fontSize:"12px"},children:[o.length," ",o.length>1?"intervals":"interval",":",q.jsxs("div",{style:{fontSize:"9px",height:"48px"},children:[q.jsxs("p",{children:["Base: ",Dg(p),"s ago"]}),o.map(m=>{const g=s.prevServerTs&&m.startTs<s.prevServerTs&&s.prevServerTs<=m.endTs;let v=null;return g&&(v=` (server: ${Dg((s.prevServerTs??f)-f)})`),q.jsxs("div",{style:{paddingRight:"3px",fontWeight:g?"bold":""},children:[Dg(m.startTs-f)," - ",Dg(m.endTs-f),v]},m.startTs)})]})]})}let u=null;if(s.latestEngineStatus){const f=s.latestEngineStatus;let p=f.running?"Running":"Stopped";u=q.jsxs("div",{style:{fontSize:"12px",paddingTop:"8px"},children:[q.jsxs("p",{children:["Generation number: ",f.generationNumber]}),q.jsxs("p",{children:["Input number: ",f.processedInputNumber]}),q.jsxs("p",{children:["Status: ",p]}),q.jsxs("p",{children:["Client skew: ",Dg(s.clockSkew()),"s"]})]})}return(h=s.latestEngineStatus)==null||h.generationNumber,q.jsxs("div",{style:{background:"rgb(53, 59, 89)",position:"fixed",top:"20px",left:"20px",padding:"10px",border:"1px solid rgb(23, 20, 33)",color:"white",zIndex:1},children:[q.jsx("div",{style:{height:"20px",width:"100%",textAlign:"center"},children:"Engine stats"}),u,q.jsx("div",{ref:t}),l]})}"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab".match(/.{6}/g).map(n=>`#${n}`);const Dg=n=>(n/1e3).toFixed(2),Pie={agents:"a",conversations:"c",players:"p",operations:"o"};function qn(n,e){const t=e[0],r=Object.entries(Pie).find(([s,o])=>o===t);if(!r||r[0]!==n)throw new Error(`Invalid game ID type: ${t}`);const i=parseInt(e.slice(2),10);if(isNaN(i)||!Number.isInteger(i)||i<0)throw new Error(`Invalid game ID number: ${e}`);return e}const $c=le.string(),Ri=le.string(),qR=le.string();le.string();class kie{constructor(e){tt(this,"agentId");tt(this,"identity");tt(this,"plan");const{agentId:t,identity:r,plan:i}=e;this.agentId=qn("agents",t),this.identity=r,this.plan=i}serialize(){const{agentId:e,identity:t,plan:r}=this;return{agentId:e,identity:t,plan:r}}}le.string(),le.string();le.string(),le.string(),le.string();class f5{constructor(e){tt(this,"playerId");tt(this,"name");tt(this,"description");tt(this,"character");const{playerId:t,name:r,description:i,character:s}=e;this.playerId=qn("players",t),this.name=r,this.description=i,this.character=s}serialize(){const{playerId:e,name:t,description:r,character:i}=this;return{playerId:e,name:t,description:r,character:i}}}function Mie(n){const e=[null];let t=1;return{peek:()=>e[1],length:()=>t-1,push:r=>{let i=t++,s;for(;(s=i>>1)>0;){const o=e[s];if(n(r,o))break;e[i]=o,i=s}e[i]=r},pop:()=>{if(t==1)return;t--;const r=e[1],i=e[t];let s=1,o;for(;(o=s<<1)<t;){o+1<=t&&n(e[o],e[o+1])&&o++;const a=e[o];if(n(a,i))break;e[s]=a,s=o}return e[s]=i,r}}}function Hp(n){delete n.pathfinding,n.speed=0}function Qx(n,e,t,r,i){if(Math.floor(r.x)!==r.x||Math.floor(r.y)!==r.y)throw new Error(`Non-integral destination: ${JSON.stringify(r)}`);const{position:s}=t;if(IR(s,r))return;if([...n.world.conversations.values()].some(a=>{var l;return((l=a.participants.get(t.id))==null?void 0:l.status.kind)==="participating"})&&!i)throw new Error("Can't move when in a conversation. Leave the conversation first!");t.pathfinding={destination:r,started:e,state:{kind:"needsPath"}}}function Oie(n,e,t,r){const i=[],s=g=>{var _,R;const{x:v,y:x}=g.position,b=[];v!==Math.floor(v)&&b.push({position:{x:Math.floor(v),y:x},facing:{dx:-1,dy:0}},{position:{x:Math.floor(v)+1,y:x},facing:{dx:1,dy:0}}),x!==Math.floor(x)&&b.push({position:{x:v,y:Math.floor(x)},facing:{dx:0,dy:-1}},{position:{x:v,y:Math.floor(x)+1},facing:{dx:0,dy:1}}),v==Math.floor(v)&&x==Math.floor(x)&&b.push({position:{x:v+1,y:x},facing:{dx:1,dy:0}},{position:{x:v-1,y:x},facing:{dx:-1,dy:0}},{position:{x:v,y:x+1},facing:{dx:0,dy:1}},{position:{x:v,y:x-1},facing:{dx:0,dy:-1}});const S=[];for(const{position:D,facing:j}of b){const H=la(g.position,D),G=g.length+H;if(dy(n,e,D,t.id))continue;const K=U1(D,r),te={position:D,facing:j,t:g.t+H/oJ*1e3,length:G,cost:G+K,prev:g},ne=(_=i[D.y])==null?void 0:_[D.x];ne&&ne.cost<=te.cost||(i[R=D.y]??(i[R]=[]),i[D.y][D.x]=te,S.push(te))}return S},o=t.position,a={x:o.x,y:o.y};let l={position:a,facing:t.facing,t:e,length:0,cost:U1(a,r),prev:void 0},u=l;const h=Mie((g,v)=>g.cost>v.cost);for(;l&&!IR(l.position,r);){U1(l.position,r)<U1(u.position,r)&&(u=l);for(const g of s(l))h.push(g);l=h.pop()}let f=null;if(!l){if(u.length===0)return null;l=u,f=l.position}const p=[];let m=l.facing;for(;l;)p.push({position:l.position,t:l.t,facing:m}),m=l.facing,l=l.prev;return p.reverse(),{path:sJ(p),newDestination:f}}function dy(n,e,t,r){const i=[...n.world.players.values()].filter(s=>s.id!==r).map(s=>s.position);return Nie(t,i,n.worldMap)}function Nie(n,e,t){if(isNaN(n.x)||isNaN(n.y))throw new Error(`NaN position in ${JSON.stringify(n)}`);if(n.x<0||n.y<0||n.x>=t.width||n.y>=t.height)return"out of bounds";for(const r of t.objectTiles)if(r[Math.floor(n.x)][Math.floor(n.y)]!==-1)return"world blocked";for(const r of e)if(la(r,n)<wne)return"player";return null}const Bie={playerId:Ri,invited:le.number(),status:le.union(le.object({kind:le.literal("invited")}),le.object({kind:le.literal("walkingOver")}),le.object({kind:le.literal("participating"),started:le.number()}))};class Lie{constructor(e){tt(this,"playerId");tt(this,"invited");tt(this,"status");const{playerId:t,invited:r,status:i}=e;this.playerId=qn("players",t),this.invited=r,this.status=i}serialize(){const{playerId:e,invited:t,status:r}=this;return{playerId:e,invited:t,status:r}}}function Wp(n,e,t){const r=new Map;for(const i of n){const s=new e(i),o=t(s);if(r.has(o))throw new Error(`Duplicate ID ${o}`);r.set(o,s)}return r}function Die(n){return[...n.values()].map(e=>e.serialize())}class vb{constructor(e){tt(this,"id");tt(this,"creator");tt(this,"created");tt(this,"isTyping");tt(this,"lastMessage");tt(this,"numMessages");tt(this,"participants");const{id:t,creator:r,created:i,isTyping:s,lastMessage:o,numMessages:a,participants:l}=e;this.id=qn("conversations",t),this.creator=qn("players",r),this.created=i,this.isTyping=s&&{playerId:qn("players",s.playerId),messageUuid:s.messageUuid,since:s.since},this.lastMessage=o&&{author:qn("players",o.author),timestamp:o.timestamp},this.numMessages=a,this.participants=Wp(l,Lie,u=>u.playerId)}tick(e,t){if(this.isTyping&&this.isTyping.since+vne<t&&delete this.isTyping,this.participants.size!==2){console.warn(`Conversation ${this.id} has ${this.participants.size} participants`);return}const[r,i]=[...this.participants.keys()],s=this.participants.get(r),o=this.participants.get(i),a=e.world.players.get(r),l=e.world.players.get(i),u=la(a==null?void 0:a.position,l==null?void 0:l.position);if(s.status.kind==="walkingOver"&&o.status.kind==="walkingOver"&&u<P6){console.log(`Starting conversation between ${a.id} and ${l.id}`),Hp(a),Hp(l),s.status={kind:"participating",started:t},o.status={kind:"participating",started:t};const h=m=>[{x:m.x+1,y:m.y},{x:m.x-1,y:m.y},{x:m.x,y:m.y+1},{x:m.x,y:m.y-1}],f={x:Math.floor(a.position.x),y:Math.floor(a.position.y)},p=h(f).filter(m=>!dy(e,t,m,a.id));if(p.sort((m,g)=>la(m,l.position)-la(g,l.position)),p.length>0){const m=p[0],g=h(m).filter(v=>!dy(e,t,v,l.id));if(g.sort((v,x)=>la(v,l.position)-la(x,l.position)),g.length>0){const v=g[0];Qx(e,t,a,m,!0),Qx(e,t,l,v,!0)}}}if(s.status.kind==="participating"&&o.status.kind==="participating"){const h=rJ(nJ(a.position,l.position));!a.pathfinding&&h&&(a.facing=h),!l.pathfinding&&h&&(l.facing.dx=-h.dx,l.facing.dy=-h.dy)}}static start(e,t,r,i){if(r.id===i.id)throw new Error("Can't invite yourself to a conversation");if([...e.world.conversations.values()].find(o=>o.participants.has(r.id))){const o=`Player ${r.id} is already in a conversation`;return console.log(o),{error:o}}if([...e.world.conversations.values()].find(o=>o.participants.has(i.id))){const o=`Player ${r.id} is already in a conversation`;return console.log(o),{error:o}}const s=e.allocId("conversations");return console.log(`Creating conversation ${s}`),e.world.conversations.set(s,new vb({id:s,created:t,creator:r.id,numMessages:0,participants:[{playerId:r.id,invited:t,status:{kind:"walkingOver"}},{playerId:i.id,invited:t,status:{kind:"invited"}}]})),{conversationId:s}}setIsTyping(e,t,r){if(this.isTyping){if(this.isTyping.playerId!==t.id)throw new Error(`Player ${this.isTyping.playerId} is already typing in ${this.id}`);return}this.isTyping={playerId:t.id,messageUuid:r,since:e}}acceptInvite(e,t){const r=this.participants.get(t.id);if(!r)throw new Error(`Player ${t.id} not in conversation ${this.id}`);if(r.status.kind!=="invited")throw new Error(`Invalid membership status for ${t.id}:${this.id}: ${JSON.stringify(r)}`);r.status={kind:"walkingOver"}}rejectInvite(e,t,r){const i=this.participants.get(r.id);if(!i)throw new Error(`Player ${r.id} not in conversation ${this.id}`);if(i.status.kind!=="invited")throw new Error(`Rejecting invite in wrong membership state: ${this.id}:${r.id}: ${JSON.stringify(i)}`);this.stop(e,t)}stop(e,t){delete this.isTyping;for(const[r,i]of this.participants.entries()){const s=[...e.world.agents.values()].find(o=>o.playerId===r);s&&(s.lastConversation=t,s.toRemember=this.id)}e.world.conversations.delete(this.id)}leave(e,t,r){if(!this.participants.get(r.id))throw new Error(`Couldn't find membership for ${this.id}:${r.id}`);this.stop(e,t)}serialize(){const{id:e,creator:t,created:r,isTyping:i,lastMessage:s,numMessages:o}=this;return{id:e,creator:t,created:r,isTyping:i,lastMessage:s,numMessages:o,participants:Die(this.participants)}}}const Fie={id:$c,creator:Ri,created:le.number(),isTyping:le.optional(le.object({playerId:Ri,messageUuid:le.string(),since:le.number()})),lastMessage:le.optional(le.object({author:Ri,timestamp:le.number()})),numMessages:le.number(),participants:le.array(le.object(Bie))};le.string(),le.number();const Uie=le.object({destination:CR,started:le.number(),state:le.union(le.object({kind:le.literal("needsPath")}),le.object({kind:le.literal("waiting"),until:le.number()}),le.object({kind:le.literal("moving"),path:tJ}))}),zie=le.object({description:le.string(),emoji:le.optional(le.string()),until:le.number()}),lC={id:Ri,human:le.optional(le.string()),pathfinding:le.optional(Uie),activity:le.optional(zie),lastInput:le.number(),position:CR,facing:eJ,speed:le.number()};class wb{constructor(e){tt(this,"id");tt(this,"human");tt(this,"pathfinding");tt(this,"activity");tt(this,"lastInput");tt(this,"position");tt(this,"facing");tt(this,"speed");const{id:t,human:r,pathfinding:i,activity:s,lastInput:o,position:a,facing:l,speed:u}=e;this.id=qn("players",t),this.human=r,this.pathfinding=i,this.activity=s,this.lastInput=o,this.position=a,this.facing=l,this.speed=u}tick(e,t){this.human&&this.lastInput<t-Cne&&this.leave(e,t)}tickPathfinding(e,t){const{pathfinding:r,position:i}=this;if(r&&(r.state.kind==="moving"&&IR(r.destination,i)&&Hp(this),r.started+mne<t&&(console.warn(`Timing out pathfinding for ${this.id}`),Hp(this)),r.state.kind==="waiting"&&r.state.until<t&&(r.state={kind:"needsPath"}),r.state.kind==="needsPath"&&e.numPathfinds<LN)){e.numPathfinds++,e.numPathfinds===LN&&console.warn("Reached max pathfinds for this step");const s=Oie(e,t,this,r.destination);s===null?(console.log(`Failed to route to ${JSON.stringify(r.destination)}`),Hp(this)):(s.newDestination&&(console.warn(`Updating destination from ${JSON.stringify(r.destination)} to ${JSON.stringify(s.newDestination)}`),r.destination=s.newDestination),r.state={kind:"moving",path:s.path})}}tickPosition(e,t){if(!this.pathfinding||this.pathfinding.state.kind!=="moving"){this.speed=0;return}const r=UU(this.pathfinding.state.path,t);if(!r){console.warn(`Path out of range of ${t} for ${this.id}`);return}const{position:i,facing:s,velocity:o}=r,a=dy(e,t,i,this.id);if(a!==null){const l=Math.random()*gne;console.warn(`Stopping path for ${this.id}, waiting for ${l}ms: ${a}`),this.pathfinding.state={kind:"waiting",until:t+l};return}this.position=i,this.facing=s,this.speed=o}static join(e,t,r,i,s,o){if(o){let f=0;for(const p of e.world.players.values())if(p.human&&f++,p.human===o)throw new Error("You are already in this game!");if(f>=Y2)throw new Error(`Only ${Y2} human players allowed at once.`)}let a;for(let f=0;f<10;f++){const p={x:Math.floor(Math.random()*e.worldMap.width),y:Math.floor(Math.random()*e.worldMap.height)};if(!dy(e,t,p)){a=p;break}}if(!a)throw new Error("Failed to find a free position!");const l=[{dx:1,dy:0},{dx:-1,dy:0},{dx:0,dy:1},{dx:0,dy:-1}],u=l[Math.floor(Math.random()*l.length)];if(!$U.find(f=>f.name===i))throw new Error(`Invalid character: ${i}`);const h=e.allocId("players");return e.world.players.set(h,new wb({id:h,human:o,lastInput:t,position:a,facing:u,speed:0})),e.playerDescriptions.set(h,new f5({playerId:h,character:i,description:s,name:r})),e.descriptionsModified=!0,h}leave(e,t){const r=[...e.world.conversations.values()].find(i=>i.participants.has(this.id));r&&r.stop(e,t),e.world.players.delete(this.id)}serialize(){const{id:e,human:t,pathfinding:r,activity:i,lastInput:s,position:o,facing:a,speed:l}=this;return{id:e,human:t,pathfinding:r,activity:i,lastInput:s,position:o,facing:a,speed:l}}}le.string(),le.string(),le.string(),le.optional(le.string()),le.union(CR,le.null());const p5=Qte,$ie=Xte,jie=le.object({engineId:le.id("engines"),number:le.number(),name:le.string(),args:le.any(),returnValue:le.optional(le.union(le.object({kind:le.literal("ok"),value:le.any()}),le.object({kind:le.literal("error"),message:le.string()}))),received:le.number()}),m5=le.object({currentTime:le.optional(le.number()),lastStepTs:le.optional(le.number()),processedInputNumber:le.optional(le.number()),running:le.boolean(),generationNumber:le.number()});Gx(jie).index("byInputNumber",["engineId","number"]),Gx(m5);const Hie=le.object({inputId:le.id("inputs"),returnValue:le.union(le.object({kind:le.literal("ok"),value:le.any()}),le.object({kind:le.literal("error"),message:le.string()}))});le.object({engine:m5,expectedGenerationNumber:le.number(),completedInputs:le.array(Hie)});async function Wie(n,e,t,r){const i=Date.now(),s=await n.db.query("inputs").withIndex("byInputNumber",l=>l.eq("engineId",e)).order("desc").first(),o=s?s.number+1:0;return await n.db.insert("inputs",{engineId:e,number:o,name:t,args:r,received:i})}p5({args:{engineId:le.id("engines"),processedInputNumber:le.optional(le.number()),max:le.number()},handler:async(n,e)=>await n.db.query("inputs").withIndex("byInputNumber",t=>t.eq("engineId",e.engineId).gt("number",e.processedInputNumber??-1)).order("asc").take(e.max)});async function Gie(n,e,t,r){const i=await n.db.query("worldStatus").withIndex("worldId",s=>s.eq("worldId",e)).unique();if(!i)throw new Error(`World for engine ${e} not found`);return await Wie(n,i.engineId,t,r)}class Vie{constructor(e){tt(this,"id");tt(this,"playerId");tt(this,"toRemember");tt(this,"lastConversation");tt(this,"lastInviteAttempt");tt(this,"inProgressOperation");const{id:t,lastConversation:r,lastInviteAttempt:i,inProgressOperation:s}=e,o=qn("players",e.playerId);this.id=qn("agents",t),this.playerId=o,this.toRemember=e.toRemember!==void 0?qn("conversations",e.toRemember):void 0,this.lastConversation=r,this.lastInviteAttempt=i,this.inProgressOperation=s}tick(e,t){const r=e.world.players.get(this.playerId);if(!r)throw new Error(`Invalid player ID ${this.playerId}`);if(this.inProgressOperation){if(t<this.inProgressOperation.started+pne)return;console.log(`Timing out ${JSON.stringify(this.inProgressOperation)}`),delete this.inProgressOperation}const i=e.world.playerConversation(r),s=i==null?void 0:i.participants.get(r.id),o=this.lastInviteAttempt&&t<this.lastInviteAttempt+xne,a=r.activity&&r.activity.until>t;if(a&&(i||r.pathfinding)&&(r.activity.until=t),!i&&!a&&(!r.pathfinding||!o)){this.startOperation(e,t,"agentDoSomething",{worldId:e.worldId,player:r.serialize(),otherFreePlayers:[...e.world.players.values()].filter(l=>l.id!==r.id).filter(l=>![...e.world.conversations.values()].find(u=>u.participants.has(l.id))).map(l=>l.serialize()),agent:this.serialize(),map:e.worldMap.serialize()});return}if(this.toRemember){console.log(`Agent ${this.id} remembering conversation ${this.toRemember}`),this.startOperation(e,t,"agentRememberConversation",{worldId:e.worldId,playerId:this.playerId,agentId:this.id,conversationId:this.toRemember}),delete this.toRemember;return}if(i&&s){const[l,u]=[...i.participants.entries()].find(([f])=>f!==r.id),h=e.world.players.get(l);if(s.status.kind==="invited"){h.human||Math.random()<bne?(console.log(`Agent ${r.id} accepting invite from ${h.id}`),i.acceptInvite(e,r),r.pathfinding&&delete r.pathfinding):(console.log(`Agent ${r.id} rejecting invite from ${h.id}`),i.rejectInvite(e,t,r));return}if(s.status.kind==="walkingOver"){if(s.invited+Sne<t){console.log(`Giving up on invite to ${h.id}`),i.leave(e,t,r);return}const f=la(r.position,h.position);if(f<P6)return;if(!r.pathfinding){let p;f<yne?p={x:Math.floor(h.position.x),y:Math.floor(h.position.y)}:p={x:Math.floor((r.position.x+h.position.x)/2),y:Math.floor((r.position.y+h.position.y)/2)},console.log(`Agent ${r.id} walking towards ${h.id}...`,p),Qx(e,t,r,p)}return}if(s.status.kind==="participating"){const f=s.status.started;if(i.isTyping&&i.isTyping.playerId!==r.id)return;if(!i.lastMessage){const v=i.creator===r.id,x=f+BN;if(v||x<t){console.log(`${r.id} initiating conversation with ${h.id}.`);const b=crypto.randomUUID();i.setIsTyping(t,r,b),this.startOperation(e,t,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:h.id,messageUuid:b,type:"start"});return}else return}if(f+Ene<t||i.numMessages>Ane){console.log(`${r.id} leaving conversation with ${h.id}.`);const v=crypto.randomUUID();i.setIsTyping(t,r,v),this.startOperation(e,t,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:h.id,messageUuid:v,type:"leave"});return}if(i.lastMessage.author===r.id){const v=i.lastMessage.timestamp+BN;if(t<v)return}const m=i.lastMessage.timestamp+Tne;if(t<m)return;console.log(`${r.id} continuing conversation with ${h.id}.`);const g=crypto.randomUUID();i.setIsTyping(t,r,g),this.startOperation(e,t,"agentGenerateMessage",{worldId:e.worldId,playerId:r.id,agentId:this.id,conversationId:i.id,otherPlayerId:h.id,messageUuid:g,type:"continue"});return}}}startOperation(e,t,r,i){if(this.inProgressOperation)throw new Error(`Agent ${this.id} already has an operation: ${JSON.stringify(this.inProgressOperation)}`);const s=e.allocId("operations");console.log(`Agent ${this.id} starting operation ${r} (${s})`),e.scheduleOperation(r,{operationId:s,...i}),this.inProgressOperation={name:r,operationId:s,started:t}}serialize(){return{id:this.id,playerId:this.playerId,toRemember:this.toRemember,lastConversation:this.lastConversation,lastInviteAttempt:this.lastInviteAttempt,inProgressOperation:this.inProgressOperation}}}const qie={id:qR,playerId:Ri,toRemember:le.optional($c),lastConversation:le.optional(le.number()),lastInviteAttempt:le.optional(le.number()),inProgressOperation:le.optional(le.object({name:le.string(),operationId:le.string(),started:le.number()}))};$ie({args:{worldId:le.id("worlds"),conversationId:$c,agentId:qR,playerId:Ri,text:le.string(),messageUuid:le.string(),leaveConversation:le.boolean(),operationId:le.string()},handler:async(n,e)=>{await n.db.insert("messages",{conversationId:e.conversationId,author:e.playerId,text:e.text,messageUuid:e.messageUuid,worldId:e.worldId}),await Gie(n,e.worldId,"agentFinishSendingMessage",{conversationId:e.conversationId,agentId:e.agentId,timestamp:Date.now(),leaveConversation:e.leaveConversation,operationId:e.operationId})}});p5({args:{now:le.number(),worldId:le.id("worlds"),player:le.object(lC),otherFreePlayers:le.array(le.object(lC))},handler:async(n,{now:e,worldId:t,player:r,otherFreePlayers:i})=>{var a;const{position:s}=r,o=[];for(const l of i){const u=await n.db.query("participatedTogether").withIndex("edge",h=>h.eq("worldId",t).eq("player1",r.id).eq("player2",l.id)).order("desc").first();u&&e<u.ended+_ne||o.push({id:l.id,position:s})}return o.sort((l,u)=>la(l.position,s)-la(u.position,s)),(a=o[0])==null?void 0:a.id}});const Xie=le.array(le.object({playerId:Ri,location:le.bytes()}));le.number(),le.array(le.object(Fie)),le.array(le.object(lC)),le.array(le.object(qie)),le.optional(Xie);class Kie{constructor(e){tt(this,"nextId");tt(this,"conversations");tt(this,"players");tt(this,"agents");tt(this,"historicalLocations");const{nextId:t,historicalLocations:r}=e;if(this.nextId=t,this.conversations=Wp(e.conversations,vb,i=>i.id),this.players=Wp(e.players,wb,i=>i.id),this.agents=Wp(e.agents,Vie,i=>i.id),r){this.historicalLocations=new Map;for(const{playerId:i,location:s}of r)this.historicalLocations.set(qn("players",i),s)}}playerConversation(e){return[...this.conversations.values()].find(t=>t.participants.has(e.id))}serialize(){return{nextId:this.nextId,conversations:[...this.conversations.values()].map(e=>e.serialize()),players:[...this.players.values()].map(e=>e.serialize()),agents:[...this.agents.values()].map(e=>e.serialize()),historicalLocations:this.historicalLocations&&[...this.historicalLocations.entries()].map(([e,t])=>({playerId:e,location:t}))}}}const Qie=le.array(le.array(le.number())),Yie={x:le.number(),y:le.number(),w:le.number(),h:le.number(),layer:le.number(),sheet:le.string(),animation:le.string()};le.number(),le.number(),le.string(),le.number(),le.number(),le.number(),le.array(le.array(le.array(le.number()))),le.array(Qie),le.array(le.object(Yie));class Zie{constructor(e){tt(this,"width");tt(this,"height");tt(this,"tileSetUrl");tt(this,"tileSetDimX");tt(this,"tileSetDimY");tt(this,"tileDim");tt(this,"bgTiles");tt(this,"objectTiles");tt(this,"animatedSprites");this.width=e.width,this.height=e.height,this.tileSetUrl=e.tileSetUrl,this.tileSetDimX=e.tileSetDimX,this.tileSetDimY=e.tileSetDimY,this.tileDim=e.tileDim,this.bgTiles=e.bgTiles,this.objectTiles=e.objectTiles,this.animatedSprites=e.animatedSprites}serialize(){return{width:this.width,height:this.height,tileSetUrl:this.tileSetUrl,tileSetDimX:this.tileSetDimX,tileSetDimY:this.tileSetDimY,tileDim:this.tileDim,bgTiles:this.bgTiles,objectTiles:this.objectTiles,animatedSprites:this.animatedSprites}}}function Jie(n){const e=wa(bs.world.worldState,n?{worldId:n}:"skip"),t=wa(bs.world.gameDescriptions,n?{worldId:n}:"skip");return Y.useMemo(()=>{if(!(!e||!t))return{world:new Kie(e.world),agentDescriptions:Wp(t.agentDescriptions,kie,i=>i.agentId),playerDescriptions:Wp(t.playerDescriptions,f5,i=>i.playerId),worldMap:new Zie(t.worldMap)}},[e,t])}const g5=!!{}.VITE_SHOW_DEBUG_UI;function ese(){const n=MR(),[e,t]=Y.useState(),[r,{width:i,height:s}]=cne(),o=wa(bs.world.defaultWorldStatus),a=o==null?void 0:o.worldId,l=o==null?void 0:o.engineId,u=Jie(a);Ine();const h=wa(bs.world.worldState,a?{worldId:a}:"skip"),{historicalTime:f,timeManager:p}=Rne(h==null?void 0:h.engine),m=Y.useRef(null);return!a||!l||!u?null:q.jsxs(q.Fragment,{children:[g5&&q.jsx(Rie,{timeManager:p,width:200,height:100}),q.jsxs("div",{className:"mx-auto w-full max-w grid grid-rows-[240px_1fr] lg:grid-rows-[1fr] lg:grid-cols-[1fr_auto] lg:grow max-w-[1400px] min-h-[480px] game-frame",children:[q.jsx("div",{className:"relative overflow-hidden bg-brown-900",ref:r,children:q.jsx("div",{className:"absolute inset-0",children:q.jsx("div",{className:"container",children:q.jsx(Co.Stage,{width:i??0,height:s??0,options:{backgroundColor:8041983},children:q.jsx(h6,{client:n,children:q.jsx(one,{game:u,worldId:a,engineId:l,width:i??0,height:s??0,historicalTime:f,setSelectedElement:t})})})})})}),q.jsx("div",{className:"flex flex-col overflow-y-auto shrink-0 px-4 py-6 sm:px-6 lg:w-96 xl:pr-6 border-t-8 sm:border-t-0 sm:border-l-8 border-brown-900  bg-brown-800 text-brown-100",ref:m,children:q.jsx(fne,{worldId:a,engineId:l,game:u,playerId:e==null?void 0:e.id,setSelectedElement:t,scrollViewRef:m})})]})]})}const tse="/assets/help-80bbbbb2.svg";var uC={exports:{}},Zd={},cC={exports:{}},ol={},hC={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=h;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var t="none",r="contents",i=/input|select|textarea|button|object|iframe/;function s(f,p){return p.getPropertyValue("overflow")!=="visible"||f.scrollWidth<=0&&f.scrollHeight<=0}function o(f){var p=f.offsetWidth<=0&&f.offsetHeight<=0;if(p&&!f.innerHTML)return!0;try{var m=window.getComputedStyle(f),g=m.getPropertyValue("display");return p?g!==r&&s(f,m):g===t}catch{return console.warn("Failed to inspect element style"),!1}}function a(f){for(var p=f,m=f.getRootNode&&f.getRootNode();p&&p!==document.body;){if(m&&p===m&&(p=m.host.parentNode),o(p))return!1;p=p.parentNode}return!0}function l(f,p){var m=f.nodeName.toLowerCase(),g=i.test(m)&&!f.disabled||m==="a"&&f.href||p;return g&&a(f)}function u(f){var p=f.getAttribute("tabindex");p===null&&(p=void 0);var m=isNaN(p);return(m||p>=0)&&l(f,!m)}function h(f){var p=[].slice.call(f.querySelectorAll("*"),0).reduce(function(m,g){return m.concat(g.shadowRoot?h(g.shadowRoot):[g])},[]);return p.filter(u)}n.exports=e.default})(hC,hC.exports);var y5=hC.exports;Object.defineProperty(ol,"__esModule",{value:!0});ol.resetState=sse;ol.log=ose;ol.handleBlur=fy;ol.handleFocus=py;ol.markForFocusLater=ase;ol.returnFocus=lse;ol.popWithoutFocus=use;ol.setupScopedFocus=cse;ol.teardownScopedFocus=hse;var nse=y5,rse=ise(nse);function ise(n){return n&&n.__esModule?n:{default:n}}var Tm=[],_p=null,dC=!1;function sse(){Tm=[]}function ose(){}function fy(){dC=!0}function py(){if(dC){if(dC=!1,!_p)return;setTimeout(function(){if(!_p.contains(document.activeElement)){var n=(0,rse.default)(_p)[0]||_p;n.focus()}},0)}}function ase(){Tm.push(document.activeElement)}function lse(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=null;try{Tm.length!==0&&(e=Tm.pop(),e.focus({preventScroll:n}));return}catch{console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}}function use(){Tm.length>0&&Tm.pop()}function cse(n){_p=n,window.addEventListener?(window.addEventListener("blur",fy,!1),document.addEventListener("focus",py,!0)):(window.attachEvent("onBlur",fy),document.attachEvent("onFocus",py))}function hse(){_p=null,window.addEventListener?(window.removeEventListener("blur",fy),document.removeEventListener("focus",py)):(window.detachEvent("onBlur",fy),document.detachEvent("onFocus",py))}var fC={exports:{}};(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var t=y5,r=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function s(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return a.activeElement.shadowRoot?s(a.activeElement.shadowRoot):a.activeElement}function o(a,l){var u=(0,r.default)(a);if(!u.length){l.preventDefault();return}var h=void 0,f=l.shiftKey,p=u[0],m=u[u.length-1],g=s();if(a===g){if(!f)return;h=m}if(m===g&&!f&&(h=p),p===g&&f&&(h=m),h){l.preventDefault(),h.focus();return}var v=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),x=v!=null&&v[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(x){var b=u.indexOf(g);if(b>-1&&(b+=f?-1:1),h=u[b],typeof h>"u"){l.preventDefault(),h=f?m:p,h.focus();return}l.preventDefault(),h.focus()}}n.exports=e.default})(fC,fC.exports);var dse=fC.exports,al={},fse=function(){},pse=fse,Za={},v5={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/(function(n){(function(){var e=!!(typeof window<"u"&&window.document&&window.document.createElement),t={canUseDOM:e,canUseWorkers:typeof Worker<"u",canUseEventListeners:e&&!!(window.addEventListener||window.attachEvent),canUseViewport:e&&!!window.screen};n.exports?n.exports=t:window.ExecutionEnvironment=t})()})(v5);var mse=v5.exports;Object.defineProperty(Za,"__esModule",{value:!0});Za.canUseDOM=Za.SafeNodeList=Za.SafeHTMLCollection=void 0;var gse=mse,yse=vse(gse);function vse(n){return n&&n.__esModule?n:{default:n}}var xb=yse.default,wse=xb.canUseDOM?window.HTMLElement:{};Za.SafeHTMLCollection=xb.canUseDOM?window.HTMLCollection:{};Za.SafeNodeList=xb.canUseDOM?window.NodeList:{};Za.canUseDOM=xb.canUseDOM;Za.default=wse;Object.defineProperty(al,"__esModule",{value:!0});al.resetState=Ese;al.log=Ase;al.assertNodeList=w5;al.setElement=Tse;al.validateElement=XR;al.hide=Cse;al.show=Ise;al.documentNotReadyOrSSRTesting=Rse;var xse=pse,_se=Sse(xse),bse=Za;function Sse(n){return n&&n.__esModule?n:{default:n}}var ra=null;function Ese(){ra&&(ra.removeAttribute?ra.removeAttribute("aria-hidden"):ra.length!=null?ra.forEach(function(n){return n.removeAttribute("aria-hidden")}):document.querySelectorAll(ra).forEach(function(n){return n.removeAttribute("aria-hidden")})),ra=null}function Ase(){}function w5(n,e){if(!n||!n.length)throw new Error("react-modal: No elements were found for selector "+e+".")}function Tse(n){var e=n;if(typeof e=="string"&&bse.canUseDOM){var t=document.querySelectorAll(e);w5(t,e),e=t}return ra=e||ra,ra}function XR(n){var e=n||ra;return e?Array.isArray(e)||e instanceof HTMLCollection||e instanceof NodeList?e:[e]:((0,_se.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function Cse(n){var e=!0,t=!1,r=void 0;try{for(var i=XR(n)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.setAttribute("aria-hidden","true")}}catch(a){t=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function Ise(n){var e=!0,t=!1,r=void 0;try{for(var i=XR(n)[Symbol.iterator](),s;!(e=(s=i.next()).done);e=!0){var o=s.value;o.removeAttribute("aria-hidden")}}catch(a){t=!0,r=a}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}function Rse(){ra=null}var Wm={};Object.defineProperty(Wm,"__esModule",{value:!0});Wm.resetState=Pse;Wm.log=kse;var P0={},k0={};function EB(n,e){n.classList.remove(e)}function Pse(){var n=document.getElementsByTagName("html")[0];for(var e in P0)EB(n,P0[e]);var t=document.body;for(var r in k0)EB(t,k0[r]);P0={},k0={}}function kse(){}var Mse=function(e,t){return e[t]||(e[t]=0),e[t]+=1,t},Ose=function(e,t){return e[t]&&(e[t]-=1),t},Nse=function(e,t,r){r.forEach(function(i){Mse(t,i),e.add(i)})},Bse=function(e,t,r){r.forEach(function(i){Ose(t,i),t[i]===0&&e.remove(i)})};Wm.add=function(e,t){return Nse(e.classList,e.nodeName.toLowerCase()=="html"?P0:k0,t.split(" "))};Wm.remove=function(e,t){return Bse(e.classList,e.nodeName.toLowerCase()=="html"?P0:k0,t.split(" "))};var Gm={};Object.defineProperty(Gm,"__esModule",{value:!0});Gm.log=Dse;Gm.resetState=Fse;function Lse(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var x5=function n(){var e=this;Lse(this,n),this.register=function(t){e.openInstances.indexOf(t)===-1&&(e.openInstances.push(t),e.emit("register"))},this.deregister=function(t){var r=e.openInstances.indexOf(t);r!==-1&&(e.openInstances.splice(r,1),e.emit("deregister"))},this.subscribe=function(t){e.subscribers.push(t)},this.emit=function(t){e.subscribers.forEach(function(r){return r(t,e.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},Yx=new x5;function Dse(){console.log("portalOpenInstances ----------"),console.log(Yx.openInstances.length),Yx.openInstances.forEach(function(n){return console.log(n)}),console.log("end portalOpenInstances ----------")}function Fse(){Yx=new x5}Gm.default=Yx;var KR={};Object.defineProperty(KR,"__esModule",{value:!0});KR.resetState=jse;KR.log=Hse;var Use=Gm,zse=$se(Use);function $se(n){return n&&n.__esModule?n:{default:n}}var fs=void 0,Da=void 0,Ud=[];function jse(){for(var n=[fs,Da],e=0;e<n.length;e++){var t=n[e];t&&t.parentNode&&t.parentNode.removeChild(t)}fs=Da=null,Ud=[]}function Hse(){console.log("bodyTrap ----------"),console.log(Ud.length);for(var n=[fs,Da],e=0;e<n.length;e++){var t=n[e],r=t||{};console.log(r.nodeName,r.className,r.id)}console.log("edn bodyTrap ----------")}function AB(){Ud.length!==0&&Ud[Ud.length-1].focusContent()}function Wse(n,e){!fs&&!Da&&(fs=document.createElement("div"),fs.setAttribute("data-react-modal-body-trap",""),fs.style.position="absolute",fs.style.opacity="0",fs.setAttribute("tabindex","0"),fs.addEventListener("focus",AB),Da=fs.cloneNode(),Da.addEventListener("focus",AB)),Ud=e,Ud.length>0?(document.body.firstChild!==fs&&document.body.insertBefore(fs,document.body.firstChild),document.body.lastChild!==Da&&document.body.appendChild(Da)):(fs.parentElement&&fs.parentElement.removeChild(fs),Da.parentElement&&Da.parentElement.removeChild(Da))}zse.default.subscribe(Wse);(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(w){for(var A=1;A<arguments.length;A++){var O=arguments[A];for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(w[C]=O[C])}return w},r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},i=function(){function w(A,O){for(var C=0;C<O.length;C++){var k=O[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(A,k.key,k)}}return function(A,O,C){return O&&w(A.prototype,O),C&&w(A,C),A}}(),s=Y,o=fR,a=D(o),l=ol,u=R(l),h=dse,f=D(h),p=al,m=R(p),g=Wm,v=R(g),x=Za,b=D(x),S=Gm,_=D(S);function R(w){if(w&&w.__esModule)return w;var A={};if(w!=null)for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(A[O]=w[O]);return A.default=w,A}function D(w){return w&&w.__esModule?w:{default:w}}function j(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function H(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function G(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var K={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},te=function(A){return A.code==="Tab"||A.keyCode===9},ne=function(A){return A.code==="Escape"||A.keyCode===27},ee=0,L=function(w){G(A,w);function A(O){j(this,A);var C=H(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,O));return C.setOverlayRef=function(k){C.overlay=k,C.props.overlayRef&&C.props.overlayRef(k)},C.setContentRef=function(k){C.content=k,C.props.contentRef&&C.props.contentRef(k)},C.afterClose=function(){var k=C.props,U=k.appElement,z=k.ariaHideApp,N=k.htmlOpenClassName,T=k.bodyOpenClassName,V=k.parentSelector,oe=V&&V().ownerDocument||document;T&&v.remove(oe.body,T),N&&v.remove(oe.getElementsByTagName("html")[0],N),z&&ee>0&&(ee-=1,ee===0&&m.show(U)),C.props.shouldFocusAfterRender&&(C.props.shouldReturnFocusAfterClose?(u.returnFocus(C.props.preventScroll),u.teardownScopedFocus()):u.popWithoutFocus()),C.props.onAfterClose&&C.props.onAfterClose(),_.default.deregister(C)},C.open=function(){C.beforeOpen(),C.state.afterOpen&&C.state.beforeClose?(clearTimeout(C.closeTimer),C.setState({beforeClose:!1})):(C.props.shouldFocusAfterRender&&(u.setupScopedFocus(C.node),u.markForFocusLater()),C.setState({isOpen:!0},function(){C.openAnimationFrame=requestAnimationFrame(function(){C.setState({afterOpen:!0}),C.props.isOpen&&C.props.onAfterOpen&&C.props.onAfterOpen({overlayEl:C.overlay,contentEl:C.content})})}))},C.close=function(){C.props.closeTimeoutMS>0?C.closeWithTimeout():C.closeWithoutTimeout()},C.focusContent=function(){return C.content&&!C.contentHasFocus()&&C.content.focus({preventScroll:!0})},C.closeWithTimeout=function(){var k=Date.now()+C.props.closeTimeoutMS;C.setState({beforeClose:!0,closesAt:k},function(){C.closeTimer=setTimeout(C.closeWithoutTimeout,C.state.closesAt-Date.now())})},C.closeWithoutTimeout=function(){C.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},C.afterClose)},C.handleKeyDown=function(k){te(k)&&(0,f.default)(C.content,k),C.props.shouldCloseOnEsc&&ne(k)&&(k.stopPropagation(),C.requestClose(k))},C.handleOverlayOnClick=function(k){C.shouldClose===null&&(C.shouldClose=!0),C.shouldClose&&C.props.shouldCloseOnOverlayClick&&(C.ownerHandlesClose()?C.requestClose(k):C.focusContent()),C.shouldClose=null},C.handleContentOnMouseUp=function(){C.shouldClose=!1},C.handleOverlayOnMouseDown=function(k){!C.props.shouldCloseOnOverlayClick&&k.target==C.overlay&&k.preventDefault()},C.handleContentOnClick=function(){C.shouldClose=!1},C.handleContentOnMouseDown=function(){C.shouldClose=!1},C.requestClose=function(k){return C.ownerHandlesClose()&&C.props.onRequestClose(k)},C.ownerHandlesClose=function(){return C.props.onRequestClose},C.shouldBeClosed=function(){return!C.state.isOpen&&!C.state.beforeClose},C.contentHasFocus=function(){return document.activeElement===C.content||C.content.contains(document.activeElement)},C.buildClassName=function(k,U){var z=(typeof U>"u"?"undefined":r(U))==="object"?U:{base:K[k],afterOpen:K[k]+"--after-open",beforeClose:K[k]+"--before-close"},N=z.base;return C.state.afterOpen&&(N=N+" "+z.afterOpen),C.state.beforeClose&&(N=N+" "+z.beforeClose),typeof U=="string"&&U?N+" "+U:N},C.attributesFromObject=function(k,U){return Object.keys(U).reduce(function(z,N){return z[k+"-"+N]=U[N],z},{})},C.state={afterOpen:!1,beforeClose:!1},C.shouldClose=null,C.moveFromContentToOverlay=null,C}return i(A,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(C,k){this.props.isOpen&&!C.isOpen?this.open():!this.props.isOpen&&C.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!k.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var C=this.props,k=C.appElement,U=C.ariaHideApp,z=C.htmlOpenClassName,N=C.bodyOpenClassName,T=C.parentSelector,V=T&&T().ownerDocument||document;N&&v.add(V.body,N),z&&v.add(V.getElementsByTagName("html")[0],z),U&&(ee+=1,m.hide(k)),_.default.register(this)}},{key:"render",value:function(){var C=this.props,k=C.id,U=C.className,z=C.overlayClassName,N=C.defaultStyles,T=C.children,V=U?{}:N.content,oe=z?{}:N.overlay;if(this.shouldBeClosed())return null;var ge={ref:this.setOverlayRef,className:this.buildClassName("overlay",z),style:t({},oe,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},we=t({id:k,ref:this.setContentRef,style:t({},V,this.props.style.content),className:this.buildClassName("content",U),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",t({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),Re=this.props.contentElement(we,T);return this.props.overlayElement(ge,Re)}}]),A}(s.Component);L.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},L.propTypes={isOpen:a.default.bool.isRequired,defaultStyles:a.default.shape({content:a.default.object,overlay:a.default.object}),style:a.default.shape({content:a.default.object,overlay:a.default.object}),className:a.default.oneOfType([a.default.string,a.default.object]),overlayClassName:a.default.oneOfType([a.default.string,a.default.object]),parentSelector:a.default.func,bodyOpenClassName:a.default.string,htmlOpenClassName:a.default.string,ariaHideApp:a.default.bool,appElement:a.default.oneOfType([a.default.instanceOf(b.default),a.default.instanceOf(x.SafeHTMLCollection),a.default.instanceOf(x.SafeNodeList),a.default.arrayOf(a.default.instanceOf(b.default))]),onAfterOpen:a.default.func,onAfterClose:a.default.func,onRequestClose:a.default.func,closeTimeoutMS:a.default.number,shouldFocusAfterRender:a.default.bool,shouldCloseOnOverlayClick:a.default.bool,shouldReturnFocusAfterClose:a.default.bool,preventScroll:a.default.bool,role:a.default.string,contentLabel:a.default.string,aria:a.default.object,data:a.default.object,children:a.default.node,shouldCloseOnEsc:a.default.bool,overlayRef:a.default.func,contentRef:a.default.func,id:a.default.string,overlayElement:a.default.func,contentElement:a.default.func,testId:a.default.string},e.default=L,n.exports=e.default})(cC,cC.exports);var Gse=cC.exports;function _5(){var n=this.constructor.getDerivedStateFromProps(this.props,this.state);n!=null&&this.setState(n)}function b5(n){function e(t){var r=this.constructor.getDerivedStateFromProps(n,t);return r??null}this.setState(e.bind(this))}function S5(n,e){try{var t=this.props,r=this.state;this.props=n,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(t,r)}finally{this.props=t,this.state=r}}_5.__suppressDeprecationWarning=!0;b5.__suppressDeprecationWarning=!0;S5.__suppressDeprecationWarning=!0;function Vse(n){var e=n.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if(typeof n.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function")return n;var t=null,r=null,i=null;if(typeof e.componentWillMount=="function"?t="componentWillMount":typeof e.UNSAFE_componentWillMount=="function"&&(t="UNSAFE_componentWillMount"),typeof e.componentWillReceiveProps=="function"?r="componentWillReceiveProps":typeof e.UNSAFE_componentWillReceiveProps=="function"&&(r="UNSAFE_componentWillReceiveProps"),typeof e.componentWillUpdate=="function"?i="componentWillUpdate":typeof e.UNSAFE_componentWillUpdate=="function"&&(i="UNSAFE_componentWillUpdate"),t!==null||r!==null||i!==null){var s=n.displayName||n.name,o=typeof n.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+s+" uses "+o+" but also contains the following legacy lifecycles:"+(t!==null?`
  `+t:"")+(r!==null?`
  `+r:"")+(i!==null?`
  `+i:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof n.getDerivedStateFromProps=="function"&&(e.componentWillMount=_5,e.componentWillReceiveProps=b5),typeof e.getSnapshotBeforeUpdate=="function"){if(typeof e.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=S5;var a=e.componentDidUpdate;e.componentDidUpdate=function(u,h,f){var p=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;a.call(this,u,h,p)}}return n}const qse=Object.freeze(Object.defineProperty({__proto__:null,polyfill:Vse},Symbol.toStringTag,{value:"Module"})),Xse=Lm(qse);Object.defineProperty(Zd,"__esModule",{value:!0});Zd.bodyOpenClassName=Zd.portalClassName=void 0;var TB=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kse=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),E5=Y,Zx=Qy(E5),Qse=KI,Jx=Qy(Qse),Yse=fR,Lt=Qy(Yse),Zse=Gse,CB=Qy(Zse),Jse=al,eoe=noe(Jse),nh=Za,IB=Qy(nh),toe=Xse;function noe(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function Qy(n){return n&&n.__esModule?n:{default:n}}function roe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function RB(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function ioe(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var soe=Zd.portalClassName="ReactModalPortal",ooe=Zd.bodyOpenClassName="ReactModal__Body--open",ad=nh.canUseDOM&&Jx.default.createPortal!==void 0,PB=function(e){return document.createElement(e)},kB=function(){return ad?Jx.default.createPortal:Jx.default.unstable_renderSubtreeIntoContainer};function K1(n){return n()}var Yy=function(n){ioe(e,n);function e(){var t,r,i,s;roe(this,e);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return s=(r=(i=RB(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),i),i.removePortal=function(){!ad&&Jx.default.unmountComponentAtNode(i.node);var u=K1(i.props.parentSelector);u&&u.contains(i.node)?u.removeChild(i.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},i.portalRef=function(u){i.portal=u},i.renderPortal=function(u){var h=kB(),f=h(i,Zx.default.createElement(CB.default,TB({defaultStyles:e.defaultStyles},u)),i.node);i.portalRef(f)},r),RB(i,s)}return Kse(e,[{key:"componentDidMount",value:function(){if(nh.canUseDOM){ad||(this.node=PB("div")),this.node.className=this.props.portalClassName;var r=K1(this.props.parentSelector);r.appendChild(this.node),!ad&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(r){var i=K1(r.parentSelector),s=K1(this.props.parentSelector);return{prevParent:i,nextParent:s}}},{key:"componentDidUpdate",value:function(r,i,s){if(nh.canUseDOM){var o=this.props,a=o.isOpen,l=o.portalClassName;r.portalClassName!==l&&(this.node.className=l);var u=s.prevParent,h=s.nextParent;h!==u&&(u.removeChild(this.node),h.appendChild(this.node)),!(!r.isOpen&&!a)&&!ad&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!nh.canUseDOM||!this.node||!this.portal)){var r=this.portal.state,i=Date.now(),s=r.isOpen&&this.props.closeTimeoutMS&&(r.closesAt||i+this.props.closeTimeoutMS);s?(r.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,s-i)):this.removePortal()}}},{key:"render",value:function(){if(!nh.canUseDOM||!ad)return null;!this.node&&ad&&(this.node=PB("div"));var r=kB();return r(Zx.default.createElement(CB.default,TB({ref:this.portalRef,defaultStyles:e.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(r){eoe.setElement(r)}}]),e}(E5.Component);Yy.propTypes={isOpen:Lt.default.bool.isRequired,style:Lt.default.shape({content:Lt.default.object,overlay:Lt.default.object}),portalClassName:Lt.default.string,bodyOpenClassName:Lt.default.string,htmlOpenClassName:Lt.default.string,className:Lt.default.oneOfType([Lt.default.string,Lt.default.shape({base:Lt.default.string.isRequired,afterOpen:Lt.default.string.isRequired,beforeClose:Lt.default.string.isRequired})]),overlayClassName:Lt.default.oneOfType([Lt.default.string,Lt.default.shape({base:Lt.default.string.isRequired,afterOpen:Lt.default.string.isRequired,beforeClose:Lt.default.string.isRequired})]),appElement:Lt.default.oneOfType([Lt.default.instanceOf(IB.default),Lt.default.instanceOf(nh.SafeHTMLCollection),Lt.default.instanceOf(nh.SafeNodeList),Lt.default.arrayOf(Lt.default.instanceOf(IB.default))]),onAfterOpen:Lt.default.func,onRequestClose:Lt.default.func,closeTimeoutMS:Lt.default.number,ariaHideApp:Lt.default.bool,shouldFocusAfterRender:Lt.default.bool,shouldCloseOnOverlayClick:Lt.default.bool,shouldReturnFocusAfterClose:Lt.default.bool,preventScroll:Lt.default.bool,parentSelector:Lt.default.func,aria:Lt.default.object,data:Lt.default.object,role:Lt.default.string,contentLabel:Lt.default.string,shouldCloseOnEsc:Lt.default.bool,overlayRef:Lt.default.func,contentRef:Lt.default.func,id:Lt.default.string,overlayElement:Lt.default.func,contentElement:Lt.default.func};Yy.defaultProps={isOpen:!1,portalClassName:soe,bodyOpenClassName:ooe,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return Zx.default.createElement("div",e,t)},contentElement:function(e,t){return Zx.default.createElement("div",e,t)}};Yy.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,toe.polyfill)(Yy);Zd.default=Yy;(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=Zd,r=i(t);function i(s){return s&&s.__esModule?s:{default:s}}e.default=r.default,n.exports=e.default})(uC,uC.exports);var aoe=uC.exports;const loe=rl(aoe),uoe="/assets/volume-b1dd4cad.svg";let A5;function coe(n){return A5=n,n}function my(){return A5}let hoe=0;const pC=class extends il{constructor(n){super(),this.id=hoe++,this.init(n)}set(n,e){if(this[n]===void 0)throw new Error(`Property with name ${n} does not exist.`);switch(n){case"speed":this.speed=e;break;case"volume":this.volume=e;break;case"paused":this.paused=e;break;case"loop":this.loop=e;break;case"muted":this.muted=e;break}return this}get progress(){const{currentTime:n}=this._source;return n/this._duration}get paused(){return this._paused}set paused(n){this._paused=n,this.refreshPaused()}_onPlay(){this._playing=!0}_onPause(){this._playing=!1}init(n){this._playing=!1,this._duration=n.source.duration;const e=this._source=n.source.cloneNode(!1);e.src=n.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),n.context.on("refresh",this.refresh,this),n.context.on("refreshPaused",this.refreshPaused,this),this._media=n}_internalStop(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())}stop(){this._internalStop(),this._source&&this.emit("stop")}get speed(){return this._speed}set speed(n){this._speed=n,this.refresh()}get volume(){return this._volume}set volume(n){this._volume=n,this.refresh()}get loop(){return this._loop}set loop(n){this._loop=n,this.refresh()}get muted(){return this._muted}set muted(n){this._muted=n,this.refresh()}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(n){console.warn("HTML Audio does not support filters")}refresh(){const n=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;const t=n.volume*(n.muted?0:1),r=e.volume*(e.muted?0:1),i=this._volume*(this._muted?0:1);this._source.volume=i*t*r,this._source.playbackRate=this._speed*n.speed*e.speed}refreshPaused(){const n=this._media.context,e=this._media.parent,t=this._paused||e.paused||n.paused;t!==this._pausedReal&&(this._pausedReal=t,t?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",t))}play(n){const{start:e,end:t,speed:r,loop:i,volume:s,muted:o}=n;t&&console.assert(t>e,"End time is before start time"),this._speed=r,this._volume=s,this._loop=!!i,this._muted=o,this.refresh(),this.loop&&t!==null&&(console.warn('Looping not support when specifying an "end" time'),this.loop=!1),this._start=e,this._end=t||this._duration,this._start=Math.max(0,this._start-pC.PADDING),this._end=Math.min(this._end+pC.PADDING,this._duration),this._source.onloadedmetadata=()=>{this._source&&(this._source.currentTime=e,this._source.onloadedmetadata=null,this.emit("progress",e,this._duration),wr.shared.add(this._onUpdate,this))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")}_onUpdate(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()}_onComplete(){wr.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)}destroy(){wr.shared.remove(this._onUpdate,this),this.removeAllListeners();const n=this._source;n&&(n.onended=null,n.onplay=null,n.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)}toString(){return`[HTMLAudioInstance id=${this.id}]`}};let T5=pC;T5.PADDING=.1;class doe extends il{init(e){this.parent=e,this._source=e.options.source||new Audio,e.url&&(this._source.src=e.url)}create(){return new T5(this)}get isPlayable(){return!!this._source&&this._source.readyState===4}get duration(){return this._source.duration}get context(){return this.parent.context}get filters(){return null}set filters(e){console.warn("HTML Audio does not support filters")}destroy(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)}get source(){return this._source}load(e){const t=this._source,r=this.parent;if(t.readyState===4){r.isLoaded=!0;const l=r.autoPlayStart();e&&setTimeout(()=>{e(null,r,l)},0);return}if(!r.url){e(new Error("sound.url or sound.source must be set"));return}t.src=r.url;const i=()=>{a(),r.isLoaded=!0;const l=r.autoPlayStart();e&&e(null,r,l)},s=()=>{a(),e&&e(new Error("Sound loading has been aborted"))},o=()=>{a();const l=`Failed to load audio element (code: ${t.error.code})`;e?e(new Error(l)):console.error(l)},a=()=>{t.removeEventListener("canplaythrough",i),t.removeEventListener("load",i),t.removeEventListener("abort",s),t.removeEventListener("error",o)};t.addEventListener("canplaythrough",i,!1),t.addEventListener("load",i,!1),t.addEventListener("abort",s,!1),t.addEventListener("error",o,!1),t.load()}}class foe{constructor(e,t){this.parent=e,Object.assign(this,t),this.duration=this.end-this.start,console.assert(this.duration>0,"End time must be after start time")}play(e){return this.parent.play({complete:e,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})}destroy(){this.parent=null}}const e_=["ogg","oga","opus","m4a","mp3","mpeg","wav","aiff","wma","mid","caf"],poe=["audio/mpeg","audio/ogg"],t_={};function moe(n){const e={m4a:"audio/mp4",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',caf:'audio/x-caf; codecs="opus"',...n||{}},t=document.createElement("audio"),r={},i=/^no$/;e_.forEach(s=>{const o=t.canPlayType(`audio/${s}`).replace(i,""),a=e[s]?t.canPlayType(e[s]).replace(i,""):"";r[s]=!!o||!!a}),Object.assign(t_,r)}moe();class mC{static setParamValue(e,t){if(e.setValueAtTime){const r=my().context;e.setValueAtTime(t,r.audioContext.currentTime)}else e.value=t;return t}}let goe=0;class yoe extends il{constructor(e){super(),this.id=goe++,this._media=null,this._paused=!1,this._muted=!1,this._elapsed=0,this.init(e)}set(e,t){if(this[e]===void 0)throw new Error(`Property with name ${e} does not exist.`);switch(e){case"speed":this.speed=t;break;case"volume":this.volume=t;break;case"muted":this.muted=t;break;case"loop":this.loop=t;break;case"paused":this.paused=t;break}return this}stop(){this._source&&(this._internalStop(),this.emit("stop"))}get speed(){return this._speed}set speed(e){this._speed=e,this.refresh(),this._update(!0)}get volume(){return this._volume}set volume(e){this._volume=e,this.refresh()}get muted(){return this._muted}set muted(e){this._muted=e,this.refresh()}get loop(){return this._loop}set loop(e){this._loop=e,this.refresh()}get filters(){return this._filters}set filters(e){var t;this._filters&&((t=this._filters)==null||t.filter(r=>r).forEach(r=>r.disconnect()),this._filters=null,this._source.connect(this._gain)),this._filters=e!=null&&e.length?e.slice(0):null,this.refresh()}refresh(){if(!this._source)return;const e=this._media.context,t=this._media.parent;this._source.loop=this._loop||t.loop;const r=e.volume*(e.muted?0:1),i=t.volume*(t.muted?0:1),s=this._volume*(this._muted?0:1);mC.setParamValue(this._gain.gain,s*i*r),mC.setParamValue(this._source.playbackRate,this._speed*t.speed*e.speed),this.applyFilters()}applyFilters(){var e;if((e=this._filters)!=null&&e.length){this._source.disconnect();let t=this._source;this._filters.forEach(r=>{t.connect(r.destination),t=r}),t.connect(this._gain)}}refreshPaused(){const e=this._media.context,t=this._media.parent,r=this._paused||t.paused||e.paused;r!==this._pausedReal&&(this._pausedReal=r,r?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",r))}play(e){const{start:t,end:r,speed:i,loop:s,volume:o,muted:a,filters:l}=e;r&&console.assert(r>t,"End time is before start time"),this._paused=!1;const{source:u,gain:h}=this._media.nodes.cloneBufferSource();this._source=u,this._gain=h,this._speed=i,this._volume=o,this._loop=!!s,this._muted=a,this._filters=l,this.refresh();const f=this._source.buffer.duration;this._duration=f,this._end=r,this._lastUpdate=this._now(),this._elapsed=t,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=r,this._source.loopStart=t,this._source.start(0,t)):r?this._source.start(0,t,r-t):this._source.start(0,t),this.emit("start"),this._update(!0),this.enableTicker(!0)}enableTicker(e){wr.shared.remove(this._updateListener,this),e&&wr.shared.add(this._updateListener,this)}get progress(){return this._progress}get paused(){return this._paused}set paused(e){this._paused=e,this.refreshPaused()}destroy(){var e;this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),(e=this._filters)==null||e.forEach(t=>t.disconnect()),this._filters=null,this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1}toString(){return`[WebAudioInstance id=${this.id}]`}_now(){return this._media.context.audioContext.currentTime}_updateListener(){this._update()}_update(e=!1){if(this._source){const t=this._now(),r=t-this._lastUpdate;if(r>0||e){const i=this._source.playbackRate.value;this._elapsed+=r*i,this._lastUpdate=t;const s=this._duration;let o;if(this._source.loopStart){const a=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%a)/s}else o=this._elapsed%s/s;this._progress=o,this.emit("progress",this._progress,s)}}}init(e){this._media=e,e.context.events.on("refresh",this.refresh,this),e.context.events.on("refreshPaused",this.refreshPaused,this)}_internalStop(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.stop(0),this._source.disconnect();try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}this._source=null}}_onComplete(){if(this._source){this.enableTicker(!1),this._source.onended=null,this._source.disconnect();try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}}this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)}}class C5{constructor(e,t){this._output=t,this._input=e}get destination(){return this._input}get filters(){return this._filters}set filters(e){if(this._filters&&(this._filters.forEach(t=>{t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),e&&e.length){this._filters=e.slice(0),this._input.disconnect();let t=null;e.forEach(r=>{t===null?this._input.connect(r.destination):t.connect(r.destination),t=r}),t.connect(this._output)}}destroy(){this.filters=null,this._input=null,this._output=null}}const I5=class extends C5{constructor(n){const e=n.audioContext,t=e.createBufferSource(),r=e.createGain(),i=e.createAnalyser();t.connect(i),i.connect(r),r.connect(n.destination),super(i,r),this.context=n,this.bufferSource=t,this.gain=r,this.analyser=i}get script(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(I5.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script}destroy(){super.destroy(),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null}cloneBufferSource(){const n=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=n.buffer,mC.setParamValue(e.playbackRate,n.playbackRate.value),e.loop=n.loop;const t=this.context.audioContext.createGain();return e.connect(t),t.connect(this.destination),{source:e,gain:t}}get bufferSize(){return this.script.bufferSize}};let R5=I5;R5.BUFFER_SIZE=0;class voe{init(e){this.parent=e,this._nodes=new R5(this.context),this._source=this._nodes.bufferSource,this.source=e.options.source}destroy(){this.parent=null,this._nodes.destroy(),this._nodes=null;try{this._source.buffer=null}catch(e){console.warn("Failed to set AudioBufferSourceNode.buffer to null:",e)}this._source=null,this.source=null}create(){return new yoe(this)}get context(){return this.parent.context}get isPlayable(){return!!this._source&&!!this._source.buffer}get filters(){return this._nodes.filters}set filters(e){this._nodes.filters=e}get duration(){return console.assert(this.isPlayable,"Sound not yet playable, no duration"),this._source.buffer.duration}get buffer(){return this._source.buffer}set buffer(e){this._source.buffer=e}get nodes(){return this._nodes}load(e){this.source?this._decode(this.source,e):this.parent.url?this._loadUrl(e):e?e(new Error("sound.url or sound.source must be set")):console.error("sound.url or sound.source must be set")}async _loadUrl(e){const t=this.parent.url,r=await Xe.ADAPTER.fetch(t);this._decode(await r.arrayBuffer(),e)}_decode(e,t){const r=(i,s)=>{if(i)t&&t(i);else{this.parent.isLoaded=!0,this.buffer=s;const o=this.parent.autoPlayStart();t&&t(null,this.parent,o)}};e instanceof AudioBuffer?r(null,e):this.parent.context.decode(e,r)}}const tp=class{static from(n){let e={};typeof n=="string"?e.url=n:n instanceof ArrayBuffer||n instanceof AudioBuffer||n instanceof HTMLAudioElement?e.source=n:Array.isArray(n)?e.url=n:e=n,e={autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1,...e},Object.freeze(e);const t=my().useLegacy?new doe:new voe;return new tp(t,e)}constructor(n,e){this.media=n,this.options=e,this._instances=[],this._sprites={},this.media.init(this);const t=e.complete;this._autoPlayOptions=t?{complete:t}:null,this.isLoaded=!1,this._preloadQueue=null,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=Array.isArray(e.url)?this.preferUrl(e.url):e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}preferUrl(n){const[e]=n.map(t=>({url:t,ext:Wr.extname(t).slice(1)})).filter(({ext:t})=>t_[t]).sort((t,r)=>e_.indexOf(t.ext)-e_.indexOf(r.ext));if(!e)throw new Error("No supported file type found");return e.url}get context(){return my().context}pause(){return this.isPlaying=!1,this.paused=!0,this}resume(){return this.isPlaying=this._instances.length>0,this.paused=!1,this}get paused(){return this._paused}set paused(n){this._paused=n,this.refreshPaused()}get speed(){return this._speed}set speed(n){this._speed=n,this.refresh()}get filters(){return this.media.filters}set filters(n){this.media.filters=n}addSprites(n,e){if(typeof n=="object"){const r={};for(const i in n)r[i]=this.addSprites(i,n[i]);return r}console.assert(!this._sprites[n],`Alias ${n} is already taken`);const t=new foe(this,e);return this._sprites[n]=t,t}destroy(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null}removeSprites(n){if(n){const e=this._sprites[n];e!==void 0&&(e.destroy(),delete this._sprites[n])}else for(const e in this._sprites)this.removeSprites(e);return this}get isPlayable(){return this.isLoaded&&this.media&&this.media.isPlayable}stop(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(let n=this._instances.length-1;n>=0;n--)this._instances[n].stop();return this}play(n,e){let t;if(typeof n=="string"?t={sprite:n,loop:this.loop,complete:e}:typeof n=="function"?(t={},t.complete=n):t=n,t={complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1,...t||{}},t.sprite){const i=t.sprite;console.assert(!!this._sprites[i],`Alias ${i} is not available`);const s=this._sprites[i];t.start=s.start+(t.start||0),t.end=s.end,t.speed=s.speed||1,t.loop=s.loop||t.loop,delete t.sprite}if(t.offset&&(t.start=t.offset),!this.isLoaded)return this._preloadQueue?new Promise(i=>{this._preloadQueue.push(()=>{i(this.play(t))})}):(this._preloadQueue=[],this.autoPlay=!0,this._autoPlayOptions=t,new Promise((i,s)=>{this._preload((o,a,l)=>{this._preloadQueue.forEach(u=>u()),this._preloadQueue=null,o?s(o):(t.loaded&&t.loaded(o,a,l),i(l))})}));(this.singleInstance||t.singleInstance)&&this._removeInstances();const r=this._createInstance();return this._instances.push(r),this.isPlaying=!0,r.once("end",()=>{t.complete&&t.complete(this),this._onComplete(r)}),r.once("stop",()=>{this._onComplete(r)}),r.play(t),r}refresh(){const n=this._instances.length;for(let e=0;e<n;e++)this._instances[e].refresh()}refreshPaused(){const n=this._instances.length;for(let e=0;e<n;e++)this._instances[e].refreshPaused()}get volume(){return this._volume}set volume(n){this._volume=n,this.refresh()}get muted(){return this._muted}set muted(n){this._muted=n,this.refresh()}get loop(){return this._loop}set loop(n){this._loop=n,this.refresh()}_preload(n){this.media.load(n)}get instances(){return this._instances}get sprites(){return this._sprites}get duration(){return this.media.duration}autoPlayStart(){let n;return this.autoPlay&&(n=this.play(this._autoPlayOptions)),n}_removeInstances(){for(let n=this._instances.length-1;n>=0;n--)this._poolInstance(this._instances[n]);this._instances.length=0}_onComplete(n){if(this._instances){const e=this._instances.indexOf(n);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(n)}_createInstance(){if(tp._pool.length>0){const n=tp._pool.pop();return n.init(this.media),n}return this.media.create()}_poolInstance(n){n.destroy(),tp._pool.indexOf(n)<0&&tp._pool.push(n)}};let n_=tp;n_._pool=[];class woe extends il{constructor(){super(...arguments),this.speed=1,this.muted=!1,this.volume=1,this.paused=!1}refresh(){this.emit("refresh")}refreshPaused(){this.emit("refreshPaused")}get filters(){return console.warn("HTML Audio does not support filters"),null}set filters(e){console.warn("HTML Audio does not support filters")}get audioContext(){return console.warn("HTML Audio does not support audioContext"),null}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this.paused}destroy(){this.removeAllListeners()}}class gy extends C5{constructor(){const e=window,t=new gy.AudioContext,r=t.createDynamicsCompressor(),i=t.createAnalyser();i.connect(r),r.connect(t.destination),super(i,r),this.autoPause=!0,this._ctx=t,this._offlineCtx=new gy.OfflineAudioContext(1,2,e.OfflineAudioContext?Math.max(8e3,Math.min(96e3,t.sampleRate)):44100),this.compressor=r,this.analyser=i,this.events=new il,this.volume=1,this.speed=1,this.muted=!1,this.paused=!1,this._locked=t.state==="suspended"&&("ontouchstart"in globalThis||"onclick"in globalThis),this._locked&&(this._unlock(),this._unlock=this._unlock.bind(this),document.addEventListener("mousedown",this._unlock,!0),document.addEventListener("touchstart",this._unlock,!0),document.addEventListener("touchend",this._unlock,!0)),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),globalThis.addEventListener("focus",this.onFocus),globalThis.addEventListener("blur",this.onBlur)}onFocus(){if(!this.autoPause)return;const e=this._ctx.state;(e==="suspended"||e==="interrupted"||!this._locked)&&(this.paused=this._pausedOnBlur,this.refreshPaused())}onBlur(){this.autoPause&&(this._locked||(this._pausedOnBlur=this._paused,this.paused=!0,this.refreshPaused()))}_unlock(){this._locked&&(this.playEmptySound(),this._ctx.state==="running"&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._locked=!1))}playEmptySound(){const e=this._ctx.createBufferSource();e.buffer=this._ctx.createBuffer(1,1,22050),e.connect(this._ctx.destination),e.start(0,0,0),e.context.state==="suspended"&&e.context.resume()}static get AudioContext(){const e=window;return e.AudioContext||e.webkitAudioContext||null}static get OfflineAudioContext(){const e=window;return e.OfflineAudioContext||e.webkitOfflineAudioContext||null}destroy(){super.destroy();const e=this._ctx;typeof e.close<"u"&&e.close(),globalThis.removeEventListener("focus",this.onFocus),globalThis.removeEventListener("blur",this.onBlur),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null}get audioContext(){return this._ctx}get offlineContext(){return this._offlineCtx}set paused(e){e&&this._ctx.state==="running"?this._ctx.suspend():!e&&this._ctx.state==="suspended"&&this._ctx.resume(),this._paused=e}get paused(){return this._paused}refresh(){this.events.emit("refresh")}refreshPaused(){this.events.emit("refreshPaused")}toggleMute(){return this.muted=!this.muted,this.refresh(),this.muted}togglePause(){return this.paused=!this.paused,this.refreshPaused(),this._paused}decode(e,t){const r=s=>{t(new Error((s==null?void 0:s.message)||"Unable to decode file"))},i=this._offlineCtx.decodeAudioData(e,s=>{t(null,s)},r);i&&i.catch(r)}}class xoe{constructor(){this.init()}init(){return this.supported&&(this._webAudioContext=new gy),this._htmlAudioContext=new woe,this._sounds={},this.useLegacy=!this.supported,this}get context(){return this._context}get filtersAll(){return this.useLegacy?[]:this._context.filters}set filtersAll(e){this.useLegacy||(this._context.filters=e)}get supported(){return gy.AudioContext!==null}add(e,t){if(typeof e=="object"){const s={};for(const o in e){const a=this._getOptions(e[o],t);s[o]=this.add(o,a)}return s}if(console.assert(!this._sounds[e],`Sound with alias ${e} already exists.`),t instanceof n_)return this._sounds[e]=t,t;const r=this._getOptions(t),i=n_.from(r);return this._sounds[e]=i,i}_getOptions(e,t){let r;return typeof e=="string"?r={url:e}:Array.isArray(e)?r={url:e}:e instanceof ArrayBuffer||e instanceof AudioBuffer||e instanceof HTMLAudioElement?r={source:e}:r=e,r={...r,...t||{}},r}get useLegacy(){return this._useLegacy}set useLegacy(e){this._useLegacy=e,this._context=!e&&this.supported?this._webAudioContext:this._htmlAudioContext}get disableAutoPause(){return!this._webAudioContext.autoPause}set disableAutoPause(e){this._webAudioContext.autoPause=!e}remove(e){return this.exists(e,!0),this._sounds[e].destroy(),delete this._sounds[e],this}get volumeAll(){return this._context.volume}set volumeAll(e){this._context.volume=e,this._context.refresh()}get speedAll(){return this._context.speed}set speedAll(e){this._context.speed=e,this._context.refresh()}togglePauseAll(){return this._context.togglePause()}pauseAll(){return this._context.paused=!0,this._context.refreshPaused(),this}resumeAll(){return this._context.paused=!1,this._context.refreshPaused(),this}toggleMuteAll(){return this._context.toggleMute()}muteAll(){return this._context.muted=!0,this._context.refresh(),this}unmuteAll(){return this._context.muted=!1,this._context.refresh(),this}removeAll(){for(const e in this._sounds)this._sounds[e].destroy(),delete this._sounds[e];return this}stopAll(){for(const e in this._sounds)this._sounds[e].stop();return this}exists(e,t=!1){const r=!!this._sounds[e];return t&&console.assert(r,`No sound matching alias '${e}'.`),r}isPlaying(){for(const e in this._sounds)if(this._sounds[e].isPlaying)return!0;return!1}find(e){return this.exists(e,!0),this._sounds[e]}play(e,t){return this.find(e).play(t)}stop(e){return this.find(e).stop()}pause(e){return this.find(e).pause()}resume(e){return this.find(e).resume()}volume(e,t){const r=this.find(e);return t!==void 0&&(r.volume=t),r.volume}speed(e,t){const r=this.find(e);return t!==void 0&&(r.speed=t),r.speed}duration(e){return this.find(e).duration}close(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this}}const MB=n=>{var t;const e=n.src;return((t=n==null?void 0:n.alias)==null?void 0:t[0])??Wr.basename(e,Wr.extname(e))},_oe={extension:Le.Asset,detection:{test:async()=>!0,add:async n=>[...n,...e_.filter(e=>t_[e])],remove:async n=>n.filter(e=>n.includes(e))},loader:{extension:{type:[Le.LoadParser],priority:xa.High},test(n){const e=Wr.extname(n).slice(1);return!!t_[e]||poe.some(t=>n.startsWith(`data:${t}`))},async load(n,e){const t=await new Promise((r,i)=>n_.from({...e.data,url:n,preload:!0,loaded(s,o){var a,l;s?i(s):r(o),(l=(a=e.data)==null?void 0:a.loaded)==null||l.call(a,s,o)}}));return my().add(MB(e),t),t},async unload(n,e){my().remove(MB(e))}}};it.add(_oe);const lA=coe(new xoe);function P5(n){return q.jsx("a",{className:Vx("button text-white shadow-solid text-xl pointer-events-auto",n.className),href:n.href,title:n.title,onClick:n.onClick,children:q.jsx("div",{className:"inline-block bg-clay-700",children:q.jsx("span",{children:q.jsxs("div",{className:"inline-flex h-full items-center gap-4",children:[q.jsx("img",{className:"w-4 h-4 sm:w-[30px] sm:h-[30px]",src:n.imgUrl}),n.children]})})})})}function boe(){const n=wa(bs.music.getBackgroundMusic),[e,t]=Y.useState(!1);Y.useEffect(()=>{n&&(lA.add("background",n).loop=!0)},[n]);const r=async()=>{e?lA.stop("background"):await lA.play("background"),t(!e)},i=Y.useCallback(s=>{(s.key==="m"||s.key==="M")&&r()},[r]);return Y.useEffect(()=>(window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)),[i]),q.jsx(q.Fragment,{children:q.jsx(P5,{onClick:()=>void r(),className:"hidden lg:block",title:"Play AI generated music (press m to play/mute)",imgUrl:uoe,children:e?"Mute":"Music"})})}const Soe="modulepreload",Eoe=function(n){return"/"+n},OB={},Aoe=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=Eoe(s),s in OB)return;OB[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Soe,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var QR={};Object.defineProperty(QR,"__esModule",{value:!0});QR.parse=Moe;QR.serialize=Ooe;const Toe=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Coe=/^[\u0021-\u003A\u003C-\u007E]*$/,Ioe=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Roe=/^[\u0020-\u003A\u003D-\u007E]*$/,Poe=Object.prototype.toString,koe=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function Moe(n,e){const t=new koe,r=n.length;if(r<2)return t;const i=(e==null?void 0:e.decode)||Noe;let s=0;do{const o=n.indexOf("=",s);if(o===-1)break;const a=n.indexOf(";",s),l=a===-1?r:a;if(o>l){s=n.lastIndexOf(";",o-1)+1;continue}const u=NB(n,s,o),h=BB(n,o,u),f=n.slice(u,h);if(t[f]===void 0){let p=NB(n,o+1,l),m=BB(n,l,p);const g=i(n.slice(p,m));t[f]=g}s=l+1}while(s<r);return t}function NB(n,e,t){do{const r=n.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function BB(n,e,t){for(;e>t;){const r=n.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function Ooe(n,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!Toe.test(n))throw new TypeError(`argument name is invalid: ${n}`);const i=r(e);if(!Coe.test(i))throw new TypeError(`argument val is invalid: ${e}`);let s=n+"="+i;if(!t)return s;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);s+="; Max-Age="+t.maxAge}if(t.domain){if(!Ioe.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);s+="; Domain="+t.domain}if(t.path){if(!Roe.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);s+="; Path="+t.path}if(t.expires){if(!Boe(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);s+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(s+="; HttpOnly"),t.secure&&(s+="; Secure"),t.partitioned&&(s+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return s}function Noe(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function Boe(n){return Poe.call(n)==="[object Date]"}var LB="popstate";function Loe(n={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return gC("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:yy(i)}return Foe(e,t,null,n)}function Nr(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function tu(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Doe(){return Math.random().toString(36).substring(2,10)}function DB(n,e){return{usr:n.state,key:n.key,idx:e}}function gC(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Vm(e):e,state:t,key:e&&e.key||r||Doe()}}function yy({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Vm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Foe(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,u=h();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let x=h(),b=x==null?null:x-u;u=x,l&&l({action:a,location:v.location,delta:b})}function p(x,b){a="PUSH";let S=gC(v.location,x,b);t&&t(S,x),u=h()+1;let _=DB(S,u),R=v.createHref(S);try{o.pushState(_,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(R)}s&&l&&l({action:a,location:v.location,delta:1})}function m(x,b){a="REPLACE";let S=gC(v.location,x,b);t&&t(S,x),u=h();let _=DB(S,u),R=v.createHref(S);o.replaceState(_,"",R),s&&l&&l({action:a,location:v.location,delta:0})}function g(x){let b=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof x=="string"?x:yy(x);return S=S.replace(/ $/,"%20"),Nr(b,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,b)}let v={get action(){return a},get location(){return n(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(LB,f),l=x,()=>{i.removeEventListener(LB,f),l=null}},createHref(x){return e(i,x)},createURL:g,encodeLocation(x){let b=g(x);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:m,go(x){return o.go(x)}};return v}function k5(n,e,t="/"){return Uoe(n,e,t,!1)}function Uoe(n,e,t,r){let i=typeof e=="string"?Vm(e):e,s=Th(i.pathname||"/",t);if(s==null)return null;let o=M5(n);zoe(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Yoe(s);a=Koe(o[l],u,r)}return a}function M5(n,e=[],t=[],r=""){let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Nr(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=$u([r,l.relativePath]),h=t.concat(l);s.children&&s.children.length>0&&(Nr(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),M5(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:qoe(u,s.index),routesMeta:h})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of O5(s.path))i(s,o,l)}),e}function O5(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),s=t.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=O5(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function zoe(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Xoe(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var $oe=/^:[\w-]+$/,joe=3,Hoe=2,Woe=1,Goe=10,Voe=-2,FB=n=>n==="*";function qoe(n,e){let t=n.split("/"),r=t.length;return t.some(FB)&&(r+=Voe),e&&(r+=Hoe),t.filter(i=>!FB(i)).reduce((i,s)=>i+($oe.test(s)?joe:s===""?Woe:Goe),r)}function Xoe(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Koe(n,e,t=!1){let{routesMeta:r}=n,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=r_({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),p=l.route;if(!f&&u&&t&&!r[r.length-1].route.index&&(f=r_({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:$u([s,f.pathname]),pathnameBase:tae($u([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=$u([s,f.pathnameBase]))}return o}function r_(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Qoe(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:h,isOptional:f},p)=>{if(h==="*"){let g=a[p]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const m=a[p];return f&&!m?u[h]=void 0:u[h]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function Qoe(n,e=!1,t=!0){tu(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Yoe(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tu(!1,`The URL path "${n}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Th(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Zoe(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Vm(n):n;return{pathname:t?t.startsWith("/")?t:Joe(t,e):e,search:nae(r),hash:rae(i)}}function Joe(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function uA(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function eae(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function N5(n){let e=eae(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function B5(n,e,t,r=!1){let i;typeof n=="string"?i=Vm(n):(i={...n},Nr(!i.pathname||!i.pathname.includes("?"),uA("?","pathname","search",i)),Nr(!i.pathname||!i.pathname.includes("#"),uA("#","pathname","hash",i)),Nr(!i.search||!i.search.includes("#"),uA("#","search","hash",i)));let s=n===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=Zoe(i,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var $u=n=>n.join("/").replace(/\/\/+/g,"/"),tae=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nae=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,rae=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function iae(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var L5=["POST","PUT","PATCH","DELETE"];new Set(L5);var sae=["GET",...L5];new Set(sae);var qm=Y.createContext(null);qm.displayName="DataRouter";var _b=Y.createContext(null);_b.displayName="DataRouterState";var D5=Y.createContext({isTransitioning:!1});D5.displayName="ViewTransition";var oae=Y.createContext(new Map);oae.displayName="Fetchers";var aae=Y.createContext(null);aae.displayName="Await";var iu=Y.createContext(null);iu.displayName="Navigation";var Zy=Y.createContext(null);Zy.displayName="Location";var tc=Y.createContext({outlet:null,matches:[],isDataRoute:!1});tc.displayName="Route";var YR=Y.createContext(null);YR.displayName="RouteError";function lae(n,{relative:e}={}){Nr(Jy(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Y.useContext(iu),{hash:i,pathname:s,search:o}=ev(n,{relative:e}),a=s;return t!=="/"&&(a=s==="/"?t:$u([t,s])),r.createHref({pathname:a,search:o,hash:i})}function Jy(){return Y.useContext(Zy)!=null}function uf(){return Nr(Jy(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(Zy).location}var F5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U5(n){Y.useContext(iu).static||Y.useLayoutEffect(n)}function uae(){let{isDataRoute:n}=Y.useContext(tc);return n?bae():cae()}function cae(){Nr(Jy(),"useNavigate() may be used only in the context of a <Router> component.");let n=Y.useContext(qm),{basename:e,navigator:t}=Y.useContext(iu),{matches:r}=Y.useContext(tc),{pathname:i}=uf(),s=JSON.stringify(N5(r)),o=Y.useRef(!1);return U5(()=>{o.current=!0}),Y.useCallback((l,u={})=>{if(tu(o.current,F5),!o.current)return;if(typeof l=="number"){t.go(l);return}let h=B5(l,JSON.parse(s),i,u.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:$u([e,h.pathname])),(u.replace?t.replace:t.push)(h,u.state,u)},[e,t,s,i,n])}Y.createContext(null);function ev(n,{relative:e}={}){let{matches:t}=Y.useContext(tc),{pathname:r}=uf(),i=JSON.stringify(N5(t));return Y.useMemo(()=>B5(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function hae(n,e){return z5(n,e)}function z5(n,e,t,r){var b;Nr(Jy(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=Y.useContext(iu),{matches:s}=Y.useContext(tc),o=s[s.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",h=o&&o.route;{let S=h&&h.path||"";$5(l,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let f=uf(),p;if(e){let S=typeof e=="string"?Vm(e):e;Nr(u==="/"||((b=S.pathname)==null?void 0:b.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=f;let m=p.pathname||"/",g=m;if(u!=="/"){let S=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(S.length).join("/")}let v=k5(n,{pathname:g});tu(h||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),tu(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=gae(v&&v.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:$u([u,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?u:$u([u,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),s,t,r);return e&&x?Y.createElement(Zy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function dae(){let n=_ae(),e=iae(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",n),o=Y.createElement(Y.Fragment,null,Y.createElement("p",null," Hey developer "),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:s},"ErrorBoundary")," or"," ",Y.createElement("code",{style:s},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:i},t):null,o)}var fae=Y.createElement(dae,null),pae=class extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?Y.createElement(tc.Provider,{value:this.props.routeContext},Y.createElement(YR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mae({routeContext:n,match:e,children:t}){let r=Y.useContext(qm);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(tc.Provider,{value:n},t)}function gae(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,s=t==null?void 0:t.errors;if(s!=null){let l=i.findIndex(u=>u.route.id&&(s==null?void 0:s[u.route.id])!==void 0);Nr(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:h,errors:f}=t,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,h)=>{let f,p=!1,m=null,g=null;t&&(f=s&&u.route.id?s[u.route.id]:void 0,m=u.route.errorElement||fae,o&&(a<0&&h===0?($5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):a===h&&(p=!0,g=u.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,h+1)),x=()=>{let b;return f?b=m:p?b=g:u.route.Component?b=Y.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,Y.createElement(mae,{match:u,routeContext:{outlet:l,matches:v,isDataRoute:t!=null},children:b})};return t&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?Y.createElement(pae,{location:t.location,revalidation:t.revalidation,component:m,error:f,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function ZR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yae(n){let e=Y.useContext(qm);return Nr(e,ZR(n)),e}function vae(n){let e=Y.useContext(_b);return Nr(e,ZR(n)),e}function wae(n){let e=Y.useContext(tc);return Nr(e,ZR(n)),e}function JR(n){let e=wae(n),t=e.matches[e.matches.length-1];return Nr(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xae(){return JR("useRouteId")}function _ae(){var r;let n=Y.useContext(YR),e=vae("useRouteError"),t=JR("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function bae(){let{router:n}=yae("useNavigate"),e=JR("useNavigate"),t=Y.useRef(!1);return U5(()=>{t.current=!0}),Y.useCallback(async(i,s={})=>{tu(t.current,F5),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...s}))},[n,e])}var UB={};function $5(n,e,t){!e&&!UB[n]&&(UB[n]=!0,tu(!1,t))}Y.memo(Sae);function Sae({routes:n,future:e,state:t}){return z5(n,void 0,t,e)}function yC(n){Nr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Eae({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:s=!1}){Nr(!Jy(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=n.replace(/^\/*/,"/"),a=Y.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof t=="string"&&(t=Vm(t));let{pathname:l="/",search:u="",hash:h="",state:f=null,key:p="default"}=t,m=Y.useMemo(()=>{let g=Th(l,o);return g==null?null:{location:{pathname:g,search:u,hash:h,state:f,key:p},navigationType:r}},[o,l,u,h,f,p,r]);return tu(m!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:Y.createElement(iu.Provider,{value:a},Y.createElement(Zy.Provider,{children:e,value:m}))}function Aae({children:n,location:e}){return hae(vC(n),e)}function vC(n,e=[]){let t=[];return Y.Children.forEach(n,(r,i)=>{if(!Y.isValidElement(r))return;let s=[...e,i];if(r.type===Y.Fragment){t.push.apply(t,vC(r.props.children,s));return}Nr(r.type===yC,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nr(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vC(r.props.children,s)),t.push(o)}),t}var Bw="get",Lw="application/x-www-form-urlencoded";function bb(n){return n!=null&&typeof n.tagName=="string"}function Tae(n){return bb(n)&&n.tagName.toLowerCase()==="button"}function Cae(n){return bb(n)&&n.tagName.toLowerCase()==="form"}function Iae(n){return bb(n)&&n.tagName.toLowerCase()==="input"}function Rae(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Pae(n,e){return n.button===0&&(!e||e==="_self")&&!Rae(n)}var Q1=null;function kae(){if(Q1===null)try{new FormData(document.createElement("form"),0),Q1=!1}catch{Q1=!0}return Q1}var Mae=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cA(n){return n!=null&&!Mae.has(n)?(tu(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lw}"`),null):n}function Oae(n,e){let t,r,i,s,o;if(Cae(n)){let a=n.getAttribute("action");r=a?Th(a,e):null,t=n.getAttribute("method")||Bw,i=cA(n.getAttribute("enctype"))||Lw,s=new FormData(n)}else if(Tae(n)||Iae(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Th(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Bw,i=cA(n.getAttribute("formenctype"))||cA(a.getAttribute("enctype"))||Lw,s=new FormData(a,n),!kae()){let{name:u,type:h,value:f}=n;if(h==="image"){let p=u?`${u}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else u&&s.append(u,f)}}else{if(bb(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Bw,r=null,i=Lw,o=n}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:s,body:o}}function eP(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Nae(n,e){if(n.id in e)return e[n.id];try{let t=await Aoe(()=>import(n.module),[]);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Bae(n){return n!=null&&typeof n.page=="string"}function Lae(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Dae(n,e,t){let r=await Promise.all(n.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await Nae(s,t);return o.links?o.links():[]}return[]}));return $ae(r.flat(1).filter(Lae).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function zB(n,e,t,r,i,s){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var h;return t[u].pathname!==l.pathname||((h=t[u].route.path)==null?void 0:h.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):s==="data"?e.filter((l,u)=>{var f;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=t[0])==null?void 0:f.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Fae(n,e){return Uae(n.map(t=>{let r=e.routes[t.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function Uae(n){return[...new Set(n)]}function zae(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function $ae(n,e){let t=new Set,r=new Set(e);return n.reduce((i,s)=>{if(e&&!Bae(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(zae(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function jae(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function Hae(){let n=Y.useContext(qm);return eP(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Wae(){let n=Y.useContext(_b);return eP(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var tP=Y.createContext(void 0);tP.displayName="FrameworkContext";function j5(){let n=Y.useContext(tP);return eP(n,"You must render this element inside a <HydratedRouter> element"),n}function Gae(n,e){let t=Y.useContext(tP),[r,i]=Y.useState(!1),[s,o]=Y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:f}=e,p=Y.useRef(null);Y.useEffect(()=>{if(n==="render"&&o(!0),n==="viewport"){let v=b=>{b.forEach(S=>{o(S.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return p.current&&x.observe(p.current),()=>{x.disconnect()}}},[n]),Y.useEffect(()=>{if(r){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[r]);let m=()=>{i(!0)},g=()=>{i(!1),o(!1)};return t?n!=="intent"?[s,p,{}]:[s,p,{onFocus:Fg(a,m),onBlur:Fg(l,g),onMouseEnter:Fg(u,m),onMouseLeave:Fg(h,g),onTouchStart:Fg(f,m)}]:[!1,p,{}]}function Fg(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Vae({page:n,...e}){let{router:t}=Hae(),r=Y.useMemo(()=>k5(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Y.createElement(Xae,{page:n,matches:r,...e}):(console.warn(`Tried to prefetch ${n} but no routes matched.`),null)}function qae(n){let{manifest:e,routeModules:t}=j5(),[r,i]=Y.useState([]);return Y.useEffect(()=>{let s=!1;return Dae(n,e,t).then(o=>{s||i(o)}),()=>{s=!0}},[n,e,t]),r}function Xae({page:n,matches:e,...t}){let r=uf(),{manifest:i,routeModules:s}=j5(),{loaderData:o,matches:a}=Wae(),l=Y.useMemo(()=>zB(n,e,a,i,r,"data"),[n,e,a,i,r]),u=Y.useMemo(()=>zB(n,e,a,i,r,"assets"),[n,e,a,i,r]),h=Y.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let m=new Set,g=!1;if(e.forEach(x=>{var S;let b=i.routes[x.route.id];!b||!b.hasLoader||(!l.some(_=>_.route.id===x.route.id)&&x.route.id in o&&((S=s[x.route.id])!=null&&S.shouldRevalidate)||b.hasClientLoader?g=!0:m.add(x.route.id))}),m.size===0)return[];let v=jae(n);return g&&m.size>0&&v.searchParams.set("_routes",e.filter(x=>m.has(x.route.id)).map(x=>x.route.id).join(",")),[v.pathname+v.search]},[o,r,i,l,e,n,s]),f=Y.useMemo(()=>Fae(u,i),[u,i]),p=qae(u);return Y.createElement(Y.Fragment,null,h.map(m=>Y.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...t})),f.map(m=>Y.createElement("link",{key:m,rel:"modulepreload",href:m,...t})),p.map(({key:m,link:g})=>Y.createElement("link",{key:m,...g})))}function Kae(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var H5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{H5&&(window.__reactRouterVersion="7.0.2")}catch{}function Qae({basename:n,children:e,window:t}){let r=Y.useRef();r.current==null&&(r.current=Loe({window:t,v5Compat:!0}));let i=r.current,[s,o]=Y.useState({action:i.action,location:i.location}),a=Y.useCallback(l=>{Y.startTransition(()=>o(l))},[o]);return Y.useLayoutEffect(()=>i.listen(a),[i,a]),Y.createElement(Eae,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:i})}var W5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nP=Y.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:f,...p},m){let{basename:g}=Y.useContext(iu),v=typeof u=="string"&&W5.test(u),x,b=!1;if(typeof u=="string"&&v&&(x=u,H5))try{let K=new URL(window.location.href),te=u.startsWith("//")?new URL(K.protocol+u):new URL(u),ne=Th(te.pathname,g);te.origin===K.origin&&ne!=null?u=ne+te.search+te.hash:b=!0}catch{tu(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=lae(u,{relative:i}),[_,R,D]=Gae(r,p),j=ele(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function H(K){e&&e(K),K.defaultPrevented||j(K)}let G=Y.createElement("a",{...p,...D,href:x||S,onClick:b||s?e:H,ref:Kae(m,R),target:l,"data-discover":!v&&t==="render"?"true":void 0});return _&&!v?Y.createElement(Y.Fragment,null,G,Y.createElement(Vae,{page:S})):G});nP.displayName="Link";var Yae=Y.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...u},h){let f=ev(o,{relative:u.relative}),p=uf(),m=Y.useContext(_b),{navigator:g,basename:v}=Y.useContext(iu),x=m!=null&&sle(f)&&a===!0,b=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,S=p.pathname,_=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(S=S.toLowerCase(),_=_?_.toLowerCase():null,b=b.toLowerCase()),_&&v&&(_=Th(_,v)||_);const R=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let D=S===b||!i&&S.startsWith(b)&&S.charAt(R)==="/",j=_!=null&&(_===b||!i&&_.startsWith(b)&&_.charAt(b.length)==="/"),H={isActive:D,isPending:j,isTransitioning:x},G=D?e:void 0,K;typeof r=="function"?K=r(H):K=[r,D?"active":null,j?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let te=typeof s=="function"?s(H):s;return Y.createElement(nP,{...u,"aria-current":G,className:K,ref:h,style:te,to:o,viewTransition:a},typeof l=="function"?l(H):l)});Yae.displayName="NavLink";var Zae=Y.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:s,method:o=Bw,action:a,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:f,...p},m)=>{let g=rle(),v=ile(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&W5.test(a),S=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let R=_.nativeEvent.submitter,D=(R==null?void 0:R.getAttribute("formmethod"))||o;g(R||_.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:i,state:s,relative:u,preventScrollReset:h,viewTransition:f})};return Y.createElement("form",{ref:m,method:x,action:v,onSubmit:r?l:S,...p,"data-discover":!b&&n==="render"?"true":void 0})});Zae.displayName="Form";function Jae(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G5(n){let e=Y.useContext(qm);return Nr(e,Jae(n)),e}function ele(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=uae(),l=uf(),u=ev(n,{relative:s});return Y.useCallback(h=>{if(Pae(h,e)){h.preventDefault();let f=t!==void 0?t:yy(l)===yy(u);a(n,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,u,t,r,e,n,i,s,o])}var tle=0,nle=()=>`__${String(++tle)}__`;function rle(){let{router:n}=G5("useSubmit"),{basename:e}=Y.useContext(iu),t=xae();return Y.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:u}=Oae(r,e);if(i.navigate===!1){let h=i.fetcherKey||nle();await n.fetch(h,t,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function ile(n,{relative:e}={}){let{basename:t}=Y.useContext(iu),r=Y.useContext(tc);Nr(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...ev(n||".",{relative:e})},o=uf();if(n==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();s.search=h?`?${h}`:""}}return(!n||n===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:$u([t,s.pathname])),yy(s)}function sle(n,e={}){let t=Y.useContext(D5);Nr(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=G5("useViewTransitionState"),i=ev(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=Th(t.currentLocation.pathname,r)||t.currentLocation.pathname,o=Th(t.nextLocation.pathname,r)||t.nextLocation.pathname;return r_(i.pathname,o)!=null||r_(i.pathname,s)!=null}new TextEncoder;function rh({children:n,to:e}){return q.jsx(nP,{to:e,className:"text-[#eeff99] font-display text-xl hover:opacity-80",children:n})}function rP({children:n,onClick:e,disabled:t}){return q.jsx("button",{onClick:e,disabled:t,className:`bg-[#ff4444] text-white font-display px-12 py-3 text-xl uppercase transition-colors ${t?"opacity-50 cursor-not-allowed":"hover:bg-[#ff6666]"}`,children:n})}var tv=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(n){return this.listeners.add(n),this.onSubscribe(),()=>{this.listeners.delete(n),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Jd=typeof window>"u"||"Deno"in globalThis;function ea(){}function ole(n,e){return typeof n=="function"?n(e):n}function wC(n){return typeof n=="number"&&n>=0&&n!==1/0}function V5(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Gp(n,e){return typeof n=="function"?n(e):n}function Ha(n,e){return typeof n=="function"?n(e):n}function $B(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:a}=n;if(o){if(r){if(e.queryHash!==iP(o,e.options))return!1}else if(!wy(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||s&&!s(e))}function jB(n,e){const{exact:t,status:r,predicate:i,mutationKey:s}=n;if(s){if(!e.options.mutationKey)return!1;if(t){if(vy(e.options.mutationKey)!==vy(s))return!1}else if(!wy(e.options.mutationKey,s))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function iP(n,e){return((e==null?void 0:e.queryKeyHashFn)||vy)(n)}function vy(n){return JSON.stringify(n,(e,t)=>_C(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function wy(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!wy(n[t],e[t])):!1}function q5(n,e){if(n===e)return n;const t=HB(n)&&HB(e);if(t||_C(n)&&_C(e)){const r=t?n:Object.keys(n),i=r.length,s=t?e:Object.keys(e),o=s.length,a=t?[]:{};let l=0;for(let u=0;u<o;u++){const h=t?u:s[u];(!t&&r.includes(h)||t)&&n[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=q5(n[h],e[h]),a[h]===n[h]&&n[h]!==void 0&&l++)}return i===o&&l===i?n:a}return e}function xC(n,e){if(!e||Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function HB(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function _C(n){if(!WB(n))return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!WB(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(n)!==Object.prototype)}function WB(n){return Object.prototype.toString.call(n)==="[object Object]"}function ale(n){return new Promise(e=>{setTimeout(e,n)})}function bC(n,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?q5(n,e):e}function lle(n,e,t=0){const r=[...n,e];return t&&r.length>t?r.slice(1):r}function ule(n,e,t=0){const r=[e,...n];return t&&r.length>t?r.slice(0,-1):r}var sP=Symbol();function X5(n,e){return!n.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!n.queryFn||n.queryFn===sP?()=>Promise.reject(new Error(`Missing queryFn: '${n.queryHash}'`)):n.queryFn}var Ed,Hc,Kp,QL,cle=(QL=class extends tv{constructor(){super();yt(this,Ed,void 0);yt(this,Hc,void 0);yt(this,Kp,void 0);et(this,Kp,e=>{if(!Jd&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){ae(this,Hc)||this.setEventListener(ae(this,Kp))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,Hc))==null||e.call(this),et(this,Hc,void 0))}setEventListener(e){var t;et(this,Kp,e),(t=ae(this,Hc))==null||t.call(this),et(this,Hc,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){ae(this,Ed)!==e&&(et(this,Ed,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof ae(this,Ed)=="boolean"?ae(this,Ed):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Ed=new WeakMap,Hc=new WeakMap,Kp=new WeakMap,QL),oP=new cle,Qp,Wc,Yp,YL,hle=(YL=class extends tv{constructor(){super();yt(this,Qp,!0);yt(this,Wc,void 0);yt(this,Yp,void 0);et(this,Yp,e=>{if(!Jd&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}})}onSubscribe(){ae(this,Wc)||this.setEventListener(ae(this,Yp))}onUnsubscribe(){var e;this.hasListeners()||((e=ae(this,Wc))==null||e.call(this),et(this,Wc,void 0))}setEventListener(e){var t;et(this,Yp,e),(t=ae(this,Wc))==null||t.call(this),et(this,Wc,e(this.setOnline.bind(this)))}setOnline(e){ae(this,Qp)!==e&&(et(this,Qp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return ae(this,Qp)}},Qp=new WeakMap,Wc=new WeakMap,Yp=new WeakMap,YL),i_=new hle;function SC(){let n,e;const t=new Promise((i,s)=>{n=i,e=s});t.status="pending",t.catch(()=>{});function r(i){Object.assign(t,i),delete t.resolve,delete t.reject}return t.resolve=i=>{r({status:"fulfilled",value:i}),n(i)},t.reject=i=>{r({status:"rejected",reason:i}),e(i)},t}function dle(n){return Math.min(1e3*2**n,3e4)}function K5(n){return(n??"online")==="online"?i_.isOnline():!0}var Q5=class extends Error{constructor(n){super("CancelledError"),this.revert=n==null?void 0:n.revert,this.silent=n==null?void 0:n.silent}};function hA(n){return n instanceof Q5}function Y5(n){let e=!1,t=0,r=!1,i;const s=SC(),o=v=>{var x;r||(p(new Q5(v)),(x=n.abort)==null||x.call(n))},a=()=>{e=!0},l=()=>{e=!1},u=()=>oP.isFocused()&&(n.networkMode==="always"||i_.isOnline())&&n.canRun(),h=()=>K5(n.networkMode)&&n.canRun(),f=v=>{var x;r||(r=!0,(x=n.onSuccess)==null||x.call(n,v),i==null||i(),s.resolve(v))},p=v=>{var x;r||(r=!0,(x=n.onError)==null||x.call(n,v),i==null||i(),s.reject(v))},m=()=>new Promise(v=>{var x;i=b=>{(r||u())&&v(b)},(x=n.onPause)==null||x.call(n)}).then(()=>{var v;i=void 0,r||(v=n.onContinue)==null||v.call(n)}),g=()=>{if(r)return;let v;const x=t===0?n.initialPromise:void 0;try{v=x??n.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(f).catch(b=>{var j;if(r)return;const S=n.retry??(Jd?0:3),_=n.retryDelay??dle,R=typeof _=="function"?_(t,b):_,D=S===!0||typeof S=="number"&&t<S||typeof S=="function"&&S(t,b);if(e||!D){p(b);return}t++,(j=n.onFail)==null||j.call(n,t,b),ale(R).then(()=>u()?void 0:m()).then(()=>{e?p(b):g()})})};return{promise:s,cancel:o,continue:()=>(i==null||i(),s),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?g():m().then(g),s)}}function fle(){let n=[],e=0,t=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const s=a=>{e?n.push(a):i(()=>{t(a)})},o=()=>{const a=n;n=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{t(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{s(()=>{a(...l)})},schedule:s,setNotifyFunction:a=>{t=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var Vi=fle(),Ad,ZL,Z5=(ZL=class{constructor(){yt(this,Ad,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),wC(this.gcTime)&&et(this,Ad,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(n){this.gcTime=Math.max(this.gcTime||0,n??(Jd?1/0:5*60*1e3))}clearGcTimeout(){ae(this,Ad)&&(clearTimeout(ae(this,Ad)),et(this,Ad,void 0))}},Ad=new WeakMap,ZL),Zp,Jp,Zo,ps,Iy,Td,Ua,_u,JL,ple=(JL=class extends Z5{constructor(e){super();yt(this,Ua);yt(this,Zp,void 0);yt(this,Jp,void 0);yt(this,Zo,void 0);yt(this,ps,void 0);yt(this,Iy,void 0);yt(this,Td,void 0);et(this,Td,!1),et(this,Iy,e.defaultOptions),this.setOptions(e.options),this.observers=[],et(this,Zo,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,et(this,Zp,mle(this.options)),this.state=e.state??ae(this,Zp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=ae(this,ps))==null?void 0:e.promise}setOptions(e){this.options={...ae(this,Iy),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ae(this,Zo).remove(this)}setData(e,t){const r=bC(this.state.data,e,this.options);return nn(this,Ua,_u).call(this,{data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){nn(this,Ua,_u).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var r,i;const t=(r=ae(this,ps))==null?void 0:r.promise;return(i=ae(this,ps))==null||i.cancel(e),t?t.then(ea).catch(ea):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ae(this,Zp))}isActive(){return this.observers.some(e=>Ha(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sP||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!V5(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=ae(this,ps))==null||t.continue()}onOnline(){var t;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=ae(this,ps))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),ae(this,Zo).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(ae(this,ps)&&(ae(this,Td)?ae(this,ps).cancel({revert:!0}):ae(this,ps).cancelRetry()),this.scheduleGc()),ae(this,Zo).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||nn(this,Ua,_u).call(this,{type:"invalidate"})}fetch(e,t){var l,u,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(ae(this,ps))return ae(this,ps).continueRetry(),ae(this,ps).promise}if(e&&this.setOptions(e),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const r=new AbortController,i=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(et(this,Td,!0),r.signal)})},s=()=>{const f=X5(this.options,t),p={queryKey:this.queryKey,meta:this.meta};return i(p),et(this,Td,!1),this.options.persister?this.options.persister(f,p,this):f(p)},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};i(o),(l=this.options.behavior)==null||l.onFetch(o,this),et(this,Jp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=o.fetchOptions)==null?void 0:u.meta))&&nn(this,Ua,_u).call(this,{type:"fetch",meta:(h=o.fetchOptions)==null?void 0:h.meta});const a=f=>{var p,m,g,v;hA(f)&&f.silent||nn(this,Ua,_u).call(this,{type:"error",error:f}),hA(f)||((m=(p=ae(this,Zo).config).onError)==null||m.call(p,f,this),(v=(g=ae(this,Zo).config).onSettled)==null||v.call(g,this.state.data,f,this)),this.scheduleGc()};return et(this,ps,Y5({initialPromise:t==null?void 0:t.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:f=>{var p,m,g,v;if(f===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(x){a(x);return}(m=(p=ae(this,Zo).config).onSuccess)==null||m.call(p,f,this),(v=(g=ae(this,Zo).config).onSettled)==null||v.call(g,f,this.state.error,this),this.scheduleGc()},onError:a,onFail:(f,p)=>{nn(this,Ua,_u).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{nn(this,Ua,_u).call(this,{type:"pause"})},onContinue:()=>{nn(this,Ua,_u).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ae(this,ps).start()}},Zp=new WeakMap,Jp=new WeakMap,Zo=new WeakMap,ps=new WeakMap,Iy=new WeakMap,Td=new WeakMap,Ua=new WeakSet,_u=function(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...J5(r.data,this.options),fetchMeta:e.meta??null};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return hA(i)&&i.revert&&ae(this,Jp)?{...ae(this,Jp),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Vi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),ae(this,Zo).notify({query:this,type:"updated",action:e})})},JL);function J5(n,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:K5(e.networkMode)?"fetching":"paused",...n===void 0&&{error:null,status:"pending"}}}function mle(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=e!==void 0,r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var Fl,e4,gle=(e4=class extends tv{constructor(e={}){super();yt(this,Fl,void 0);this.config=e,et(this,Fl,new Map)}build(e,t,r){const i=t.queryKey,s=t.queryHash??iP(i,t);let o=this.get(s);return o||(o=new ple({cache:this,queryKey:i,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(o)),o}add(e){ae(this,Fl).has(e.queryHash)||(ae(this,Fl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=ae(this,Fl).get(e.queryHash);t&&(e.destroy(),t===e&&ae(this,Fl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return ae(this,Fl).get(e)}getAll(){return[...ae(this,Fl).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>$B(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>$B(e,r)):t}notify(e){Vi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Vi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Fl=new WeakMap,e4),Ul,Rs,Cd,zl,kc,t4,yle=(t4=class extends Z5{constructor(e){super();yt(this,zl);yt(this,Ul,void 0);yt(this,Rs,void 0);yt(this,Cd,void 0);this.mutationId=e.mutationId,et(this,Rs,e.mutationCache),et(this,Ul,[]),this.state=e.state||vle(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){ae(this,Ul).includes(e)||(ae(this,Ul).push(e),this.clearGcTimeout(),ae(this,Rs).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){et(this,Ul,ae(this,Ul).filter(t=>t!==e)),this.scheduleGc(),ae(this,Rs).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){ae(this,Ul).length||(this.state.status==="pending"?this.scheduleGc():ae(this,Rs).remove(this))}continue(){var e;return((e=ae(this,Cd))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,s,o,a,l,u,h,f,p,m,g,v,x,b,S,_,R,D,j,H;et(this,Cd,Y5({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(G,K)=>{nn(this,zl,kc).call(this,{type:"failed",failureCount:G,error:K})},onPause:()=>{nn(this,zl,kc).call(this,{type:"pause"})},onContinue:()=>{nn(this,zl,kc).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ae(this,Rs).canRun(this)}));const t=this.state.status==="pending",r=!ae(this,Cd).canStart();try{if(!t){nn(this,zl,kc).call(this,{type:"pending",variables:e,isPaused:r}),await((s=(i=ae(this,Rs).config).onMutate)==null?void 0:s.call(i,e,this));const K=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,e));K!==this.state.context&&nn(this,zl,kc).call(this,{type:"pending",context:K,variables:e,isPaused:r})}const G=await ae(this,Cd).start();return await((u=(l=ae(this,Rs).config).onSuccess)==null?void 0:u.call(l,G,e,this.state.context,this)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,G,e,this.state.context)),await((m=(p=ae(this,Rs).config).onSettled)==null?void 0:m.call(p,G,null,this.state.variables,this.state.context,this)),await((v=(g=this.options).onSettled)==null?void 0:v.call(g,G,null,e,this.state.context)),nn(this,zl,kc).call(this,{type:"success",data:G}),G}catch(G){try{throw await((b=(x=ae(this,Rs).config).onError)==null?void 0:b.call(x,G,e,this.state.context,this)),await((_=(S=this.options).onError)==null?void 0:_.call(S,G,e,this.state.context)),await((D=(R=ae(this,Rs).config).onSettled)==null?void 0:D.call(R,void 0,G,this.state.variables,this.state.context,this)),await((H=(j=this.options).onSettled)==null?void 0:H.call(j,void 0,G,e,this.state.context)),G}finally{nn(this,zl,kc).call(this,{type:"error",error:G})}}finally{ae(this,Rs).runNext(this)}}},Ul=new WeakMap,Rs=new WeakMap,Cd=new WeakMap,zl=new WeakSet,kc=function(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Vi.batch(()=>{ae(this,Ul).forEach(r=>{r.onMutationUpdate(e)}),ae(this,Rs).notify({mutation:this,type:"updated",action:e})})},t4);function vle(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wo,Ry,n4,wle=(n4=class extends tv{constructor(e={}){super();yt(this,wo,void 0);yt(this,Ry,void 0);this.config=e,et(this,wo,new Map),et(this,Ry,Date.now())}build(e,t,r){const i=new yle({mutationCache:this,mutationId:++Gv(this,Ry)._,options:e.defaultMutationOptions(t),state:r});return this.add(i),i}add(e){const t=Y1(e),r=ae(this,wo).get(t)??[];r.push(e),ae(this,wo).set(t,r),this.notify({type:"added",mutation:e})}remove(e){var r;const t=Y1(e);if(ae(this,wo).has(t)){const i=(r=ae(this,wo).get(t))==null?void 0:r.filter(s=>s!==e);i&&(i.length===0?ae(this,wo).delete(t):ae(this,wo).set(t,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const t=(r=ae(this,wo).get(Y1(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!t||t===e}runNext(e){var r;const t=(r=ae(this,wo).get(Y1(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(t==null?void 0:t.continue())??Promise.resolve()}clear(){Vi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...ae(this,wo).values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(r=>jB(t,r))}findAll(e={}){return this.getAll().filter(t=>jB(e,t))}notify(e){Vi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Vi.batch(()=>Promise.all(e.map(t=>t.continue().catch(ea))))}},wo=new WeakMap,Ry=new WeakMap,n4);function Y1(n){var e;return((e=n.options.scope)==null?void 0:e.id)??String(n.mutationId)}function s_(n){return{onFetch:(e,t)=>{var h,f,p,m,g;const r=e.options,i=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const x=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=X5(e.options,e.fetchOptions),S=async(_,R,D)=>{if(v)return Promise.reject();if(R==null&&_.pages.length)return Promise.resolve(_);const j={queryKey:e.queryKey,pageParam:R,direction:D?"backward":"forward",meta:e.options.meta};x(j);const H=await b(j),{maxPages:G}=e.options,K=D?ule:lle;return{pages:K(_.pages,H,G),pageParams:K(_.pageParams,R,G)}};if(i&&s.length){const _=i==="backward",R=_?ez:EC,D={pages:s,pageParams:o},j=R(r,D);a=await S(D,j,_)}else{const _=n??s.length;do{const R=l===0?o[0]??r.initialPageParam:EC(r,a);if(l>0&&R==null)break;a=await S(a,R),l++}while(l<_)}return a};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function EC(n,{pages:e,pageParams:t}){const r=e.length-1;return e.length>0?n.getNextPageParam(e[r],e,t[r],t):void 0}function ez(n,{pages:e,pageParams:t}){var r;return e.length>0?(r=n.getPreviousPageParam)==null?void 0:r.call(n,e[0],e,t[0],t):void 0}function xle(n,e){return e?EC(n,e)!=null:!1}function _le(n,e){return!e||!n.getPreviousPageParam?!1:ez(n,e)!=null}var zr,Gc,Vc,em,tm,qc,nm,rm,r4,ble=(r4=class{constructor(n={}){yt(this,zr,void 0);yt(this,Gc,void 0);yt(this,Vc,void 0);yt(this,em,void 0);yt(this,tm,void 0);yt(this,qc,void 0);yt(this,nm,void 0);yt(this,rm,void 0);et(this,zr,n.queryCache||new gle),et(this,Gc,n.mutationCache||new wle),et(this,Vc,n.defaultOptions||{}),et(this,em,new Map),et(this,tm,new Map),et(this,qc,0)}mount(){Gv(this,qc)._++,ae(this,qc)===1&&(et(this,nm,oP.subscribe(async n=>{n&&(await this.resumePausedMutations(),ae(this,zr).onFocus())})),et(this,rm,i_.subscribe(async n=>{n&&(await this.resumePausedMutations(),ae(this,zr).onOnline())})))}unmount(){var n,e;Gv(this,qc)._--,ae(this,qc)===0&&((n=ae(this,nm))==null||n.call(this),et(this,nm,void 0),(e=ae(this,rm))==null||e.call(this),et(this,rm,void 0))}isFetching(n){return ae(this,zr).findAll({...n,fetchStatus:"fetching"}).length}isMutating(n){return ae(this,Gc).findAll({...n,status:"pending"}).length}getQueryData(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ae(this,zr).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(n){const e=this.defaultQueryOptions(n),t=ae(this,zr).build(this,e),r=t.state.data;return r===void 0?this.fetchQuery(n):(n.revalidateIfStale&&t.isStaleByTime(Gp(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(n){return ae(this,zr).findAll(n).map(({queryKey:e,state:t})=>{const r=t.data;return[e,r]})}setQueryData(n,e,t){const r=this.defaultQueryOptions({queryKey:n}),i=ae(this,zr).get(r.queryHash),s=i==null?void 0:i.state.data,o=ole(e,s);if(o!==void 0)return ae(this,zr).build(this,r).setData(o,{...t,manual:!0})}setQueriesData(n,e,t){return Vi.batch(()=>ae(this,zr).findAll(n).map(({queryKey:r})=>[r,this.setQueryData(r,e,t)]))}getQueryState(n){var t;const e=this.defaultQueryOptions({queryKey:n});return(t=ae(this,zr).get(e.queryHash))==null?void 0:t.state}removeQueries(n){const e=ae(this,zr);Vi.batch(()=>{e.findAll(n).forEach(t=>{e.remove(t)})})}resetQueries(n,e){const t=ae(this,zr),r={type:"active",...n};return Vi.batch(()=>(t.findAll(n).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(n,e={}){const t={revert:!0,...e},r=Vi.batch(()=>ae(this,zr).findAll(n).map(i=>i.cancel(t)));return Promise.all(r).then(ea).catch(ea)}invalidateQueries(n,e={}){return Vi.batch(()=>{if(ae(this,zr).findAll(n).forEach(r=>{r.invalidate()}),(n==null?void 0:n.refetchType)==="none")return Promise.resolve();const t={...n,type:(n==null?void 0:n.refetchType)??(n==null?void 0:n.type)??"active"};return this.refetchQueries(t,e)})}refetchQueries(n,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},r=Vi.batch(()=>ae(this,zr).findAll(n).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,t);return t.throwOnError||(s=s.catch(ea)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(r).then(ea)}fetchQuery(n){const e=this.defaultQueryOptions(n);e.retry===void 0&&(e.retry=!1);const t=ae(this,zr).build(this,e);return t.isStaleByTime(Gp(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(n){return this.fetchQuery(n).then(ea).catch(ea)}fetchInfiniteQuery(n){return n.behavior=s_(n.pages),this.fetchQuery(n)}prefetchInfiniteQuery(n){return this.fetchInfiniteQuery(n).then(ea).catch(ea)}ensureInfiniteQueryData(n){return n.behavior=s_(n.pages),this.ensureQueryData(n)}resumePausedMutations(){return i_.isOnline()?ae(this,Gc).resumePausedMutations():Promise.resolve()}getQueryCache(){return ae(this,zr)}getMutationCache(){return ae(this,Gc)}getDefaultOptions(){return ae(this,Vc)}setDefaultOptions(n){et(this,Vc,n)}setQueryDefaults(n,e){ae(this,em).set(vy(n),{queryKey:n,defaultOptions:e})}getQueryDefaults(n){const e=[...ae(this,em).values()],t={};return e.forEach(r=>{wy(n,r.queryKey)&&Object.assign(t,r.defaultOptions)}),t}setMutationDefaults(n,e){ae(this,tm).set(vy(n),{mutationKey:n,defaultOptions:e})}getMutationDefaults(n){const e=[...ae(this,tm).values()];let t={};return e.forEach(r=>{wy(n,r.mutationKey)&&(t={...t,...r.defaultOptions})}),t}defaultQueryOptions(n){if(n._defaulted)return n;const e={...ae(this,Vc).queries,...this.getQueryDefaults(n.queryKey),...n,_defaulted:!0};return e.queryHash||(e.queryHash=iP(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===sP&&(e.enabled=!1),e}defaultMutationOptions(n){return n!=null&&n._defaulted?n:{...ae(this,Vc).mutations,...(n==null?void 0:n.mutationKey)&&this.getMutationDefaults(n.mutationKey),...n,_defaulted:!0}}clear(){ae(this,zr).clear(),ae(this,Gc).clear()}},zr=new WeakMap,Gc=new WeakMap,Vc=new WeakMap,em=new WeakMap,tm=new WeakMap,qc=new WeakMap,nm=new WeakMap,rm=new WeakMap,r4),Qs,rn,Py,Ps,Id,im,Xc,$l,ky,sm,om,Rd,Pd,Kc,am,kd,s0,My,AC,Oy,TC,Ny,CC,By,IC,Ly,RC,Dy,PC,Fy,kC,S_,nz,i4,tz=(i4=class extends tv{constructor(e,t){super();yt(this,kd);yt(this,My);yt(this,Oy);yt(this,Ny);yt(this,By);yt(this,Ly);yt(this,Dy);yt(this,Fy);yt(this,S_);yt(this,Qs,void 0);yt(this,rn,void 0);yt(this,Py,void 0);yt(this,Ps,void 0);yt(this,Id,void 0);yt(this,im,void 0);yt(this,Xc,void 0);yt(this,$l,void 0);yt(this,ky,void 0);yt(this,sm,void 0);yt(this,om,void 0);yt(this,Rd,void 0);yt(this,Pd,void 0);yt(this,Kc,void 0);yt(this,am,new Set);this.options=t,et(this,Qs,e),et(this,$l,null),et(this,Xc,SC()),this.options.experimental_prefetchInRender||ae(this,Xc).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ae(this,rn).addObserver(this),GB(ae(this,rn),this.options)?nn(this,kd,s0).call(this):this.updateResult(),nn(this,By,IC).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return MC(ae(this,rn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return MC(ae(this,rn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,nn(this,Ly,RC).call(this),nn(this,Dy,PC).call(this),ae(this,rn).removeObserver(this)}setOptions(e,t){const r=this.options,i=ae(this,rn);if(this.options=ae(this,Qs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ha(this.options.enabled,ae(this,rn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");nn(this,Fy,kC).call(this),ae(this,rn).setOptions(this.options),r._defaulted&&!xC(this.options,r)&&ae(this,Qs).getQueryCache().notify({type:"observerOptionsUpdated",query:ae(this,rn),observer:this});const s=this.hasListeners();s&&VB(ae(this,rn),i,this.options,r)&&nn(this,kd,s0).call(this),this.updateResult(t),s&&(ae(this,rn)!==i||Ha(this.options.enabled,ae(this,rn))!==Ha(r.enabled,ae(this,rn))||Gp(this.options.staleTime,ae(this,rn))!==Gp(r.staleTime,ae(this,rn)))&&nn(this,My,AC).call(this);const o=nn(this,Oy,TC).call(this);s&&(ae(this,rn)!==i||Ha(this.options.enabled,ae(this,rn))!==Ha(r.enabled,ae(this,rn))||o!==ae(this,Kc))&&nn(this,Ny,CC).call(this,o)}getOptimisticResult(e){const t=ae(this,Qs).getQueryCache().build(ae(this,Qs),e),r=this.createResult(t,e);return Ele(this,r)&&(et(this,Ps,r),et(this,im,this.options),et(this,Id,ae(this,rn).state)),r}getCurrentResult(){return ae(this,Ps)}trackResult(e,t){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),t==null||t(i),e[i])})}),r}trackProp(e){ae(this,am).add(e)}getCurrentQuery(){return ae(this,rn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=ae(this,Qs).defaultQueryOptions(e),r=ae(this,Qs).getQueryCache().build(ae(this,Qs),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return nn(this,kd,s0).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),ae(this,Ps)))}createResult(e,t){var G;const r=ae(this,rn),i=this.options,s=ae(this,Ps),o=ae(this,Id),a=ae(this,im),u=e!==r?e.state:ae(this,Py),{state:h}=e;let f={...h},p=!1,m;if(t._optimisticResults){const K=this.hasListeners(),te=!K&&GB(e,t),ne=K&&VB(e,r,t,i);(te||ne)&&(f={...f,...J5(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:x}=f;if(t.select&&f.data!==void 0)if(s&&f.data===(o==null?void 0:o.data)&&t.select===ae(this,ky))m=ae(this,sm);else try{et(this,ky,t.select),m=t.select(f.data),m=bC(s==null?void 0:s.data,m,t),et(this,sm,m),et(this,$l,null)}catch(K){et(this,$l,K)}else m=f.data;if(t.placeholderData!==void 0&&m===void 0&&x==="pending"){let K;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))K=s.data;else if(K=typeof t.placeholderData=="function"?t.placeholderData((G=ae(this,om))==null?void 0:G.state.data,ae(this,om)):t.placeholderData,t.select&&K!==void 0)try{K=t.select(K),et(this,$l,null)}catch(te){et(this,$l,te)}K!==void 0&&(x="success",m=bC(s==null?void 0:s.data,K,t),p=!0)}ae(this,$l)&&(g=ae(this,$l),m=ae(this,sm),v=Date.now(),x="error");const b=f.fetchStatus==="fetching",S=x==="pending",_=x==="error",R=S&&b,D=m!==void 0,H={status:x,fetchStatus:f.fetchStatus,isPending:S,isSuccess:x==="success",isError:_,isInitialLoading:R,isLoading:R,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:b,isRefetching:b&&!S,isLoadingError:_&&!D,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:_&&D,isStale:aP(e,t),refetch:this.refetch,promise:ae(this,Xc)};if(this.options.experimental_prefetchInRender){const K=ee=>{H.status==="error"?ee.reject(H.error):H.data!==void 0&&ee.resolve(H.data)},te=()=>{const ee=et(this,Xc,H.promise=SC());K(ee)},ne=ae(this,Xc);switch(ne.status){case"pending":e.queryHash===r.queryHash&&K(ne);break;case"fulfilled":(H.status==="error"||H.data!==ne.value)&&te();break;case"rejected":(H.status!=="error"||H.error!==ne.reason)&&te();break}}return H}updateResult(e){const t=ae(this,Ps),r=this.createResult(ae(this,rn),this.options);if(et(this,Id,ae(this,rn).state),et(this,im,this.options),ae(this,Id).data!==void 0&&et(this,om,ae(this,rn)),xC(r,t))return;et(this,Ps,r);const i={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!ae(this,am).size)return!0;const l=new Set(a??ae(this,am));return this.options.throwOnError&&l.add("error"),Object.keys(ae(this,Ps)).some(u=>{const h=u;return ae(this,Ps)[h]!==t[h]&&l.has(h)})};(e==null?void 0:e.listeners)!==!1&&s()&&(i.listeners=!0),nn(this,S_,nz).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&nn(this,By,IC).call(this)}},Qs=new WeakMap,rn=new WeakMap,Py=new WeakMap,Ps=new WeakMap,Id=new WeakMap,im=new WeakMap,Xc=new WeakMap,$l=new WeakMap,ky=new WeakMap,sm=new WeakMap,om=new WeakMap,Rd=new WeakMap,Pd=new WeakMap,Kc=new WeakMap,am=new WeakMap,kd=new WeakSet,s0=function(e){nn(this,Fy,kC).call(this);let t=ae(this,rn).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ea)),t},My=new WeakSet,AC=function(){nn(this,Ly,RC).call(this);const e=Gp(this.options.staleTime,ae(this,rn));if(Jd||ae(this,Ps).isStale||!wC(e))return;const r=V5(ae(this,Ps).dataUpdatedAt,e)+1;et(this,Rd,setTimeout(()=>{ae(this,Ps).isStale||this.updateResult()},r))},Oy=new WeakSet,TC=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ae(this,rn)):this.options.refetchInterval)??!1},Ny=new WeakSet,CC=function(e){nn(this,Dy,PC).call(this),et(this,Kc,e),!(Jd||Ha(this.options.enabled,ae(this,rn))===!1||!wC(ae(this,Kc))||ae(this,Kc)===0)&&et(this,Pd,setInterval(()=>{(this.options.refetchIntervalInBackground||oP.isFocused())&&nn(this,kd,s0).call(this)},ae(this,Kc)))},By=new WeakSet,IC=function(){nn(this,My,AC).call(this),nn(this,Ny,CC).call(this,nn(this,Oy,TC).call(this))},Ly=new WeakSet,RC=function(){ae(this,Rd)&&(clearTimeout(ae(this,Rd)),et(this,Rd,void 0))},Dy=new WeakSet,PC=function(){ae(this,Pd)&&(clearInterval(ae(this,Pd)),et(this,Pd,void 0))},Fy=new WeakSet,kC=function(){const e=ae(this,Qs).getQueryCache().build(ae(this,Qs),this.options);if(e===ae(this,rn))return;const t=ae(this,rn);et(this,rn,e),et(this,Py,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},S_=new WeakSet,nz=function(e){Vi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(ae(this,Ps))}),ae(this,Qs).getQueryCache().notify({query:ae(this,rn),type:"observerResultsUpdated"})})},i4);function Sle(n,e){return Ha(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function GB(n,e){return Sle(n,e)||n.state.data!==void 0&&MC(n,e,e.refetchOnMount)}function MC(n,e,t){if(Ha(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&aP(n,e)}return!1}function VB(n,e,t,r){return(n!==e||Ha(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&aP(n,t)}function aP(n,e){return Ha(e.enabled,n)!==!1&&n.isStaleByTime(Gp(e.staleTime,n))}function Ele(n,e){return!xC(n.getCurrentResult(),e)}var Ale=class extends tz{constructor(n,e){super(n,e)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n,e){super.setOptions({...n,behavior:s_()},e)}getOptimisticResult(n){return n.behavior=s_(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,e){var g,v;const{state:t}=n,r=super.createResult(n,e),{isFetching:i,isRefetching:s,isError:o,isRefetchError:a}=r,l=(v=(g=t.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:v.direction,u=o&&l==="forward",h=i&&l==="forward",f=o&&l==="backward",p=i&&l==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:xle(e,t.data),hasPreviousPage:_le(e,t.data),isFetchNextPageError:u,isFetchingNextPage:h,isFetchPreviousPageError:f,isFetchingPreviousPage:p,isRefetchError:a&&!u&&!f,isRefetching:s&&!h&&!p}}},rz=Y.createContext(void 0),iz=n=>{const e=Y.useContext(rz);if(n)return n;if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Tle=({client:n,children:e})=>(Y.useEffect(()=>(n.mount(),()=>{n.unmount()}),[n]),q.jsx(rz.Provider,{value:n,children:e})),sz=Y.createContext(!1),Cle=()=>Y.useContext(sz);sz.Provider;function Ile(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Rle=Y.createContext(Ile()),Ple=()=>Y.useContext(Rle);function kle(n,e){return typeof n=="function"?n(...e):!!n}function qB(){}var Mle=(n,e)=>{(n.suspense||n.throwOnError||n.experimental_prefetchInRender)&&(e.isReset()||(n.retryOnMount=!1))},Ole=n=>{Y.useEffect(()=>{n.clearReset()},[n])},Nle=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&kle(t,[n.error,r]),Ble=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Lle=(n,e)=>n.isLoading&&n.isFetching&&!e,Dle=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,XB=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function oz(n,e,t){var h,f,p,m,g;const r=iz(t),i=Cle(),s=Ple(),o=r.defaultQueryOptions(n);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=i?"isRestoring":"optimistic",Ble(o),Mle(o,s),Ole(s);const a=!r.getQueryCache().get(o.queryHash),[l]=Y.useState(()=>new e(r,o)),u=l.getOptimisticResult(o);if(Y.useSyncExternalStore(Y.useCallback(v=>{const x=i?qB:l.subscribe(Vi.batchCalls(v));return l.updateResult(),x},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),Y.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),Dle(o,u))throw XB(o,l,s);if(Nle({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw u.error;if((m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,u),o.experimental_prefetchInRender&&!Jd&&Lle(u,i)){const v=a?XB(o,l,s):(g=r.getQueryCache().get(o.queryHash))==null?void 0:g.promise;v==null||v.catch(qB).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?u:l.trackResult(u)}function az(n,e){return oz(n,tz,e)}function Fle(n,e){return oz(n,Ale,e)}const Ule="https://rpgtown.vercel.app",zle=n=>n?`${n.slice(0,4)}...${n.slice(-4)}`:"";function $le(){const{data:n,status:e}=az({queryKey:["leaderboard","born"],queryFn:async()=>{const r=await fetch(`${Ule}/api/leaderboard?limit=10&includeBorn=true&is_born=true`);if(!r.ok)throw new Error("Network response was not ok");return r.json()}}),t=(n==null?void 0:n.items)??[];return e==="pending"?q.jsx("div",{className:"bg-black/80 rounded-lg p-6 w-full max-w-4xl",children:q.jsx("div",{className:"text-center py-8",children:q.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#eeff99]"})})}):e==="error"?q.jsx("div",{className:"bg-black/80 rounded-lg p-6 w-full max-w-4xl",children:q.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading leaderboard"})}):t.length===0?q.jsx("div",{className:"bg-black/80 rounded-lg p-6 w-full max-w-4xl",children:q.jsx("div",{className:"text-center py-8 text-[#eeff99] font-display text-xl",children:"NO CITIZENS BORN YET"})}):q.jsxs("div",{className:"bg-black/80 rounded-lg p-6 w-full max-w-4xl",children:[q.jsxs("div",{className:"grid grid-cols-6 gap-4 text-[#eeff99] font-display text-xl mb-6",children:[q.jsx("div",{children:"RANK"}),q.jsx("div",{children:"AVATAR"}),q.jsx("div",{children:"NAME"}),q.jsx("div",{children:"WALLET"}),q.jsx("div",{children:"$TOWN"}),q.jsx("div",{children:"BORN"})]}),q.jsx("div",{className:"space-y-4",children:t.map((r,i)=>q.jsxs("div",{className:"grid grid-cols-6 gap-4 items-center bg-black/40 rounded p-4 text-white",children:[q.jsx("div",{className:"font-display text-[#eeff99]",children:q.jsxs("span",{className:"font-numbers",children:["#",i+1]})}),q.jsx("div",{className:"flex items-center justify-center",children:q.jsx("img",{src:r.avatarUrl,alt:r.name,className:"w-16 h-16 object-contain rounded brightness-90"})}),q.jsx("div",{className:"font-display",children:r.name}),q.jsx("div",{className:"font-display truncate",children:zle(r.wallet)}),q.jsx("div",{className:"font-display",children:q.jsx("span",{className:"font-numbers",children:r.tokenBalance})}),q.jsx("div",{className:"font-display",children:q.jsx("span",{className:"font-numbers",children:r.bornAt?new Date(r.bornAt).toLocaleDateString():"Not born"})})]},r.id))})]})}function KB({phase:n,title:e,items:t}){return q.jsxs("div",{className:"bg-black/80 rounded-lg p-16",children:[q.jsx("h3",{className:"font-display text-[#eeff99] text-4xl mb-8",children:n}),q.jsx("h4",{className:"text-white mb-10 text-xl",children:e}),q.jsx("ul",{className:"text-white space-y-8",children:t.map((r,i)=>q.jsx("li",{className:"leading-relaxed",children:r},i))}),q.jsx("div",{className:"mt-16",children:q.jsx(rP,{children:"Start"})})]})}const jle="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAABn6hpJAAAOzUlEQVR4Ae2dvY5lVxFGL5YDkHBIRoxGZIgMJPsJnPIaxH4CYr+GUz8BI5ls5Gw0mpjMoS3ZgdWmw96re+5Huc7/XkRTXf9rN+VTu0/fvt38nwQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJSEACEpCABCQgAQlIQAISkIAEJCABCUhAAhKQgAQkIAEJVAj8pmKs7fEJfPbNq1+eVvnvv7/zjJ8C8d8DgY8GSUECEpiKgANgquO2WQmMBBwAIw8lCUxFwP3w5MfNnT+1451AIjSX3ieAuc7bbiUwEHAADDgUJDAXAQfAXOdttxIYCHgHMOA4nvCHf300/Fz/z5/+6W6Rb1+/H/TJnncC6U6B9kOyXyEw39Lxf0VJU7n4BDDVcdusBEYCDoCRh5IEpiLgAJjquG1WAiMB7wBGHrtL3Pl//Pbhbk2/+0tthvNOoHpnwGKqOzt3fsajXI1Pf+X7BGrfPfdjqZWABE5GwAFwsgOzXAksScABsCRNY0ngZAS8A1j4wLo7broDSDs/7wxozzsAts87AeqTf9rZ2V81Puv77ouH0vdw93xY79llnwDOfoLWL4EGAQdAA56uEjg7AQfA2U/Q+iXQIPBxw/cSrtwJ0w7LptNOy52VO3Ty5w7PHZ/10J76N1++45cGmf6sN/UzBPs/hG588mO8VELqp/v9kfLvrfcJYO8TML8EdiTgANgRvqklsDcBB8DeJ2B+CexIYLo7AO6MZJ92vuTPnZLxKaedlfG4o6c7AeajP/WpHtpTJj/WT/ukp32Sl46X8p1d7xPA2U/Q+iXQIOAAaMDTVQJnJ+AAOPsJWr8EGgRK71E38izmyh2cO2v6OT79WRjjbb1TLp2fdwTpDiDxoL7KZ+n+WA/lbj76Mz7l9P1H+71lnwD2PgHzS2BHAg6AHeGbWgJ7E3AA7H0C5pfAjgQu9x4Afw5NtmlnpT7tgLRnvqrcjcedv5qf/m9v498ZSPESL/rTnv0nPeut3nGkeqhP9dH+6LJPAEc/IeuTwIoEHAArwjW0BI5OwAFw9BOyPgmsSGD3O4Df/+M2/O27aq/cyejPHZL6JKf4aQdN+pS/61/diZN94pl4pX5TfOqXvqPo1p/6O5reJ4CjnYj1SGBDAg6ADWGbSgJHI+AAONqJWI8ENiSw++8CVO8AuKN2d2SyrsZL9lU966HM/qnfOh/zJ/nZDv+6957B2js76039Jf3RflfAJ4B0YuolcGECDoALH66tSSARcAAkQuolcGECm98BVHf+Kvu0IzMed2bqq/Hof7T4rKfbX+r3r/98NZhwZ087dtd+SP4osH/WR/uUP+kZj/LedwI+AfBElCUwEQEHwESHbasSIAEHAIkoS2AiAqv/LsDWOz93PJ4ld17KtO/KS8dnfyl+1T71u3Q87tDMn+4IaJ9k8mL+pfOl+OnzK9a+I/AJIH3HqJfAhQk4AC58uLYmgUTAAZAIqZfAhQmsfgfww1e34V2D7p0Ad7jq2XCHTf7Ml/xpn+IzHv27esZL9SR9ikc9d+DUT8rPeLTnDk976ulPe+ops5/bp7QYZcZP9Yzey0s+ASzP1IgSOA0BB8BpjspCJbA8AQfA8kyNKIHTEBj28z2qXvtOgDsad1T2nOyppz/llI/2a8usn/VRz3r47jx3Wtpzx032zJ/ypfjUs76u/ObLd0MI8hyUjwLrIQ/q6b/0ewE+AZCwsgQmIuAAmOiwbVUCJOAAIBFlCUxEYPH3ALo7fWKfdqzkn/QpftJzh6XM/Cke7ZPMHZI7JvOxPuqZj/Go78opP+OzHvaf7KmnP+PTPtXLePRP8tI7P/P5BEAiyhKYiIADYKLDtlUJkIADgESUJTARgcXfA1j7DiCdDXcy7rj0T/bU078qsx7GT/pqvmRfzcedNu3IKf/WetbPn+NX3ztI9ZMP8yc94y99J+ATAAkrS2AiAg6AiQ7bViVAAg4AElGWwEQEFn8PYG12aWfmTlutJ8VP+pSv68/47Jfxu/b0585Kfbee6g7OetKOTftuPvbflVkf++nGp79PACSiLIGJCDgAJjpsW5UACTgASERZAhMRWPw9ALKrvhfAHZY7JeN37Rmvmo/+lBmvWi/j0Z/6rsx6GW/t/MxHmfWxHurpT3vquXNzJ0/21Cd/2lNmPdRTrr4n4BMACSpLYCICDoCJDttWJUACDgASUZbARARWfw+g+ncB0g6XzoY7XopHfdU/1UM981HP/NR3Ze6U3FGZP9VbrYfxmC/FSz+3r8ZL+RIv+pNn8k88GI/5GJ/6JPsEkAipl8CFCTgALny4tiaBRMABkAipl8CFCax+B7A2O+5QzMedkPbUV/1p/2xHvb0fTJh/UL4gJHvWT3vq007JEuhPfZJZD+2pZz7q34Jn2oHZL+MxH+ujf8qX/Kln/hSf9TBeVfYJoEpMewlciIAD4EKHaSsSqBJwAFSJaS+BCxE43O8CrM2WO1fKV90ZaZ/iV+tJ8VL+bj7uqPxMvRR/6foYr5qf9uyvu3MzHs+vGj/F83cBSFhZAhL4IAFXgA+iUSGB6xNwAFz/jO1QAh8kcPg7gJ//O9b+8R9HmRJ3OuqT/P3XD4PJJ5/3ZmTaUakfkj8K7If21NM/2Sc9460ts55n71W8Ht+rSPVwZ67u3KyH+cif+Wif8tOf9tRXd37W0/vuZjRlCUjgVAQcAKc6LouVwLIEHADL8jSaBE5FYPU7ANKofkYg/asydzTudF0960nxqvZbx2M+1pvkxDf5b60/W728AyCv6p2ATwAkqCyBiQg4ACY6bFuVAAk4AEhEWQITEdj88wCqnxHInZQ7WzqrZE99ypf0qZ6kZ/xkfzT90vV3z6fLhzs3f/ehG7/7ngPzf/bNq1+efi3dCfgE8JSW/5bAZAQcAJMduO1K4CkBB8BTGv5bApMR2PwOoPoeAHfAtc+nm4/+3ImpZz/U058y7Rkv2VNP/2r8qj/tUz207+7QzMedn+/iMz9lxqOePBmf+elftac/ZZ8ASERZAhMRcABMdNi2KgEScACQiLIEJiKw+R3A2myrnx/AerjDcWdb2n7teKl+6tk/Zdqzfsr0pz7JXX/u1NyhU37qWQ95UH52RxH+rkGqj/2wvqrsE0CVmPYSuBABB8CFDtNWJFAl4ACoEtNeAhcicLjPA+ju8N2z4Y6X4nHnoz3j0T7pGY8y/amnzPzUp3j0T/aMn+Sjx+/Wl3Z4/q5B4st46d1/8vcJgESUJTARAQfARIdtqxIgAQcAiShLYCICm98BkC1/N4B3ALRPfxeA9l2ZOxh3QManPfVJZvxqvK5/qq+r587KnZfxU//VfpN90rM+2lPP+pN98ic/2lNOdwI+AZCYsgQmIuAAmOiwbVUCJOAAIBFlCUxEYPc7gN/+7TZ8hhnZp52fdwZL27MeytzxqOfOR3vq6Z/sk37teNX4yZ76rWWeR+Jb1a/dD+8IvANYm7jxJXBiAq4AJz48S5dAl4ADoEtQfwmcmMDhPw+AO36XdbojqMbnzlj1pz13yq4+1cd8W9szX7ce8kpyNT/r48795tt3Q0rqB+WjwPcgnn1+wOv3gwvjpc8PGJxfEHwCeAGKX5LALAQcALOctH1K4AUCDoAXoPglCcxCYPc7gJ/+cxveRUjvBfBglt7pueNxR+SdRMqf4iU9+0321NOf/VDflRk/1dPNV/Wv1pfq5w7etWe8an9Vf58AqoS1l8CFCDgALnSYtiKBKgEHQJWY9hK4EIFh/z5iX9U7gdRD2tmT/9r6tEOmHZZ61pvi074aL9kzfrUe+nfl9HP11E+3fubnewEpPv15B/DdFw93/z/uE0D3O0h/CZyYgAPgxIdn6RLoEnAAdAnqL4ETE7i7Hxyxr+qdwNY7P3e2tEN2GVfzJXvqU33V/qrxq/m78dkP4yU9663a07+74zMeZZ8ASERZAhMRcABMdNi2KgEScACQiLIEJiJw+DuA6s6fzo53Any3n/60p74qM9/S8VM93GmTPfXcaalP8emf7Bm/6l+1Z76qnPJRn+InPunn/Cm+TwCJkHoJXJiAA+DCh2trEkgEHACJkHoJXJjA7p8HsDVb7uDV/PRPOzztU76qPfMn/x9vD6mEu3rGZ37uuNxhKSf7u8U8Kr//euznk8/v/zetmo/2qZ7UX/KnnvkZn/ZV+T6tajTtJSCBUxFwAJzquCxWAssScAAsy9NoEjgVgcO/B0CaS78XwPhVmTswd+RqvKo989M/1ZP8l47HetbOz3zsh/mTffKnPsnMx3qS/w9fjZ+pmeyp9wmARJQlMBEBB8BEh22rEiABBwCJKEtgIgKnuwPg2RztToD1KUtgSQL8Oxrd2D4BdAnqL4ETE3AAnPjwLF0CXQIOgC5B/SVwYgL/A8SVi/wqzMVKAAAAAElFTkSuQmCC",Hle="/assets/sprites_example-312b0051.png";function Wle(){const[n,e]=Y.useState(!1);return q.jsxs(q.Fragment,{children:[q.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-between font-body game-background w-full",children:[q.jsx(loe,{isOpen:n,onRequestClose:()=>e(!1),style:Gle,contentLabel:"Help modal",ariaHideApp:!1,children:q.jsxs("div",{className:"font-body",children:[q.jsx("h1",{className:"text-center text-6xl font-bold font-display game-title",children:"Help"}),q.jsxs("p",{children:["Welcome to AI town. AI town supports both anonymous ",q.jsx("i",{children:"spectators"})," and logged in"," ",q.jsx("i",{children:"interactivity"}),"."]}),q.jsx("h2",{className:"text-4xl mt-4",children:"Spectating"}),q.jsx("p",{children:"Click and drag to move around the town, and scroll in and out to zoom. You can click on an individual character to view its chat history."}),q.jsx("h2",{className:"text-4xl mt-4",children:"Interactivity"}),q.jsx("p",{children:'If you log in, you can join the simulation and directly talk to different agents! After logging in, click the "Interact" button, and your character will appear somewhere on the map with a highlighted circle underneath you.'}),q.jsx("p",{className:"text-2xl mt-2",children:"Controls:"}),q.jsx("p",{className:"mt-4",children:"Click to navigate around."}),q.jsx("p",{className:"mt-4",children:`To talk to an agent, click on them and then click "Start conversation," which will ask them to start walking towards you. Once they're nearby, the conversation will start, and you can speak to each other. You can leave at any time by closing the conversation pane or moving away. They may propose a conversation to you - you'll see a button to accept in the messages panel.`}),q.jsxs("p",{className:"mt-4",children:["AI town only supports ",Y2," humans at a time. If you're idle for five minutes, you'll be automatically removed from the simulation."]})]})}),q.jsxs("div",{className:"w-full lg:h-screen min-h-screen relative isolate overflow-hidden lg:p-8 shadow-2xl flex flex-col justify-start",children:[q.jsxs("div",{className:"text-center",children:[q.jsxs("nav",{className:"flex justify-center gap-8 mb-12",children:[q.jsx(rh,{to:"/",children:"HOME"}),q.jsx(rh,{to:"/create",children:"CREATE"}),q.jsx(rh,{to:"/game-design",children:"GAME DESIGN"}),q.jsx(rh,{to:"/road-map",children:"ROAD MAP"})]}),q.jsxs("div",{className:"mt-16",children:[q.jsx("h2",{className:"font-display text-xl sm:text-2xl mb-2",style:{color:"#eeff99"},children:"Welcome to"}),q.jsx("h1",{className:"mx-auto text-2xl p-2 sm:text-5xl lg:text-6xl font-bold font-display leading-none tracking-wide w-full text-left sm:text-center sm:w-auto",style:{color:"#eeff99"},children:"Solana Town"})]})]}),q.jsxs("div",{className:"max-w-xs md:max-w-xl lg:max-w-none mx-auto my-4 text-center text-base sm:text-lg md:text-xl text-white leading-tight shadow-solid",children:[q.jsx("div",{className:"mb-4",children:"IN A DISTANT LAND FAR FAR AWAY."}),q.jsx("div",{children:"A VIRTUAL TOWN WHERE AI CHARACTERS LIVE, CHAT AND SOCIALIZE."})]}),q.jsx(ese,{}),q.jsx("footer",{className:"justify-end bottom-0 left-0 w-full flex items-center mt-4 gap-3 p-6 flex-wrap pointer-events-none",children:q.jsxs("div",{className:"flex gap-4 flex-grow pointer-events-none",children:[q.jsx(boe,{}),q.jsx(P5,{imgUrl:tse,onClick:()=>e(!0),children:"Help"})]})}),q.jsx(Ux,{position:"bottom-right",autoClose:2e3,closeOnClick:!0,theme:"dark"})]})]}),q.jsxs("div",{className:"w-full rest-background",children:[q.jsx("section",{className:"w-full flex flex-col items-center pt-48 pb-32",children:q.jsxs("div",{className:"flex flex-col lg:flex-row items-center justify-between max-w-7xl w-full gap-12 px-8",children:[q.jsx("div",{className:"lg:w-1/2",children:q.jsx("img",{src:Hle,alt:"Character Sprites",className:"w-full object-contain"})}),q.jsxs("div",{className:"lg:w-1/2 text-white",children:[q.jsxs("h2",{className:"font-display text-4xl sm:text-6xl mb-8",style:{color:"#eeff99"},children:["YOUR",q.jsx("br",{}),"CHARACTER"]}),q.jsxs("p",{className:"text-xl mb-8 max-w-md",children:["PICK YOUR HERO AND HAVE",q.jsx("br",{}),"THEM ENGAGE WITH OTHER AI",q.jsx("br",{}),"CHARACTERS IN OUR SOLANA",q.jsx("br",{}),"TOWN."]}),q.jsx(rP,{children:"Start"})]})]})}),q.jsxs("section",{className:"w-full flex flex-col items-center py-32",children:[q.jsx("h2",{className:"font-display text-6xl mb-16",style:{color:"#eeff99"},children:"SOLANA CITIZENS"}),q.jsx($le,{})]}),q.jsxs("section",{className:"w-full flex flex-col items-center py-32",children:[q.jsxs("div",{className:"flex items-end gap-12 mb-12",children:[q.jsx("div",{className:"w-32 flex items-center justify-start -mt-12",children:q.jsx("img",{src:jle,alt:"Bush",className:"w-32 h-32 object-contain brightness-90"})}),q.jsxs("div",{children:[q.jsx("h2",{className:"font-display text-6xl mb-2",style:{color:"#eeff99"},children:"ROADMAP"}),q.jsx("p",{className:"text-white font-display text-xl",children:"WHERE ARE WE GOING?"})]})]}),q.jsxs("div",{className:"flex justify-center gap-4 max-w-7xl w-full px-8",children:[q.jsx("div",{className:"max-w-lg",children:q.jsx(KB,{phase:"PHASE ONE",title:"Create On-Chain AI Creatures",items:["Upload two photos of your choice. It doesn't have to be animals but would be great if one of them is.","Our generative AI model will create a hybrid of the two in pixelated art expression."]})}),q.jsx("div",{className:"max-w-lg",children:q.jsx(KB,{phase:"PHASE ONE",title:"Create On-Chain AI Creatures",items:["Upload two photos of your choice. It doesn't have to be animals but would be great if one of them is.","Our generative AI model will create a hybrid of the two in pixelated art expression."]})})]})]})]})]})}const Gle={overlay:{backgroundColor:"rgb(0, 0, 0, 75%)",zIndex:12},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:"50%",border:"10px solid rgb(23, 20, 33)",borderRadius:"0",background:"rgb(35, 38, 58)",color:"white",fontFamily:'"Upheaval Pro", "sans-serif"'}};function Vle(){return"https://harmless-beagle-924.convex.cloud"}const qle=new cte(Vle(),{unsavedChangesWarning:!1});function Xle({children:n}){return q.jsx(h6,{client:qle,children:n})}var xi={},Sb={};Sb.byteLength=Yle;Sb.toByteArray=Jle;Sb.fromByteArray=nue;var Vl=[],Yo=[],Kle=typeof Uint8Array<"u"?Uint8Array:Array,dA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Gf=0,Qle=dA.length;Gf<Qle;++Gf)Vl[Gf]=dA[Gf],Yo[dA.charCodeAt(Gf)]=Gf;Yo["-".charCodeAt(0)]=62;Yo["_".charCodeAt(0)]=63;function lz(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function Yle(n){var e=lz(n),t=e[0],r=e[1];return(t+r)*3/4-r}function Zle(n,e,t){return(e+t)*3/4-t}function Jle(n){var e,t=lz(n),r=t[0],i=t[1],s=new Kle(Zle(n,r,i)),o=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=Yo[n.charCodeAt(l)]<<18|Yo[n.charCodeAt(l+1)]<<12|Yo[n.charCodeAt(l+2)]<<6|Yo[n.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=Yo[n.charCodeAt(l)]<<2|Yo[n.charCodeAt(l+1)]>>4,s[o++]=e&255),i===1&&(e=Yo[n.charCodeAt(l)]<<10|Yo[n.charCodeAt(l+1)]<<4|Yo[n.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function eue(n){return Vl[n>>18&63]+Vl[n>>12&63]+Vl[n>>6&63]+Vl[n&63]}function tue(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(eue(r));return i.join("")}function nue(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(tue(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(Vl[e>>2]+Vl[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(Vl[e>>10]+Vl[e>>4&63]+Vl[e<<2&63]+"=")),i.join("")}var lP={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */lP.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,l=(1<<a)-1,u=l>>1,h=-7,f=t?i-1:0,p=t?-1:1,m=n[e+f];for(f+=p,s=m&(1<<-h)-1,m>>=-h,h+=a;h>0;s=s*256+n[e+f],f+=p,h-=8);for(o=s&(1<<-h)-1,s>>=-h,h+=r;h>0;o=o*256+n[e+f],f+=p,h-=8);if(s===0)s=1-u;else{if(s===l)return o?NaN:(m?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-u}return(m?-1:1)*o*Math.pow(2,s-r)};lP.write=function(n,e,t,r,i,s){var o,a,l,u=s*8-i-1,h=(1<<u)-1,f=h>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:s-1,g=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=p/l:e+=p*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=h?(a=0,o=h):o+f>=1?(a=(e*l-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;n[t+m]=a&255,m+=g,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;n[t+m]=o&255,m+=g,o/=256,u-=8);n[t+m-g]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=Sb,t=lP,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=h,n.SlowBuffer=D,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const $=new s(1),P={foo:function(){return 42}};return Object.setPrototypeOf(P,s.prototype),Object.setPrototypeOf($,P),$.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function u($){if($>i)throw new RangeError('The value "'+$+'" is invalid for option "size"');const P=new s($);return Object.setPrototypeOf(P,h.prototype),P}function h($,P,M){if(typeof $=="number"){if(typeof P=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return g($)}return f($,P,M)}h.poolSize=8192;function f($,P,M){if(typeof $=="string")return v($,P);if(o.isView($))return b($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(nt($,o)||$&&nt($.buffer,o)||typeof a<"u"&&(nt($,a)||$&&nt($.buffer,a)))return S($,P,M);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const X=$.valueOf&&$.valueOf();if(X!=null&&X!==$)return h.from(X,P,M);const re=_($);if(re)return re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return h.from($[Symbol.toPrimitive]("string"),P,M);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}h.from=function($,P,M){return f($,P,M)},Object.setPrototypeOf(h.prototype,s.prototype),Object.setPrototypeOf(h,s);function p($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function m($,P,M){return p($),$<=0?u($):P!==void 0?typeof M=="string"?u($).fill(P,M):u($).fill(P):u($)}h.alloc=function($,P,M){return m($,P,M)};function g($){return p($),u($<0?0:R($)|0)}h.allocUnsafe=function($){return g($)},h.allocUnsafeSlow=function($){return g($)};function v($,P){if((typeof P!="string"||P==="")&&(P="utf8"),!h.isEncoding(P))throw new TypeError("Unknown encoding: "+P);const M=j($,P)|0;let X=u(M);const re=X.write($,P);return re!==M&&(X=X.slice(0,re)),X}function x($){const P=$.length<0?0:R($.length)|0,M=u(P);for(let X=0;X<P;X+=1)M[X]=$[X]&255;return M}function b($){if(nt($,s)){const P=new s($);return S(P.buffer,P.byteOffset,P.byteLength)}return x($)}function S($,P,M){if(P<0||$.byteLength<P)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<P+(M||0))throw new RangeError('"length" is outside of buffer bounds');let X;return P===void 0&&M===void 0?X=new s($):M===void 0?X=new s($,P):X=new s($,P,M),Object.setPrototypeOf(X,h.prototype),X}function _($){if(h.isBuffer($)){const P=R($.length)|0,M=u(P);return M.length===0||$.copy(M,0,0,P),M}if($.length!==void 0)return typeof $.length!="number"||Ot($.length)?u(0):x($);if($.type==="Buffer"&&Array.isArray($.data))return x($.data)}function R($){if($>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return $|0}function D($){return+$!=$&&($=0),h.alloc(+$)}h.isBuffer=function(P){return P!=null&&P._isBuffer===!0&&P!==h.prototype},h.compare=function(P,M){if(nt(P,s)&&(P=h.from(P,P.offset,P.byteLength)),nt(M,s)&&(M=h.from(M,M.offset,M.byteLength)),!h.isBuffer(P)||!h.isBuffer(M))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(P===M)return 0;let X=P.length,re=M.length;for(let ue=0,me=Math.min(X,re);ue<me;++ue)if(P[ue]!==M[ue]){X=P[ue],re=M[ue];break}return X<re?-1:re<X?1:0},h.isEncoding=function(P){switch(String(P).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(P,M){if(!Array.isArray(P))throw new TypeError('"list" argument must be an Array of Buffers');if(P.length===0)return h.alloc(0);let X;if(M===void 0)for(M=0,X=0;X<P.length;++X)M+=P[X].length;const re=h.allocUnsafe(M);let ue=0;for(X=0;X<P.length;++X){let me=P[X];if(nt(me,s))ue+me.length>re.length?(h.isBuffer(me)||(me=h.from(me)),me.copy(re,ue)):s.prototype.set.call(re,me,ue);else if(h.isBuffer(me))me.copy(re,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=me.length}return re};function j($,P){if(h.isBuffer($))return $.length;if(o.isView($)||nt($,o))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const M=$.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&M===0)return 0;let re=!1;for(;;)switch(P){case"ascii":case"latin1":case"binary":return M;case"utf8":case"utf-8":return Bt($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M*2;case"hex":return M>>>1;case"base64":return Ke($).length;default:if(re)return X?-1:Bt($).length;P=(""+P).toLowerCase(),re=!0}}h.byteLength=j;function H($,P,M){let X=!1;if((P===void 0||P<0)&&(P=0),P>this.length||((M===void 0||M>this.length)&&(M=this.length),M<=0)||(M>>>=0,P>>>=0,M<=P))return"";for($||($="utf8");;)switch($){case"hex":return T(this,P,M);case"utf8":case"utf-8":return C(this,P,M);case"ascii":return z(this,P,M);case"latin1":case"binary":return N(this,P,M);case"base64":return O(this,P,M);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,P,M);default:if(X)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),X=!0}}h.prototype._isBuffer=!0;function G($,P,M){const X=$[P];$[P]=$[M],$[M]=X}h.prototype.swap16=function(){const P=this.length;if(P%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let M=0;M<P;M+=2)G(this,M,M+1);return this},h.prototype.swap32=function(){const P=this.length;if(P%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let M=0;M<P;M+=4)G(this,M,M+3),G(this,M+1,M+2);return this},h.prototype.swap64=function(){const P=this.length;if(P%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let M=0;M<P;M+=8)G(this,M,M+7),G(this,M+1,M+6),G(this,M+2,M+5),G(this,M+3,M+4);return this},h.prototype.toString=function(){const P=this.length;return P===0?"":arguments.length===0?C(this,0,P):H.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(P){if(!h.isBuffer(P))throw new TypeError("Argument must be a Buffer");return this===P?!0:h.compare(this,P)===0},h.prototype.inspect=function(){let P="";const M=n.INSPECT_MAX_BYTES;return P=this.toString("hex",0,M).replace(/(.{2})/g,"$1 ").trim(),this.length>M&&(P+=" ... "),"<Buffer "+P+">"},r&&(h.prototype[r]=h.prototype.inspect),h.prototype.compare=function(P,M,X,re,ue){if(nt(P,s)&&(P=h.from(P,P.offset,P.byteLength)),!h.isBuffer(P))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof P);if(M===void 0&&(M=0),X===void 0&&(X=P?P.length:0),re===void 0&&(re=0),ue===void 0&&(ue=this.length),M<0||X>P.length||re<0||ue>this.length)throw new RangeError("out of range index");if(re>=ue&&M>=X)return 0;if(re>=ue)return-1;if(M>=X)return 1;if(M>>>=0,X>>>=0,re>>>=0,ue>>>=0,this===P)return 0;let me=ue-re,_t=X-M;const Tt=Math.min(me,_t),at=this.slice(re,ue),_n=P.slice(M,X);for(let wt=0;wt<Tt;++wt)if(at[wt]!==_n[wt]){me=at[wt],_t=_n[wt];break}return me<_t?-1:_t<me?1:0};function K($,P,M,X,re){if($.length===0)return-1;if(typeof M=="string"?(X=M,M=0):M>2147483647?M=2147483647:M<-2147483648&&(M=-2147483648),M=+M,Ot(M)&&(M=re?0:$.length-1),M<0&&(M=$.length+M),M>=$.length){if(re)return-1;M=$.length-1}else if(M<0)if(re)M=0;else return-1;if(typeof P=="string"&&(P=h.from(P,X)),h.isBuffer(P))return P.length===0?-1:te($,P,M,X,re);if(typeof P=="number")return P=P&255,typeof s.prototype.indexOf=="function"?re?s.prototype.indexOf.call($,P,M):s.prototype.lastIndexOf.call($,P,M):te($,[P],M,X,re);throw new TypeError("val must be string, number or Buffer")}function te($,P,M,X,re){let ue=1,me=$.length,_t=P.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if($.length<2||P.length<2)return-1;ue=2,me/=2,_t/=2,M/=2}function Tt(_n,wt){return ue===1?_n[wt]:_n.readUInt16BE(wt*ue)}let at;if(re){let _n=-1;for(at=M;at<me;at++)if(Tt($,at)===Tt(P,_n===-1?0:at-_n)){if(_n===-1&&(_n=at),at-_n+1===_t)return _n*ue}else _n!==-1&&(at-=at-_n),_n=-1}else for(M+_t>me&&(M=me-_t),at=M;at>=0;at--){let _n=!0;for(let wt=0;wt<_t;wt++)if(Tt($,at+wt)!==Tt(P,wt)){_n=!1;break}if(_n)return at}return-1}h.prototype.includes=function(P,M,X){return this.indexOf(P,M,X)!==-1},h.prototype.indexOf=function(P,M,X){return K(this,P,M,X,!0)},h.prototype.lastIndexOf=function(P,M,X){return K(this,P,M,X,!1)};function ne($,P,M,X){M=Number(M)||0;const re=$.length-M;X?(X=Number(X),X>re&&(X=re)):X=re;const ue=P.length;X>ue/2&&(X=ue/2);let me;for(me=0;me<X;++me){const _t=parseInt(P.substr(me*2,2),16);if(Ot(_t))return me;$[M+me]=_t}return me}function ee($,P,M,X){return Et(Bt(P,$.length-M),$,M,X)}function L($,P,M,X){return Et(qt(P),$,M,X)}function w($,P,M,X){return Et(Ke(P),$,M,X)}function A($,P,M,X){return Et(mt(P,$.length-M),$,M,X)}h.prototype.write=function(P,M,X,re){if(M===void 0)re="utf8",X=this.length,M=0;else if(X===void 0&&typeof M=="string")re=M,X=this.length,M=0;else if(isFinite(M))M=M>>>0,isFinite(X)?(X=X>>>0,re===void 0&&(re="utf8")):(re=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-M;if((X===void 0||X>ue)&&(X=ue),P.length>0&&(X<0||M<0)||M>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");let me=!1;for(;;)switch(re){case"hex":return ne(this,P,M,X);case"utf8":case"utf-8":return ee(this,P,M,X);case"ascii":case"latin1":case"binary":return L(this,P,M,X);case"base64":return w(this,P,M,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,P,M,X);default:if(me)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),me=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O($,P,M){return P===0&&M===$.length?e.fromByteArray($):e.fromByteArray($.slice(P,M))}function C($,P,M){M=Math.min($.length,M);const X=[];let re=P;for(;re<M;){const ue=$[re];let me=null,_t=ue>239?4:ue>223?3:ue>191?2:1;if(re+_t<=M){let Tt,at,_n,wt;switch(_t){case 1:ue<128&&(me=ue);break;case 2:Tt=$[re+1],(Tt&192)===128&&(wt=(ue&31)<<6|Tt&63,wt>127&&(me=wt));break;case 3:Tt=$[re+1],at=$[re+2],(Tt&192)===128&&(at&192)===128&&(wt=(ue&15)<<12|(Tt&63)<<6|at&63,wt>2047&&(wt<55296||wt>57343)&&(me=wt));break;case 4:Tt=$[re+1],at=$[re+2],_n=$[re+3],(Tt&192)===128&&(at&192)===128&&(_n&192)===128&&(wt=(ue&15)<<18|(Tt&63)<<12|(at&63)<<6|_n&63,wt>65535&&wt<1114112&&(me=wt))}}me===null?(me=65533,_t=1):me>65535&&(me-=65536,X.push(me>>>10&1023|55296),me=56320|me&1023),X.push(me),re+=_t}return U(X)}const k=4096;function U($){const P=$.length;if(P<=k)return String.fromCharCode.apply(String,$);let M="",X=0;for(;X<P;)M+=String.fromCharCode.apply(String,$.slice(X,X+=k));return M}function z($,P,M){let X="";M=Math.min($.length,M);for(let re=P;re<M;++re)X+=String.fromCharCode($[re]&127);return X}function N($,P,M){let X="";M=Math.min($.length,M);for(let re=P;re<M;++re)X+=String.fromCharCode($[re]);return X}function T($,P,M){const X=$.length;(!P||P<0)&&(P=0),(!M||M<0||M>X)&&(M=X);let re="";for(let ue=P;ue<M;++ue)re+=Xt[$[ue]];return re}function V($,P,M){const X=$.slice(P,M);let re="";for(let ue=0;ue<X.length-1;ue+=2)re+=String.fromCharCode(X[ue]+X[ue+1]*256);return re}h.prototype.slice=function(P,M){const X=this.length;P=~~P,M=M===void 0?X:~~M,P<0?(P+=X,P<0&&(P=0)):P>X&&(P=X),M<0?(M+=X,M<0&&(M=0)):M>X&&(M=X),M<P&&(M=P);const re=this.subarray(P,M);return Object.setPrototypeOf(re,h.prototype),re};function oe($,P,M){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+P>M)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(P,M,X){P=P>>>0,M=M>>>0,X||oe(P,M,this.length);let re=this[P],ue=1,me=0;for(;++me<M&&(ue*=256);)re+=this[P+me]*ue;return re},h.prototype.readUintBE=h.prototype.readUIntBE=function(P,M,X){P=P>>>0,M=M>>>0,X||oe(P,M,this.length);let re=this[P+--M],ue=1;for(;M>0&&(ue*=256);)re+=this[P+--M]*ue;return re},h.prototype.readUint8=h.prototype.readUInt8=function(P,M){return P=P>>>0,M||oe(P,1,this.length),this[P]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(P,M){return P=P>>>0,M||oe(P,2,this.length),this[P]|this[P+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(P,M){return P=P>>>0,M||oe(P,2,this.length),this[P]<<8|this[P+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(P,M){return P=P>>>0,M||oe(P,4,this.length),(this[P]|this[P+1]<<8|this[P+2]<<16)+this[P+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(P,M){return P=P>>>0,M||oe(P,4,this.length),this[P]*16777216+(this[P+1]<<16|this[P+2]<<8|this[P+3])},h.prototype.readBigUInt64LE=br(function(P){P=P>>>0,Yn(P,"offset");const M=this[P],X=this[P+7];(M===void 0||X===void 0)&&Ut(P,this.length-8);const re=M+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24,ue=this[++P]+this[++P]*2**8+this[++P]*2**16+X*2**24;return BigInt(re)+(BigInt(ue)<<BigInt(32))}),h.prototype.readBigUInt64BE=br(function(P){P=P>>>0,Yn(P,"offset");const M=this[P],X=this[P+7];(M===void 0||X===void 0)&&Ut(P,this.length-8);const re=M*2**24+this[++P]*2**16+this[++P]*2**8+this[++P],ue=this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+X;return(BigInt(re)<<BigInt(32))+BigInt(ue)}),h.prototype.readIntLE=function(P,M,X){P=P>>>0,M=M>>>0,X||oe(P,M,this.length);let re=this[P],ue=1,me=0;for(;++me<M&&(ue*=256);)re+=this[P+me]*ue;return ue*=128,re>=ue&&(re-=Math.pow(2,8*M)),re},h.prototype.readIntBE=function(P,M,X){P=P>>>0,M=M>>>0,X||oe(P,M,this.length);let re=M,ue=1,me=this[P+--re];for(;re>0&&(ue*=256);)me+=this[P+--re]*ue;return ue*=128,me>=ue&&(me-=Math.pow(2,8*M)),me},h.prototype.readInt8=function(P,M){return P=P>>>0,M||oe(P,1,this.length),this[P]&128?(255-this[P]+1)*-1:this[P]},h.prototype.readInt16LE=function(P,M){P=P>>>0,M||oe(P,2,this.length);const X=this[P]|this[P+1]<<8;return X&32768?X|4294901760:X},h.prototype.readInt16BE=function(P,M){P=P>>>0,M||oe(P,2,this.length);const X=this[P+1]|this[P]<<8;return X&32768?X|4294901760:X},h.prototype.readInt32LE=function(P,M){return P=P>>>0,M||oe(P,4,this.length),this[P]|this[P+1]<<8|this[P+2]<<16|this[P+3]<<24},h.prototype.readInt32BE=function(P,M){return P=P>>>0,M||oe(P,4,this.length),this[P]<<24|this[P+1]<<16|this[P+2]<<8|this[P+3]},h.prototype.readBigInt64LE=br(function(P){P=P>>>0,Yn(P,"offset");const M=this[P],X=this[P+7];(M===void 0||X===void 0)&&Ut(P,this.length-8);const re=this[P+4]+this[P+5]*2**8+this[P+6]*2**16+(X<<24);return(BigInt(re)<<BigInt(32))+BigInt(M+this[++P]*2**8+this[++P]*2**16+this[++P]*2**24)}),h.prototype.readBigInt64BE=br(function(P){P=P>>>0,Yn(P,"offset");const M=this[P],X=this[P+7];(M===void 0||X===void 0)&&Ut(P,this.length-8);const re=(M<<24)+this[++P]*2**16+this[++P]*2**8+this[++P];return(BigInt(re)<<BigInt(32))+BigInt(this[++P]*2**24+this[++P]*2**16+this[++P]*2**8+X)}),h.prototype.readFloatLE=function(P,M){return P=P>>>0,M||oe(P,4,this.length),t.read(this,P,!0,23,4)},h.prototype.readFloatBE=function(P,M){return P=P>>>0,M||oe(P,4,this.length),t.read(this,P,!1,23,4)},h.prototype.readDoubleLE=function(P,M){return P=P>>>0,M||oe(P,8,this.length),t.read(this,P,!0,52,8)},h.prototype.readDoubleBE=function(P,M){return P=P>>>0,M||oe(P,8,this.length),t.read(this,P,!1,52,8)};function ge($,P,M,X,re,ue){if(!h.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(P>re||P<ue)throw new RangeError('"value" argument is out of bounds');if(M+X>$.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(P,M,X,re){if(P=+P,M=M>>>0,X=X>>>0,!re){const _t=Math.pow(2,8*X)-1;ge(this,P,M,X,_t,0)}let ue=1,me=0;for(this[M]=P&255;++me<X&&(ue*=256);)this[M+me]=P/ue&255;return M+X},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(P,M,X,re){if(P=+P,M=M>>>0,X=X>>>0,!re){const _t=Math.pow(2,8*X)-1;ge(this,P,M,X,_t,0)}let ue=X-1,me=1;for(this[M+ue]=P&255;--ue>=0&&(me*=256);)this[M+ue]=P/me&255;return M+X},h.prototype.writeUint8=h.prototype.writeUInt8=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,1,255,0),this[M]=P&255,M+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,2,65535,0),this[M]=P&255,this[M+1]=P>>>8,M+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,2,65535,0),this[M]=P>>>8,this[M+1]=P&255,M+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,4,4294967295,0),this[M+3]=P>>>24,this[M+2]=P>>>16,this[M+1]=P>>>8,this[M]=P&255,M+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,4,4294967295,0),this[M]=P>>>24,this[M+1]=P>>>16,this[M+2]=P>>>8,this[M+3]=P&255,M+4};function we($,P,M,X,re){vt(P,X,re,$,M,7);let ue=Number(P&BigInt(4294967295));$[M++]=ue,ue=ue>>8,$[M++]=ue,ue=ue>>8,$[M++]=ue,ue=ue>>8,$[M++]=ue;let me=Number(P>>BigInt(32)&BigInt(4294967295));return $[M++]=me,me=me>>8,$[M++]=me,me=me>>8,$[M++]=me,me=me>>8,$[M++]=me,M}function Re($,P,M,X,re){vt(P,X,re,$,M,7);let ue=Number(P&BigInt(4294967295));$[M+7]=ue,ue=ue>>8,$[M+6]=ue,ue=ue>>8,$[M+5]=ue,ue=ue>>8,$[M+4]=ue;let me=Number(P>>BigInt(32)&BigInt(4294967295));return $[M+3]=me,me=me>>8,$[M+2]=me,me=me>>8,$[M+1]=me,me=me>>8,$[M]=me,M+8}h.prototype.writeBigUInt64LE=br(function(P,M=0){return we(this,P,M,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=br(function(P,M=0){return Re(this,P,M,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(P,M,X,re){if(P=+P,M=M>>>0,!re){const Tt=Math.pow(2,8*X-1);ge(this,P,M,X,Tt-1,-Tt)}let ue=0,me=1,_t=0;for(this[M]=P&255;++ue<X&&(me*=256);)P<0&&_t===0&&this[M+ue-1]!==0&&(_t=1),this[M+ue]=(P/me>>0)-_t&255;return M+X},h.prototype.writeIntBE=function(P,M,X,re){if(P=+P,M=M>>>0,!re){const Tt=Math.pow(2,8*X-1);ge(this,P,M,X,Tt-1,-Tt)}let ue=X-1,me=1,_t=0;for(this[M+ue]=P&255;--ue>=0&&(me*=256);)P<0&&_t===0&&this[M+ue+1]!==0&&(_t=1),this[M+ue]=(P/me>>0)-_t&255;return M+X},h.prototype.writeInt8=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,1,127,-128),P<0&&(P=255+P+1),this[M]=P&255,M+1},h.prototype.writeInt16LE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,2,32767,-32768),this[M]=P&255,this[M+1]=P>>>8,M+2},h.prototype.writeInt16BE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,2,32767,-32768),this[M]=P>>>8,this[M+1]=P&255,M+2},h.prototype.writeInt32LE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,4,2147483647,-2147483648),this[M]=P&255,this[M+1]=P>>>8,this[M+2]=P>>>16,this[M+3]=P>>>24,M+4},h.prototype.writeInt32BE=function(P,M,X){return P=+P,M=M>>>0,X||ge(this,P,M,4,2147483647,-2147483648),P<0&&(P=4294967295+P+1),this[M]=P>>>24,this[M+1]=P>>>16,this[M+2]=P>>>8,this[M+3]=P&255,M+4},h.prototype.writeBigInt64LE=br(function(P,M=0){return we(this,P,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=br(function(P,M=0){return Re(this,P,M,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne($,P,M,X,re,ue){if(M+X>$.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("Index out of range")}function Ue($,P,M,X,re){return P=+P,M=M>>>0,re||Ne($,P,M,4),t.write($,P,M,X,23,4),M+4}h.prototype.writeFloatLE=function(P,M,X){return Ue(this,P,M,!0,X)},h.prototype.writeFloatBE=function(P,M,X){return Ue(this,P,M,!1,X)};function Ye($,P,M,X,re){return P=+P,M=M>>>0,re||Ne($,P,M,8),t.write($,P,M,X,52,8),M+8}h.prototype.writeDoubleLE=function(P,M,X){return Ye(this,P,M,!0,X)},h.prototype.writeDoubleBE=function(P,M,X){return Ye(this,P,M,!1,X)},h.prototype.copy=function(P,M,X,re){if(!h.isBuffer(P))throw new TypeError("argument should be a Buffer");if(X||(X=0),!re&&re!==0&&(re=this.length),M>=P.length&&(M=P.length),M||(M=0),re>0&&re<X&&(re=X),re===X||P.length===0||this.length===0)return 0;if(M<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),P.length-M<re-X&&(re=P.length-M+X);const ue=re-X;return this===P&&typeof s.prototype.copyWithin=="function"?this.copyWithin(M,X,re):s.prototype.set.call(P,this.subarray(X,re),M),ue},h.prototype.fill=function(P,M,X,re){if(typeof P=="string"){if(typeof M=="string"?(re=M,M=0,X=this.length):typeof X=="string"&&(re=X,X=this.length),re!==void 0&&typeof re!="string")throw new TypeError("encoding must be a string");if(typeof re=="string"&&!h.isEncoding(re))throw new TypeError("Unknown encoding: "+re);if(P.length===1){const me=P.charCodeAt(0);(re==="utf8"&&me<128||re==="latin1")&&(P=me)}}else typeof P=="number"?P=P&255:typeof P=="boolean"&&(P=Number(P));if(M<0||this.length<M||this.length<X)throw new RangeError("Out of range index");if(X<=M)return this;M=M>>>0,X=X===void 0?this.length:X>>>0,P||(P=0);let ue;if(typeof P=="number")for(ue=M;ue<X;++ue)this[ue]=P;else{const me=h.isBuffer(P)?P:h.from(P,re),_t=me.length;if(_t===0)throw new TypeError('The value "'+P+'" is invalid for argument "value"');for(ue=0;ue<X-M;++ue)this[ue+M]=me[ue%_t]}return this};const Ce={};function ze($,P,M){Ce[$]=class extends M{constructor(){super(),Object.defineProperty(this,"message",{value:P.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}ze("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ze("ERR_INVALID_ARG_TYPE",function($,P){return`The "${$}" argument must be of type number. Received type ${typeof P}`},TypeError),ze("ERR_OUT_OF_RANGE",function($,P,M){let X=`The value of "${$}" is out of range.`,re=M;return Number.isInteger(M)&&Math.abs(M)>2**32?re=ft(String(M)):typeof M=="bigint"&&(re=String(M),(M>BigInt(2)**BigInt(32)||M<-(BigInt(2)**BigInt(32)))&&(re=ft(re)),re+="n"),X+=` It must be ${P}. Received ${re}`,X},RangeError);function ft($){let P="",M=$.length;const X=$[0]==="-"?1:0;for(;M>=X+4;M-=3)P=`_${$.slice(M-3,M)}${P}`;return`${$.slice(0,M)}${P}`}function xt($,P,M){Yn(P,"offset"),($[P]===void 0||$[P+M]===void 0)&&Ut(P,$.length-(M+1))}function vt($,P,M,X,re,ue){if($>M||$<P){const me=typeof P=="bigint"?"n":"";let _t;throw ue>3?P===0||P===BigInt(0)?_t=`>= 0${me} and < 2${me} ** ${(ue+1)*8}${me}`:_t=`>= -(2${me} ** ${(ue+1)*8-1}${me}) and < 2 ** ${(ue+1)*8-1}${me}`:_t=`>= ${P}${me} and <= ${M}${me}`,new Ce.ERR_OUT_OF_RANGE("value",_t,$)}xt(X,re,ue)}function Yn($,P){if(typeof $!="number")throw new Ce.ERR_INVALID_ARG_TYPE(P,"number",$)}function Ut($,P,M){throw Math.floor($)!==$?(Yn($,M),new Ce.ERR_OUT_OF_RANGE(M||"offset","an integer",$)):P<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE(M||"offset",`>= ${M?1:0} and <= ${P}`,$)}const Nt=/[^+/0-9A-Za-z-_]/g;function lo($){if($=$.split("=")[0],$=$.trim().replace(Nt,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function Bt($,P){P=P||1/0;let M;const X=$.length;let re=null;const ue=[];for(let me=0;me<X;++me){if(M=$.charCodeAt(me),M>55295&&M<57344){if(!re){if(M>56319){(P-=3)>-1&&ue.push(239,191,189);continue}else if(me+1===X){(P-=3)>-1&&ue.push(239,191,189);continue}re=M;continue}if(M<56320){(P-=3)>-1&&ue.push(239,191,189),re=M;continue}M=(re-55296<<10|M-56320)+65536}else re&&(P-=3)>-1&&ue.push(239,191,189);if(re=null,M<128){if((P-=1)<0)break;ue.push(M)}else if(M<2048){if((P-=2)<0)break;ue.push(M>>6|192,M&63|128)}else if(M<65536){if((P-=3)<0)break;ue.push(M>>12|224,M>>6&63|128,M&63|128)}else if(M<1114112){if((P-=4)<0)break;ue.push(M>>18|240,M>>12&63|128,M>>6&63|128,M&63|128)}else throw new Error("Invalid code point")}return ue}function qt($){const P=[];for(let M=0;M<$.length;++M)P.push($.charCodeAt(M)&255);return P}function mt($,P){let M,X,re;const ue=[];for(let me=0;me<$.length&&!((P-=2)<0);++me)M=$.charCodeAt(me),X=M>>8,re=M%256,ue.push(re),ue.push(X);return ue}function Ke($){return e.toByteArray(lo($))}function Et($,P,M,X){let re;for(re=0;re<X&&!(re+M>=P.length||re>=$.length);++re)P[re+M]=$[re];return re}function nt($,P){return $ instanceof P||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===P.name}function Ot($){return $!==$}const Xt=function(){const $="0123456789abcdef",P=new Array(256);for(let M=0;M<16;++M){const X=M*16;for(let re=0;re<16;++re)P[X+re]=$[M]+$[re]}return P}();function br($){return typeof BigInt>"u"?en:$}function en(){throw new Error("BigInt not supported")}})(xi);const ei=xi.Buffer,rue=xi.Blob,iue=xi.BlobOptions,zt=xi.Buffer,sue=xi.File,oue=xi.FileOptions,aue=xi.INSPECT_MAX_BYTES,lue=xi.SlowBuffer,uue=xi.TranscodeEncoding,cue=xi.atob,hue=xi.btoa,due=xi.constants,fue=xi.isAscii,pue=xi.isUtf8,mue=xi.kMaxLength,gue=xi.kStringMaxLength,yue=xi.resolveObjectURL,vue=xi.transcode,wue=Object.freeze(Object.defineProperty({__proto__:null,Blob:rue,BlobOptions:iue,Buffer:zt,File:sue,FileOptions:oue,INSPECT_MAX_BYTES:aue,SlowBuffer:lue,TranscodeEncoding:uue,atob:cue,btoa:hue,constants:due,default:ei,isAscii:fue,isUtf8:pue,kMaxLength:mue,kStringMaxLength:gue,resolveObjectURL:yue,transcode:vue},Symbol.toStringTag,{value:"Module"}));function QB(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function xue(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Eb(n,...e){if(!xue(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function _ue(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");QB(n.outputLen),QB(n.blockLen)}function o_(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function bue(n,e){Eb(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Vf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fA=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Cl=(n,e)=>n<<32-e|n>>>e;function Sue(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function uP(n){return typeof n=="string"&&(n=Sue(n)),Eb(n),n}function Eue(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];Eb(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}let uz=class{clone(){return this._cloneInto()}};function cz(n){const e=r=>n().update(uP(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function hz(n=32){if(Vf&&typeof Vf.getRandomValues=="function")return Vf.getRandomValues(new Uint8Array(n));if(Vf&&typeof Vf.randomBytes=="function")return Vf.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function Aue(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,u=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+u,a,r)}const Tue=(n,e,t)=>n&e^~n&t,Cue=(n,e,t)=>n&e^n&t^e&t;let dz=class extends uz{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=fA(this.buffer)}update(e){o_(this);const{view:t,buffer:r,blockLen:i}=this;e=uP(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=fA(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){o_(this),bue(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)t[f]=0;Aue(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=fA(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}};const Z1=BigInt(2**32-1),OC=BigInt(32);function fz(n,e=!1){return e?{h:Number(n&Z1),l:Number(n>>OC&Z1)}:{h:Number(n>>OC&Z1)|0,l:Number(n&Z1)|0}}function Iue(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=fz(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const Rue=(n,e)=>BigInt(n>>>0)<<OC|BigInt(e>>>0),Pue=(n,e,t)=>n>>>t,kue=(n,e,t)=>n<<32-t|e>>>t,Mue=(n,e,t)=>n>>>t|e<<32-t,Oue=(n,e,t)=>n<<32-t|e>>>t,Nue=(n,e,t)=>n<<64-t|e>>>t-32,Bue=(n,e,t)=>n>>>t-32|e<<64-t,Lue=(n,e)=>e,Due=(n,e)=>n,Fue=(n,e,t)=>n<<t|e>>>32-t,Uue=(n,e,t)=>e<<t|n>>>32-t,zue=(n,e,t)=>e<<t-32|n>>>64-t,$ue=(n,e,t)=>n<<t-32|e>>>64-t;function jue(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const Hue=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Wue=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Gue=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Vue=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,que=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),Xue=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,Kue={fromBig:fz,split:Iue,toBig:Rue,shrSH:Pue,shrSL:kue,rotrSH:Mue,rotrSL:Oue,rotrBH:Nue,rotrBL:Bue,rotr32H:Lue,rotr32L:Due,rotlSH:Fue,rotlSL:Uue,rotlBH:zue,rotlBL:$ue,add:jue,add3L:Hue,add3H:Wue,add4L:Gue,add4H:Vue,add5H:Xue,add5L:que},jt=Kue,[Que,Yue]=(()=>jt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))))(),bc=new Uint32Array(80),Sc=new Uint32Array(80);class Zue extends dz{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:u,El:h,Fh:f,Fl:p,Gh:m,Gl:g,Hh:v,Hl:x}=this;return[e,t,r,i,s,o,a,l,u,h,f,p,m,g,v,x]}set(e,t,r,i,s,o,a,l,u,h,f,p,m,g,v,x){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=u|0,this.El=h|0,this.Fh=f|0,this.Fl=p|0,this.Gh=m|0,this.Gl=g|0,this.Hh=v|0,this.Hl=x|0}process(e,t){for(let _=0;_<16;_++,t+=4)bc[_]=e.getUint32(t),Sc[_]=e.getUint32(t+=4);for(let _=16;_<80;_++){const R=bc[_-15]|0,D=Sc[_-15]|0,j=jt.rotrSH(R,D,1)^jt.rotrSH(R,D,8)^jt.shrSH(R,D,7),H=jt.rotrSL(R,D,1)^jt.rotrSL(R,D,8)^jt.shrSL(R,D,7),G=bc[_-2]|0,K=Sc[_-2]|0,te=jt.rotrSH(G,K,19)^jt.rotrBH(G,K,61)^jt.shrSH(G,K,6),ne=jt.rotrSL(G,K,19)^jt.rotrBL(G,K,61)^jt.shrSL(G,K,6),ee=jt.add4L(H,ne,Sc[_-7],Sc[_-16]),L=jt.add4H(ee,j,te,bc[_-7],bc[_-16]);bc[_]=L|0,Sc[_]=ee|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:u,Dl:h,Eh:f,El:p,Fh:m,Fl:g,Gh:v,Gl:x,Hh:b,Hl:S}=this;for(let _=0;_<80;_++){const R=jt.rotrSH(f,p,14)^jt.rotrSH(f,p,18)^jt.rotrBH(f,p,41),D=jt.rotrSL(f,p,14)^jt.rotrSL(f,p,18)^jt.rotrBL(f,p,41),j=f&m^~f&v,H=p&g^~p&x,G=jt.add5L(S,D,H,Yue[_],Sc[_]),K=jt.add5H(G,b,R,j,Que[_],bc[_]),te=G|0,ne=jt.rotrSH(r,i,28)^jt.rotrBH(r,i,34)^jt.rotrBH(r,i,39),ee=jt.rotrSL(r,i,28)^jt.rotrBL(r,i,34)^jt.rotrBL(r,i,39),L=r&s^r&a^s&a,w=i&o^i&l^o&l;b=v|0,S=x|0,v=m|0,x=g|0,m=f|0,g=p|0,{h:f,l:p}=jt.add(u|0,h|0,K|0,te|0),u=a|0,h=l|0,a=s|0,l=o|0,s=r|0,o=i|0;const A=jt.add3L(te,ee,w);r=jt.add3H(A,K,ne,L),i=A|0}({h:r,l:i}=jt.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=jt.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=jt.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:u,l:h}=jt.add(this.Dh|0,this.Dl|0,u|0,h|0),{h:f,l:p}=jt.add(this.Eh|0,this.El|0,f|0,p|0),{h:m,l:g}=jt.add(this.Fh|0,this.Fl|0,m|0,g|0),{h:v,l:x}=jt.add(this.Gh|0,this.Gl|0,v|0,x|0),{h:b,l:S}=jt.add(this.Hh|0,this.Hl|0,b|0,S|0),this.set(r,i,s,o,a,l,u,h,f,p,m,g,v,x,b,S)}roundClean(){bc.fill(0),Sc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Jue=cz(()=>new Zue);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ab=BigInt(0),Tb=BigInt(1),ece=BigInt(2);function ef(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function nv(n){if(!ef(n))throw new Error("Uint8Array expected")}function ju(n,e){if(typeof e!="boolean")throw new Error(n+" boolean expected, got "+e)}const tce=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function tf(n){nv(n);let e="";for(let t=0;t<n.length;t++)e+=tce[n[t]];return e}function bp(n){const e=n.toString(16);return e.length&1?"0"+e:e}function cP(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Ab:BigInt("0x"+n)}const wu={_0:48,_9:57,A:65,F:70,a:97,f:102};function YB(n){if(n>=wu._0&&n<=wu._9)return n-wu._0;if(n>=wu.A&&n<=wu.F)return n-(wu.A-10);if(n>=wu.a&&n<=wu.f)return n-(wu.a-10)}function Cm(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(t);for(let i=0,s=0;i<t;i++,s+=2){const o=YB(n.charCodeAt(s)),a=YB(n.charCodeAt(s+1));if(o===void 0||a===void 0){const l=n[s]+n[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}r[i]=o*16+a}return r}function zd(n){return cP(tf(n))}function Vp(n){return nv(n),cP(tf(Uint8Array.from(n).reverse()))}function Im(n,e){return Cm(n.toString(16).padStart(e*2,"0"))}function xy(n,e){return Im(n,e).reverse()}function nce(n){return Cm(bp(n))}function ni(n,e,t){let r;if(typeof e=="string")try{r=Cm(e)}catch(s){throw new Error(n+" must be hex string or Uint8Array, cause: "+s)}else if(ef(e))r=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(n+" of length "+t+" expected, got "+i);return r}function nf(...n){let e=0;for(let r=0;r<n.length;r++){const i=n[r];nv(i),e+=i.length}const t=new Uint8Array(e);for(let r=0,i=0;r<n.length;r++){const s=n[r];t.set(s,i),i+=s.length}return t}function rce(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function ice(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}const pA=n=>typeof n=="bigint"&&Ab<=n;function Cb(n,e,t){return pA(n)&&pA(e)&&pA(t)&&e<=n&&n<t}function ca(n,e,t,r){if(!Cb(e,t,r))throw new Error("expected valid "+n+": "+t+" <= n < "+r+", got "+e)}function pz(n){let e;for(e=0;n>Ab;n>>=Tb,e+=1);return e}function sce(n,e){return n>>BigInt(e)&Tb}function oce(n,e,t){return n|(t?Tb:Ab)<<BigInt(e)}const hP=n=>(ece<<BigInt(n-1))-Tb,mA=n=>new Uint8Array(n),ZB=n=>Uint8Array.from(n);function mz(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=mA(n),i=mA(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...f)=>t(i,r,...f),l=(f=mA())=>{i=a(ZB([0]),f),r=a(),f.length!==0&&(i=a(ZB([1]),f),r=a())},u=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){r=a();const m=r.slice();p.push(m),f+=r.length}return nf(...p)};return(f,p)=>{o(),l(f);let m;for(;!(m=p(u()));)l();return o(),m}}const ace={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||ef(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Xm(n,e,t={}){const r=(i,s,o)=>{const a=ace[s];if(typeof a!="function")throw new Error("invalid validator function");const l=n[i];if(!(o&&l===void 0)&&!a(l,n))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const lce=()=>{throw new Error("not implemented")};function _y(n){const e=new WeakMap;return(t,...r)=>{const i=e.get(t);if(i!==void 0)return i;const s=n(t,...r);return e.set(t,s),s}}const uce=Object.freeze(Object.defineProperty({__proto__:null,aInRange:ca,abool:ju,abytes:nv,bitGet:sce,bitLen:pz,bitMask:hP,bitSet:oce,bytesToHex:tf,bytesToNumberBE:zd,bytesToNumberLE:Vp,concatBytes:nf,createHmacDrbg:mz,ensureBytes:ni,equalBytes:rce,hexToBytes:Cm,hexToNumber:cP,inRange:Cb,isBytes:ef,memoized:_y,notImplemented:lce,numberToBytesBE:Im,numberToBytesLE:xy,numberToHexUnpadded:bp,numberToVarBytesBE:nce,utf8ToBytes:ice,validateObject:Xm},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pi=BigInt(0),kr=BigInt(1),dd=BigInt(2),cce=BigInt(3),NC=BigInt(4),JB=BigInt(5),eL=BigInt(8);function gr(n,e){const t=n%e;return t>=Pi?t:e+t}function hce(n,e,t){if(e<Pi)throw new Error("invalid exponent, negatives unsupported");if(t<=Pi)throw new Error("invalid modulus");if(t===kr)return Pi;let r=kr;for(;e>Pi;)e&kr&&(r=r*n%t),n=n*n%t,e>>=kr;return r}function $r(n,e,t){let r=n;for(;e-- >Pi;)r*=r,r%=t;return r}function BC(n,e){if(n===Pi)throw new Error("invert: expected non-zero number");if(e<=Pi)throw new Error("invert: expected positive modulus, got "+e);let t=gr(n,e),r=e,i=Pi,s=kr;for(;t!==Pi;){const a=r/t,l=r%t,u=i-s*a;r=t,t=l,i=s,s=u}if(r!==kr)throw new Error("invert: does not exist");return gr(i,e)}function dce(n){const e=(n-kr)/dd;let t,r,i;for(t=n-kr,r=0;t%dd===Pi;t/=dd,r++);for(i=dd;i<n&&hce(i,e,n)!==n-kr;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+kr)/NC;return function(l,u){const h=l.pow(u,o);if(!l.eql(l.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(t+kr)/dd;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let u=r,h=a.pow(a.mul(a.ONE,i),t),f=a.pow(l,s),p=a.pow(l,t);for(;!a.eql(p,a.ONE);){if(a.eql(p,a.ZERO))return a.ZERO;let m=1;for(let v=a.sqr(p);m<u&&!a.eql(v,a.ONE);m++)v=a.sqr(v);const g=a.pow(h,kr<<BigInt(u-m-1));h=a.sqr(g),f=a.mul(f,g),p=a.mul(p,h),u=m}return f}}function fce(n){if(n%NC===cce){const e=(n+kr)/NC;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%eL===JB){const e=(n-JB)/eL;return function(r,i){const s=r.mul(i,dd),o=r.pow(s,e),a=r.mul(i,o),l=r.mul(r.mul(a,dd),o),u=r.mul(a,r.sub(l,r.ONE));if(!r.eql(r.sqr(u),i))throw new Error("Cannot find square root");return u}}return dce(n)}const pce=(n,e)=>(gr(n,e)&kr)===kr,mce=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gce(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=mce.reduce((r,i)=>(r[i]="function",r),e);return Xm(n,t)}function yce(n,e,t){if(t<Pi)throw new Error("invalid exponent, negatives unsupported");if(t===Pi)return n.ONE;if(t===kr)return e;let r=n.ONE,i=e;for(;t>Pi;)t&kr&&(r=n.mul(r,i)),i=n.sqr(i),t>>=kr;return r}function vce(n,e){const t=new Array(e.length),r=e.reduce((s,o,a)=>n.is0(o)?s:(t[a]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,a)=>n.is0(o)?s:(t[a]=n.mul(s,t[a]),n.mul(s,o)),i),t}function gz(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function Ib(n,e,t=!1,r={}){if(n<=Pi)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:i,nByteLength:s}=gz(n,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:hP(i),ZERO:Pi,ONE:kr,create:l=>gr(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Pi<=l&&l<n},is0:l=>l===Pi,isOdd:l=>(l&kr)===kr,neg:l=>gr(-l,n),eql:(l,u)=>l===u,sqr:l=>gr(l*l,n),add:(l,u)=>gr(l+u,n),sub:(l,u)=>gr(l-u,n),mul:(l,u)=>gr(l*u,n),pow:(l,u)=>yce(a,l,u),div:(l,u)=>gr(l*BC(u,n),n),sqrN:l=>l*l,addN:(l,u)=>l+u,subN:(l,u)=>l-u,mulN:(l,u)=>l*u,inv:l=>BC(l,n),sqrt:r.sqrt||(l=>(o||(o=fce(n)),o(a,l))),invertBatch:l=>vce(a,l),cmov:(l,u,h)=>h?u:l,toBytes:l=>t?xy(l,s):Im(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return t?Vp(l):zd(l)}});return Object.freeze(a)}function yz(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function vz(n){const e=yz(n);return e+Math.ceil(e/2)}function wce(n,e,t=!1){const r=n.length,i=yz(e),s=vz(e);if(r<16||r<s||r>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+r);const o=t?zd(n):Vp(n),a=gr(o,e-kr)+kr;return t?xy(a,i):Im(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const tL=BigInt(0),J1=BigInt(1);function gA(n,e){const t=e.negate();return n?t:e}function wz(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function yA(n,e){wz(n,e);const t=Math.ceil(e/n)+1,r=2**(n-1);return{windows:t,windowSize:r}}function xce(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((t,r)=>{if(!(t instanceof e))throw new Error("invalid point at index "+r)})}function _ce(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((t,r)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}const vA=new WeakMap,xz=new WeakMap;function wA(n){return xz.get(n)||1}function _z(n,e){return{constTimeNegate:gA,hasPrecomputes(t){return wA(t)!==1},unsafeLadder(t,r,i=n.ZERO){let s=t;for(;r>tL;)r&J1&&(i=i.add(s)),s=s.double(),r>>=J1;return i},precomputeWindow(t,r){const{windows:i,windowSize:s}=yA(r,e),o=[];let a=t,l=a;for(let u=0;u<i;u++){l=a,o.push(l);for(let h=1;h<s;h++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,r,i){const{windows:s,windowSize:o}=yA(t,e);let a=n.ZERO,l=n.BASE;const u=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let p=0;p<s;p++){const m=p*o;let g=Number(i&u);i>>=f,g>o&&(g-=h,i+=J1);const v=m,x=m+Math.abs(g)-1,b=p%2!==0,S=g<0;g===0?l=l.add(gA(b,r[v])):a=a.add(gA(S,r[x]))}return{p:a,f:l}},wNAFUnsafe(t,r,i,s=n.ZERO){const{windows:o,windowSize:a}=yA(t,e),l=BigInt(2**t-1),u=2**t,h=BigInt(t);for(let f=0;f<o;f++){const p=f*a;if(i===tL)break;let m=Number(i&l);if(i>>=h,m>a&&(m-=u,i+=J1),m===0)continue;let g=r[p+Math.abs(m)-1];m<0&&(g=g.negate()),s=s.add(g)}return s},getPrecomputes(t,r,i){let s=vA.get(r);return s||(s=this.precomputeWindow(r,t),t!==1&&vA.set(r,i(s))),s},wNAFCached(t,r,i){const s=wA(t);return this.wNAF(s,this.getPrecomputes(s,t,i),r)},wNAFCachedUnsafe(t,r,i,s){const o=wA(t);return o===1?this.unsafeLadder(t,r,s):this.wNAFUnsafe(o,this.getPrecomputes(o,t,i),r,s)},setWindowSize(t,r){wz(r,e),xz.set(t,r),vA.delete(t)}}}function bz(n,e,t,r){if(xce(t,n),_ce(r,e),t.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=n.ZERO,s=pz(BigInt(t.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),u=Math.floor((e.BITS-1)/o)*o;let h=i;for(let f=u;f>=0;f-=o){l.fill(i);for(let m=0;m<r.length;m++){const g=r[m],v=Number(g>>BigInt(f)&BigInt(a));l[v]=l[v].add(t[m])}let p=i;for(let m=l.length-1,g=i;m>0;m--)g=g.add(l[m]),p=p.add(g);if(h=h.add(p),f!==0)for(let m=0;m<o;m++)h=h.double()}return h}function dP(n){return gce(n.Fp),Xm(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gz(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ma=BigInt(0),Ks=BigInt(1),ew=BigInt(2),bce=BigInt(8),Sce={zip215:!0};function Ece(n){const e=dP(n);return Xm(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ace(n){const e=Ece(n),{Fp:t,n:r,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,u=ew<<BigInt(a*8)-Ks,h=t.create,f=Ib(e.n,e.nBitLength),p=e.uvRatio||((O,C)=>{try{return{isValid:!0,value:t.sqrt(O*t.inv(C))}}catch{return{isValid:!1,value:Ma}}}),m=e.adjustScalarBytes||(O=>O),g=e.domain||((O,C,k)=>{if(ju("phflag",k),C.length||k)throw new Error("Contexts/pre-hash are not supported");return O});function v(O,C){ca("coordinate "+O,C,Ma,u)}function x(O){if(!(O instanceof _))throw new Error("ExtendedPoint expected")}const b=_y((O,C)=>{const{ex:k,ey:U,ez:z}=O,N=O.is0();C==null&&(C=N?bce:t.inv(z));const T=h(k*C),V=h(U*C),oe=h(z*C);if(N)return{x:Ma,y:Ks};if(oe!==Ks)throw new Error("invZ was invalid");return{x:T,y:V}}),S=_y(O=>{const{a:C,d:k}=e;if(O.is0())throw new Error("bad point: ZERO");const{ex:U,ey:z,ez:N,et:T}=O,V=h(U*U),oe=h(z*z),ge=h(N*N),we=h(ge*ge),Re=h(V*C),Ne=h(ge*h(Re+oe)),Ue=h(we+h(k*h(V*oe)));if(Ne!==Ue)throw new Error("bad point: equation left != right (1)");const Ye=h(U*z),Ce=h(N*T);if(Ye!==Ce)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(C,k,U,z){this.ex=C,this.ey=k,this.ez=U,this.et=z,v("x",C),v("y",k),v("z",U),v("t",z),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof _)throw new Error("extended point not allowed");const{x:k,y:U}=C||{};return v("x",k),v("y",U),new _(k,U,Ks,h(k*U))}static normalizeZ(C){const k=t.invertBatch(C.map(U=>U.ez));return C.map((U,z)=>U.toAffine(k[z])).map(_.fromAffine)}static msm(C,k){return bz(_,f,C,k)}_setWindowSize(C){j.setWindowSize(this,C)}assertValidity(){S(this)}equals(C){x(C);const{ex:k,ey:U,ez:z}=this,{ex:N,ey:T,ez:V}=C,oe=h(k*V),ge=h(N*z),we=h(U*V),Re=h(T*z);return oe===ge&&we===Re}is0(){return this.equals(_.ZERO)}negate(){return new _(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:C}=e,{ex:k,ey:U,ez:z}=this,N=h(k*k),T=h(U*U),V=h(ew*h(z*z)),oe=h(C*N),ge=k+U,we=h(h(ge*ge)-N-T),Re=oe+T,Ne=Re-V,Ue=oe-T,Ye=h(we*Ne),Ce=h(Re*Ue),ze=h(we*Ue),ft=h(Ne*Re);return new _(Ye,Ce,ft,ze)}add(C){x(C);const{a:k,d:U}=e,{ex:z,ey:N,ez:T,et:V}=this,{ex:oe,ey:ge,ez:we,et:Re}=C;if(k===BigInt(-1)){const Bt=h((N-z)*(ge+oe)),qt=h((N+z)*(ge-oe)),mt=h(qt-Bt);if(mt===Ma)return this.double();const Ke=h(T*ew*Re),Et=h(V*ew*we),nt=Et+Ke,Ot=qt+Bt,Xt=Et-Ke,br=h(nt*mt),en=h(Ot*Xt),$=h(nt*Xt),P=h(mt*Ot);return new _(br,en,P,$)}const Ne=h(z*oe),Ue=h(N*ge),Ye=h(V*U*Re),Ce=h(T*we),ze=h((z+N)*(oe+ge)-Ne-Ue),ft=Ce-Ye,xt=Ce+Ye,vt=h(Ue-k*Ne),Yn=h(ze*ft),Ut=h(xt*vt),Nt=h(ze*vt),lo=h(ft*xt);return new _(Yn,Ut,lo,Nt)}subtract(C){return this.add(C.negate())}wNAF(C){return j.wNAFCached(this,C,_.normalizeZ)}multiply(C){const k=C;ca("scalar",k,Ks,r);const{p:U,f:z}=this.wNAF(k);return _.normalizeZ([U,z])[0]}multiplyUnsafe(C,k=_.ZERO){const U=C;return ca("scalar",U,Ma,r),U===Ma?D:this.is0()||U===Ks?this:j.wNAFCachedUnsafe(this,U,_.normalizeZ,k)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return j.unsafeLadder(this,r).is0()}toAffine(C){return b(this,C)}clearCofactor(){const{h:C}=e;return C===Ks?this:this.multiplyUnsafe(C)}static fromHex(C,k=!1){const{d:U,a:z}=e,N=t.BYTES;C=ni("pointHex",C,N),ju("zip215",k);const T=C.slice(),V=C[N-1];T[N-1]=V&-129;const oe=Vp(T),ge=k?u:t.ORDER;ca("pointHex.y",oe,Ma,ge);const we=h(oe*oe),Re=h(we-Ks),Ne=h(U*we-z);let{isValid:Ue,value:Ye}=p(Re,Ne);if(!Ue)throw new Error("Point.fromHex: invalid y coordinate");const Ce=(Ye&Ks)===Ks,ze=(V&128)!==0;if(!k&&Ye===Ma&&ze)throw new Error("Point.fromHex: x=0 and x_0=1");return ze!==Ce&&(Ye=h(-Ye)),_.fromAffine({x:Ye,y:oe})}static fromPrivateKey(C){return K(C).point}toRawBytes(){const{x:C,y:k}=this.toAffine(),U=xy(k,t.BYTES);return U[U.length-1]|=C&Ks?128:0,U}toHex(){return tf(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,Ks,h(e.Gx*e.Gy)),_.ZERO=new _(Ma,Ks,Ks,Ma);const{BASE:R,ZERO:D}=_,j=_z(_,a*8);function H(O){return gr(O,r)}function G(O){return H(Vp(O))}function K(O){const C=t.BYTES;O=ni("private key",O,C);const k=ni("hashed private key",s(O),2*C),U=m(k.slice(0,C)),z=k.slice(C,2*C),N=G(U),T=R.multiply(N),V=T.toRawBytes();return{head:U,prefix:z,scalar:N,point:T,pointBytes:V}}function te(O){return K(O).pointBytes}function ne(O=new Uint8Array,...C){const k=nf(...C);return G(s(g(k,ni("context",O),!!i)))}function ee(O,C,k={}){O=ni("message",O),i&&(O=i(O));const{prefix:U,scalar:z,pointBytes:N}=K(C),T=ne(k.context,U,O),V=R.multiply(T).toRawBytes(),oe=ne(k.context,V,N,O),ge=H(T+oe*z);ca("signature.s",ge,Ma,r);const we=nf(V,xy(ge,t.BYTES));return ni("result",we,t.BYTES*2)}const L=Sce;function w(O,C,k,U=L){const{context:z,zip215:N}=U,T=t.BYTES;O=ni("signature",O,2*T),C=ni("message",C),k=ni("publicKey",k,T),N!==void 0&&ju("zip215",N),i&&(C=i(C));const V=Vp(O.slice(T,2*T));let oe,ge,we;try{oe=_.fromHex(k,N),ge=_.fromHex(O.slice(0,T),N),we=R.multiplyUnsafe(V)}catch{return!1}if(!N&&oe.isSmallOrder())return!1;const Re=ne(z,ge.toRawBytes(),oe.toRawBytes(),C);return ge.add(oe.multiplyUnsafe(Re)).subtract(we).clearCofactor().equals(_.ZERO)}return R._setWindowSize(8),{CURVE:e,getPublicKey:te,sign:ee,verify:w,ExtendedPoint:_,utils:{getExtendedPublicKey:K,randomPrivateKey:()=>o(t.BYTES),precompute(O=8,C=_.BASE){return C._setWindowSize(O),C.multiply(BigInt(3)),C}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fP=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),nL=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Tce=BigInt(1),rL=BigInt(2);BigInt(3);const Cce=BigInt(5),Ice=BigInt(8);function Rce(n){const e=BigInt(10),t=BigInt(20),r=BigInt(40),i=BigInt(80),s=fP,a=n*n%s*n%s,l=$r(a,rL,s)*a%s,u=$r(l,Tce,s)*n%s,h=$r(u,Cce,s)*u%s,f=$r(h,e,s)*h%s,p=$r(f,t,s)*f%s,m=$r(p,r,s)*p%s,g=$r(m,i,s)*m%s,v=$r(g,i,s)*m%s,x=$r(v,e,s)*h%s;return{pow_p_5_8:$r(x,rL,s)*n%s,b2:a}}function Pce(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function kce(n,e){const t=fP,r=gr(e*e*e,t),i=gr(r*r*e,t),s=Rce(n*i).pow_p_5_8;let o=gr(n*r*s,t);const a=gr(e*o*o,t),l=o,u=gr(o*nL,t),h=a===n,f=a===gr(-n,t),p=a===gr(-n*nL,t);return h&&(o=l),(f||p)&&(o=u),pce(o,t)&&(o=gr(-o,t)),{isValid:h||f,value:o}}const Mce=(()=>Ib(fP,void 0,!0))(),Oce=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Mce,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Ice,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Jue,randomBytes:hz,adjustScalarBytes:Pce,uvRatio:kce}))(),Rb=(()=>Ace(Oce))();var pP={exports:{}};const mP=Lm(wue);pP.exports;(function(n){(function(e,t){function r(L,w){if(!L)throw new Error(w||"Assertion failed")}function i(L,w){L.super_=w;var A=function(){};A.prototype=w.prototype,L.prototype=new A,L.prototype.constructor=L}function s(L,w,A){if(s.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,L!==null&&((w==="le"||w==="be")&&(A=w,w=10),this._init(L||0,w||10,A||"be"))}typeof e=="object"?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=mP.Buffer}catch{}s.isBN=function(w){return w instanceof s?!0:w!==null&&typeof w=="object"&&w.constructor.wordSize===s.wordSize&&Array.isArray(w.words)},s.max=function(w,A){return w.cmp(A)>0?w:A},s.min=function(w,A){return w.cmp(A)<0?w:A},s.prototype._init=function(w,A,O){if(typeof w=="number")return this._initNumber(w,A,O);if(typeof w=="object")return this._initArray(w,A,O);A==="hex"&&(A=16),r(A===(A|0)&&A>=2&&A<=36),w=w.toString().replace(/\s+/g,"");var C=0;w[0]==="-"&&(C++,this.negative=1),C<w.length&&(A===16?this._parseHex(w,C,O):(this._parseBase(w,A,C),O==="le"&&this._initArray(this.toArray(),A,O)))},s.prototype._initNumber=function(w,A,O){w<0&&(this.negative=1,w=-w),w<67108864?(this.words=[w&67108863],this.length=1):w<4503599627370496?(this.words=[w&67108863,w/67108864&67108863],this.length=2):(r(w<9007199254740992),this.words=[w&67108863,w/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),A,O)},s.prototype._initArray=function(w,A,O){if(r(typeof w.length=="number"),w.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(w.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var k,U,z=0;if(O==="be")for(C=w.length-1,k=0;C>=0;C-=3)U=w[C]|w[C-1]<<8|w[C-2]<<16,this.words[k]|=U<<z&67108863,this.words[k+1]=U>>>26-z&67108863,z+=24,z>=26&&(z-=26,k++);else if(O==="le")for(C=0,k=0;C<w.length;C+=3)U=w[C]|w[C+1]<<8|w[C+2]<<16,this.words[k]|=U<<z&67108863,this.words[k+1]=U>>>26-z&67108863,z+=24,z>=26&&(z-=26,k++);return this._strip()};function a(L,w){var A=L.charCodeAt(w);if(A>=48&&A<=57)return A-48;if(A>=65&&A<=70)return A-55;if(A>=97&&A<=102)return A-87;r(!1,"Invalid character in "+L)}function l(L,w,A){var O=a(L,A);return A-1>=w&&(O|=a(L,A-1)<<4),O}s.prototype._parseHex=function(w,A,O){this.length=Math.ceil((w.length-A)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var k=0,U=0,z;if(O==="be")for(C=w.length-1;C>=A;C-=2)z=l(w,A,C)<<k,this.words[U]|=z&67108863,k>=18?(k-=18,U+=1,this.words[U]|=z>>>26):k+=8;else{var N=w.length-A;for(C=N%2===0?A+1:A;C<w.length;C+=2)z=l(w,A,C)<<k,this.words[U]|=z&67108863,k>=18?(k-=18,U+=1,this.words[U]|=z>>>26):k+=8}this._strip()};function u(L,w,A,O){for(var C=0,k=0,U=Math.min(L.length,A),z=w;z<U;z++){var N=L.charCodeAt(z)-48;C*=O,N>=49?k=N-49+10:N>=17?k=N-17+10:k=N,r(N>=0&&k<O,"Invalid character"),C+=k}return C}s.prototype._parseBase=function(w,A,O){this.words=[0],this.length=1;for(var C=0,k=1;k<=67108863;k*=A)C++;C--,k=k/A|0;for(var U=w.length-O,z=U%C,N=Math.min(U,U-z)+O,T=0,V=O;V<N;V+=C)T=u(w,V,V+C,A),this.imuln(k),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T);if(z!==0){var oe=1;for(T=u(w,V,w.length,A),V=0;V<z;V++)oe*=A;this.imuln(oe),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T)}this._strip()},s.prototype.copy=function(w){w.words=new Array(this.length);for(var A=0;A<this.length;A++)w.words[A]=this.words[A];w.length=this.length,w.negative=this.negative,w.red=this.red};function h(L,w){L.words=w.words,L.length=w.length,L.negative=w.negative,L.red=w.red}if(s.prototype._move=function(w){h(w,this)},s.prototype.clone=function(){var w=new s(null);return this.copy(w),w},s.prototype._expand=function(w){for(;this.length<w;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(w,A){w=w||10,A=A|0||1;var O;if(w===16||w==="hex"){O="";for(var C=0,k=0,U=0;U<this.length;U++){var z=this.words[U],N=((z<<C|k)&16777215).toString(16);k=z>>>24-C&16777215,C+=2,C>=26&&(C-=26,U--),k!==0||U!==this.length-1?O=p[6-N.length]+N+O:O=N+O}for(k!==0&&(O=k.toString(16)+O);O.length%A!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(w===(w|0)&&w>=2&&w<=36){var T=m[w],V=g[w];O="";var oe=this.clone();for(oe.negative=0;!oe.isZero();){var ge=oe.modrn(V).toString(w);oe=oe.idivn(V),oe.isZero()?O=ge+O:O=p[T-ge.length]+ge+O}for(this.isZero()&&(O="0"+O);O.length%A!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var w=this.words[0];return this.length===2?w+=this.words[1]*67108864:this.length===3&&this.words[2]===1?w+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-w:w},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(w,A){return this.toArrayLike(o,w,A)}),s.prototype.toArray=function(w,A){return this.toArrayLike(Array,w,A)};var v=function(w,A){return w.allocUnsafe?w.allocUnsafe(A):new w(A)};s.prototype.toArrayLike=function(w,A,O){this._strip();var C=this.byteLength(),k=O||Math.max(1,C);r(C<=k,"byte array longer than desired length"),r(k>0,"Requested array length <= 0");var U=v(w,k),z=A==="le"?"LE":"BE";return this["_toArrayLike"+z](U,C),U},s.prototype._toArrayLikeLE=function(w,A){for(var O=0,C=0,k=0,U=0;k<this.length;k++){var z=this.words[k]<<U|C;w[O++]=z&255,O<w.length&&(w[O++]=z>>8&255),O<w.length&&(w[O++]=z>>16&255),U===6?(O<w.length&&(w[O++]=z>>24&255),C=0,U=0):(C=z>>>24,U+=2)}if(O<w.length)for(w[O++]=C;O<w.length;)w[O++]=0},s.prototype._toArrayLikeBE=function(w,A){for(var O=w.length-1,C=0,k=0,U=0;k<this.length;k++){var z=this.words[k]<<U|C;w[O--]=z&255,O>=0&&(w[O--]=z>>8&255),O>=0&&(w[O--]=z>>16&255),U===6?(O>=0&&(w[O--]=z>>24&255),C=0,U=0):(C=z>>>24,U+=2)}if(O>=0)for(w[O--]=C;O>=0;)w[O--]=0},Math.clz32?s.prototype._countBits=function(w){return 32-Math.clz32(w)}:s.prototype._countBits=function(w){var A=w,O=0;return A>=4096&&(O+=13,A>>>=13),A>=64&&(O+=7,A>>>=7),A>=8&&(O+=4,A>>>=4),A>=2&&(O+=2,A>>>=2),O+A},s.prototype._zeroBits=function(w){if(w===0)return 26;var A=w,O=0;return A&8191||(O+=13,A>>>=13),A&127||(O+=7,A>>>=7),A&15||(O+=4,A>>>=4),A&3||(O+=2,A>>>=2),A&1||O++,O},s.prototype.bitLength=function(){var w=this.words[this.length-1],A=this._countBits(w);return(this.length-1)*26+A};function x(L){for(var w=new Array(L.bitLength()),A=0;A<w.length;A++){var O=A/26|0,C=A%26;w[A]=L.words[O]>>>C&1}return w}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var w=0,A=0;A<this.length;A++){var O=this._zeroBits(this.words[A]);if(w+=O,O!==26)break}return w},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(w){return this.negative!==0?this.abs().inotn(w).iaddn(1):this.clone()},s.prototype.fromTwos=function(w){return this.testn(w-1)?this.notn(w).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(w){for(;this.length<w.length;)this.words[this.length++]=0;for(var A=0;A<w.length;A++)this.words[A]=this.words[A]|w.words[A];return this._strip()},s.prototype.ior=function(w){return r((this.negative|w.negative)===0),this.iuor(w)},s.prototype.or=function(w){return this.length>w.length?this.clone().ior(w):w.clone().ior(this)},s.prototype.uor=function(w){return this.length>w.length?this.clone().iuor(w):w.clone().iuor(this)},s.prototype.iuand=function(w){var A;this.length>w.length?A=w:A=this;for(var O=0;O<A.length;O++)this.words[O]=this.words[O]&w.words[O];return this.length=A.length,this._strip()},s.prototype.iand=function(w){return r((this.negative|w.negative)===0),this.iuand(w)},s.prototype.and=function(w){return this.length>w.length?this.clone().iand(w):w.clone().iand(this)},s.prototype.uand=function(w){return this.length>w.length?this.clone().iuand(w):w.clone().iuand(this)},s.prototype.iuxor=function(w){var A,O;this.length>w.length?(A=this,O=w):(A=w,O=this);for(var C=0;C<O.length;C++)this.words[C]=A.words[C]^O.words[C];if(this!==A)for(;C<A.length;C++)this.words[C]=A.words[C];return this.length=A.length,this._strip()},s.prototype.ixor=function(w){return r((this.negative|w.negative)===0),this.iuxor(w)},s.prototype.xor=function(w){return this.length>w.length?this.clone().ixor(w):w.clone().ixor(this)},s.prototype.uxor=function(w){return this.length>w.length?this.clone().iuxor(w):w.clone().iuxor(this)},s.prototype.inotn=function(w){r(typeof w=="number"&&w>=0);var A=Math.ceil(w/26)|0,O=w%26;this._expand(A),O>0&&A--;for(var C=0;C<A;C++)this.words[C]=~this.words[C]&67108863;return O>0&&(this.words[C]=~this.words[C]&67108863>>26-O),this._strip()},s.prototype.notn=function(w){return this.clone().inotn(w)},s.prototype.setn=function(w,A){r(typeof w=="number"&&w>=0);var O=w/26|0,C=w%26;return this._expand(O+1),A?this.words[O]=this.words[O]|1<<C:this.words[O]=this.words[O]&~(1<<C),this._strip()},s.prototype.iadd=function(w){var A;if(this.negative!==0&&w.negative===0)return this.negative=0,A=this.isub(w),this.negative^=1,this._normSign();if(this.negative===0&&w.negative!==0)return w.negative=0,A=this.isub(w),w.negative=1,A._normSign();var O,C;this.length>w.length?(O=this,C=w):(O=w,C=this);for(var k=0,U=0;U<C.length;U++)A=(O.words[U]|0)+(C.words[U]|0)+k,this.words[U]=A&67108863,k=A>>>26;for(;k!==0&&U<O.length;U++)A=(O.words[U]|0)+k,this.words[U]=A&67108863,k=A>>>26;if(this.length=O.length,k!==0)this.words[this.length]=k,this.length++;else if(O!==this)for(;U<O.length;U++)this.words[U]=O.words[U];return this},s.prototype.add=function(w){var A;return w.negative!==0&&this.negative===0?(w.negative=0,A=this.sub(w),w.negative^=1,A):w.negative===0&&this.negative!==0?(this.negative=0,A=w.sub(this),this.negative=1,A):this.length>w.length?this.clone().iadd(w):w.clone().iadd(this)},s.prototype.isub=function(w){if(w.negative!==0){w.negative=0;var A=this.iadd(w);return w.negative=1,A._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(w),this.negative=1,this._normSign();var O=this.cmp(w);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var C,k;O>0?(C=this,k=w):(C=w,k=this);for(var U=0,z=0;z<k.length;z++)A=(C.words[z]|0)-(k.words[z]|0)+U,U=A>>26,this.words[z]=A&67108863;for(;U!==0&&z<C.length;z++)A=(C.words[z]|0)+U,U=A>>26,this.words[z]=A&67108863;if(U===0&&z<C.length&&C!==this)for(;z<C.length;z++)this.words[z]=C.words[z];return this.length=Math.max(this.length,z),C!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(w){return this.clone().isub(w)};function b(L,w,A){A.negative=w.negative^L.negative;var O=L.length+w.length|0;A.length=O,O=O-1|0;var C=L.words[0]|0,k=w.words[0]|0,U=C*k,z=U&67108863,N=U/67108864|0;A.words[0]=z;for(var T=1;T<O;T++){for(var V=N>>>26,oe=N&67108863,ge=Math.min(T,w.length-1),we=Math.max(0,T-L.length+1);we<=ge;we++){var Re=T-we|0;C=L.words[Re]|0,k=w.words[we]|0,U=C*k+oe,V+=U/67108864|0,oe=U&67108863}A.words[T]=oe|0,N=V|0}return N!==0?A.words[T]=N|0:A.length--,A._strip()}var S=function(w,A,O){var C=w.words,k=A.words,U=O.words,z=0,N,T,V,oe=C[0]|0,ge=oe&8191,we=oe>>>13,Re=C[1]|0,Ne=Re&8191,Ue=Re>>>13,Ye=C[2]|0,Ce=Ye&8191,ze=Ye>>>13,ft=C[3]|0,xt=ft&8191,vt=ft>>>13,Yn=C[4]|0,Ut=Yn&8191,Nt=Yn>>>13,lo=C[5]|0,Bt=lo&8191,qt=lo>>>13,mt=C[6]|0,Ke=mt&8191,Et=mt>>>13,nt=C[7]|0,Ot=nt&8191,Xt=nt>>>13,br=C[8]|0,en=br&8191,$=br>>>13,P=C[9]|0,M=P&8191,X=P>>>13,re=k[0]|0,ue=re&8191,me=re>>>13,_t=k[1]|0,Tt=_t&8191,at=_t>>>13,_n=k[2]|0,wt=_n&8191,ur=_n>>>13,pf=k[3]|0,Zn=pf&8191,Jn=pf>>>13,mf=k[4]|0,je=mf&8191,bn=mf>>>13,Dr=k[5]|0,Sn=Dr&8191,Mn=Dr>>>13,ba=k[6]|0,Kt=ba&8191,En=ba>>>13,Sa=k[7]|0,er=Sa&8191,Dn=Sa>>>13,gf=k[8]|0,cr=gf&8191,Tn=gf>>>13,yf=k[9]|0,Fn=yf&8191,tr=yf>>>13;O.negative=w.negative^A.negative,O.length=19,N=Math.imul(ge,ue),T=Math.imul(ge,me),T=T+Math.imul(we,ue)|0,V=Math.imul(we,me);var Fs=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,N=Math.imul(Ne,ue),T=Math.imul(Ne,me),T=T+Math.imul(Ue,ue)|0,V=Math.imul(Ue,me),N=N+Math.imul(ge,Tt)|0,T=T+Math.imul(ge,at)|0,T=T+Math.imul(we,Tt)|0,V=V+Math.imul(we,at)|0;var Sr=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,N=Math.imul(Ce,ue),T=Math.imul(Ce,me),T=T+Math.imul(ze,ue)|0,V=Math.imul(ze,me),N=N+Math.imul(Ne,Tt)|0,T=T+Math.imul(Ne,at)|0,T=T+Math.imul(Ue,Tt)|0,V=V+Math.imul(Ue,at)|0,N=N+Math.imul(ge,wt)|0,T=T+Math.imul(ge,ur)|0,T=T+Math.imul(we,wt)|0,V=V+Math.imul(we,ur)|0;var hr=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(hr>>>26)|0,hr&=67108863,N=Math.imul(xt,ue),T=Math.imul(xt,me),T=T+Math.imul(vt,ue)|0,V=Math.imul(vt,me),N=N+Math.imul(Ce,Tt)|0,T=T+Math.imul(Ce,at)|0,T=T+Math.imul(ze,Tt)|0,V=V+Math.imul(ze,at)|0,N=N+Math.imul(Ne,wt)|0,T=T+Math.imul(Ne,ur)|0,T=T+Math.imul(Ue,wt)|0,V=V+Math.imul(Ue,ur)|0,N=N+Math.imul(ge,Zn)|0,T=T+Math.imul(ge,Jn)|0,T=T+Math.imul(we,Zn)|0,V=V+Math.imul(we,Jn)|0;var dr=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(dr>>>26)|0,dr&=67108863,N=Math.imul(Ut,ue),T=Math.imul(Ut,me),T=T+Math.imul(Nt,ue)|0,V=Math.imul(Nt,me),N=N+Math.imul(xt,Tt)|0,T=T+Math.imul(xt,at)|0,T=T+Math.imul(vt,Tt)|0,V=V+Math.imul(vt,at)|0,N=N+Math.imul(Ce,wt)|0,T=T+Math.imul(Ce,ur)|0,T=T+Math.imul(ze,wt)|0,V=V+Math.imul(ze,ur)|0,N=N+Math.imul(Ne,Zn)|0,T=T+Math.imul(Ne,Jn)|0,T=T+Math.imul(Ue,Zn)|0,V=V+Math.imul(Ue,Jn)|0,N=N+Math.imul(ge,je)|0,T=T+Math.imul(ge,bn)|0,T=T+Math.imul(we,je)|0,V=V+Math.imul(we,bn)|0;var ll=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(ll>>>26)|0,ll&=67108863,N=Math.imul(Bt,ue),T=Math.imul(Bt,me),T=T+Math.imul(qt,ue)|0,V=Math.imul(qt,me),N=N+Math.imul(Ut,Tt)|0,T=T+Math.imul(Ut,at)|0,T=T+Math.imul(Nt,Tt)|0,V=V+Math.imul(Nt,at)|0,N=N+Math.imul(xt,wt)|0,T=T+Math.imul(xt,ur)|0,T=T+Math.imul(vt,wt)|0,V=V+Math.imul(vt,ur)|0,N=N+Math.imul(Ce,Zn)|0,T=T+Math.imul(Ce,Jn)|0,T=T+Math.imul(ze,Zn)|0,V=V+Math.imul(ze,Jn)|0,N=N+Math.imul(Ne,je)|0,T=T+Math.imul(Ne,bn)|0,T=T+Math.imul(Ue,je)|0,V=V+Math.imul(Ue,bn)|0,N=N+Math.imul(ge,Sn)|0,T=T+Math.imul(ge,Mn)|0,T=T+Math.imul(we,Sn)|0,V=V+Math.imul(we,Mn)|0;var Mi=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Mi>>>26)|0,Mi&=67108863,N=Math.imul(Ke,ue),T=Math.imul(Ke,me),T=T+Math.imul(Et,ue)|0,V=Math.imul(Et,me),N=N+Math.imul(Bt,Tt)|0,T=T+Math.imul(Bt,at)|0,T=T+Math.imul(qt,Tt)|0,V=V+Math.imul(qt,at)|0,N=N+Math.imul(Ut,wt)|0,T=T+Math.imul(Ut,ur)|0,T=T+Math.imul(Nt,wt)|0,V=V+Math.imul(Nt,ur)|0,N=N+Math.imul(xt,Zn)|0,T=T+Math.imul(xt,Jn)|0,T=T+Math.imul(vt,Zn)|0,V=V+Math.imul(vt,Jn)|0,N=N+Math.imul(Ce,je)|0,T=T+Math.imul(Ce,bn)|0,T=T+Math.imul(ze,je)|0,V=V+Math.imul(ze,bn)|0,N=N+Math.imul(Ne,Sn)|0,T=T+Math.imul(Ne,Mn)|0,T=T+Math.imul(Ue,Sn)|0,V=V+Math.imul(Ue,Mn)|0,N=N+Math.imul(ge,Kt)|0,T=T+Math.imul(ge,En)|0,T=T+Math.imul(we,Kt)|0,V=V+Math.imul(we,En)|0;var Ea=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Ea>>>26)|0,Ea&=67108863,N=Math.imul(Ot,ue),T=Math.imul(Ot,me),T=T+Math.imul(Xt,ue)|0,V=Math.imul(Xt,me),N=N+Math.imul(Ke,Tt)|0,T=T+Math.imul(Ke,at)|0,T=T+Math.imul(Et,Tt)|0,V=V+Math.imul(Et,at)|0,N=N+Math.imul(Bt,wt)|0,T=T+Math.imul(Bt,ur)|0,T=T+Math.imul(qt,wt)|0,V=V+Math.imul(qt,ur)|0,N=N+Math.imul(Ut,Zn)|0,T=T+Math.imul(Ut,Jn)|0,T=T+Math.imul(Nt,Zn)|0,V=V+Math.imul(Nt,Jn)|0,N=N+Math.imul(xt,je)|0,T=T+Math.imul(xt,bn)|0,T=T+Math.imul(vt,je)|0,V=V+Math.imul(vt,bn)|0,N=N+Math.imul(Ce,Sn)|0,T=T+Math.imul(Ce,Mn)|0,T=T+Math.imul(ze,Sn)|0,V=V+Math.imul(ze,Mn)|0,N=N+Math.imul(Ne,Kt)|0,T=T+Math.imul(Ne,En)|0,T=T+Math.imul(Ue,Kt)|0,V=V+Math.imul(Ue,En)|0,N=N+Math.imul(ge,er)|0,T=T+Math.imul(ge,Dn)|0,T=T+Math.imul(we,er)|0,V=V+Math.imul(we,Dn)|0;var nc=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(nc>>>26)|0,nc&=67108863,N=Math.imul(en,ue),T=Math.imul(en,me),T=T+Math.imul($,ue)|0,V=Math.imul($,me),N=N+Math.imul(Ot,Tt)|0,T=T+Math.imul(Ot,at)|0,T=T+Math.imul(Xt,Tt)|0,V=V+Math.imul(Xt,at)|0,N=N+Math.imul(Ke,wt)|0,T=T+Math.imul(Ke,ur)|0,T=T+Math.imul(Et,wt)|0,V=V+Math.imul(Et,ur)|0,N=N+Math.imul(Bt,Zn)|0,T=T+Math.imul(Bt,Jn)|0,T=T+Math.imul(qt,Zn)|0,V=V+Math.imul(qt,Jn)|0,N=N+Math.imul(Ut,je)|0,T=T+Math.imul(Ut,bn)|0,T=T+Math.imul(Nt,je)|0,V=V+Math.imul(Nt,bn)|0,N=N+Math.imul(xt,Sn)|0,T=T+Math.imul(xt,Mn)|0,T=T+Math.imul(vt,Sn)|0,V=V+Math.imul(vt,Mn)|0,N=N+Math.imul(Ce,Kt)|0,T=T+Math.imul(Ce,En)|0,T=T+Math.imul(ze,Kt)|0,V=V+Math.imul(ze,En)|0,N=N+Math.imul(Ne,er)|0,T=T+Math.imul(Ne,Dn)|0,T=T+Math.imul(Ue,er)|0,V=V+Math.imul(Ue,Dn)|0,N=N+Math.imul(ge,cr)|0,T=T+Math.imul(ge,Tn)|0,T=T+Math.imul(we,cr)|0,V=V+Math.imul(we,Tn)|0;var uo=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(uo>>>26)|0,uo&=67108863,N=Math.imul(M,ue),T=Math.imul(M,me),T=T+Math.imul(X,ue)|0,V=Math.imul(X,me),N=N+Math.imul(en,Tt)|0,T=T+Math.imul(en,at)|0,T=T+Math.imul($,Tt)|0,V=V+Math.imul($,at)|0,N=N+Math.imul(Ot,wt)|0,T=T+Math.imul(Ot,ur)|0,T=T+Math.imul(Xt,wt)|0,V=V+Math.imul(Xt,ur)|0,N=N+Math.imul(Ke,Zn)|0,T=T+Math.imul(Ke,Jn)|0,T=T+Math.imul(Et,Zn)|0,V=V+Math.imul(Et,Jn)|0,N=N+Math.imul(Bt,je)|0,T=T+Math.imul(Bt,bn)|0,T=T+Math.imul(qt,je)|0,V=V+Math.imul(qt,bn)|0,N=N+Math.imul(Ut,Sn)|0,T=T+Math.imul(Ut,Mn)|0,T=T+Math.imul(Nt,Sn)|0,V=V+Math.imul(Nt,Mn)|0,N=N+Math.imul(xt,Kt)|0,T=T+Math.imul(xt,En)|0,T=T+Math.imul(vt,Kt)|0,V=V+Math.imul(vt,En)|0,N=N+Math.imul(Ce,er)|0,T=T+Math.imul(Ce,Dn)|0,T=T+Math.imul(ze,er)|0,V=V+Math.imul(ze,Dn)|0,N=N+Math.imul(Ne,cr)|0,T=T+Math.imul(Ne,Tn)|0,T=T+Math.imul(Ue,cr)|0,V=V+Math.imul(Ue,Tn)|0,N=N+Math.imul(ge,Fn)|0,T=T+Math.imul(ge,tr)|0,T=T+Math.imul(we,Fn)|0,V=V+Math.imul(we,tr)|0;var zo=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(zo>>>26)|0,zo&=67108863,N=Math.imul(M,Tt),T=Math.imul(M,at),T=T+Math.imul(X,Tt)|0,V=Math.imul(X,at),N=N+Math.imul(en,wt)|0,T=T+Math.imul(en,ur)|0,T=T+Math.imul($,wt)|0,V=V+Math.imul($,ur)|0,N=N+Math.imul(Ot,Zn)|0,T=T+Math.imul(Ot,Jn)|0,T=T+Math.imul(Xt,Zn)|0,V=V+Math.imul(Xt,Jn)|0,N=N+Math.imul(Ke,je)|0,T=T+Math.imul(Ke,bn)|0,T=T+Math.imul(Et,je)|0,V=V+Math.imul(Et,bn)|0,N=N+Math.imul(Bt,Sn)|0,T=T+Math.imul(Bt,Mn)|0,T=T+Math.imul(qt,Sn)|0,V=V+Math.imul(qt,Mn)|0,N=N+Math.imul(Ut,Kt)|0,T=T+Math.imul(Ut,En)|0,T=T+Math.imul(Nt,Kt)|0,V=V+Math.imul(Nt,En)|0,N=N+Math.imul(xt,er)|0,T=T+Math.imul(xt,Dn)|0,T=T+Math.imul(vt,er)|0,V=V+Math.imul(vt,Dn)|0,N=N+Math.imul(Ce,cr)|0,T=T+Math.imul(Ce,Tn)|0,T=T+Math.imul(ze,cr)|0,V=V+Math.imul(ze,Tn)|0,N=N+Math.imul(Ne,Fn)|0,T=T+Math.imul(Ne,tr)|0,T=T+Math.imul(Ue,Fn)|0,V=V+Math.imul(Ue,tr)|0;var Us=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Us>>>26)|0,Us&=67108863,N=Math.imul(M,wt),T=Math.imul(M,ur),T=T+Math.imul(X,wt)|0,V=Math.imul(X,ur),N=N+Math.imul(en,Zn)|0,T=T+Math.imul(en,Jn)|0,T=T+Math.imul($,Zn)|0,V=V+Math.imul($,Jn)|0,N=N+Math.imul(Ot,je)|0,T=T+Math.imul(Ot,bn)|0,T=T+Math.imul(Xt,je)|0,V=V+Math.imul(Xt,bn)|0,N=N+Math.imul(Ke,Sn)|0,T=T+Math.imul(Ke,Mn)|0,T=T+Math.imul(Et,Sn)|0,V=V+Math.imul(Et,Mn)|0,N=N+Math.imul(Bt,Kt)|0,T=T+Math.imul(Bt,En)|0,T=T+Math.imul(qt,Kt)|0,V=V+Math.imul(qt,En)|0,N=N+Math.imul(Ut,er)|0,T=T+Math.imul(Ut,Dn)|0,T=T+Math.imul(Nt,er)|0,V=V+Math.imul(Nt,Dn)|0,N=N+Math.imul(xt,cr)|0,T=T+Math.imul(xt,Tn)|0,T=T+Math.imul(vt,cr)|0,V=V+Math.imul(vt,Tn)|0,N=N+Math.imul(Ce,Fn)|0,T=T+Math.imul(Ce,tr)|0,T=T+Math.imul(ze,Fn)|0,V=V+Math.imul(ze,tr)|0;var uu=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(uu>>>26)|0,uu&=67108863,N=Math.imul(M,Zn),T=Math.imul(M,Jn),T=T+Math.imul(X,Zn)|0,V=Math.imul(X,Jn),N=N+Math.imul(en,je)|0,T=T+Math.imul(en,bn)|0,T=T+Math.imul($,je)|0,V=V+Math.imul($,bn)|0,N=N+Math.imul(Ot,Sn)|0,T=T+Math.imul(Ot,Mn)|0,T=T+Math.imul(Xt,Sn)|0,V=V+Math.imul(Xt,Mn)|0,N=N+Math.imul(Ke,Kt)|0,T=T+Math.imul(Ke,En)|0,T=T+Math.imul(Et,Kt)|0,V=V+Math.imul(Et,En)|0,N=N+Math.imul(Bt,er)|0,T=T+Math.imul(Bt,Dn)|0,T=T+Math.imul(qt,er)|0,V=V+Math.imul(qt,Dn)|0,N=N+Math.imul(Ut,cr)|0,T=T+Math.imul(Ut,Tn)|0,T=T+Math.imul(Nt,cr)|0,V=V+Math.imul(Nt,Tn)|0,N=N+Math.imul(xt,Fn)|0,T=T+Math.imul(xt,tr)|0,T=T+Math.imul(vt,Fn)|0,V=V+Math.imul(vt,tr)|0;var Aa=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Aa>>>26)|0,Aa&=67108863,N=Math.imul(M,je),T=Math.imul(M,bn),T=T+Math.imul(X,je)|0,V=Math.imul(X,bn),N=N+Math.imul(en,Sn)|0,T=T+Math.imul(en,Mn)|0,T=T+Math.imul($,Sn)|0,V=V+Math.imul($,Mn)|0,N=N+Math.imul(Ot,Kt)|0,T=T+Math.imul(Ot,En)|0,T=T+Math.imul(Xt,Kt)|0,V=V+Math.imul(Xt,En)|0,N=N+Math.imul(Ke,er)|0,T=T+Math.imul(Ke,Dn)|0,T=T+Math.imul(Et,er)|0,V=V+Math.imul(Et,Dn)|0,N=N+Math.imul(Bt,cr)|0,T=T+Math.imul(Bt,Tn)|0,T=T+Math.imul(qt,cr)|0,V=V+Math.imul(qt,Tn)|0,N=N+Math.imul(Ut,Fn)|0,T=T+Math.imul(Ut,tr)|0,T=T+Math.imul(Nt,Fn)|0,V=V+Math.imul(Nt,tr)|0;var zs=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(zs>>>26)|0,zs&=67108863,N=Math.imul(M,Sn),T=Math.imul(M,Mn),T=T+Math.imul(X,Sn)|0,V=Math.imul(X,Mn),N=N+Math.imul(en,Kt)|0,T=T+Math.imul(en,En)|0,T=T+Math.imul($,Kt)|0,V=V+Math.imul($,En)|0,N=N+Math.imul(Ot,er)|0,T=T+Math.imul(Ot,Dn)|0,T=T+Math.imul(Xt,er)|0,V=V+Math.imul(Xt,Dn)|0,N=N+Math.imul(Ke,cr)|0,T=T+Math.imul(Ke,Tn)|0,T=T+Math.imul(Et,cr)|0,V=V+Math.imul(Et,Tn)|0,N=N+Math.imul(Bt,Fn)|0,T=T+Math.imul(Bt,tr)|0,T=T+Math.imul(qt,Fn)|0,V=V+Math.imul(qt,tr)|0;var Ji=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,N=Math.imul(M,Kt),T=Math.imul(M,En),T=T+Math.imul(X,Kt)|0,V=Math.imul(X,En),N=N+Math.imul(en,er)|0,T=T+Math.imul(en,Dn)|0,T=T+Math.imul($,er)|0,V=V+Math.imul($,Dn)|0,N=N+Math.imul(Ot,cr)|0,T=T+Math.imul(Ot,Tn)|0,T=T+Math.imul(Xt,cr)|0,V=V+Math.imul(Xt,Tn)|0,N=N+Math.imul(Ke,Fn)|0,T=T+Math.imul(Ke,tr)|0,T=T+Math.imul(Et,Fn)|0,V=V+Math.imul(Et,tr)|0;var dn=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(dn>>>26)|0,dn&=67108863,N=Math.imul(M,er),T=Math.imul(M,Dn),T=T+Math.imul(X,er)|0,V=Math.imul(X,Dn),N=N+Math.imul(en,cr)|0,T=T+Math.imul(en,Tn)|0,T=T+Math.imul($,cr)|0,V=V+Math.imul($,Tn)|0,N=N+Math.imul(Ot,Fn)|0,T=T+Math.imul(Ot,tr)|0,T=T+Math.imul(Xt,Fn)|0,V=V+Math.imul(Xt,tr)|0;var sn=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(sn>>>26)|0,sn&=67108863,N=Math.imul(M,cr),T=Math.imul(M,Tn),T=T+Math.imul(X,cr)|0,V=Math.imul(X,Tn),N=N+Math.imul(en,Fn)|0,T=T+Math.imul(en,tr)|0,T=T+Math.imul($,Fn)|0,V=V+Math.imul($,tr)|0;var es=(z+N|0)+((T&8191)<<13)|0;z=(V+(T>>>13)|0)+(es>>>26)|0,es&=67108863,N=Math.imul(M,Fn),T=Math.imul(M,tr),T=T+Math.imul(X,Fn)|0,V=Math.imul(X,tr);var Cn=(z+N|0)+((T&8191)<<13)|0;return z=(V+(T>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,U[0]=Fs,U[1]=Sr,U[2]=hr,U[3]=dr,U[4]=ll,U[5]=Mi,U[6]=Ea,U[7]=nc,U[8]=uo,U[9]=zo,U[10]=Us,U[11]=uu,U[12]=Aa,U[13]=zs,U[14]=Ji,U[15]=dn,U[16]=sn,U[17]=es,U[18]=Cn,z!==0&&(U[19]=z,O.length++),O};Math.imul||(S=b);function _(L,w,A){A.negative=w.negative^L.negative,A.length=L.length+w.length;for(var O=0,C=0,k=0;k<A.length-1;k++){var U=C;C=0;for(var z=O&67108863,N=Math.min(k,w.length-1),T=Math.max(0,k-L.length+1);T<=N;T++){var V=k-T,oe=L.words[V]|0,ge=w.words[T]|0,we=oe*ge,Re=we&67108863;U=U+(we/67108864|0)|0,Re=Re+z|0,z=Re&67108863,U=U+(Re>>>26)|0,C+=U>>>26,U&=67108863}A.words[k]=z,O=U,U=C}return O!==0?A.words[k]=O:A.length--,A._strip()}function R(L,w,A){return _(L,w,A)}s.prototype.mulTo=function(w,A){var O,C=this.length+w.length;return this.length===10&&w.length===10?O=S(this,w,A):C<63?O=b(this,w,A):C<1024?O=_(this,w,A):O=R(this,w,A),O},s.prototype.mul=function(w){var A=new s(null);return A.words=new Array(this.length+w.length),this.mulTo(w,A)},s.prototype.mulf=function(w){var A=new s(null);return A.words=new Array(this.length+w.length),R(this,w,A)},s.prototype.imul=function(w){return this.clone().mulTo(w,this)},s.prototype.imuln=function(w){var A=w<0;A&&(w=-w),r(typeof w=="number"),r(w<67108864);for(var O=0,C=0;C<this.length;C++){var k=(this.words[C]|0)*w,U=(k&67108863)+(O&67108863);O>>=26,O+=k/67108864|0,O+=U>>>26,this.words[C]=U&67108863}return O!==0&&(this.words[C]=O,this.length++),A?this.ineg():this},s.prototype.muln=function(w){return this.clone().imuln(w)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(w){var A=x(w);if(A.length===0)return new s(1);for(var O=this,C=0;C<A.length&&A[C]===0;C++,O=O.sqr());if(++C<A.length)for(var k=O.sqr();C<A.length;C++,k=k.sqr())A[C]!==0&&(O=O.mul(k));return O},s.prototype.iushln=function(w){r(typeof w=="number"&&w>=0);var A=w%26,O=(w-A)/26,C=67108863>>>26-A<<26-A,k;if(A!==0){var U=0;for(k=0;k<this.length;k++){var z=this.words[k]&C,N=(this.words[k]|0)-z<<A;this.words[k]=N|U,U=z>>>26-A}U&&(this.words[k]=U,this.length++)}if(O!==0){for(k=this.length-1;k>=0;k--)this.words[k+O]=this.words[k];for(k=0;k<O;k++)this.words[k]=0;this.length+=O}return this._strip()},s.prototype.ishln=function(w){return r(this.negative===0),this.iushln(w)},s.prototype.iushrn=function(w,A,O){r(typeof w=="number"&&w>=0);var C;A?C=(A-A%26)/26:C=0;var k=w%26,U=Math.min((w-k)/26,this.length),z=67108863^67108863>>>k<<k,N=O;if(C-=U,C=Math.max(0,C),N){for(var T=0;T<U;T++)N.words[T]=this.words[T];N.length=U}if(U!==0)if(this.length>U)for(this.length-=U,T=0;T<this.length;T++)this.words[T]=this.words[T+U];else this.words[0]=0,this.length=1;var V=0;for(T=this.length-1;T>=0&&(V!==0||T>=C);T--){var oe=this.words[T]|0;this.words[T]=V<<26-k|oe>>>k,V=oe&z}return N&&V!==0&&(N.words[N.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(w,A,O){return r(this.negative===0),this.iushrn(w,A,O)},s.prototype.shln=function(w){return this.clone().ishln(w)},s.prototype.ushln=function(w){return this.clone().iushln(w)},s.prototype.shrn=function(w){return this.clone().ishrn(w)},s.prototype.ushrn=function(w){return this.clone().iushrn(w)},s.prototype.testn=function(w){r(typeof w=="number"&&w>=0);var A=w%26,O=(w-A)/26,C=1<<A;if(this.length<=O)return!1;var k=this.words[O];return!!(k&C)},s.prototype.imaskn=function(w){r(typeof w=="number"&&w>=0);var A=w%26,O=(w-A)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(A!==0&&O++,this.length=Math.min(O,this.length),A!==0){var C=67108863^67108863>>>A<<A;this.words[this.length-1]&=C}return this._strip()},s.prototype.maskn=function(w){return this.clone().imaskn(w)},s.prototype.iaddn=function(w){return r(typeof w=="number"),r(w<67108864),w<0?this.isubn(-w):this.negative!==0?this.length===1&&(this.words[0]|0)<=w?(this.words[0]=w-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(w),this.negative=1,this):this._iaddn(w)},s.prototype._iaddn=function(w){this.words[0]+=w;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},s.prototype.isubn=function(w){if(r(typeof w=="number"),r(w<67108864),w<0)return this.iaddn(-w);if(this.negative!==0)return this.negative=0,this.iaddn(w),this.negative=1,this;if(this.words[0]-=w,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this._strip()},s.prototype.addn=function(w){return this.clone().iaddn(w)},s.prototype.subn=function(w){return this.clone().isubn(w)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(w,A,O){var C=w.length+O,k;this._expand(C);var U,z=0;for(k=0;k<w.length;k++){U=(this.words[k+O]|0)+z;var N=(w.words[k]|0)*A;U-=N&67108863,z=(U>>26)-(N/67108864|0),this.words[k+O]=U&67108863}for(;k<this.length-O;k++)U=(this.words[k+O]|0)+z,z=U>>26,this.words[k+O]=U&67108863;if(z===0)return this._strip();for(r(z===-1),z=0,k=0;k<this.length;k++)U=-(this.words[k]|0)+z,z=U>>26,this.words[k]=U&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(w,A){var O=this.length-w.length,C=this.clone(),k=w,U=k.words[k.length-1]|0,z=this._countBits(U);O=26-z,O!==0&&(k=k.ushln(O),C.iushln(O),U=k.words[k.length-1]|0);var N=C.length-k.length,T;if(A!=="mod"){T=new s(null),T.length=N+1,T.words=new Array(T.length);for(var V=0;V<T.length;V++)T.words[V]=0}var oe=C.clone()._ishlnsubmul(k,1,N);oe.negative===0&&(C=oe,T&&(T.words[N]=1));for(var ge=N-1;ge>=0;ge--){var we=(C.words[k.length+ge]|0)*67108864+(C.words[k.length+ge-1]|0);for(we=Math.min(we/U|0,67108863),C._ishlnsubmul(k,we,ge);C.negative!==0;)we--,C.negative=0,C._ishlnsubmul(k,1,ge),C.isZero()||(C.negative^=1);T&&(T.words[ge]=we)}return T&&T._strip(),C._strip(),A!=="div"&&O!==0&&C.iushrn(O),{div:T||null,mod:C}},s.prototype.divmod=function(w,A,O){if(r(!w.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var C,k,U;return this.negative!==0&&w.negative===0?(U=this.neg().divmod(w,A),A!=="mod"&&(C=U.div.neg()),A!=="div"&&(k=U.mod.neg(),O&&k.negative!==0&&k.iadd(w)),{div:C,mod:k}):this.negative===0&&w.negative!==0?(U=this.divmod(w.neg(),A),A!=="mod"&&(C=U.div.neg()),{div:C,mod:U.mod}):this.negative&w.negative?(U=this.neg().divmod(w.neg(),A),A!=="div"&&(k=U.mod.neg(),O&&k.negative!==0&&k.isub(w)),{div:U.div,mod:k}):w.length>this.length||this.cmp(w)<0?{div:new s(0),mod:this}:w.length===1?A==="div"?{div:this.divn(w.words[0]),mod:null}:A==="mod"?{div:null,mod:new s(this.modrn(w.words[0]))}:{div:this.divn(w.words[0]),mod:new s(this.modrn(w.words[0]))}:this._wordDiv(w,A)},s.prototype.div=function(w){return this.divmod(w,"div",!1).div},s.prototype.mod=function(w){return this.divmod(w,"mod",!1).mod},s.prototype.umod=function(w){return this.divmod(w,"mod",!0).mod},s.prototype.divRound=function(w){var A=this.divmod(w);if(A.mod.isZero())return A.div;var O=A.div.negative!==0?A.mod.isub(w):A.mod,C=w.ushrn(1),k=w.andln(1),U=O.cmp(C);return U<0||k===1&&U===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},s.prototype.modrn=function(w){var A=w<0;A&&(w=-w),r(w<=67108863);for(var O=(1<<26)%w,C=0,k=this.length-1;k>=0;k--)C=(O*C+(this.words[k]|0))%w;return A?-C:C},s.prototype.modn=function(w){return this.modrn(w)},s.prototype.idivn=function(w){var A=w<0;A&&(w=-w),r(w<=67108863);for(var O=0,C=this.length-1;C>=0;C--){var k=(this.words[C]|0)+O*67108864;this.words[C]=k/w|0,O=k%w}return this._strip(),A?this.ineg():this},s.prototype.divn=function(w){return this.clone().idivn(w)},s.prototype.egcd=function(w){r(w.negative===0),r(!w.isZero());var A=this,O=w.clone();A.negative!==0?A=A.umod(w):A=A.clone();for(var C=new s(1),k=new s(0),U=new s(0),z=new s(1),N=0;A.isEven()&&O.isEven();)A.iushrn(1),O.iushrn(1),++N;for(var T=O.clone(),V=A.clone();!A.isZero();){for(var oe=0,ge=1;!(A.words[0]&ge)&&oe<26;++oe,ge<<=1);if(oe>0)for(A.iushrn(oe);oe-- >0;)(C.isOdd()||k.isOdd())&&(C.iadd(T),k.isub(V)),C.iushrn(1),k.iushrn(1);for(var we=0,Re=1;!(O.words[0]&Re)&&we<26;++we,Re<<=1);if(we>0)for(O.iushrn(we);we-- >0;)(U.isOdd()||z.isOdd())&&(U.iadd(T),z.isub(V)),U.iushrn(1),z.iushrn(1);A.cmp(O)>=0?(A.isub(O),C.isub(U),k.isub(z)):(O.isub(A),U.isub(C),z.isub(k))}return{a:U,b:z,gcd:O.iushln(N)}},s.prototype._invmp=function(w){r(w.negative===0),r(!w.isZero());var A=this,O=w.clone();A.negative!==0?A=A.umod(w):A=A.clone();for(var C=new s(1),k=new s(0),U=O.clone();A.cmpn(1)>0&&O.cmpn(1)>0;){for(var z=0,N=1;!(A.words[0]&N)&&z<26;++z,N<<=1);if(z>0)for(A.iushrn(z);z-- >0;)C.isOdd()&&C.iadd(U),C.iushrn(1);for(var T=0,V=1;!(O.words[0]&V)&&T<26;++T,V<<=1);if(T>0)for(O.iushrn(T);T-- >0;)k.isOdd()&&k.iadd(U),k.iushrn(1);A.cmp(O)>=0?(A.isub(O),C.isub(k)):(O.isub(A),k.isub(C))}var oe;return A.cmpn(1)===0?oe=C:oe=k,oe.cmpn(0)<0&&oe.iadd(w),oe},s.prototype.gcd=function(w){if(this.isZero())return w.abs();if(w.isZero())return this.abs();var A=this.clone(),O=w.clone();A.negative=0,O.negative=0;for(var C=0;A.isEven()&&O.isEven();C++)A.iushrn(1),O.iushrn(1);do{for(;A.isEven();)A.iushrn(1);for(;O.isEven();)O.iushrn(1);var k=A.cmp(O);if(k<0){var U=A;A=O,O=U}else if(k===0||O.cmpn(1)===0)break;A.isub(O)}while(!0);return O.iushln(C)},s.prototype.invm=function(w){return this.egcd(w).a.umod(w)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(w){return this.words[0]&w},s.prototype.bincn=function(w){r(typeof w=="number");var A=w%26,O=(w-A)/26,C=1<<A;if(this.length<=O)return this._expand(O+1),this.words[O]|=C,this;for(var k=C,U=O;k!==0&&U<this.length;U++){var z=this.words[U]|0;z+=k,k=z>>>26,z&=67108863,this.words[U]=z}return k!==0&&(this.words[U]=k,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(w){var A=w<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this._strip();var O;if(this.length>1)O=1;else{A&&(w=-w),r(w<=67108863,"Number is too big");var C=this.words[0]|0;O=C===w?0:C<w?-1:1}return this.negative!==0?-O|0:O},s.prototype.cmp=function(w){if(this.negative!==0&&w.negative===0)return-1;if(this.negative===0&&w.negative!==0)return 1;var A=this.ucmp(w);return this.negative!==0?-A|0:A},s.prototype.ucmp=function(w){if(this.length>w.length)return 1;if(this.length<w.length)return-1;for(var A=0,O=this.length-1;O>=0;O--){var C=this.words[O]|0,k=w.words[O]|0;if(C!==k){C<k?A=-1:C>k&&(A=1);break}}return A},s.prototype.gtn=function(w){return this.cmpn(w)===1},s.prototype.gt=function(w){return this.cmp(w)===1},s.prototype.gten=function(w){return this.cmpn(w)>=0},s.prototype.gte=function(w){return this.cmp(w)>=0},s.prototype.ltn=function(w){return this.cmpn(w)===-1},s.prototype.lt=function(w){return this.cmp(w)===-1},s.prototype.lten=function(w){return this.cmpn(w)<=0},s.prototype.lte=function(w){return this.cmp(w)<=0},s.prototype.eqn=function(w){return this.cmpn(w)===0},s.prototype.eq=function(w){return this.cmp(w)===0},s.red=function(w){return new ne(w)},s.prototype.toRed=function(w){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),w.convertTo(this)._forceRed(w)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(w){return this.red=w,this},s.prototype.forceRed=function(w){return r(!this.red,"Already a number in reduction context"),this._forceRed(w)},s.prototype.redAdd=function(w){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,w)},s.prototype.redIAdd=function(w){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,w)},s.prototype.redSub=function(w){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,w)},s.prototype.redISub=function(w){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,w)},s.prototype.redShl=function(w){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,w)},s.prototype.redMul=function(w){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.mul(this,w)},s.prototype.redIMul=function(w){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,w),this.red.imul(this,w)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(w){return r(this.red&&!w.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,w)};var D={k256:null,p224:null,p192:null,p25519:null};function j(L,w){this.name=L,this.p=new s(w,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var w=new s(null);return w.words=new Array(Math.ceil(this.n/13)),w},j.prototype.ireduce=function(w){var A=w,O;do this.split(A,this.tmp),A=this.imulK(A),A=A.iadd(this.tmp),O=A.bitLength();while(O>this.n);var C=O<this.n?-1:A.ucmp(this.p);return C===0?(A.words[0]=0,A.length=1):C>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},j.prototype.split=function(w,A){w.iushrn(this.n,0,A)},j.prototype.imulK=function(w){return w.imul(this.k)};function H(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(H,j),H.prototype.split=function(w,A){for(var O=4194303,C=Math.min(w.length,9),k=0;k<C;k++)A.words[k]=w.words[k];if(A.length=C,w.length<=9){w.words[0]=0,w.length=1;return}var U=w.words[9];for(A.words[A.length++]=U&O,k=10;k<w.length;k++){var z=w.words[k]|0;w.words[k-10]=(z&O)<<4|U>>>22,U=z}U>>>=22,w.words[k-10]=U,U===0&&w.length>10?w.length-=10:w.length-=9},H.prototype.imulK=function(w){w.words[w.length]=0,w.words[w.length+1]=0,w.length+=2;for(var A=0,O=0;O<w.length;O++){var C=w.words[O]|0;A+=C*977,w.words[O]=A&67108863,A=C*64+(A/67108864|0)}return w.words[w.length-1]===0&&(w.length--,w.words[w.length-1]===0&&w.length--),w};function G(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(G,j);function K(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(K,j);function te(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(te,j),te.prototype.imulK=function(w){for(var A=0,O=0;O<w.length;O++){var C=(w.words[O]|0)*19+A,k=C&67108863;C>>>=26,w.words[O]=k,A=C}return A!==0&&(w.words[w.length++]=A),w},s._prime=function(w){if(D[w])return D[w];var A;if(w==="k256")A=new H;else if(w==="p224")A=new G;else if(w==="p192")A=new K;else if(w==="p25519")A=new te;else throw new Error("Unknown prime "+w);return D[w]=A,A};function ne(L){if(typeof L=="string"){var w=s._prime(L);this.m=w.p,this.prime=w}else r(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}ne.prototype._verify1=function(w){r(w.negative===0,"red works only with positives"),r(w.red,"red works only with red numbers")},ne.prototype._verify2=function(w,A){r((w.negative|A.negative)===0,"red works only with positives"),r(w.red&&w.red===A.red,"red works only with red numbers")},ne.prototype.imod=function(w){return this.prime?this.prime.ireduce(w)._forceRed(this):(h(w,w.umod(this.m)._forceRed(this)),w)},ne.prototype.neg=function(w){return w.isZero()?w.clone():this.m.sub(w)._forceRed(this)},ne.prototype.add=function(w,A){this._verify2(w,A);var O=w.add(A);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},ne.prototype.iadd=function(w,A){this._verify2(w,A);var O=w.iadd(A);return O.cmp(this.m)>=0&&O.isub(this.m),O},ne.prototype.sub=function(w,A){this._verify2(w,A);var O=w.sub(A);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},ne.prototype.isub=function(w,A){this._verify2(w,A);var O=w.isub(A);return O.cmpn(0)<0&&O.iadd(this.m),O},ne.prototype.shl=function(w,A){return this._verify1(w),this.imod(w.ushln(A))},ne.prototype.imul=function(w,A){return this._verify2(w,A),this.imod(w.imul(A))},ne.prototype.mul=function(w,A){return this._verify2(w,A),this.imod(w.mul(A))},ne.prototype.isqr=function(w){return this.imul(w,w.clone())},ne.prototype.sqr=function(w){return this.mul(w,w)},ne.prototype.sqrt=function(w){if(w.isZero())return w.clone();var A=this.m.andln(3);if(r(A%2===1),A===3){var O=this.m.add(new s(1)).iushrn(2);return this.pow(w,O)}for(var C=this.m.subn(1),k=0;!C.isZero()&&C.andln(1)===0;)k++,C.iushrn(1);r(!C.isZero());var U=new s(1).toRed(this),z=U.redNeg(),N=this.m.subn(1).iushrn(1),T=this.m.bitLength();for(T=new s(2*T*T).toRed(this);this.pow(T,N).cmp(z)!==0;)T.redIAdd(z);for(var V=this.pow(T,C),oe=this.pow(w,C.addn(1).iushrn(1)),ge=this.pow(w,C),we=k;ge.cmp(U)!==0;){for(var Re=ge,Ne=0;Re.cmp(U)!==0;Ne++)Re=Re.redSqr();r(Ne<we);var Ue=this.pow(V,new s(1).iushln(we-Ne-1));oe=oe.redMul(Ue),V=Ue.redSqr(),ge=ge.redMul(V),we=Ne}return oe},ne.prototype.invm=function(w){var A=w._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},ne.prototype.pow=function(w,A){if(A.isZero())return new s(1).toRed(this);if(A.cmpn(1)===0)return w.clone();var O=4,C=new Array(1<<O);C[0]=new s(1).toRed(this),C[1]=w;for(var k=2;k<C.length;k++)C[k]=this.mul(C[k-1],w);var U=C[0],z=0,N=0,T=A.bitLength()%26;for(T===0&&(T=26),k=A.length-1;k>=0;k--){for(var V=A.words[k],oe=T-1;oe>=0;oe--){var ge=V>>oe&1;if(U!==C[0]&&(U=this.sqr(U)),ge===0&&z===0){N=0;continue}z<<=1,z|=ge,N++,!(N!==O&&(k!==0||oe!==0))&&(U=this.mul(U,C[z]),N=0,z=0)}T=26}return U},ne.prototype.convertTo=function(w){var A=w.umod(this.m);return A===w?A.clone():A},ne.prototype.convertFrom=function(w){var A=w.clone();return A.red=null,A},s.mont=function(w){return new ee(w)};function ee(L){ne.call(this,L),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(ee,ne),ee.prototype.convertTo=function(w){return this.imod(w.ushln(this.shift))},ee.prototype.convertFrom=function(w){var A=this.imod(w.mul(this.rinv));return A.red=null,A},ee.prototype.imul=function(w,A){if(w.isZero()||A.isZero())return w.words[0]=0,w.length=1,w;var O=w.imul(A),C=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=O.isub(C).iushrn(this.shift),U=k;return k.cmp(this.m)>=0?U=k.isub(this.m):k.cmpn(0)<0&&(U=k.iadd(this.m)),U._forceRed(this)},ee.prototype.mul=function(w,A){if(w.isZero()||A.isZero())return new s(0)._forceRed(this);var O=w.mul(A),C=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),k=O.isub(C).iushrn(this.shift),U=k;return k.cmp(this.m)>=0?U=k.isub(this.m):k.cmpn(0)<0&&(U=k.iadd(this.m)),U._forceRed(this)},ee.prototype.invm=function(w){var A=this.imod(w._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(n,oi)})(pP);var Sz=pP.exports;const iL=rl(Sz);var LC={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,e){var t=mP,r=t.Buffer;function i(o,a){for(var l in o)a[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=s);function s(o,a,l){return r(o,a,l)}s.prototype=Object.create(r.prototype),i(r,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(LC,LC.exports);var Nce=LC.exports,tw=Nce.Buffer;function Bce(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(m){if((Array.isArray(m)||m instanceof Uint8Array)&&(m=tw.from(m)),!tw.isBuffer(m))throw new TypeError("Expected Buffer");if(m.length===0)return"";for(var g=0,v=0,x=0,b=m.length;x!==b&&m[x]===0;)x++,g++;for(var S=(b-x)*u+1>>>0,_=new Uint8Array(S);x!==b;){for(var R=m[x],D=0,j=S-1;(R!==0||D<v)&&j!==-1;j--,D++)R+=256*_[j]>>>0,_[j]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");v=D,x++}for(var H=S-v;H!==S&&_[H]===0;)H++;for(var G=a.repeat(g);H<S;++H)G+=n.charAt(_[H]);return G}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return tw.alloc(0);for(var g=0,v=0,x=0;m[g]===a;)v++,g++;for(var b=(m.length-g)*l+1>>>0,S=new Uint8Array(b);g<m.length;){var _=e[m.charCodeAt(g)];if(_===255)return;for(var R=0,D=b-1;(_!==0||R<x)&&D!==-1;D--,R++)_+=o*S[D]>>>0,S[D]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");x=R,g++}for(var j=b-x;j!==b&&S[j]===0;)j++;var H=tw.allocUnsafe(v+(b-j));H.fill(0,0,v);for(var G=v;j!==b;)H[G++]=S[j++];return H}function p(m){var g=f(m);if(g)return g;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:p}}var Lce=Bce,Dce=Lce,Fce="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Ez=Dce(Fce);const qi=rl(Ez);function Uce(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Az(n,...e){if(!Uce(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function sL(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function zce(n,e){Az(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xA=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Il=(n,e)=>n<<32-e|n>>>e;function $ce(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Tz(n){return typeof n=="string"&&(n=$ce(n)),Az(n),n}class jce{clone(){return this._cloneInto()}}function Hce(n){const e=r=>n().update(Tz(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Wce(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),a=Number(t&s),l=r?4:0,u=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+u,a,r)}const Gce=(n,e,t)=>n&e^~n&t,Vce=(n,e,t)=>n&e^n&t^e&t;class qce extends jce{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xA(this.buffer)}update(e){sL(this);const{view:t,buffer:r,blockLen:i}=this;e=Tz(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=xA(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){sL(this),zce(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let f=o;f<i;f++)t[f]=0;Wce(r,i-8,BigInt(this.length*8),s),this.process(r,0);const a=xA(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)a.setUint32(4*f,h[f],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const Xce=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ec=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ac=new Uint32Array(64);let Kce=class extends qce{constructor(){super(64,32,8,!1),this.A=Ec[0]|0,this.B=Ec[1]|0,this.C=Ec[2]|0,this.D=Ec[3]|0,this.E=Ec[4]|0,this.F=Ec[5]|0,this.G=Ec[6]|0,this.H=Ec[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)Ac[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=Ac[f-15],m=Ac[f-2],g=Il(p,7)^Il(p,18)^p>>>3,v=Il(m,17)^Il(m,19)^m>>>10;Ac[f]=v+Ac[f-7]+g+Ac[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let f=0;f<64;f++){const p=Il(a,6)^Il(a,11)^Il(a,25),m=h+p+Gce(a,l,u)+Xce[f]+Ac[f]|0,v=(Il(r,2)^Il(r,13)^Il(r,22))+Vce(r,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(r,i,s,o,a,l,u,h)}roundClean(){Ac.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const oL=Hce(()=>new Kce);var Gi={};function Cu(n,e,t){return e<=n&&n<=t}function Pb(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Qce(n){for(var e=String(n),t=e.length,r=0,i=[];r<t;){var s=e.charCodeAt(r);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(r===t-1)i.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;i.push(65536+(a<<10)+l),r+=1}else i.push(65533)}r+=1}return i}function Yce(n){for(var e="",t=0;t<n.length;++t){var r=n[t];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return e}var a_=-1;function gP(n){this.tokens=[].slice.call(n)}gP.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():a_},prepend:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var e=n;e.length;)this.tokens.push(e.shift());else this.tokens.push(n)}};var Rm=-1;function _A(n,e){if(n)throw TypeError("Decoder error");return e||65533}var l_="utf-8";function u_(n,e){if(!(this instanceof u_))return new u_(n,e);if(n=n!==void 0?String(n).toLowerCase():l_,n!==l_)throw new Error("Encoding not supported. Only utf-8 is supported");e=Pb(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}u_.prototype={decode:function(e,t){var r;typeof e=="object"&&e instanceof ArrayBuffer?r=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):r=new Uint8Array(0),t=Pb(t),this._streaming||(this._decoder=new Zce({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new gP(r),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Rm);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Rm)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Yce(s)}};function c_(n,e){if(!(this instanceof c_))return new c_(n,e);if(n=n!==void 0?String(n).toLowerCase():l_,n!==l_)throw new Error("Encoding not supported. Only utf-8 is supported");e=Pb(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}c_.prototype={encode:function(e,t){e=e?String(e):"",t=Pb(t),this._streaming||(this._encoder=new Jce(this._options)),this._streaming=!!t.stream;for(var r=[],i=new gP(Qce(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Rm);)Array.isArray(s)?r.push.apply(r,s):r.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Rm;)Array.isArray(s)?r.push.apply(r,s):r.push(s);this._encoder=null}return new Uint8Array(r)}};function Zce(n){var e=n.fatal,t=0,r=0,i=0,s=128,o=191;this.handler=function(a,l){if(l===a_&&i!==0)return i=0,_A(e);if(l===a_)return Rm;if(i===0){if(Cu(l,0,127))return l;if(Cu(l,194,223))i=1,t=l-192;else if(Cu(l,224,239))l===224&&(s=160),l===237&&(o=159),i=2,t=l-224;else if(Cu(l,240,244))l===240&&(s=144),l===244&&(o=143),i=3,t=l-240;else return _A(e);return t=t<<6*i,null}if(!Cu(l,s,o))return t=i=r=0,s=128,o=191,a.prepend(l),_A(e);if(s=128,o=191,r+=1,t+=l-128<<6*(i-r),r!==i)return null;var u=t;return t=i=r=0,u}}function Jce(n){n.fatal,this.handler=function(e,t){if(t===a_)return Rm;if(Cu(t,0,127))return t;var r,i;Cu(t,128,2047)?(r=1,i=192):Cu(t,2048,65535)?(r=2,i=224):Cu(t,65536,1114111)&&(r=3,i=240);for(var s=[(t>>6*r)+i];r>0;){var o=t>>6*(r-1);s.push(128|o&63),r-=1}return s}}const ehe=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:u_,TextEncoder:c_},Symbol.toStringTag,{value:"Module"})),the=Lm(ehe);var nhe=oi&&oi.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),rhe=oi&&oi.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),su=oi&&oi.__decorate||function(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ihe=oi&&oi.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.hasOwnProperty.call(n,t)&&nhe(e,n,t);return rhe(e,n),e},Cz=oi&&oi.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gi,"__esModule",{value:!0});var Iz=Gi.deserializeUnchecked=Nz=Gi.deserialize=Oz=Gi.serialize=Gi.BinaryReader=Gi.BinaryWriter=Gi.BorshError=Gi.baseDecode=Gi.baseEncode=void 0;const ih=Cz(Sz),Rz=Cz(Ez),she=ihe(the),ohe=typeof TextDecoder!="function"?she.TextDecoder:TextDecoder,ahe=new ohe("utf-8",{fatal:!0});function lhe(n){return typeof n=="string"&&(n=ei.from(n,"utf8")),Rz.default.encode(ei.from(n))}Gi.baseEncode=lhe;function uhe(n){return ei.from(Rz.default.decode(n))}Gi.baseDecode=uhe;const bA=1024;class Os extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Gi.BorshError=Os;class Pz{constructor(){this.buf=ei.alloc(bA),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ei.concat([this.buf,ei.alloc(bA)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(ei.from(new ih.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(ei.from(new ih.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(ei.from(new ih.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(ei.from(new ih.default(e).toArray("le",64)))}writeBuffer(e){this.buf=ei.concat([ei.from(this.buf.subarray(0,this.length)),e,ei.alloc(bA)]),this.length+=e.length}writeString(e){this.maybeResize();const t=ei.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(ei.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}Gi.BinaryWriter=Pz;function ou(n,e,t){const r=t.value;t.value=function(...i){try{return r.apply(this,i)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Os("Reached the end of buffer when deserializing")}throw s}}}class Fo{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new ih.default(e,"le")}readU128(){const e=this.readBuffer(16);return new ih.default(e,"le")}readU256(){const e=this.readBuffer(32);return new ih.default(e,"le")}readU512(){const e=this.readBuffer(64);return new ih.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Os(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return ahe.decode(t)}catch(r){throw new Os(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let i=0;i<t;++i)r.push(e());return r}}su([ou],Fo.prototype,"readU8",null);su([ou],Fo.prototype,"readU16",null);su([ou],Fo.prototype,"readU32",null);su([ou],Fo.prototype,"readU64",null);su([ou],Fo.prototype,"readU128",null);su([ou],Fo.prototype,"readU256",null);su([ou],Fo.prototype,"readU512",null);su([ou],Fo.prototype,"readString",null);su([ou],Fo.prototype,"readFixedArray",null);su([ou],Fo.prototype,"readArray",null);Gi.BinaryReader=Fo;function kz(n){return n.charAt(0).toUpperCase()+n.slice(1)}function fd(n,e,t,r,i){try{if(typeof r=="string")i[`write${kz(r)}`](t);else if(r instanceof Array)if(typeof r[0]=="number"){if(t.length!==r[0])throw new Os(`Expecting byte array of length ${r[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(r.length===2&&typeof r[1]=="number"){if(t.length!==r[1])throw new Os(`Expecting byte array of length ${r[1]}, but got ${t.length} bytes`);for(let s=0;s<r[1];s++)fd(n,null,t[s],r[0],i)}else i.writeArray(t,s=>{fd(n,e,s,r[0],i)});else if(r.kind!==void 0)switch(r.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),fd(n,e,t,r.type,i));break}case"map":{i.writeU32(t.size),t.forEach((s,o)=>{fd(n,e,o,r.key,i),fd(n,e,s,r.value,i)});break}default:throw new Os(`FieldType ${r} unrecognized`)}else Mz(n,t,i)}catch(s){throw s instanceof Os&&s.addToFieldPath(e),s}}function Mz(n,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const r=n.get(e.constructor);if(!r)throw new Os(`Class ${e.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([i,s])=>{fd(n,i,e[i],s,t)});else if(r.kind==="enum"){const i=e[r.field];for(let s=0;s<r.values.length;++s){const[o,a]=r.values[s];if(o===i){t.writeU8(s),fd(n,o,e[o],a,t);break}}}else throw new Os(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function che(n,e,t=Pz){const r=new t;return Mz(n,e,r),r.toArray()}var Oz=Gi.serialize=che;function pd(n,e,t,r){try{if(typeof t=="string")return r[`read${kz(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return r.readFixedArray(t[0]);if(typeof t[1]=="number"){const i=[];for(let s=0;s<t[1];s++)i.push(pd(n,null,t[0],r));return i}else return r.readArray(()=>pd(n,e,t[0],r))}if(t.kind==="option")return r.readU8()?pd(n,e,t.type,r):void 0;if(t.kind==="map"){let i=new Map;const s=r.readU32();for(let o=0;o<s;o++){const a=pd(n,e,t.key,r),l=pd(n,e,t.value,r);i.set(a,l)}return i}return yP(n,t,r)}catch(i){throw i instanceof Os&&i.addToFieldPath(e),i}}function yP(n,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const r=n.get(e);if(!r)throw new Os(`Class ${e.name} is missing in schema`);if(r.kind==="struct"){const i={};for(const[s,o]of n.get(e).fields)i[s]=pd(n,s,o,t);return new e(i)}if(r.kind==="enum"){const i=t.readU8();if(i>=r.values.length)throw new Os(`Enum index: ${i} is out of range`);const[s,o]=r.values[i],a=pd(n,s,o,t);return new e({[s]:a})}throw new Os(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}function hhe(n,e,t,r=Fo){const i=new r(t),s=yP(n,e,i);if(i.offset<t.length)throw new Os(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return s}var Nz=Gi.deserialize=hhe;function dhe(n,e,t,r=Fo){const i=new r(t);return yP(n,e,i)}Iz=Gi.deserializeUnchecked=dhe;var pe={};Object.defineProperty(pe,"__esModule",{value:!0});pe.s16=pe.s8=pe.nu64be=pe.u48be=pe.u40be=pe.u32be=pe.u24be=pe.u16be=zi=pe.nu64=pe.u48=pe.u40=pt=pe.u32=pe.u24=ia=pe.u16=cn=pe.u8=$d=pe.offset=pe.greedy=pe.Constant=pe.UTF8=pe.CString=pe.Blob=pe.Boolean=pe.BitField=pe.BitStructure=pe.VariantLayout=pe.Union=pe.UnionLayoutDiscriminator=pe.UnionDiscriminator=pe.Structure=pe.Sequence=pe.DoubleBE=pe.Double=pe.FloatBE=pe.Float=pe.NearInt64BE=pe.NearInt64=pe.NearUInt64BE=pe.NearUInt64=pe.IntBE=pe.Int=pe.UIntBE=pe.UInt=pe.OffsetLayout=pe.GreedyCount=pe.ExternalLayout=pe.bindConstructorLayout=pe.nameWithProperty=pe.Layout=pe.uint8ArrayToBuffer=pe.checkUint8Array=void 0;pe.constant=pe.utf8=pe.cstr=Hn=pe.blob=pe.unionLayoutDiscriminator=pe.union=ys=pe.seq=pe.bits=rt=pe.struct=pe.f64be=pe.f64=pe.f32be=pe.f32=pe.ns64be=pe.s48be=pe.s40be=pe.s32be=pe.s24be=pe.s16be=So=pe.ns64=pe.s48=pe.s40=pe.s32=pe.s24=void 0;const vP=mP;function Km(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}pe.checkUint8Array=Km;function xn(n){return Km(n),vP.Buffer.from(n.buffer,n.byteOffset,n.length)}pe.uint8ArrayToBuffer=xn;class Ln{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}pe.Layout=Ln;function wP(n,e){return e.property?n+"["+e.property+"]":n}pe.nameWithProperty=wP;function fhe(n,e){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ln))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=e,e.boundConstructor_=n,e.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(t,r){return e.encode(this,t,r)},writable:!0}),Object.defineProperty(n,"decode",{value(t,r){return e.decode(t,r)},writable:!0})}pe.bindConstructorLayout=fhe;class Js extends Ln{isCount(){throw new Error("ExternalLayout is abstract")}}pe.ExternalLayout=Js;class Bz extends Js{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Km(e);const r=e.length-t;return Math.floor(r/this.elementSpan)}encode(e,t,r){return 0}}pe.GreedyCount=Bz;class xP extends Js{constructor(e,t=0,r){if(!(e instanceof Ln))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof ga||this.layout instanceof Ja}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}pe.OffsetLayout=xP;class ga extends Ln{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return xn(e).readUIntLE(t,this.span)}encode(e,t,r=0){return xn(t).writeUIntLE(e,r,this.span),this.span}}pe.UInt=ga;class Ja extends Ln{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return xn(e).readUIntBE(t,this.span)}encode(e,t,r=0){return xn(t).writeUIntBE(e,r,this.span),this.span}}pe.UIntBE=Ja;class cf extends Ln{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return xn(e).readIntLE(t,this.span)}encode(e,t,r=0){return xn(t).writeIntLE(e,r,this.span),this.span}}pe.Int=cf;class Qm extends Ln{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return xn(e).readIntBE(t,this.span)}encode(e,t,r=0){return xn(t).writeIntBE(e,r,this.span),this.span}}pe.IntBE=Qm;const DC=Math.pow(2,32);function kb(n){const e=Math.floor(n/DC),t=n-e*DC;return{hi32:e,lo32:t}}function Mb(n,e){return n*DC+e}class Lz extends Ln{constructor(e){super(8,e)}decode(e,t=0){const r=xn(e),i=r.readUInt32LE(t),s=r.readUInt32LE(t+4);return Mb(s,i)}encode(e,t,r=0){const i=kb(e),s=xn(t);return s.writeUInt32LE(i.lo32,r),s.writeUInt32LE(i.hi32,r+4),8}}pe.NearUInt64=Lz;class Dz extends Ln{constructor(e){super(8,e)}decode(e,t=0){const r=xn(e),i=r.readUInt32BE(t),s=r.readUInt32BE(t+4);return Mb(i,s)}encode(e,t,r=0){const i=kb(e),s=xn(t);return s.writeUInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}pe.NearUInt64BE=Dz;class Fz extends Ln{constructor(e){super(8,e)}decode(e,t=0){const r=xn(e),i=r.readUInt32LE(t),s=r.readInt32LE(t+4);return Mb(s,i)}encode(e,t,r=0){const i=kb(e),s=xn(t);return s.writeUInt32LE(i.lo32,r),s.writeInt32LE(i.hi32,r+4),8}}pe.NearInt64=Fz;class Uz extends Ln{constructor(e){super(8,e)}decode(e,t=0){const r=xn(e),i=r.readInt32BE(t),s=r.readUInt32BE(t+4);return Mb(i,s)}encode(e,t,r=0){const i=kb(e),s=xn(t);return s.writeInt32BE(i.hi32,r),s.writeUInt32BE(i.lo32,r+4),8}}pe.NearInt64BE=Uz;class zz extends Ln{constructor(e){super(4,e)}decode(e,t=0){return xn(e).readFloatLE(t)}encode(e,t,r=0){return xn(t).writeFloatLE(e,r),4}}pe.Float=zz;class $z extends Ln{constructor(e){super(4,e)}decode(e,t=0){return xn(e).readFloatBE(t)}encode(e,t,r=0){return xn(t).writeFloatBE(e,r),4}}pe.FloatBE=$z;class jz extends Ln{constructor(e){super(8,e)}decode(e,t=0){return xn(e).readDoubleLE(t)}encode(e,t,r=0){return xn(t).writeDoubleLE(e,r),8}}pe.Double=jz;class Hz extends Ln{constructor(e){super(8,e)}decode(e,t=0){return xn(e).readDoubleBE(t)}encode(e,t,r=0){return xn(t).writeDoubleBE(e,r),8}}pe.DoubleBE=Hz;class Wz extends Ln{constructor(e,t,r){if(!(e instanceof Ln))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Js&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof Js)&&0<e.span&&(i=t*e.span),super(i,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,i=this.count;if(i instanceof Js&&(i=i.decode(e,t)),0<this.elementLayout.span)r=i*this.elementLayout.span;else{let s=0;for(;s<i;)r+=this.elementLayout.getSpan(e,t+r),++s}return r}decode(e,t=0){const r=[];let i=0,s=this.count;for(s instanceof Js&&(s=s.decode(e,t));i<s;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return r}encode(e,t,r=0){const i=this.elementLayout,s=e.reduce((o,a)=>o+i.encode(a,t,r+o),0);return this.count instanceof Js&&this.count.encode(e.length,t,r),s}}pe.Sequence=Wz;class Gz extends Ln{constructor(e,t,r){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Ln,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&r===void 0&&(r=t,t=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((i,s)=>{const o=s.getSpan(e,t);return t+=o,i+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(e,t=0){Km(e);const r=this.makeDestinationObject();for(const i of this.fields)if(i.property!==void 0&&(r[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const i=r;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const u=e[a.property];u!==void 0&&(o=a.encode(u,t,r),0>l&&(l=a.getSpan(t,r)))}s=r,r+=l}return s+o-i}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}pe.Structure=Gz;class _P{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,r){throw new Error("UnionDiscriminator is abstract")}}pe.UnionDiscriminator=_P;class h_ extends _P{constructor(e,t){if(!(e instanceof Js&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,r){return this.layout.encode(e,t,r)}}pe.UnionLayoutDiscriminator=h_;class bP extends Ln{constructor(e,t,r){let i;if(e instanceof ga||e instanceof Ja)i=new h_(new xP(e));else if(e instanceof Js&&e.isCount())i=new h_(e);else if(e instanceof _P)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ln))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let s=-1;t&&(s=t.span,0<=s&&(e instanceof ga||e instanceof Ja)&&(s+=i.layout.span)),super(s,r),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof ga||e instanceof Ja,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const r=this.getVariant(e,t);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const r=this.registry[t];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}decode(e,t=0){let r;const i=this.discriminator,s=i.decode(e,t),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=i.layout.span),r=this.makeDestinationObject(),r[i.property]=s,r[a.property]=a.decode(e,t+l)}else r=o.decode(e,t);return r}encode(e,t,r=0){const i=this.getSourceVariant(e);if(i===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],t,r),a+o.encode(e[o.property],t,r+a)}return i.encode(e,t,r)}addVariant(e,t,r){const i=new Vz(this,e,t,r);return this.registry[e]=i,i}getVariant(e,t=0){let r;return e instanceof Uint8Array?r=this.discriminator.decode(e,t):r=e,this.registry[r]}}pe.Union=bP;class Vz extends Ln{constructor(e,t,r,i){if(!(e instanceof bP))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&i===void 0&&(i=r,r=null),r){if(!(r instanceof Ln))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=r.span&&r.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=r?r.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,i),this.union=e,this.variant=t,this.layout=r||null}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+r)),r+i}decode(e,t=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(e,t+i):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(e,t,r=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,r);let s=i;if(this.layout&&(this.layout.encode(e[this.property],t,r+i),s+=this.layout.getSpan(t,r+i),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}pe.VariantLayout=Vz;function np(n){return 0>n&&(n+=4294967296),n}class SP extends Ln{constructor(e,t,r){if(!(e instanceof ga||e instanceof Ja))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&r===void 0&&(r=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,r),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(s){return i=np(s),this},this._packedGetValue=function(){return i}}decode(e,t=0){const r=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(const s of this.fields)s.property!==void 0&&(r[s.property]=s.decode(e));return r}encode(e,t,r=0){const i=this.word.decode(t,r);this._packedSetValue(i);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),t,r)}addField(e,t){const r=new EP(this,e,t);return this.fields.push(r),r}addBoolean(e){const t=new qz(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}pe.BitStructure=SP;class EP{constructor(e,t,r){if(!(e instanceof SP))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const i=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(t+s>i)throw new Error("bits too long for span remainder ("+(i-s)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=i-s-t),this.wordMask=np(this.valueMask<<this.start),this.property=r}decode(e,t){const r=this.container._packedGetValue();return np(r&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==np(e&this.valueMask))throw new TypeError(wP("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),r=np(e<<this.start);this.container._packedSetValue(np(t&~this.wordMask)|r)}}pe.BitField=EP;let qz=class extends EP{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};pe.Boolean=qz;let Xz=class extends Ln{constructor(e,t){if(!(e instanceof Js&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof Js||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),xn(e).slice(t,t+r)}encode(e,t,r){let i=this.length;if(this.length instanceof Js&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(wP("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(r+i>t.length)throw new RangeError("encoding overruns Uint8Array");const s=xn(e);return xn(t).write(s.toString("hex"),r,i,"hex"),this.length instanceof Js&&this.length.encode(i,t,r),i}};pe.Blob=Xz;class Kz extends Ln{constructor(e){super(-1,e)}getSpan(e,t=0){Km(e);let r=t;for(;r<e.length&&e[r]!==0;)r+=1;return 1+r-t}decode(e,t=0){const r=this.getSpan(e,t);return xn(e).slice(t,t+r-1).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=vP.Buffer.from(e,"utf8"),s=i.length;if(r+s>t.length)throw new RangeError("encoding overruns Buffer");const o=xn(t);return i.copy(o,r),o[r+s]=0,s+1}}pe.CString=Kz;class Qz extends Ln{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Km(e),e.length-t}decode(e,t=0){const r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return xn(e).slice(t,t+r).toString("utf-8")}encode(e,t,r=0){typeof e!="string"&&(e=String(e));const i=vP.Buffer.from(e,"utf8"),s=i.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(r+s>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(xn(t),r),s}}pe.UTF8=Qz;class Yz extends Ln{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,r){return 0}}pe.Constant=Yz;pe.greedy=(n,e)=>new Bz(n,e);var $d=pe.offset=(n,e,t)=>new xP(n,e,t),cn=pe.u8=n=>new ga(1,n),ia=pe.u16=n=>new ga(2,n);pe.u24=n=>new ga(3,n);var pt=pe.u32=n=>new ga(4,n);pe.u40=n=>new ga(5,n);pe.u48=n=>new ga(6,n);var zi=pe.nu64=n=>new Lz(n);pe.u16be=n=>new Ja(2,n);pe.u24be=n=>new Ja(3,n);pe.u32be=n=>new Ja(4,n);pe.u40be=n=>new Ja(5,n);pe.u48be=n=>new Ja(6,n);pe.nu64be=n=>new Dz(n);pe.s8=n=>new cf(1,n);pe.s16=n=>new cf(2,n);pe.s24=n=>new cf(3,n);pe.s32=n=>new cf(4,n);pe.s40=n=>new cf(5,n);pe.s48=n=>new cf(6,n);var So=pe.ns64=n=>new Fz(n);pe.s16be=n=>new Qm(2,n);pe.s24be=n=>new Qm(3,n);pe.s32be=n=>new Qm(4,n);pe.s40be=n=>new Qm(5,n);pe.s48be=n=>new Qm(6,n);pe.ns64be=n=>new Uz(n);pe.f32=n=>new zz(n);pe.f32be=n=>new $z(n);pe.f64=n=>new jz(n);pe.f64be=n=>new Hz(n);var rt=pe.struct=(n,e,t)=>new Gz(n,e,t);pe.bits=(n,e,t)=>new SP(n,e,t);var ys=pe.seq=(n,e,t)=>new Wz(n,e,t);pe.union=(n,e,t)=>new bP(n,e,t);pe.unionLayoutDiscriminator=(n,e)=>new h_(n,e);var Hn=pe.blob=(n,e)=>new Xz(n,e);pe.cstr=n=>new Kz(n);pe.utf8=(n,e)=>new Qz(n,e);pe.constant=(n,e)=>new Yz(n,e);var rv={};Object.defineProperty(rv,"__esModule",{value:!0});function phe(n){{const e=ei.from(n);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var Zz=rv.toBigIntLE=phe;function mhe(n){{const e=n.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}rv.toBigIntBE=mhe;function ghe(n,e){{const t=n.toString(16),r=ei.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return r.reverse(),r}}var Jz=rv.toBufferLE=ghe;function yhe(n,e){{const t=n.toString(16);return ei.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}rv.toBufferBE=yhe;class vhe extends TypeError{constructor(e,t){let r;const{message:i,explanation:s,...o}=e,{path:a}=e,l=a.length===0?i:`At path: ${a.join(".")} -- ${i}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function whe(n){return iv(n)&&typeof n[Symbol.iterator]=="function"}function iv(n){return typeof n=="object"&&n!=null}function d_(n){return iv(n)&&!Array.isArray(n)}function nl(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function xhe(n){const{done:e,value:t}=n.next();return e?void 0:t}function _he(n,e,t,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:i,branch:s}=e,{type:o}=t,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${nl(r)}\``}=n;return{value:r,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...n,message:l}}function*aL(n,e,t,r){whe(n)||(n=[n]);for(const i of n){const s=_he(i,e,t,r);s&&(yield s)}}function*AP(n,e,t={}){const{path:r=[],branch:i=[n],coerce:s=!1,mask:o=!1}=t,a={path:r,branch:i,mask:o};s&&(n=e.coercer(n,a));let l="valid";for(const u of e.validator(n,a))u.explanation=t.message,l="not_valid",yield[u,void 0];for(let[u,h,f]of e.entries(n,a)){const p=AP(h,f,{path:u===void 0?r:[...r,u],branch:u===void 0?i:[...i,h],coerce:s,mask:o,message:t.message});for(const m of p)m[0]?(l=m[0].refinement!=null?"not_refined":"not_valid",yield[m[0],void 0]):s&&(h=m[1],u===void 0?n=h:n instanceof Map?n.set(u,h):n instanceof Set?n.add(h):iv(n)&&(h!==void 0||u in n)&&(n[u]=h))}if(l!=="not_valid")for(const u of e.refiner(n,a))u.explanation=t.message,l="not_refined",yield[u,void 0];l==="valid"&&(yield[void 0,n])}let au=class{constructor(e){const{type:t,schema:r,validator:i,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,i?this.validator=(l,u)=>{const h=i(l,u);return aL(h,u,this,l)}:this.validator=()=>[],s?this.refiner=(l,u)=>{const h=s(l,u);return aL(h,u,this,l)}:this.refiner=()=>[]}assert(e,t){return bhe(e,this,t)}create(e,t){return Be(e,this,t)}is(e){return e$(e,this)}mask(e,t){return She(e,this,t)}validate(e,t={}){return sv(e,this,t)}};function bhe(n,e,t){const r=sv(n,e,{message:t});if(r[0])throw r[0]}function Be(n,e,t){const r=sv(n,e,{coerce:!0,message:t});if(r[0])throw r[0];return r[1]}function She(n,e,t){const r=sv(n,e,{coerce:!0,mask:!0,message:t});if(r[0])throw r[0];return r[1]}function e$(n,e){return!sv(n,e)[0]}function sv(n,e,t={}){const r=AP(n,e,t),i=xhe(r);return i[0]?[new vhe(i[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function hf(n,e){return new au({type:n,schema:null,validator:e})}function Ehe(){return hf("any",()=>!0)}function $e(n){return new au({type:"array",schema:n,*entries(e){if(n&&Array.isArray(e))for(const[t,r]of e.entries())yield[t,r,n]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${nl(e)}`}})}function nu(){return hf("boolean",n=>typeof n=="boolean")}function TP(n){return hf("instance",e=>e instanceof n||`Expected a \`${n.name}\` instance, but received: ${nl(e)}`)}function Pr(n){const e=nl(n),t=typeof n;return new au({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${e}\`, but received: ${nl(r)}`}})}function Ahe(){return hf("never",()=>!1)}function We(n){return new au({...n,validator:(e,t)=>e===null||n.validator(e,t),refiner:(e,t)=>e===null||n.refiner(e,t)})}function he(){return hf("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${nl(n)}`)}function bt(n){return new au({...n,validator:(e,t)=>e===void 0||n.validator(e,t),refiner:(e,t)=>e===void 0||n.refiner(e,t)})}function t$(n,e){return new au({type:"record",schema:null,*entries(t){if(iv(t))for(const r in t){const i=t[r];yield[r,r,n],yield[r,i,e]}},validator(t){return d_(t)||`Expected an object, but received: ${nl(t)}`},coercer(t){return d_(t)?{...t}:t}})}function Oe(){return hf("string",n=>typeof n=="string"||`Expected a string, but received: ${nl(n)}`)}function CP(n){const e=Ahe();return new au({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const r=Math.max(n.length,t.length);for(let i=0;i<r;i++)yield[i,t[i],n[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${nl(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function Ae(n){const e=Object.keys(n);return new au({type:"type",schema:n,*entries(t){if(iv(t))for(const r of e)yield[r,t[r],n[r]]},validator(t){return d_(t)||`Expected an object, but received: ${nl(t)}`},coercer(t){return d_(t)?{...t}:t}})}function Bs(n){const e=n.map(t=>t.type).join(" | ");return new au({type:"union",schema:null,coercer(t,r){for(const i of n){const[s,o]=i.validate(t,{coerce:!0,mask:r.mask});if(!s)return o}return t},validator(t,r){const i=[];for(const s of n){const[...o]=AP(t,s,r),[a]=o;if(a[0])for(const[l]of o)l&&i.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${nl(t)}`,...i]}})}function Ym(){return hf("unknown",()=>!0)}function ov(n,e,t){return new au({...n,coercer:(r,i)=>e$(r,e)?n.coercer(t(r,i),i):n.coercer(r,i)})}var nw,The=new Uint8Array(16);function n$(){if(!nw&&(nw=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nw))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nw(The)}const Che=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ob(n){return typeof n=="string"&&Che.test(n)}var Ui=[];for(var SA=0;SA<256;++SA)Ui.push((SA+256).toString(16).substr(1));function Nb(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Ui[n[e+0]]+Ui[n[e+1]]+Ui[n[e+2]]+Ui[n[e+3]]+"-"+Ui[n[e+4]]+Ui[n[e+5]]+"-"+Ui[n[e+6]]+Ui[n[e+7]]+"-"+Ui[n[e+8]]+Ui[n[e+9]]+"-"+Ui[n[e+10]]+Ui[n[e+11]]+Ui[n[e+12]]+Ui[n[e+13]]+Ui[n[e+14]]+Ui[n[e+15]]).toLowerCase();if(!Ob(t))throw TypeError("Stringified UUID is invalid");return t}var lL,EA,AA=0,TA=0;function Ihe(n,e,t){var r=e&&t||0,i=e||new Array(16);n=n||{};var s=n.node||lL,o=n.clockseq!==void 0?n.clockseq:EA;if(s==null||o==null){var a=n.random||(n.rng||n$)();s==null&&(s=lL=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=EA=(a[6]<<8|a[7])&16383)}var l=n.msecs!==void 0?n.msecs:Date.now(),u=n.nsecs!==void 0?n.nsecs:TA+1,h=l-AA+(u-TA)/1e4;if(h<0&&n.clockseq===void 0&&(o=o+1&16383),(h<0||l>AA)&&n.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");AA=l,TA=u,EA=o,l+=122192928e5;var f=((l&268435455)*1e4+u)%4294967296;i[r++]=f>>>24&255,i[r++]=f>>>16&255,i[r++]=f>>>8&255,i[r++]=f&255;var p=l/4294967296*1e4&268435455;i[r++]=p>>>8&255,i[r++]=p&255,i[r++]=p>>>24&15|16,i[r++]=p>>>16&255,i[r++]=o>>>8|128,i[r++]=o&255;for(var m=0;m<6;++m)i[r+m]=s[m];return e||Nb(i)}function r$(n){if(!Ob(n))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(n.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(n.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(n.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(n.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(n.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Rhe(n){n=unescape(encodeURIComponent(n));for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t));return e}var Phe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",khe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function i$(n,e,t){function r(i,s,o,a){if(typeof i=="string"&&(i=Rhe(i)),typeof s=="string"&&(s=r$(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+i.length);if(l.set(s),l.set(i,s.length),l=t(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var u=0;u<16;++u)o[a+u]=l[u];return o}return Nb(l)}try{r.name=n}catch{}return r.DNS=Phe,r.URL=khe,r}function Mhe(n){if(typeof n=="string"){var e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(var t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return Ohe(Nhe(Bhe(n),n.length*8))}function Ohe(n){for(var e=[],t=n.length*32,r="0123456789abcdef",i=0;i<t;i+=8){var s=n[i>>5]>>>i%32&255,o=parseInt(r.charAt(s>>>4&15)+r.charAt(s&15),16);e.push(o)}return e}function s$(n){return(n+64>>>9<<4)+14+1}function Nhe(n,e){n[e>>5]|=128<<e%32,n[s$(e)-1]=e;for(var t=1732584193,r=-271733879,i=-1732584194,s=271733878,o=0;o<n.length;o+=16){var a=t,l=r,u=i,h=s;t=us(t,r,i,s,n[o],7,-680876936),s=us(s,t,r,i,n[o+1],12,-389564586),i=us(i,s,t,r,n[o+2],17,606105819),r=us(r,i,s,t,n[o+3],22,-1044525330),t=us(t,r,i,s,n[o+4],7,-176418897),s=us(s,t,r,i,n[o+5],12,1200080426),i=us(i,s,t,r,n[o+6],17,-1473231341),r=us(r,i,s,t,n[o+7],22,-45705983),t=us(t,r,i,s,n[o+8],7,1770035416),s=us(s,t,r,i,n[o+9],12,-1958414417),i=us(i,s,t,r,n[o+10],17,-42063),r=us(r,i,s,t,n[o+11],22,-1990404162),t=us(t,r,i,s,n[o+12],7,1804603682),s=us(s,t,r,i,n[o+13],12,-40341101),i=us(i,s,t,r,n[o+14],17,-1502002290),r=us(r,i,s,t,n[o+15],22,1236535329),t=cs(t,r,i,s,n[o+1],5,-165796510),s=cs(s,t,r,i,n[o+6],9,-1069501632),i=cs(i,s,t,r,n[o+11],14,643717713),r=cs(r,i,s,t,n[o],20,-373897302),t=cs(t,r,i,s,n[o+5],5,-701558691),s=cs(s,t,r,i,n[o+10],9,38016083),i=cs(i,s,t,r,n[o+15],14,-660478335),r=cs(r,i,s,t,n[o+4],20,-405537848),t=cs(t,r,i,s,n[o+9],5,568446438),s=cs(s,t,r,i,n[o+14],9,-1019803690),i=cs(i,s,t,r,n[o+3],14,-187363961),r=cs(r,i,s,t,n[o+8],20,1163531501),t=cs(t,r,i,s,n[o+13],5,-1444681467),s=cs(s,t,r,i,n[o+2],9,-51403784),i=cs(i,s,t,r,n[o+7],14,1735328473),r=cs(r,i,s,t,n[o+12],20,-1926607734),t=hs(t,r,i,s,n[o+5],4,-378558),s=hs(s,t,r,i,n[o+8],11,-2022574463),i=hs(i,s,t,r,n[o+11],16,1839030562),r=hs(r,i,s,t,n[o+14],23,-35309556),t=hs(t,r,i,s,n[o+1],4,-1530992060),s=hs(s,t,r,i,n[o+4],11,1272893353),i=hs(i,s,t,r,n[o+7],16,-155497632),r=hs(r,i,s,t,n[o+10],23,-1094730640),t=hs(t,r,i,s,n[o+13],4,681279174),s=hs(s,t,r,i,n[o],11,-358537222),i=hs(i,s,t,r,n[o+3],16,-722521979),r=hs(r,i,s,t,n[o+6],23,76029189),t=hs(t,r,i,s,n[o+9],4,-640364487),s=hs(s,t,r,i,n[o+12],11,-421815835),i=hs(i,s,t,r,n[o+15],16,530742520),r=hs(r,i,s,t,n[o+2],23,-995338651),t=ds(t,r,i,s,n[o],6,-198630844),s=ds(s,t,r,i,n[o+7],10,1126891415),i=ds(i,s,t,r,n[o+14],15,-1416354905),r=ds(r,i,s,t,n[o+5],21,-57434055),t=ds(t,r,i,s,n[o+12],6,1700485571),s=ds(s,t,r,i,n[o+3],10,-1894986606),i=ds(i,s,t,r,n[o+10],15,-1051523),r=ds(r,i,s,t,n[o+1],21,-2054922799),t=ds(t,r,i,s,n[o+8],6,1873313359),s=ds(s,t,r,i,n[o+15],10,-30611744),i=ds(i,s,t,r,n[o+6],15,-1560198380),r=ds(r,i,s,t,n[o+13],21,1309151649),t=ds(t,r,i,s,n[o+4],6,-145523070),s=ds(s,t,r,i,n[o+11],10,-1120210379),i=ds(i,s,t,r,n[o+2],15,718787259),r=ds(r,i,s,t,n[o+9],21,-343485551),t=sh(t,a),r=sh(r,l),i=sh(i,u),s=sh(s,h)}return[t,r,i,s]}function Bhe(n){if(n.length===0)return[];for(var e=n.length*8,t=new Uint32Array(s$(e)),r=0;r<e;r+=8)t[r>>5]|=(n[r/8]&255)<<r%32;return t}function sh(n,e){var t=(n&65535)+(e&65535),r=(n>>16)+(e>>16)+(t>>16);return r<<16|t&65535}function Lhe(n,e){return n<<e|n>>>32-e}function Bb(n,e,t,r,i,s){return sh(Lhe(sh(sh(e,n),sh(r,s)),i),t)}function us(n,e,t,r,i,s,o){return Bb(e&t|~e&r,n,e,i,s,o)}function cs(n,e,t,r,i,s,o){return Bb(e&r|t&~r,n,e,i,s,o)}function hs(n,e,t,r,i,s,o){return Bb(e^t^r,n,e,i,s,o)}function ds(n,e,t,r,i,s,o){return Bb(t^(e|~r),n,e,i,s,o)}var Dhe=i$("v3",48,Mhe);const Fhe=Dhe;function Uhe(n,e,t){n=n||{};var r=n.random||(n.rng||n$)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return Nb(r)}function zhe(n,e,t,r){switch(n){case 0:return e&t^~e&r;case 1:return e^t^r;case 2:return e&t^e&r^t&r;case 3:return e^t^r}}function CA(n,e){return n<<e|n>>>32-e}function $he(n){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var i=0;i<r.length;++i)n.push(r.charCodeAt(i))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var u=new Uint32Array(16),h=0;h<16;++h)u[h]=n[l*64+h*4]<<24|n[l*64+h*4+1]<<16|n[l*64+h*4+2]<<8|n[l*64+h*4+3];a[l]=u}a[o-1][14]=(n.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(n.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var p=new Uint32Array(80),m=0;m<16;++m)p[m]=a[f][m];for(var g=16;g<80;++g)p[g]=CA(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var v=t[0],x=t[1],b=t[2],S=t[3],_=t[4],R=0;R<80;++R){var D=Math.floor(R/20),j=CA(v,5)+zhe(D,x,b,S)+_+e[D]+p[R]>>>0;_=S,S=b,b=CA(x,30)>>>0,x=v,v=j}t[0]=t[0]+v>>>0,t[1]=t[1]+x>>>0,t[2]=t[2]+b>>>0,t[3]=t[3]+S>>>0,t[4]=t[4]+_>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var jhe=i$("v5",80,$he);const Hhe=jhe,Whe="00000000-0000-0000-0000-000000000000";function Ghe(n){if(!Ob(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Vhe=Object.freeze(Object.defineProperty({__proto__:null,NIL:Whe,parse:r$,stringify:Nb,v1:Ihe,v3:Fhe,v4:Uhe,v5:Hhe,validate:Ob,version:Ghe},Symbol.toStringTag,{value:"Module"})),o$=Lm(Vhe),qhe=o$.v4,Xhe=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const i=typeof r.version=="number"?r.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");const s={method:n};if(i===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof t>"u"){const o=typeof r.generator=="function"?r.generator:function(){return qhe()};s.id=o(s,r)}else i===2&&t===null?r.notificationIdNull&&(s.id=null):s.id=t;return s};var Khe=Xhe;const Qhe=o$.v4,Yhe=Khe,by=function(n,e){if(!(this instanceof by))return new by(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Qhe()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var Zhe=by;by.prototype.request=function(n,e,t,r){const i=this;let s=null;const o=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof e=="function")r=e,s=n;else{typeof t=="function"&&(r=t,t=void 0);const u=typeof r=="function";try{s=Yhe(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(u)return r(h);throw h}if(!u)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(u){return r(u)}return this.callServer(l,function(u,h){i._parseResponse(u,h,r)}),s};by.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(r)){const i=function(o){return typeof o.error<"u"},s=function(o){return!i(o)};return t(null,r.filter(i),r.filter(s))}else return t(null,r.error,r.result);t(null,r)};const Jhe=rl(Zhe);var a$={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,f,p){if(typeof h!="function")throw new TypeError("The listener must be a function");var m=new i(h,f||l,p),g=t?t+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],m]:l._events[g].push(m):(l._events[g]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,f;if(this._eventsCount===0)return u;for(f in h=this._events)e.call(h,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,f=this._events[h];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,g=new Array(m);p<m;p++)g[p]=f[p].fn;return g},a.prototype.listenerCount=function(u){var h=t?t+u:u,f=this._events[h];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,h,f,p,m,g){var v=t?t+u:u;if(!this._events[v])return!1;var x=this._events[v],b=arguments.length,S,_;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),b){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,f),!0;case 4:return x.fn.call(x.context,h,f,p),!0;case 5:return x.fn.call(x.context,h,f,p,m),!0;case 6:return x.fn.call(x.context,h,f,p,m,g),!0}for(_=1,S=new Array(b-1);_<b;_++)S[_-1]=arguments[_];x.fn.apply(x.context,S)}else{var R=x.length,D;for(_=0;_<R;_++)switch(x[_].once&&this.removeListener(u,x[_].fn,void 0,!0),b){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,h);break;case 3:x[_].fn.call(x[_].context,h,f);break;case 4:x[_].fn.call(x[_].context,h,f,p);break;default:if(!S)for(D=1,S=new Array(b-1);D<b;D++)S[D-1]=arguments[D];x[_].fn.apply(x[_].context,S)}}return!0},a.prototype.on=function(u,h,f){return s(this,u,h,f,!1)},a.prototype.once=function(u,h,f){return s(this,u,h,f,!0)},a.prototype.removeListener=function(u,h,f,p){var m=t?t+u:u;if(!this._events[m])return this;if(!h)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===h&&(!p||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var v=0,x=[],b=g.length;v<b;v++)(g[v].fn!==h||p&&!g[v].once||f&&g[v].context!==f)&&x.push(g[v]);x.length?this._events[m]=x.length===1?x[0]:x:o(this,m)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a})(a$);var ede=a$.exports;const l$=rl(ede);var tde=class extends l${constructor(e,t,r){super();tt(this,"socket");this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,t,r){const i=r||t;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};function nde(n,e){return new tde(n,e)}var rde=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},ide=class extends l${constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,u){super();tt(this,"address");tt(this,"rpc_id");tt(this,"queue");tt(this,"options");tt(this,"autoconnect");tt(this,"ready");tt(this,"reconnect");tt(this,"reconnect_timer_id");tt(this,"reconnect_interval");tt(this,"max_reconnects");tt(this,"rest_options");tt(this,"current_reconnects");tt(this,"generate_request_id");tt(this,"socket");tt(this,"webSocketFactory");tt(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>++this.rpc_id),u?this.dataPack=u:this.dataPack=new rde,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,i){return!i&&typeof r=="object"&&(i=r,r=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,t),l={jsonrpc:"2.0",method:e,params:t||void 0,id:a};this.socket.send(this.dataPack.encode(l),i,u=>{if(u)return o(u);this.queue[a]={promise:[s,o]},r&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},r))})})}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise((r,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);r()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.on",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){typeof e=="string"&&(e=[e]);const t=await this.call("rpc.off",e);if(typeof e=="string"&&t[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=zt.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const i=[r.notification];if(r.params.constructor===Object)i.push(r.params);else for(let s=0;s<r.params.length;s++)i.push(r.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",r,i),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,t),this.reconnect_interval)))})}};const sde=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cc=new Uint32Array(64);class ode extends dz{constructor(){super(64,32,8,!1),this.A=Tc[0]|0,this.B=Tc[1]|0,this.C=Tc[2]|0,this.D=Tc[3]|0,this.E=Tc[4]|0,this.F=Tc[5]|0,this.G=Tc[6]|0,this.H=Tc[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:a,H:l}=this;return[e,t,r,i,s,o,a,l]}set(e,t,r,i,s,o,a,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let f=0;f<16;f++,t+=4)Cc[f]=e.getUint32(t,!1);for(let f=16;f<64;f++){const p=Cc[f-15],m=Cc[f-2],g=Cl(p,7)^Cl(p,18)^p>>>3,v=Cl(m,17)^Cl(m,19)^m>>>10;Cc[f]=v+Cc[f-7]+g+Cc[f-16]|0}let{A:r,B:i,C:s,D:o,E:a,F:l,G:u,H:h}=this;for(let f=0;f<64;f++){const p=Cl(a,6)^Cl(a,11)^Cl(a,25),m=h+p+Tue(a,l,u)+sde[f]+Cc[f]|0,v=(Cl(r,2)^Cl(r,13)^Cl(r,22))+Cue(r,i,s)|0;h=u,u=l,l=a,a=o+m|0,o=s,s=i,i=r,r=m+v|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,u=u+this.G|0,h=h+this.H|0,this.set(r,i,s,o,a,l,u,h)}roundClean(){Cc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ade=cz(()=>new ode);class u$ extends uz{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,_ue(e);const r=uP(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return o_(this),this.iHash.update(e),this}digestInto(e){o_(this),Eb(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const c$=(n,e,t)=>new u$(n,e).update(t).digest();c$.create=(n,e)=>new u$(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uL(n){n.lowS!==void 0&&ju("lowS",n.lowS),n.prehash!==void 0&&ju("prehash",n.prehash)}function lde(n){const e=dP(n);Xm(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:ude,hexToBytes:cde}=uce,Tu={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(n,e)=>{const{Err:t}=Tu;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const r=e.length/2,i=bp(r);if(i.length/2&128)throw new t("tlv.encode: long form length too big");const s=r>127?bp(i.length/2|128):"";return bp(n)+s+i+e},decode(n,e){const{Err:t}=Tu;let r=0;if(n<0||n>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[r++]!==n)throw new t("tlv.decode: wrong tlv");const i=e[r++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new t("tlv.decode(long): indefinite length not supported");if(l>4)throw new t("tlv.decode(long): byte length is too big");const u=e.subarray(r,r+l);if(u.length!==l)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of u)o=o<<8|h;if(r+=l,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(n){const{Err:e}=Tu;if(n<Iu)throw new e("integer: negative integers are not allowed");let t=bp(n);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(n){const{Err:e}=Tu;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return ude(n)}},toSig(n){const{Err:e,_int:t,_tlv:r}=Tu,i=typeof n=="string"?cde(n):n;nv(i);const{v:s,l:o}=r.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=r.decode(2,s),{v:u,l:h}=r.decode(2,l);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(u)}},hexFromSig(n){const{_tlv:e,_int:t}=Tu,r=e.encode(2,t.encode(n.r)),i=e.encode(2,t.encode(n.s)),s=r+i;return e.encode(48,s)}},Iu=BigInt(0),Ti=BigInt(1);BigInt(2);const cL=BigInt(3);BigInt(4);function hde(n){const e=lde(n),{Fp:t}=e,r=Ib(e.n,e.nBitLength),i=e.toBytes||((v,x,b)=>{const S=x.toAffine();return nf(Uint8Array.from([4]),t.toBytes(S.x),t.toBytes(S.y))}),s=e.fromBytes||(v=>{const x=v.subarray(1),b=t.fromBytes(x.subarray(0,t.BYTES)),S=t.fromBytes(x.subarray(t.BYTES,2*t.BYTES));return{x:b,y:S}});function o(v){const{a:x,b}=e,S=t.sqr(v),_=t.mul(S,v);return t.add(t.add(_,t.mul(v,x)),b)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(v){return Cb(v,Ti,e.n)}function l(v){const{allowedPrivateKeyLengths:x,nByteLength:b,wrapPrivateKey:S,n:_}=e;if(x&&typeof v!="bigint"){if(ef(v)&&(v=tf(v)),typeof v!="string"||!x.includes(v.length))throw new Error("invalid private key");v=v.padStart(b*2,"0")}let R;try{R=typeof v=="bigint"?v:zd(ni("private key",v,b))}catch{throw new Error("invalid private key, expected hex or "+b+" bytes, got "+typeof v)}return S&&(R=gr(R,_)),ca("private key",R,Ti,_),R}function u(v){if(!(v instanceof p))throw new Error("ProjectivePoint expected")}const h=_y((v,x)=>{const{px:b,py:S,pz:_}=v;if(t.eql(_,t.ONE))return{x:b,y:S};const R=v.is0();x==null&&(x=R?t.ONE:t.inv(_));const D=t.mul(b,x),j=t.mul(S,x),H=t.mul(_,x);if(R)return{x:t.ZERO,y:t.ZERO};if(!t.eql(H,t.ONE))throw new Error("invZ was invalid");return{x:D,y:j}}),f=_y(v=>{if(v.is0()){if(e.allowInfinityPoint&&!t.is0(v.py))return;throw new Error("bad point: ZERO")}const{x,y:b}=v.toAffine();if(!t.isValid(x)||!t.isValid(b))throw new Error("bad point: x or y not FE");const S=t.sqr(b),_=o(x);if(!t.eql(S,_))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class p{constructor(x,b,S){if(this.px=x,this.py=b,this.pz=S,x==null||!t.isValid(x))throw new Error("x required");if(b==null||!t.isValid(b))throw new Error("y required");if(S==null||!t.isValid(S))throw new Error("z required");Object.freeze(this)}static fromAffine(x){const{x:b,y:S}=x||{};if(!x||!t.isValid(b)||!t.isValid(S))throw new Error("invalid affine point");if(x instanceof p)throw new Error("projective point not allowed");const _=R=>t.eql(R,t.ZERO);return _(b)&&_(S)?p.ZERO:new p(b,S,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const b=t.invertBatch(x.map(S=>S.pz));return x.map((S,_)=>S.toAffine(b[_])).map(p.fromAffine)}static fromHex(x){const b=p.fromAffine(s(ni("pointHex",x)));return b.assertValidity(),b}static fromPrivateKey(x){return p.BASE.multiply(l(x))}static msm(x,b){return bz(p,r,x,b)}_setWindowSize(x){g.setWindowSize(this,x)}assertValidity(){f(this)}hasEvenY(){const{y:x}=this.toAffine();if(t.isOdd)return!t.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){u(x);const{px:b,py:S,pz:_}=this,{px:R,py:D,pz:j}=x,H=t.eql(t.mul(b,j),t.mul(R,_)),G=t.eql(t.mul(S,j),t.mul(D,_));return H&&G}negate(){return new p(this.px,t.neg(this.py),this.pz)}double(){const{a:x,b}=e,S=t.mul(b,cL),{px:_,py:R,pz:D}=this;let j=t.ZERO,H=t.ZERO,G=t.ZERO,K=t.mul(_,_),te=t.mul(R,R),ne=t.mul(D,D),ee=t.mul(_,R);return ee=t.add(ee,ee),G=t.mul(_,D),G=t.add(G,G),j=t.mul(x,G),H=t.mul(S,ne),H=t.add(j,H),j=t.sub(te,H),H=t.add(te,H),H=t.mul(j,H),j=t.mul(ee,j),G=t.mul(S,G),ne=t.mul(x,ne),ee=t.sub(K,ne),ee=t.mul(x,ee),ee=t.add(ee,G),G=t.add(K,K),K=t.add(G,K),K=t.add(K,ne),K=t.mul(K,ee),H=t.add(H,K),ne=t.mul(R,D),ne=t.add(ne,ne),K=t.mul(ne,ee),j=t.sub(j,K),G=t.mul(ne,te),G=t.add(G,G),G=t.add(G,G),new p(j,H,G)}add(x){u(x);const{px:b,py:S,pz:_}=this,{px:R,py:D,pz:j}=x;let H=t.ZERO,G=t.ZERO,K=t.ZERO;const te=e.a,ne=t.mul(e.b,cL);let ee=t.mul(b,R),L=t.mul(S,D),w=t.mul(_,j),A=t.add(b,S),O=t.add(R,D);A=t.mul(A,O),O=t.add(ee,L),A=t.sub(A,O),O=t.add(b,_);let C=t.add(R,j);return O=t.mul(O,C),C=t.add(ee,w),O=t.sub(O,C),C=t.add(S,_),H=t.add(D,j),C=t.mul(C,H),H=t.add(L,w),C=t.sub(C,H),K=t.mul(te,O),H=t.mul(ne,w),K=t.add(H,K),H=t.sub(L,K),K=t.add(L,K),G=t.mul(H,K),L=t.add(ee,ee),L=t.add(L,ee),w=t.mul(te,w),O=t.mul(ne,O),L=t.add(L,w),w=t.sub(ee,w),w=t.mul(te,w),O=t.add(O,w),ee=t.mul(L,O),G=t.add(G,ee),ee=t.mul(C,O),H=t.mul(A,H),H=t.sub(H,ee),ee=t.mul(A,L),K=t.mul(C,K),K=t.add(K,ee),new p(H,G,K)}subtract(x){return this.add(x.negate())}is0(){return this.equals(p.ZERO)}wNAF(x){return g.wNAFCached(this,x,p.normalizeZ)}multiplyUnsafe(x){const{endo:b,n:S}=e;ca("scalar",x,Iu,S);const _=p.ZERO;if(x===Iu)return _;if(this.is0()||x===Ti)return this;if(!b||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,x,p.normalizeZ);let{k1neg:R,k1:D,k2neg:j,k2:H}=b.splitScalar(x),G=_,K=_,te=this;for(;D>Iu||H>Iu;)D&Ti&&(G=G.add(te)),H&Ti&&(K=K.add(te)),te=te.double(),D>>=Ti,H>>=Ti;return R&&(G=G.negate()),j&&(K=K.negate()),K=new p(t.mul(K.px,b.beta),K.py,K.pz),G.add(K)}multiply(x){const{endo:b,n:S}=e;ca("scalar",x,Ti,S);let _,R;if(b){const{k1neg:D,k1:j,k2neg:H,k2:G}=b.splitScalar(x);let{p:K,f:te}=this.wNAF(j),{p:ne,f:ee}=this.wNAF(G);K=g.constTimeNegate(D,K),ne=g.constTimeNegate(H,ne),ne=new p(t.mul(ne.px,b.beta),ne.py,ne.pz),_=K.add(ne),R=te.add(ee)}else{const{p:D,f:j}=this.wNAF(x);_=D,R=j}return p.normalizeZ([_,R])[0]}multiplyAndAddUnsafe(x,b,S){const _=p.BASE,R=(j,H)=>H===Iu||H===Ti||!j.equals(_)?j.multiplyUnsafe(H):j.multiply(H),D=R(this,b).add(R(x,S));return D.is0()?void 0:D}toAffine(x){return h(this,x)}isTorsionFree(){const{h:x,isTorsionFree:b}=e;if(x===Ti)return!0;if(b)return b(p,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:b}=e;return x===Ti?this:b?b(p,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return ju("isCompressed",x),this.assertValidity(),i(p,this,x)}toHex(x=!0){return ju("isCompressed",x),tf(this.toRawBytes(x))}}p.BASE=new p(e.Gx,e.Gy,t.ONE),p.ZERO=new p(t.ZERO,t.ONE,t.ZERO);const m=e.nBitLength,g=_z(p,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:p,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function dde(n){const e=dP(n);return Xm(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function fde(n){const e=dde(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(w){return gr(w,r)}function a(w){return BC(w,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:h,isWithinCurveOrder:f}=hde({...e,toBytes(w,A,O){const C=A.toAffine(),k=t.toBytes(C.x),U=nf;return ju("isCompressed",O),O?U(Uint8Array.from([A.hasEvenY()?2:3]),k):U(Uint8Array.from([4]),k,t.toBytes(C.y))},fromBytes(w){const A=w.length,O=w[0],C=w.subarray(1);if(A===i&&(O===2||O===3)){const k=zd(C);if(!Cb(k,Ti,t.ORDER))throw new Error("Point is not on curve");const U=h(k);let z;try{z=t.sqrt(U)}catch(V){const oe=V instanceof Error?": "+V.message:"";throw new Error("Point is not on curve"+oe)}const N=(z&Ti)===Ti;return(O&1)===1!==N&&(z=t.neg(z)),{x:k,y:z}}else if(A===s&&O===4){const k=t.fromBytes(C.subarray(0,t.BYTES)),U=t.fromBytes(C.subarray(t.BYTES,2*t.BYTES));return{x:k,y:U}}else{const k=i,U=s;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+U+", got "+A)}}}),p=w=>tf(Im(w,e.nByteLength));function m(w){const A=r>>Ti;return w>A}function g(w){return m(w)?o(-w):w}const v=(w,A,O)=>zd(w.slice(A,O));class x{constructor(A,O,C){this.r=A,this.s=O,this.recovery=C,this.assertValidity()}static fromCompact(A){const O=e.nByteLength;return A=ni("compactSignature",A,O*2),new x(v(A,0,O),v(A,O,2*O))}static fromDER(A){const{r:O,s:C}=Tu.toSig(ni("DER",A));return new x(O,C)}assertValidity(){ca("r",this.r,Ti,r),ca("s",this.s,Ti,r)}addRecoveryBit(A){return new x(this.r,this.s,A)}recoverPublicKey(A){const{r:O,s:C,recovery:k}=this,U=j(ni("msgHash",A));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const z=k===2||k===3?O+e.n:O;if(z>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const N=k&1?"03":"02",T=l.fromHex(N+p(z)),V=a(z),oe=o(-U*V),ge=o(C*V),we=l.BASE.multiplyAndAddUnsafe(T,oe,ge);if(!we)throw new Error("point at infinify");return we.assertValidity(),we}hasHighS(){return m(this.s)}normalizeS(){return this.hasHighS()?new x(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Cm(this.toDERHex())}toDERHex(){return Tu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Cm(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const b={isValidPrivateKey(w){try{return u(w),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const w=vz(e.n);return wce(e.randomBytes(w),e.n)},precompute(w=8,A=l.BASE){return A._setWindowSize(w),A.multiply(BigInt(3)),A}};function S(w,A=!0){return l.fromPrivateKey(w).toRawBytes(A)}function _(w){const A=ef(w),O=typeof w=="string",C=(A||O)&&w.length;return A?C===i||C===s:O?C===2*i||C===2*s:w instanceof l}function R(w,A,O=!0){if(_(w))throw new Error("first arg must be private key");if(!_(A))throw new Error("second arg must be public key");return l.fromHex(A).multiply(u(w)).toRawBytes(O)}const D=e.bits2int||function(w){if(w.length>8192)throw new Error("input is too large");const A=zd(w),O=w.length*8-e.nBitLength;return O>0?A>>BigInt(O):A},j=e.bits2int_modN||function(w){return o(D(w))},H=hP(e.nBitLength);function G(w){return ca("num < 2^"+e.nBitLength,w,Iu,H),Im(w,e.nByteLength)}function K(w,A,O=te){if(["recovered","canonical"].some(Ne=>Ne in O))throw new Error("sign() legacy options not supported");const{hash:C,randomBytes:k}=e;let{lowS:U,prehash:z,extraEntropy:N}=O;U==null&&(U=!0),w=ni("msgHash",w),uL(O),z&&(w=ni("prehashed msgHash",C(w)));const T=j(w),V=u(A),oe=[G(V),G(T)];if(N!=null&&N!==!1){const Ne=N===!0?k(t.BYTES):N;oe.push(ni("extraEntropy",Ne))}const ge=nf(...oe),we=T;function Re(Ne){const Ue=D(Ne);if(!f(Ue))return;const Ye=a(Ue),Ce=l.BASE.multiply(Ue).toAffine(),ze=o(Ce.x);if(ze===Iu)return;const ft=o(Ye*o(we+ze*V));if(ft===Iu)return;let xt=(Ce.x===ze?0:2)|Number(Ce.y&Ti),vt=ft;return U&&m(ft)&&(vt=g(ft),xt^=1),new x(ze,vt,xt)}return{seed:ge,k2sig:Re}}const te={lowS:e.lowS,prehash:!1},ne={lowS:e.lowS,prehash:!1};function ee(w,A,O=te){const{seed:C,k2sig:k}=K(w,A,O),U=e;return mz(U.hash.outputLen,U.nByteLength,U.hmac)(C,k)}l.BASE._setWindowSize(8);function L(w,A,O,C=ne){var xt;const k=w;A=ni("msgHash",A),O=ni("publicKey",O);const{lowS:U,prehash:z,format:N}=C;if(uL(C),"strict"in C)throw new Error("options.strict was renamed to lowS");if(N!==void 0&&N!=="compact"&&N!=="der")throw new Error("format must be compact or der");const T=typeof k=="string"||ef(k),V=!T&&!N&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!T&&!V)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,ge;try{if(V&&(oe=new x(k.r,k.s)),T){try{N!=="compact"&&(oe=x.fromDER(k))}catch(vt){if(!(vt instanceof Tu.Err))throw vt}!oe&&N!=="der"&&(oe=x.fromCompact(k))}ge=l.fromHex(O)}catch{return!1}if(!oe||U&&oe.hasHighS())return!1;z&&(A=e.hash(A));const{r:we,s:Re}=oe,Ne=j(A),Ue=a(Re),Ye=o(Ne*Ue),Ce=o(we*Ue),ze=(xt=l.BASE.multiplyAndAddUnsafe(ge,Ye,Ce))==null?void 0:xt.toAffine();return ze?o(ze.x)===we:!1}return{CURVE:e,getPublicKey:S,getSharedSecret:R,sign:ee,verify:L,ProjectivePoint:l,Signature:x,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function pde(n){return{hash:n,hmac:(e,...t)=>c$(n,e,Eue(...t)),randomBytes:hz}}function mde(n,e){const t=r=>fde({...n,...pde(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const h$=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),hL=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gde=BigInt(1),FC=BigInt(2),dL=(n,e)=>(n+e/FC)/e;function yde(n){const e=h$,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),u=n*n*n%e,h=u*u*n%e,f=$r(h,t,e)*h%e,p=$r(f,t,e)*h%e,m=$r(p,FC,e)*u%e,g=$r(m,i,e)*m%e,v=$r(g,s,e)*g%e,x=$r(v,a,e)*v%e,b=$r(x,l,e)*x%e,S=$r(b,a,e)*v%e,_=$r(S,t,e)*h%e,R=$r(_,o,e)*g%e,D=$r(R,r,e)*u%e,j=$r(D,FC,e);if(!UC.eql(UC.sqr(j),n))throw new Error("Cannot find square root");return j}const UC=Ib(h$,void 0,void 0,{sqrt:yde}),IP=mde({a:BigInt(0),b:BigInt(7),Fp:UC,n:hL,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=hL,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-gde*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),a=dL(s*n,e),l=dL(-r*n,e);let u=gr(n-a*t-l*i,e),h=gr(-a*r-l*s,e);const f=u>o,p=h>o;if(f&&(u=e-u),p&&(h=e-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:f,k1:u,k2neg:p,k2:h}}}},ade);BigInt(0);IP.ProjectivePoint;Rb.utils.randomPrivateKey;function fL(n){try{return Rb.ExtendedPoint.fromHex(n),!0}catch{return!1}}const d$=(n,e)=>Rb.sign(n,e.slice(0,32)),vde=Rb.verify,Pm=n=>zt.isBuffer(n)?n:n instanceof Uint8Array?zt.from(n.buffer,n.byteOffset,n.byteLength):zt.from(n);class wde{constructor(e){Object.assign(this,e)}encode(){return zt.from(Oz(Dw,this))}static decode(e){return Nz(Dw,this,e)}static decodeUnchecked(e){return Iz(Dw,this,e)}}const Dw=new Map;var f$;const xde=32,wh=32;function _de(n){return n._bn!==void 0}let pL=1;class ot extends wde{constructor(e){if(super({}),this._bn=void 0,_de(e))this._bn=e._bn;else{if(typeof e=="string"){const t=qi.decode(e);if(t.length!=wh)throw new Error("Invalid public key input");this._bn=new iL(t)}else this._bn=new iL(e);if(this._bn.byteLength()>wh)throw new Error("Invalid public key input")}}static unique(){const e=new ot(pL);return pL+=1,new ot(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return qi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(zt);if(e.length===wh)return e;const t=zt.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const i=zt.concat([e.toBuffer(),zt.from(t),r.toBuffer()]),s=oL(i);return new ot(s)}static createProgramAddressSync(e,t){let r=zt.alloc(0);e.forEach(function(s){if(s.length>xde)throw new TypeError("Max seed length exceeded");r=zt.concat([r,Pm(s)])}),r=zt.concat([r,t.toBuffer(),zt.from("ProgramDerivedAddress")]);const i=oL(r);if(fL(i))throw new Error("Invalid seeds, address must fall off the curve");return new ot(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r=255,i;for(;r!=0;){try{const s=e.concat(zt.from([r]));i=this.createProgramAddressSync(s,t)}catch(s){if(s instanceof TypeError)throw s;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new ot(e);return fL(t.toBytes())}}f$=ot;ot.default=new f$("11111111111111111111111111111111");Dw.set(ot,{kind:"struct",fields:[["_bn","u256"]]});new ot("BPFLoader1111111111111111111111111111111111");const qp=1280-40-8,RP=127,Sy=64;class p$ extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(p$.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class m$ extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(m$.prototype,"name",{value:"TransactionExpiredTimeoutError"});class o0 extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(o0.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class f_{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>255+1)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((s,o)=>{r.set(s.toBase58(),o)});const i=s=>{const o=r.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const Vt=(n="publicKey")=>Hn(32,n),bde=(n="signature")=>Hn(64,n),Sp=(n="string")=>{const e=rt([pt("length"),pt("lengthPadding"),Hn($d(pt(),-8),"chars")],n),t=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(s,o)=>t(s,o).chars.toString(),i.encode=(s,o,a)=>{const l={chars:zt.from(s,"utf8")};return r(l,o,a)},i.alloc=s=>pt().span+pt().span+zt.from(s,"utf8").length,i},Sde=(n="authorized")=>rt([Vt("staker"),Vt("withdrawer")],n),Ede=(n="lockup")=>rt([So("unixTimestamp"),So("epoch"),Vt("custodian")],n),Ade=(n="voteInit")=>rt([Vt("nodePubkey"),Vt("authorizedVoter"),Vt("authorizedWithdrawer"),cn("commission")],n),Tde=(n="voteAuthorizeWithSeedArgs")=>rt([pt("voteAuthorizationType"),Vt("currentAuthorityDerivedKeyOwnerPubkey"),Sp("currentAuthorityDerivedKeySeed"),Vt("newAuthorized")],n);function Eo(n){let e=0,t=0;for(;;){let r=n.shift();if(e|=(r&127)<<t*7,t+=1,!(r&128))break}return e}function Ao(n,e){let t=e;for(;;){let r=t&127;if(t>>=7,t==0){n.push(r);break}else r|=128,n.push(r)}}function mr(n,e){if(!n)throw new Error(e||"Assertion failed")}class Lb{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,i=o=>{const a=o.toBase58();let l=r.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(a,l)),l},s=i(t);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const a of o.keys){const l=i(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new Lb(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];mr(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,l])=>l.isSigner&&l.isWritable),r=e.filter(([,l])=>l.isSigner&&!l.isWritable),i=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:s.length};{mr(t.length>0,"Expected at least one writable signer key");const[l]=t[0];mr(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([l])=>new ot(l)),...r.map(([l])=>new ot(l)),...i.map(([l])=>new ot(l)),...s.map(([l])=>new ot(l))];return[o,a]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:r,readonly:s}]}drainKeysFoundInLookupTable(e,t){const r=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(t(o)){const a=new ot(s),l=e.findIndex(u=>u.equals(a));l>=0&&(mr(l<256,"Max lookup table index exceeded"),r.push(l),i.push(a),this.keyMetaMap.delete(s))}return[r,i]}}const g$="Reached end of buffer unexpectedly";function Ru(n){if(n.length===0)throw new Error(g$);return n.shift()}function To(n,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>n.length:t>=n.length)throw new Error(g$);return n.splice(...e)}class Qu{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new ot(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:qi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new f_(this.staticAccountKeys)}static compile(e){const t=Lb.compile(e.instructions,e.payerKey),[r,i]=t.getMessageComponents(),o=new f_(i).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:qi.encode(a.data)}));return new Qu({header:r,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const r=e-t,s=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return r<s}else{const r=t-this.header.numReadonlySignedAccounts;return e<r}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];Ao(t,e);const r=this.instructions.map(f=>{const{accounts:p,programIdIndex:m}=f,g=Array.from(qi.decode(f.data));let v=[];Ao(v,p.length);let x=[];return Ao(x,g.length),{programIdIndex:m,keyIndicesCount:zt.from(v),keyIndices:p,dataLength:zt.from(x),data:g}});let i=[];Ao(i,r.length);let s=zt.alloc(qp);zt.from(i).copy(s);let o=i.length;r.forEach(f=>{const m=rt([cn("programIdIndex"),Hn(f.keyIndicesCount.length,"keyIndicesCount"),ys(cn("keyIndex"),f.keyIndices.length,"keyIndices"),Hn(f.dataLength.length,"dataLength"),ys(cn("userdatum"),f.data.length,"data")]).encode(f,s,o);o+=m}),s=s.slice(0,o);const a=rt([Hn(1,"numRequiredSignatures"),Hn(1,"numReadonlySignedAccounts"),Hn(1,"numReadonlyUnsignedAccounts"),Hn(t.length,"keyCount"),ys(Vt("key"),e,"keys"),Vt("recentBlockhash")]),l={numRequiredSignatures:zt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:zt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:zt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:zt.from(t),keys:this.accountKeys.map(f=>Pm(f.toBytes())),recentBlockhash:qi.decode(this.recentBlockhash)};let u=zt.alloc(2048);const h=a.encode(l,u);return s.copy(u,h),u.slice(0,h+s.length)}static from(e){let t=[...e];const r=Ru(t);if(r!==(r&RP))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=Ru(t),s=Ru(t),o=Eo(t);let a=[];for(let p=0;p<o;p++){const m=To(t,0,wh);a.push(new ot(zt.from(m)))}const l=To(t,0,wh),u=Eo(t);let h=[];for(let p=0;p<u;p++){const m=Ru(t),g=Eo(t),v=To(t,0,g),x=Eo(t),b=To(t,0,x),S=qi.encode(zt.from(b));h.push({programIdIndex:m,accounts:v,data:S})}const f={header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:qi.encode(zt.from(l)),accountKeys:a,instructions:h};return new Qu(f)}}class Ey{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new f_(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(e>=r){const i=e-r,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-t,o=r-t-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const i=e.find(s=>s.key.equals(r.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const s of r.writableIndexes)if(s<i.state.addresses.length)t.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`);for(const s of r.readonlyIndexes)if(s<i.state.addresses.length)t.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${r.accountKey.toBase58()}`)}return t}static compile(e){const t=Lb.compile(e.instructions,e.payerKey),r=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const h of s){const f=t.extractTableLookup(h);if(f!==void 0){const[p,{writable:m,readonly:g}]=f;r.push(p),i.writable.push(...m),i.readonly.push(...g)}}const[o,a]=t.getMessageComponents(),u=new f_(a,i).compileInstructions(e.instructions);return new Ey({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:u,addressTableLookups:r})}serialize(){const e=Array();Ao(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();Ao(r,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Ao(s,this.addressTableLookups.length);const o=rt([cn("prefix"),rt([cn("numRequiredSignatures"),cn("numReadonlySignedAccounts"),cn("numReadonlyUnsignedAccounts")],"header"),Hn(e.length,"staticAccountKeysLength"),ys(Vt(),this.staticAccountKeys.length,"staticAccountKeys"),Vt("recentBlockhash"),Hn(r.length,"instructionsLength"),Hn(t.length,"serializedInstructions"),Hn(s.length,"addressTableLookupsLength"),Hn(i.length,"serializedAddressTableLookups")]),a=new Uint8Array(qp),l=128,u=o.encode({prefix:l,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:qi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},a);return a.slice(0,u)}serializeInstructions(){let e=0;const t=new Uint8Array(qp);for(const r of this.compiledInstructions){const i=Array();Ao(i,r.accountKeyIndexes.length);const s=Array();Ao(s,r.data.length);const o=rt([cn("programIdIndex"),Hn(i.length,"encodedAccountKeyIndexesLength"),ys(cn(),r.accountKeyIndexes.length,"accountKeyIndexes"),Hn(s.length,"encodedDataLength"),Hn(r.data.length,"data")]);e+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(qp);for(const r of this.addressTableLookups){const i=Array();Ao(i,r.writableIndexes.length);const s=Array();Ao(s,r.readonlyIndexes.length);const o=rt([Vt("accountKey"),Hn(i.length,"encodedWritableIndexesLength"),ys(cn(),r.writableIndexes.length,"writableIndexes"),Hn(s.length,"encodedReadonlyIndexesLength"),ys(cn(),r.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=Ru(t),i=r&RP;mr(r!==i,"Expected versioned message but received legacy message");const s=i;mr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:Ru(t),numReadonlySignedAccounts:Ru(t),numReadonlyUnsignedAccounts:Ru(t)},a=[],l=Eo(t);for(let g=0;g<l;g++)a.push(new ot(To(t,0,wh)));const u=qi.encode(To(t,0,wh)),h=Eo(t),f=[];for(let g=0;g<h;g++){const v=Ru(t),x=Eo(t),b=To(t,0,x),S=Eo(t),_=new Uint8Array(To(t,0,S));f.push({programIdIndex:v,accountKeyIndexes:b,data:_})}const p=Eo(t),m=[];for(let g=0;g<p;g++){const v=new ot(To(t,0,wh)),x=Eo(t),b=To(t,0,x),S=Eo(t),_=To(t,0,S);m.push({accountKey:v,writableIndexes:b,readonlyIndexes:_})}return new Ey({header:o,staticAccountKeys:a,recentBlockhash:u,compiledInstructions:f,addressTableLookups:m})}}const PP={deserializeMessageVersion(n){const e=n[0],t=e&RP;return t===e?"legacy":t},deserialize:n=>{const e=PP.deserializeMessageVersion(n);if(e==="legacy")return Qu.from(n);if(e===0)return Ey.deserialize(n);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ic=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const Cde=zt.alloc(Sy).fill(0);class mL{constructor(e){this.keys=void 0,this.programId=void 0,this.data=zt.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ga{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new mL(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let v=0;v<t.length;v++)if(t[v].programId===void 0)throw new Error(`Transaction instruction index ${v} has undefined program id`);const i=[],s=[];t.forEach(v=>{v.keys.forEach(b=>{s.push({...b})});const x=v.programId.toString();i.includes(x)||i.push(x)}),i.forEach(v=>{s.push({pubkey:new ot(v),isSigner:!1,isWritable:!1})});const o=[];s.forEach(v=>{const x=v.pubkey.toString(),b=o.findIndex(S=>S.pubkey.toString()===x);b>-1?(o[b].isWritable=o[b].isWritable||v.isWritable,o[b].isSigner=o[b].isSigner||v.isSigner):o.push(v)}),o.sort(function(v,x){if(v.isSigner!==x.isSigner)return v.isSigner?-1:1;if(v.isWritable!==x.isWritable)return v.isWritable?-1:1;const b={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return v.pubkey.toBase58().localeCompare(x.pubkey.toBase58(),"en",b)});const a=o.findIndex(v=>v.pubkey.equals(r));if(a>-1){const[v]=o.splice(a,1);v.isSigner=!0,v.isWritable=!0,o.unshift(v)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const v of this.signatures){const x=o.findIndex(b=>b.pubkey.equals(v.publicKey));if(x>-1)o[x].isSigner||(o[x].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${v.publicKey.toString()}`)}let l=0,u=0,h=0;const f=[],p=[];o.forEach(({pubkey:v,isSigner:x,isWritable:b})=>{x?(f.push(v.toString()),l+=1,b||(u+=1)):(p.push(v.toString()),b||(h+=1))});const m=f.concat(p),g=t.map(v=>{const{data:x,programId:b}=v;return{programIdIndex:m.indexOf(b.toString()),accounts:v.keys.map(S=>m.indexOf(S.pubkey.toString())),data:qi.encode(x)}});return g.forEach(v=>{mr(v.programIdIndex>=0),v.accounts.forEach(x=>mr(x>=0))}),new Qu({header:{numRequiredSignatures:l,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:h},accountKeys:m,recentBlockhash:e,instructions:g})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,s)=>t[s].equals(i.publicKey))||(this.signatures=t.map(r=>({signature:null,publicKey:r}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(r=>{const i=r.toString();return t.has(i)?!1:(t.add(i),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}this.signatures=r.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...r)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,r=[];for(const s of e){const o=s.publicKey.toString();t.has(o)||(t.add(o),r.push(s))}const i=this._compile();this._partialSign(i,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach(i=>{const s=d$(r,i.secretKey);this._addSignature(i.publicKey,Pm(s))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){mr(t.length===64);const r=this.signatures.findIndex(i=>e.equals(i.publicKey));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=zt.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:i,publicKey:s}of this.signatures)i===null?t&&(r.missing||(r.missing=[])).push(s):vde(i,e,s.toBytes())||(r.invalid||(r.invalid=[])).push(s);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(r){const s=this._getMessageSignednessErrors(i,t);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:t}=this,r=[];Ao(r,t.length);const i=r.length+t.length*64+e.length,s=zt.alloc(i);return mr(t.length<256),zt.from(r).copy(s,0),t.forEach(({signature:o},a)=>{o!==null&&(mr(o.length===64,"signature has invalid length"),zt.from(o).copy(s,r.length+a*64))}),e.copy(s,r.length+t.length*64),mr(s.length<=qp,`Transaction too large: ${s.length} > ${qp}`),s}get keys(){return mr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return mr(this.instructions.length===1),this.instructions[0].programId}get data(){return mr(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const r=Eo(t);let i=[];for(let s=0;s<r;s++){const o=To(t,0,Sy);i.push(qi.encode(zt.from(o)))}return Ga.populate(Qu.from(t),i)}static populate(e,t=[]){const r=new Ga;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach((i,s)=>{const o={signature:i==qi.encode(Cde)?null:qi.decode(i),publicKey:e.accountKeys[s]};r.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:r.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});r.instructions.push(new mL({keys:s,programId:e.accountKeys[i.programIdIndex],data:qi.decode(i.data)}))}),r._message=e,r._json=r.toJSON(),r}}class Ay{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)mr(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const r=[];for(let i=0;i<e.header.numRequiredSignatures;i++)r.push(new Uint8Array(Sy));this.signatures=r}this.message=e}serialize(){const e=this.message.serialize(),t=Array();Ao(t,this.signatures.length);const r=rt([Hn(t.length,"encodedSignaturesLength"),ys(bde(),this.signatures.length,"signatures"),Hn(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let t=[...e];const r=[],i=Eo(t);for(let o=0;o<i;o++)r.push(new Uint8Array(To(t,0,Sy)));const s=PP.deserialize(new Uint8Array(t));return new Ay(s,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=r.findIndex(o=>o.equals(i.publicKey));mr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=d$(t,i.secretKey)}}addSignature(e,t){mr(t.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));mr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}}const Ide=160,Rde=64,Pde=Ide/Rde,kde=1e3/Pde;new ot("SysvarC1ock11111111111111111111111111111111");new ot("SysvarEpochSchedu1e111111111111111111111111");new ot("Sysvar1nstructions1111111111111111111111111");new ot("SysvarRecentB1ockHashes11111111111111111111");new ot("SysvarRent111111111111111111111111111111111");new ot("SysvarRewards111111111111111111111111111111");new ot("SysvarS1otHashes111111111111111111111111111");new ot("SysvarS1otHistory11111111111111111111111111");new ot("SysvarStakeHistory1111111111111111111111111");class gL extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${r}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${r}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,r)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,t(s)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ht extends Error{constructor({code:e,message:t,data:r},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}function rp(n){return new Promise(e=>setTimeout(e,n))}const Mde=zi("lamportsPerSignature"),y$=rt([pt("version"),pt("state"),Vt("authorizedPubkey"),Vt("nonce"),rt([Mde],"feeCalculator")]);y$.span;class kP{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=y$.decode(Pm(e),0);return new kP({authorizedPubkey:new ot(t.authorizedPubkey),nonce:new ot(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const Ode=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},Nde=n=>e=>{const t=Hn(n,e),{encode:r,decode:i}=Ode(t),s=t;return s.decode=(o,a)=>{const l=i(o,a);return Zz(zt.from(l))},s.encode=(o,a,l)=>{const u=Jz(o,n);return r(u,a,l)},s},km=Nde(8);Object.freeze({Create:{index:0,layout:rt([pt("instruction"),So("lamports"),So("space"),Vt("programId")])},Assign:{index:1,layout:rt([pt("instruction"),Vt("programId")])},Transfer:{index:2,layout:rt([pt("instruction"),km("lamports")])},CreateWithSeed:{index:3,layout:rt([pt("instruction"),Vt("base"),Sp("seed"),So("lamports"),So("space"),Vt("programId")])},AdvanceNonceAccount:{index:4,layout:rt([pt("instruction")])},WithdrawNonceAccount:{index:5,layout:rt([pt("instruction"),So("lamports")])},InitializeNonceAccount:{index:6,layout:rt([pt("instruction"),Vt("authorized")])},AuthorizeNonceAccount:{index:7,layout:rt([pt("instruction"),Vt("authorized")])},Allocate:{index:8,layout:rt([pt("instruction"),So("space")])},AllocateWithSeed:{index:9,layout:rt([pt("instruction"),Vt("base"),Sp("seed"),So("space"),Vt("programId")])},AssignWithSeed:{index:10,layout:rt([pt("instruction"),Vt("base"),Sp("seed"),Vt("programId")])},TransferWithSeed:{index:11,layout:rt([pt("instruction"),km("lamports"),Sp("seed"),Vt("programId")])},UpgradeNonceAccount:{index:12,layout:rt([pt("instruction")])}});new ot("11111111111111111111111111111111");new ot("BPFLoader2111111111111111111111111111111111");function Bde(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IA,yL;function Lde(){if(yL)return IA;yL=1;var n=Object.prototype.toString,e=Object.keys||function(r){var i=[];for(var s in r)i.push(s);return i};function t(r,i){var s,o,a,l,u,h,f;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return t(r.toJSON(),i);if(f=n.call(r),f==="[object Array]"){for(a="[",o=r.length-1,s=0;s<o;s++)a+=t(r[s],!0)+",";return o>-1&&(a+=t(r[s],!0)),a+"]"}else if(f==="[object Object]"){for(l=e(r).sort(),o=l.length,a="",s=0;s<o;)u=l[s],h=t(r[u],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(u)+":"+h),s++;return"{"+a+"}"}else return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return IA=function(r){var i=t(r,!1);if(i!==void 0)return""+i},IA}var Dde=Lde(),vL=Bde(Dde);const Ug=32;function RA(n){let e=0;for(;n>1;)n/=2,e++;return e}function Fde(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Ude{constructor(e,t,r,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=RA(Fde(e+Ug+1))-RA(Ug)-1,r=this.getSlotsInEpoch(t),i=e-(r-Ug);return[t,i]}else{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+r,s=t%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Ug:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+RA(Ug)):this.slotsPerEpoch}}var zde=globalThis.fetch;class $de extends ide{constructor(e,t,r){const i=s=>{const o=nde(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,t,r),this.underlyingSocket=void 0}call(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){var r;const t=(r=this.underlyingSocket)==null?void 0:r.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function jde(n,e){let t;try{t=n.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(t.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${n.index}`);return t}const wL=56;class xL{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=jde(Hde,e),r=e.length-wL;mr(r>=0,"lookup table is invalid"),mr(r%32===0,"lookup table is invalid");const i=r/32,{addresses:s}=rt([ys(Vt(),i,"addresses")]).decode(e.slice(wL));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new ot(t.authority[0]):void 0,addresses:s.map(o=>new ot(o))}}}const Hde={index:1,layout:rt([pt("typeIndex"),km("deactivationSlot"),zi("lastExtendedSlot"),cn("lastExtendedStartIndex"),cn(),ys(Vt(),$d(cn(),-1),"authority")])},Wde=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Gde(n){const e=n.match(Wde);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[t,r,i,s]=e,o=n.startsWith("https:")?"wss:":"ws:",a=i==null?null:parseInt(i.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${r}${l}${s}`}const Lr=ov(TP(ot),Oe(),n=>new ot(n)),v$=CP([Oe(),Pr("base64")]),MP=ov(TP(zt),v$,n=>zt.from(n[0],"base64")),Vde=30*1e3;function qde(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Gn(n){let e,t;if(typeof n=="string")e=n;else if(n){const{commitment:r,...i}=n;e=r,t=i}return{commitment:e,config:t}}function _L(n){return n.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function w$(n){return Bs([Ae({jsonrpc:Pr("2.0"),id:Oe(),result:n}),Ae({jsonrpc:Pr("2.0"),id:Oe(),error:Ae({code:Ym(),message:Oe(),data:bt(Ehe())})})])}const Xde=w$(Ym());function Ht(n){return ov(w$(n),Xde,e=>"error"in e?e:{...e,result:Be(e.result,n)})}function jr(n){return Ht(Ae({context:Ae({slot:he()}),value:n}))}function Db(n){return Ae({context:Ae({slot:he()}),value:n})}function PA(n,e){return n===0?new Ey({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new ot(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:qi.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new Qu(e)}const Kde=Ae({foundation:he(),foundationTerm:he(),initial:he(),taper:he(),terminal:he()}),Qde=Ht($e(We(Ae({epoch:he(),effectiveSlot:he(),amount:he(),postBalance:he(),commission:bt(We(he()))})))),Yde=$e(Ae({slot:he(),prioritizationFee:he()})),Zde=Ae({total:he(),validator:he(),foundation:he(),epoch:he()}),Jde=Ae({epoch:he(),slotIndex:he(),slotsInEpoch:he(),absoluteSlot:he(),blockHeight:bt(he()),transactionCount:bt(he())}),efe=Ae({slotsPerEpoch:he(),leaderScheduleSlotOffset:he(),warmup:nu(),firstNormalEpoch:he(),firstNormalSlot:he()}),tfe=t$(Oe(),$e(he())),df=We(Bs([Ae({}),Oe()])),nfe=Ae({err:df}),rfe=Pr("receivedSignature"),ife=Ae({"solana-core":Oe(),"feature-set":bt(he())}),sfe=Ae({program:Oe(),programId:Lr,parsed:Ym()}),ofe=Ae({programId:Lr,accounts:$e(Lr),data:Oe()}),bL=jr(Ae({err:We(Bs([Ae({}),Oe()])),logs:We($e(Oe())),accounts:bt(We($e(We(Ae({executable:nu(),owner:Oe(),lamports:he(),data:$e(Oe()),rentEpoch:bt(he())}))))),unitsConsumed:bt(he()),returnData:bt(We(Ae({programId:Oe(),data:CP([Oe(),Pr("base64")])}))),innerInstructions:bt(We($e(Ae({index:he(),instructions:$e(Bs([sfe,ofe]))}))))})),afe=jr(Ae({byIdentity:t$(Oe(),$e(he())),range:Ae({firstSlot:he(),lastSlot:he()})}));function lfe(n,e,t,r,i,s){const o=t||zde;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return r&&(l=async(h,f)=>{const p=await new Promise((m,g)=>{try{r(h,f,(v,x)=>m([v,x]))}catch(v){g(v)}});return await o(...p)}),new Jhe(async(h,f)=>{const p={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},upe)};try{let m=5,g,v=500;for(;l?g=await l(n,p):g=await o(n,p),!(g.status!==429||i===!0||(m-=1,m===0));)console.error(`Server responded with ${g.status} ${g.statusText}.  Retrying after ${v}ms delay...`),await rp(v),v*=2;const x=await g.text();g.ok?f(null,x):f(new Error(`${g.status} ${g.statusText}: ${x}`))}catch(m){m instanceof Error&&f(m)}},{})}function ufe(n){return(e,t)=>new Promise((r,i)=>{n.request(e,t,(s,o)=>{if(s){i(s);return}r(o)})})}function cfe(n){return e=>new Promise((t,r)=>{e.length===0&&t([]);const i=e.map(s=>n.request(s.methodName,s.args));n.request(i,(s,o)=>{if(s){r(s);return}t(o)})})}const hfe=Ht(Kde),dfe=Ht(Zde),ffe=Ht(Yde),pfe=Ht(Jde),mfe=Ht(efe),gfe=Ht(tfe),yfe=Ht(he()),vfe=jr(Ae({total:he(),circulating:he(),nonCirculating:he(),nonCirculatingAccounts:$e(Lr)})),zC=Ae({amount:Oe(),uiAmount:We(he()),decimals:he(),uiAmountString:bt(Oe())}),wfe=jr($e(Ae({address:Lr,amount:Oe(),uiAmount:We(he()),decimals:he(),uiAmountString:bt(Oe())}))),xfe=jr($e(Ae({pubkey:Lr,account:Ae({executable:nu(),owner:Lr,lamports:he(),data:MP,rentEpoch:he()})}))),$C=Ae({program:Oe(),parsed:Ym(),space:he()}),_fe=jr($e(Ae({pubkey:Lr,account:Ae({executable:nu(),owner:Lr,lamports:he(),data:$C,rentEpoch:he()})}))),bfe=jr($e(Ae({lamports:he(),address:Lr}))),Ty=Ae({executable:nu(),owner:Lr,lamports:he(),data:MP,rentEpoch:he()}),Sfe=Ae({pubkey:Lr,account:Ty}),Efe=ov(Bs([TP(zt),$C]),Bs([v$,$C]),n=>Array.isArray(n)?Be(n,MP):n),jC=Ae({executable:nu(),owner:Lr,lamports:he(),data:Efe,rentEpoch:he()}),Afe=Ae({pubkey:Lr,account:jC}),Tfe=Ae({state:Bs([Pr("active"),Pr("inactive"),Pr("activating"),Pr("deactivating")]),active:he(),inactive:he()}),Cfe=Ht($e(Ae({signature:Oe(),slot:he(),err:df,memo:We(Oe()),blockTime:bt(We(he()))}))),Ife=Ht($e(Ae({signature:Oe(),slot:he(),err:df,memo:We(Oe()),blockTime:bt(We(he()))}))),Rfe=Ae({subscription:he(),result:Db(Ty)}),Pfe=Ae({pubkey:Lr,account:Ty}),kfe=Ae({subscription:he(),result:Db(Pfe)}),Mfe=Ae({parent:he(),slot:he(),root:he()}),Ofe=Ae({subscription:he(),result:Mfe}),Nfe=Bs([Ae({type:Bs([Pr("firstShredReceived"),Pr("completed"),Pr("optimisticConfirmation"),Pr("root")]),slot:he(),timestamp:he()}),Ae({type:Pr("createdBank"),parent:he(),slot:he(),timestamp:he()}),Ae({type:Pr("frozen"),slot:he(),timestamp:he(),stats:Ae({numTransactionEntries:he(),numSuccessfulTransactions:he(),numFailedTransactions:he(),maxTransactionsPerEntry:he()})}),Ae({type:Pr("dead"),slot:he(),timestamp:he(),err:Oe()})]),Bfe=Ae({subscription:he(),result:Nfe}),Lfe=Ae({subscription:he(),result:Db(Bs([nfe,rfe]))}),Dfe=Ae({subscription:he(),result:he()}),Ffe=Ae({pubkey:Oe(),gossip:We(Oe()),tpu:We(Oe()),rpc:We(Oe()),version:We(Oe())}),SL=Ae({votePubkey:Oe(),nodePubkey:Oe(),activatedStake:he(),epochVoteAccount:nu(),epochCredits:$e(CP([he(),he(),he()])),commission:he(),lastVote:he(),rootSlot:We(he())}),Ufe=Ht(Ae({current:$e(SL),delinquent:$e(SL)})),zfe=Bs([Pr("processed"),Pr("confirmed"),Pr("finalized")]),$fe=Ae({slot:he(),confirmations:We(he()),err:df,confirmationStatus:bt(zfe)}),jfe=jr($e(We($fe))),Hfe=Ht(he()),x$=Ae({accountKey:Lr,writableIndexes:$e(he()),readonlyIndexes:$e(he())}),OP=Ae({signatures:$e(Oe()),message:Ae({accountKeys:$e(Oe()),header:Ae({numRequiredSignatures:he(),numReadonlySignedAccounts:he(),numReadonlyUnsignedAccounts:he()}),instructions:$e(Ae({accounts:$e(he()),data:Oe(),programIdIndex:he()})),recentBlockhash:Oe(),addressTableLookups:bt($e(x$))})}),_$=Ae({pubkey:Lr,signer:nu(),writable:nu(),source:bt(Bs([Pr("transaction"),Pr("lookupTable")]))}),b$=Ae({accountKeys:$e(_$),signatures:$e(Oe())}),S$=Ae({parsed:Ym(),program:Oe(),programId:Lr}),E$=Ae({accounts:$e(Lr),data:Oe(),programId:Lr}),Wfe=Bs([E$,S$]),Gfe=Bs([Ae({parsed:Ym(),program:Oe(),programId:Oe()}),Ae({accounts:$e(Oe()),data:Oe(),programId:Oe()})]),A$=ov(Wfe,Gfe,n=>"accounts"in n?Be(n,E$):Be(n,S$)),T$=Ae({signatures:$e(Oe()),message:Ae({accountKeys:$e(_$),instructions:$e(A$),recentBlockhash:Oe(),addressTableLookups:bt(We($e(x$)))})}),p_=Ae({accountIndex:he(),mint:Oe(),owner:bt(Oe()),programId:bt(Oe()),uiTokenAmount:zC}),C$=Ae({writable:$e(Lr),readonly:$e(Lr)}),Fb=Ae({err:df,fee:he(),innerInstructions:bt(We($e(Ae({index:he(),instructions:$e(Ae({accounts:$e(he()),data:Oe(),programIdIndex:he()}))})))),preBalances:$e(he()),postBalances:$e(he()),logMessages:bt(We($e(Oe()))),preTokenBalances:bt(We($e(p_))),postTokenBalances:bt(We($e(p_))),loadedAddresses:bt(C$),computeUnitsConsumed:bt(he())}),NP=Ae({err:df,fee:he(),innerInstructions:bt(We($e(Ae({index:he(),instructions:$e(A$)})))),preBalances:$e(he()),postBalances:$e(he()),logMessages:bt(We($e(Oe()))),preTokenBalances:bt(We($e(p_))),postTokenBalances:bt(We($e(p_))),loadedAddresses:bt(C$),computeUnitsConsumed:bt(he())}),Zm=Bs([Pr(0),Pr("legacy")]),ff=Ae({pubkey:Oe(),lamports:he(),postBalance:We(he()),rewardType:We(Oe()),commission:bt(We(he()))}),Vfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),transactions:$e(Ae({transaction:OP,meta:We(Fb),version:bt(Zm)})),rewards:bt($e(ff)),blockTime:We(he()),blockHeight:We(he())}))),qfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),rewards:bt($e(ff)),blockTime:We(he()),blockHeight:We(he())}))),Xfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),transactions:$e(Ae({transaction:b$,meta:We(Fb),version:bt(Zm)})),rewards:bt($e(ff)),blockTime:We(he()),blockHeight:We(he())}))),Kfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),transactions:$e(Ae({transaction:T$,meta:We(NP),version:bt(Zm)})),rewards:bt($e(ff)),blockTime:We(he()),blockHeight:We(he())}))),Qfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),transactions:$e(Ae({transaction:b$,meta:We(NP),version:bt(Zm)})),rewards:bt($e(ff)),blockTime:We(he()),blockHeight:We(he())}))),Yfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),rewards:bt($e(ff)),blockTime:We(he()),blockHeight:We(he())}))),Zfe=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),transactions:$e(Ae({transaction:OP,meta:We(Fb)})),rewards:bt($e(ff)),blockTime:We(he())}))),EL=Ht(We(Ae({blockhash:Oe(),previousBlockhash:Oe(),parentSlot:he(),signatures:$e(Oe()),blockTime:We(he())}))),kA=Ht(We(Ae({slot:he(),meta:We(Fb),blockTime:bt(We(he())),transaction:OP,version:bt(Zm)}))),rw=Ht(We(Ae({slot:he(),transaction:T$,meta:We(NP),blockTime:bt(We(he())),version:bt(Zm)}))),Jfe=jr(Ae({blockhash:Oe(),feeCalculator:Ae({lamportsPerSignature:he()})})),epe=jr(Ae({blockhash:Oe(),lastValidBlockHeight:he()})),tpe=jr(nu()),npe=Ae({slot:he(),numTransactions:he(),numSlots:he(),samplePeriodSecs:he()}),rpe=Ht($e(npe)),ipe=jr(We(Ae({feeCalculator:Ae({lamportsPerSignature:he()})}))),spe=Ht(Oe()),ope=Ht(Oe()),ape=Ae({err:df,logs:$e(Oe()),signature:Oe()}),lpe=Ae({result:Db(ape),subscription:he()}),upe={"solana-client":"js/1.95.8"};class I${constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const u={};return async h=>{const{commitment:f,config:p}=Gn(h),m=this._buildArgs([],f,void 0,p),g=vL(m);return u[g]=u[g]??(async()=>{try{const v=await this._rpcRequest("getBlockHeight",m),x=Be(v,Ht(he()));if("error"in x)throw new ht(x.error,"failed to get block height information");return x.result}finally{delete u[g]}})(),await u[g]}})();let r,i,s,o,a,l;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,i=t.httpHeaders,s=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,l=t.httpAgent),this._rpcEndpoint=qde(e),this._rpcWsEndpoint=r||Gde(e),this._rpcClient=lfe(e,i,s,o,a,l),this._rpcRequest=ufe(this._rpcClient),this._rpcBatchRequest=cfe(this._rpcClient),this._rpcWebSocket=new $de(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgs([e.toBase58()],r,void 0,i),o=await this._rpcRequest("getBalance",s),a=Be(o,jr(he()));if("error"in a)throw new ht(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+r)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),r=Be(t,Ht(We(he())));if("error"in r)throw new ht(r.error,`failed to get block time for slot ${e}`);return r.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=Be(e,Ht(he()));if("error"in t)throw new ht(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=Be(e,yfe);if("error"in t)throw new ht(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[t]),i=Be(r,vfe);if("error"in i)throw new ht(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",r),s=Be(i,jr(zC));if("error"in s)throw new ht(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",r),s=Be(i,jr(zC));if("error"in s)throw new ht(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,t,r){const{commitment:i,config:s}=Gn(r);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,i,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),u=Be(l,xfe);if("error"in u)throw new ht(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getParsedTokenAccountsByOwner(e,t,r){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});const s=this._buildArgs(i,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=Be(o,_fe);if("error"in a)throw new ht(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",r),s=Be(i,bfe);if("error"in s)throw new ht(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",r),s=Be(i,wfe);if("error"in s)throw new ht(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgs([e.toBase58()],r,"base64",i),o=await this._rpcRequest("getAccountInfo",s),a=Be(o,jr(We(Ty)));if("error"in a)throw new ht(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),a=Be(o,jr(We(jC)));if("error"in a)throw new ht(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(r){throw new Error("failed to get info about account "+e.toBase58()+": "+r)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:i}=Gn(t),s=e.map(u=>u.toBase58()),o=this._buildArgs([s],r,"jsonParsed",i),a=await this._rpcRequest("getMultipleAccounts",o),l=Be(a,jr($e(We(jC))));if("error"in l)throw new ht(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:i}=Gn(t),s=e.map(u=>u.toBase58()),o=this._buildArgs([s],r,"base64",i),a=await this._rpcRequest("getMultipleAccounts",o),l=Be(a,jr($e(We(Ty))));if("error"in l)throw new ht(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:i,config:s}=Gn(t),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=Be(a,Ht(Tfe));if("error"in l)throw new ht(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,t){const{commitment:r,config:i}=Gn(t),{encoding:s,...o}=i||{},a=this._buildArgs([e.toBase58()],r,s||"base64",{...o,...o.filters?{filters:_L(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),u=$e(Sfe),h=o.withContext===!0?Be(l,jr(u)):Be(l,Ht(u));if("error"in h)throw new ht(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgs([e.toBase58()],r,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),a=Be(o,Ht($e(Afe)));if("error"in a)throw new ht(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){var s;let r;if(typeof e=="string")r=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let i;try{i=qi.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return mr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,r)=>{e!=null&&(e.aborted?r(e.reason):e.addEventListener("abort",()=>{r(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,i,s=!1;const o=new Promise((l,u)=>{try{r=this.onSignature(t,(f,p)=>{r=void 0;const m={context:p,value:f};l({__type:Ic.PROCESSED,response:m})},e);const h=new Promise(f=>{r==null?f():i=this._onSubscriptionStateChange(r,p=>{p==="subscribed"&&f()})});(async()=>{if(await h,s)return;const f=await this.getSignatureStatus(t);if(s||f==null)return;const{context:p,value:m}=f;if(m!=null)if(m!=null&&m.err)u(m.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(m.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(m.confirmationStatus==="processed"||m.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Ic.PROCESSED,response:{context:p,value:m}})}})()}catch(h){u(h)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:i}}){let s=!1;const o=new Promise(f=>{const p=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let m=await p();if(!s){for(;m<=r;)if(await rp(1e3),s||(m=await p(),s))return;f({__type:Ic.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),u=this.getCancellationPromise(t);let h;try{const f=await Promise.race([u,l,o]);if(f.__type===Ic.PROCESSED)h=f.response;else throw new p$(i)}finally{s=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(m=>{let g=s,v=null;const x=async()=>{try{const{context:b,value:S}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:r});return v=b.slot,S==null?void 0:S.nonce}catch{return g}};(async()=>{if(g=await x(),!a)for(;;){if(s!==g){m({__type:Ic.NONCE_INVALID,slotInWhichNonceDidAdvance:v});return}if(await rp(2e3),a||(g=await x(),a))return}})()}),{abortConfirmation:u,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),f=this.getCancellationPromise(t);let p;try{const m=await Promise.race([f,h,l]);if(m.__type===Ic.PROCESSED)p=m.response;else{let g;for(;;){const v=await this.getSignatureStatus(o);if(v==null)break;if(v.context.slot<(m.slotInWhichNonceDidAdvance??r)){await rp(400);continue}g=v;break}if(g!=null&&g.value){const v=e||"finalized",{confirmationStatus:x}=g.value;switch(v){case"processed":case"recent":if(x!=="processed"&&x!=="confirmed"&&x!=="finalized")throw new o0(o);break;case"confirmed":case"single":case"singleGossip":if(x!=="confirmed"&&x!=="finalized")throw new o0(o);break;case"finalized":case"max":case"root":if(x!=="finalized")throw new o0(o);break;default:}p={context:g.context,value:{err:g.value.err}}}else throw new o0(o)}}finally{a=!0,u()}return p}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const i=new Promise(l=>{let u=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{u=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>l({__type:Ic.TIMED_OUT,timeoutMs:u}),u)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const l=await Promise.race([o,i]);if(l.__type===Ic.PROCESSED)a=l.response;else throw new m$(t,l.timeoutMs/1e3)}finally{clearTimeout(r),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=Be(e,Ht($e(Ffe)));if("error"in t)throw new ht(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getVoteAccounts",t),i=Be(r,Ufe);if("error"in i)throw new ht(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:t,config:r}=Gn(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlot",i),o=Be(s,Ht(he()));if("error"in o)throw new ht(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:r}=Gn(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getSlotLeader",i),o=Be(s,Ht(Oe()));if("error"in o)throw new ht(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const r=[e,t],i=await this._rpcRequest("getSlotLeaders",r),s=Be(i,Ht($e(Lr)));if("error"in s)throw new ht(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,t){const{context:r,value:i}=await this.getSignatureStatuses([e],t);mr(i.length===1);const s=i[0];return{context:r,value:s}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const i=await this._rpcRequest("getSignatureStatuses",r),s=Be(i,jfe);if("error"in s)throw new ht(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:t,config:r}=Gn(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getTransactionCount",i),o=Be(s,Ht(he()));if("error"in o)throw new ht(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getInflationGovernor",t),i=Be(r,hfe);if("error"in i)throw new ht(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,r){const{commitment:i,config:s}=Gn(r),o=this._buildArgs([e.map(u=>u.toBase58())],i,void 0,{...s,epoch:t??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=Be(a,Qde);if("error"in l)throw new ht(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=Be(e,dfe);if("error"in t)throw new ht(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:r}=Gn(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getEpochInfo",i),o=Be(s,pfe);if("error"in o)throw new ht(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=Be(e,mfe);if("error"in t)throw new ht(t.error,"failed to get epoch schedule");const r=t.result;return new Ude(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=Be(e,gfe);if("error"in t)throw new ht(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",r),s=Be(i,Hfe);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const t=this._buildArgs([],e),r=await this._rpcRequest("getRecentBlockhash",t),i=Be(r,Jfe);if("error"in i)throw new ht(i.error,"failed to get recent blockhash");return i.result}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),r=Be(t,rpe);if("error"in r)throw new ht(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",r),s=Be(i,ipe);if("error"in s)throw new ht(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const r=Pm(e.serialize()).toString("base64"),i=this._buildArgs([r],t),s=await this._rpcRequest("getFeeForMessage",i),o=Be(s,jr(We(he())));if("error"in o)throw new ht(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const t=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),r=t!=null&&t.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",r),s=Be(i,ffe);if("error"in s)throw new ht(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=Gn(e),i=this._buildArgs([],t,void 0,r),s=await this._rpcRequest("getLatestBlockhash",i),o=Be(s,epe);if("error"in o)throw new ht(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgs([e],r,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),a=Be(o,tpe);if("error"in a)throw new ht(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=Be(e,Ht(ife));if("error"in t)throw new ht(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=Be(e,Ht(Oe()));if("error"in t)throw new ht(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=Be(o,Xfe);if("error"in a)throw a.error;return a.result}case"none":{const a=Be(o,qfe);if("error"in a)throw a.error;return a.result}default:{const a=Be(o,Vfe);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:u,meta:h,version:f})=>({meta:h,transaction:{...u,message:PA(f,u.message)},version:f}))}:null}}}catch(a){throw new ht(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const a=Be(o,Qfe);if("error"in a)throw a.error;return a.result}case"none":{const a=Be(o,Yfe);if("error"in a)throw a.error;return a.result}default:{const a=Be(o,Kfe);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ht(a,"failed to get block")}}async getBlockProduction(e){let t,r;if(typeof e=="string")r=e;else if(e){const{commitment:a,...l}=e;r=a,t=l}const i=this._buildArgs([],r,"base64",t),s=await this._rpcRequest("getBlockProduction",i),o=Be(s,afe);if("error"in o)throw new ht(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgsAtLeastConfirmed([e],r,void 0,i),o=await this._rpcRequest("getTransaction",s),a=Be(o,kA);if("error"in a)throw new ht(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:PA(l.version,l.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:r,config:i}=Gn(t),s=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),a=Be(o,rw);if("error"in a)throw new ht(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:r,config:i}=Gn(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(l=>{const u=Be(l,rw);if("error"in u)throw new ht(u.error,"failed to get transactions");return u.result})}async getTransactions(e,t){const{commitment:r,config:i}=Gn(t),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],r,void 0,i)}));return(await this._rpcBatchRequest(s)).map(l=>{const u=Be(l,kA);if("error"in u)throw new ht(u.error,"failed to get transactions");const h=u.result;return h&&{...h,transaction:{...h.transaction,message:PA(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedBlock",r),s=Be(i,Zfe);if("error"in s)throw new ht(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:u})=>{const h=new Qu(l.message);return{meta:u,transaction:{...l,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:u})=>({meta:u,transaction:Ga.populate(l.message,l.signatures)}))}}async getBlocks(e,t,r){const i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],r),s=await this._rpcRequest("getBlocks",i),o=Be(s,Ht($e(he())));if("error"in o)throw new ht(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",r),s=Be(i,EL);if("error"in s)throw new ht(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getConfirmedBlock",r),s=Be(i,EL);if("error"in s)throw new ht(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getConfirmedTransaction",r),s=Be(i,kA);if("error"in s)throw new ht(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Qu(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Ga.populate(a,l)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getConfirmedTransaction",r),s=Be(i,rw);if("error"in s)throw new ht(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,t){const r=e.map(o=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const a=Be(o,rw);if("error"in a)throw new ht(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,r){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<s));)try{const l=await this.getConfirmedBlockSignatures(t,"finalized");l.signatures.length>0&&(i.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in i)&&(r++,!(r>o));)try{const l=await this.getConfirmedBlockSignatures(r);l.signatures.length>0&&(i.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=Be(s,Cfe);if("error"in o)throw new ht(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,r){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),s=await this._rpcRequest("getSignaturesForAddress",i),o=Be(s,Ife);if("error"in o)throw new ht(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=new xL({key:e,state:xL.deserialize(i.data)})),{context:r,value:s}}async getNonceAndContext(e,t){const{context:r,value:i}=await this.getAccountInfoAndContext(e,t);let s=null;return i!==null&&(s=kP.fromAccountData(i.data)),{context:r,value:s}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+r)})}async requestAirdrop(e,t){const r=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=Be(r,spe);if("error"in i)throw new ht(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await rp(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Vde;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(r!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await rp(kde/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=Gn(e),i=this._buildArgs([],t,"base64",r),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=Be(s,jr(he()));if("error"in o)throw new ht(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,r){if("message"in e){const v=e.serialize(),x=zt.from(v).toString("base64");if(Array.isArray(t)||r!==void 0)throw new Error("Invalid arguments");const b=t||{};b.encoding="base64","commitment"in b||(b.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(b.innerInstructions=t.innerInstructions);const S=[x,b],_=await this._rpcRequest("simulateTransaction",S),R=Be(_,bL);if("error"in R)throw new Error("failed to simulate transaction: "+R.error.message);return R.result}let i;if(e instanceof Ga){let g=e;i=new Ga,i.feePayer=g.feePayer,i.instructions=e.instructions,i.nonceInfo=g.nonceInfo,i.signatures=g.signatures}else i=Ga.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(i.nonceInfo&&s)i.sign(...s);else{let g=this._disableBlockhashCaching;for(;;){const v=await this._blockhashWithExpiryBlockHeight(g);if(i.lastValidBlockHeight=v.lastValidBlockHeight,i.recentBlockhash=v.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const x=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(x)&&!this._blockhashInfo.transactionSignatures.includes(x)){this._blockhashInfo.simulatedSignatures.push(x);break}else g=!0}}const o=i._compile(),a=o.serialize(),u=i._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(r){const g=(Array.isArray(r)?r:o.nonProgramIds()).map(v=>v.toBase58());h.accounts={encoding:"base64",addresses:g}}s&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const f=[u,h],p=await this._rpcRequest("simulateTransaction",f),m=Be(p,bL);if("error"in m){let g;if("data"in m.error&&(g=m.error.data.logs,g&&Array.isArray(g))){const v=`
    `,x=v+g.join(v);console.error(m.error.message,x)}throw new gL({action:"simulate",signature:"",transactionMessage:m.error.message,logs:g})}return m.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,r)}async sendRawTransaction(e,t){const r=Pm(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},i=t&&t.skipPreflight,s=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(r.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(r.minContextSlot=t.minContextSlot),i&&(r.skipPreflight=i),s&&(r.preflightCommitment=s);const o=[e,r],a=await this._rpcRequest("sendTransaction",o),l=Be(a,ope);if("error"in l){let u;throw"data"in l.error&&(u=l.error.data.logs),new gL({action:i?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:u})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,r])=>{this._setSubscription(t,{...r,state:"pending"})})}_setSubscription(e,t){var i;const r=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){var s;const r=this._subscriptionHashByClientSubscriptionId[e];if(r==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[r]||(s[r]=new Set);return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const i=this._subscriptionsByHash[r];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[r],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(r,{...i,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(r,{...i,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=i.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!t())return;this._setSubscription(r,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(r,{...i,state:"unsubscribing"}),this._setSubscription(r,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(r,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];r!==void 0&&r.forEach(i=>{try{i(...t)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:t,subscription:r}=Be(e,Rfe);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,i=vL([e.method,t]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[i];mr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:i,config:s}=Gn(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=Be(e,kfe);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,i){const{commitment:s,config:o}=Gn(r),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:_L(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=Be(e,lpe);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=Be(e,Ofe);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=Be(e,Bfe);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,i){const s=t||this._commitment;if(s||r||i){let o={};r&&(o.encoding=r),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,r,i){const s=t||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,i)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=Be(e,Lfe);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const i=this._buildArgs([e],r||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,t,r){const{commitment:i,...s}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),a=this._makeSubscription({callback:(l,u)=>{t(l,u);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=Be(e,Dfe);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:rt([pt("instruction"),km("recentSlot"),cn("bumpSeed")])},FreezeLookupTable:{index:1,layout:rt([pt("instruction")])},ExtendLookupTable:{index:2,layout:rt([pt("instruction"),km(),ys(Vt(),$d(pt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:rt([pt("instruction")])},CloseLookupTable:{index:4,layout:rt([pt("instruction")])}});new ot("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:rt([cn("instruction"),pt("units"),pt("additionalFee")])},RequestHeapFrame:{index:1,layout:rt([cn("instruction"),pt("bytes")])},SetComputeUnitLimit:{index:2,layout:rt([cn("instruction"),pt("units")])},SetComputeUnitPrice:{index:3,layout:rt([cn("instruction"),km("microLamports")])}});new ot("ComputeBudget111111111111111111111111111111");rt([cn("numSignatures"),cn("padding"),ia("signatureOffset"),ia("signatureInstructionIndex"),ia("publicKeyOffset"),ia("publicKeyInstructionIndex"),ia("messageDataOffset"),ia("messageDataSize"),ia("messageInstructionIndex")]);new ot("Ed25519SigVerify111111111111111111111111111");IP.utils.isValidPrivateKey;IP.getPublicKey;rt([cn("numSignatures"),ia("signatureOffset"),cn("signatureInstructionIndex"),ia("ethAddressOffset"),cn("ethAddressInstructionIndex"),ia("messageDataOffset"),ia("messageDataSize"),cn("messageInstructionIndex"),Hn(20,"ethAddress"),Hn(64,"signature"),cn("recoveryId")]);new ot("KeccakSecp256k11111111111111111111111111111");var R$;new ot("StakeConfig11111111111111111111111111111111");class P${constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}R$=P$;P$.default=new R$(0,0,ot.default);Object.freeze({Initialize:{index:0,layout:rt([pt("instruction"),Sde(),Ede()])},Authorize:{index:1,layout:rt([pt("instruction"),Vt("newAuthorized"),pt("stakeAuthorizationType")])},Delegate:{index:2,layout:rt([pt("instruction")])},Split:{index:3,layout:rt([pt("instruction"),So("lamports")])},Withdraw:{index:4,layout:rt([pt("instruction"),So("lamports")])},Deactivate:{index:5,layout:rt([pt("instruction")])},Merge:{index:7,layout:rt([pt("instruction")])},AuthorizeWithSeed:{index:8,layout:rt([pt("instruction"),Vt("newAuthorized"),pt("stakeAuthorizationType"),Sp("authoritySeed"),Vt("authorityOwner")])}});new ot("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:rt([pt("instruction"),Ade()])},Authorize:{index:1,layout:rt([pt("instruction"),Vt("newAuthorized"),pt("voteAuthorizationType")])},Withdraw:{index:3,layout:rt([pt("instruction"),So("lamports")])},UpdateValidatorIdentity:{index:4,layout:rt([pt("instruction")])},AuthorizeWithSeed:{index:10,layout:rt([pt("instruction"),Tde()])}});new ot("Vote111111111111111111111111111111111111111");new ot("Va1idator1nfo111111111111111111111111111111");Ae({name:Oe(),website:bt(Oe()),details:bt(Oe()),iconUrl:bt(Oe()),keybaseUsername:bt(Oe())});new ot("Vote111111111111111111111111111111111111111");rt([Vt("nodePubkey"),Vt("authorizedWithdrawer"),cn("commission"),zi(),ys(rt([zi("slot"),pt("confirmationCount")]),$d(pt(),-8),"votes"),cn("rootSlotValid"),zi("rootSlot"),zi(),ys(rt([zi("epoch"),Vt("authorizedVoter")]),$d(pt(),-8),"authorizedVoters"),rt([ys(rt([Vt("authorizedPubkey"),zi("epochOfLastAuthorizedSwitch"),zi("targetEpoch")]),32,"buf"),zi("idx"),cn("isEmpty")],"priorVoters"),zi(),ys(rt([zi("epoch"),zi("credits"),zi("prevCredits")]),$d(pt(),-8),"epochCredits"),rt([zi("slot"),zi("timestamp")],"lastTimestamp")]);const AL={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function cpe(n,e){const t=e===!1?"http":"https";if(!n)return AL[t].devnet;const r=AL[t][n];if(!r)throw new Error(`Unknown ${t} cluster: ${n}`);return r}const k$=Y.createContext({});function hpe(){return Y.useContext(k$)}const dpe=({children:n,endpoint:e,config:t={commitment:"confirmed"}})=>{const r=Y.useMemo(()=>new I$(e,t),[e,t]);return kt.createElement(k$.Provider,{value:{connection:r}},n)};class Ss extends Error{constructor(e,t){super(e),this.error=t}}class jd extends Ss{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class a0 extends Ss{constructor(){super(...arguments),this.name="WalletConfigError"}}class Ep extends Ss{constructor(){super(...arguments),this.name="WalletConnectionError"}}class BP extends Ss{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class M$ extends Ss{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class xd extends Ss{constructor(){super(...arguments),this.name="WalletAccountError"}}class m_ extends Ss{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class ro extends Ss{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class oh extends Ss{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Bu extends Ss{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class LP extends Ss{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class TL extends Ss{constructor(){super(...arguments),this.name="WalletSignInError"}}var vn;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(vn||(vn={}));class O$ extends il{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,t,r={}){const i=this.publicKey;if(!i)throw new ro;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await t.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,e}}function fpe(n){if(typeof window>"u"||typeof document>"u")return;const e=[];function t(){if(n())for(const s of e)s()}const r=setInterval(t,1e3);e.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",t,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",t))),document.readyState!=="complete"&&(window.addEventListener("load",t,{once:!0}),e.push(()=>window.removeEventListener("load",t))),t()}function ppe(){if(!navigator)return!1;const n=navigator.userAgent.toLowerCase(),e=n.includes("iphone")||n.includes("ipad"),t=n.includes("safari");return e&&t}function ah(n){return"version"in n}class mpe extends O${async sendTransaction(e,t,r={}){let i=!0;try{if(ah(e)){if(!this.supportedTransactionVersions)throw new oh("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new oh(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await t.sendRawTransaction(s,r)}catch(s){throw s instanceof Bu?(i=!1,s):new oh(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=r;e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await t.sendRawTransaction(a,o)}catch(s){throw s instanceof Bu?(i=!1,s):new oh(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const r of e)if(ah(r)){if(!this.supportedTransactionVersions)throw new Bu("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(r.version))throw new Bu(`Signing transaction version ${r.version} isn't supported by this wallet`)}const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}}class N$ extends mpe{}class gpe extends N${}const jc="solana:signAndSendTransaction",MA="solana:signIn",zg="solana:signMessage",Hi="solana:signTransaction",B$="standard:connect",CL="standard:disconnect",L$="standard:events";function ype(n){return B$ in n.features&&L$ in n.features&&(jc in n.features||Hi in n.features)}var HC;(function(n){n.Mainnet="mainnet-beta",n.Testnet="testnet",n.Devnet="devnet"})(HC||(HC={}));class IL extends Ss{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const vpe=[],Ub={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Fa("call","select")},connect(){return Promise.reject(Fa("call","connect"))},disconnect(){return Promise.reject(Fa("call","disconnect"))},sendTransaction(){return Promise.reject(Fa("call","sendTransaction"))},signTransaction(){return Promise.reject(Fa("call","signTransaction"))},signAllTransactions(){return Promise.reject(Fa("call","signAllTransactions"))},signMessage(){return Promise.reject(Fa("call","signMessage"))},signIn(){return Promise.reject(Fa("call","signIn"))}};Object.defineProperty(Ub,"wallets",{get(){return Fa("read","wallets"),vpe}});Object.defineProperty(Ub,"wallet",{get(){return Fa("read","wallet"),null}});Object.defineProperty(Ub,"publicKey",{get(){return Fa("read","publicKey"),null}});function Fa(n,e){const t=new Error(`You have tried to ${n} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(t),t}const D$=Y.createContext(Ub);function F$(){return Y.useContext(D$)}function wpe(n,e){const t=Y.useState(()=>{try{const s=localStorage.getItem(n);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),r=t[0],i=Y.useRef(!0);return Y.useEffect(()=>{if(i.current){i.current=!1;return}try{r===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(r))}catch(s){typeof window<"u"&&console.error(s)}},[r,n]),t}function OA(n){switch(n){case"processed":case"confirmed":case"finalized":case void 0:return n;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const RL="solana:mainnet",xpe="solana:devnet",_pe="solana:testnet",bpe="solana:localnet",Spe="https://api.mainnet-beta.solana.com";function Epe(n){return n.includes(Spe)?RL:/\bdevnet\b/i.test(n)?xpe:/\btestnet\b/i.test(n)?_pe:/\blocalhost\b/i.test(n)||/\b127\.0\.0\.1\b/.test(n)?bpe:RL}function Ape(n){let e=`${n.domain} wants you to sign in with your Solana account:
`;e+=`${n.address}`,n.statement&&(e+=`

${n.statement}`);const t=[];if(n.uri&&t.push(`URI: ${n.uri}`),n.version&&t.push(`Version: ${n.version}`),n.chainId&&t.push(`Chain ID: ${n.chainId}`),n.nonce&&t.push(`Nonce: ${n.nonce}`),n.issuedAt&&t.push(`Issued At: ${n.issuedAt}`),n.expirationTime&&t.push(`Expiration Time: ${n.expirationTime}`),n.notBefore&&t.push(`Not Before: ${n.notBefore}`),n.requestId&&t.push(`Request ID: ${n.requestId}`),n.resources){t.push("Resources:");for(const r of n.resources)t.push(`- ${r}`)}return t.length&&(e+=`

${t.join(`
`)}`),e}const Yu={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Zu extends Error{constructor(...e){const[t,r,i]=e;super(r),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class U$ extends Error{constructor(...e){const[t,r,i,s]=e;super(i),this.code=r,this.data=s,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function ii(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function NA(n,e){return ii(this,void 0,void 0,function*(){const t=yield crypto.subtle.exportKey("raw",n),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,t),i=new Uint8Array(t.byteLength+r.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(r),t.byteLength),i})}function Tpe(n){return window.btoa(n)}function Cpe(n){return Ape(n)}function Ipe(n){return Tpe(Cpe(n))}const Rpe="solana:signTransactions",PL="solana:cloneAuthorization";function Ppe(n,e){return new Proxy({},{get(t,r){return t[r]==null&&(t[r]=function(i){return ii(this,void 0,void 0,function*(){const{method:s,params:o}=kpe(r,i,n),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield Ope(o.sign_in_payload,a,e)),Mpe(r,a,n)})}),t[r]},defineProperty(){return!1},deleteProperty(){return!1}})}function kpe(n,e,t){let r=e,i=n.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(n){case"authorize":{let{chain:s}=r;if(t==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=r.cluster}r.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}r.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=r;if(s)switch(t){case"legacy":{i="reauthorize",r={auth_token:s,identity:o};break}default:{i="authorize";break}}break}}return{method:i,params:r}}function Mpe(n,e,t){switch(n){case"getCapabilities":{const r=e;switch(t){case"legacy":{const i=[Rpe];return r.supports_clone_authorization===!0&&i.push(PL),Object.assign(Object.assign({},r),{features:i})}case"v1":return Object.assign(Object.assign({},r),{supports_sign_and_send_transactions:!0,supports_clone_authorization:r.features.includes(PL)})}}}return e}function Ope(n,e,t){var r;return ii(this,void 0,void 0,function*(){const i=(r=n.domain)!==null&&r!==void 0?r:window.location.host,s=e.accounts[0].address,o=Ipe(Object.assign(Object.assign({},n),{domain:i,address:s})),a=yield t("sign_messages",{addresses:[s],payloads:[o]});return{address:s,signed_message:o,signature:a.signed_payloads[0].slice(o.length)}})}const _d=4;function Npe(n){if(n>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(_d);return new DataView(e).setUint32(0,n,!1),new Uint8Array(e)}const WC=12,z$=65;function Bpe(n,e,t){return ii(this,void 0,void 0,function*(){const r=Npe(e),i=new Uint8Array(WC);crypto.getRandomValues(i);const s=yield crypto.subtle.encrypt(j$(r,i),t,new TextEncoder().encode(n)),o=new Uint8Array(r.byteLength+i.byteLength+s.byteLength);return o.set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),o.set(new Uint8Array(s),r.byteLength+i.byteLength),o})}function $$(n,e){return ii(this,void 0,void 0,function*(){const t=n.slice(0,_d),r=n.slice(_d,_d+WC),i=n.slice(_d+WC),s=yield crypto.subtle.decrypt(j$(t,r),e,i);return Lpe().decode(s)})}function j$(n,e){return{additionalData:n,iv:e,name:"AES-GCM",tagLength:128}}let BA;function Lpe(){return BA===void 0&&(BA=new TextDecoder("utf-8")),BA}function Dpe(){return ii(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function LA(){return ii(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Fpe(n,e){return ii(this,void 0,void 0,function*(){const t=JSON.stringify(n),r=n.id;return Bpe(t,r,e)})}function Upe(n,e){return ii(this,void 0,void 0,function*(){const t=yield $$(n,e),r=JSON.parse(t);if(Object.hasOwnProperty.call(r,"error"))throw new U$(r.id,r.error.code,r.error.message);return r})}function zpe(n,e,t){return ii(this,void 0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",n.slice(0,z$),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:i},t,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function $pe(n,e){return ii(this,void 0,void 0,function*(){const t=yield $$(n,e),r=JSON.parse(t);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Zu(Yu.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}function jpe(){return H$(49152+Math.floor(Math.random()*(65535-49152+1)))}function H$(n){if(n<49152||n>65535)throw new Zu(Yu.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${n} given.`,{port:n});return n}function Hpe(n){let e="";const t=new Uint8Array(n),r=t.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(t[i]);return window.btoa(e)}function Wpe(n){return n.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const Gpe="solana-wallet";function kL(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function Vpe(n,e){let t=null;if(e){try{t=new URL(e)}catch{}if((t==null?void 0:t.protocol)!=="https:")throw new Zu(Yu.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}t||(t=new URL(`${Gpe}:/`));const r=n.startsWith("/")?n:[...kL(t.pathname),...kL(n)].join("/");return new URL(r,t)}function qpe(n,e,t,r=["v1"]){return ii(this,void 0,void 0,function*(){const i=H$(e),s=yield crypto.subtle.exportKey("raw",n),o=Hpe(s),a=Vpe("v1/associate/local",t);return a.searchParams.set("association",Wpe(o)),a.searchParams.set("port",`${i}`),r.forEach(l=>{a.searchParams.set("v",l)}),a})}const g_={Firefox:0,Other:1};function Xpe(){return navigator.userAgent.indexOf("Firefox/")!==-1?g_.Firefox:g_.Other}function Kpe(){return new Promise((n,e)=>{function t(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){t(),n()}window.addEventListener("blur",r);const i=setTimeout(()=>{t(),e()},2e3)})}let $g=null;function Qpe(n){$g==null&&($g=document.createElement("iframe"),$g.style.display="none",document.body.appendChild($g)),$g.contentWindow.location.href=n.toString()}function Ype(n){return ii(this,void 0,void 0,function*(){if(n.protocol==="https:")window.location.assign(n);else try{const e=Xpe();switch(e){case g_.Firefox:Qpe(n);break;case g_.Other:{const t=Kpe();window.location.assign(n),yield t;break}default:}}catch{throw new Zu(Yu.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function Zpe(n,e){return ii(this,void 0,void 0,function*(){const t=jpe(),r=yield qpe(n,t,e);return yield Ype(r),t})}const ML={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},Jpe="com.solana.mobilewalletadapter.v1";function eme(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Zu(Yu.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function tme(n){let e;try{e=new URL(n)}catch{throw new Zu(Yu.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Zu(Yu.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function OL(n){return new DataView(n).getUint32(0,!1)}function nme(n,e){return ii(this,void 0,void 0,function*(){eme();const t=yield Dpe(),i=`ws://localhost:${yield Zpe(t.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const h=[...ML.retryDelayScheduleMs];return()=>h.length>1?h.shift():h[0]})();let a=1,l=0,u={__type:"disconnected"};return new Promise((h,f)=>{let p;const m={},g=()=>ii(this,void 0,void 0,function*(){if(u.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${u.__type}\`.`);return}p.removeEventListener("open",g);const{associationKeypair:D}=u,j=yield LA();p.send(yield NA(j.publicKey,D.privateKey)),u={__type:"hello_req_sent",associationPublicKey:D.publicKey,ecdhPrivateKey:j.privateKey}}),v=D=>{D.wasClean?u={__type:"disconnected"}:f(new Zu(Yu.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${D.code}: ${D.reason}).`,{closeEvent:D})),S()},x=D=>ii(this,void 0,void 0,function*(){S(),Date.now()-s>=ML.timeoutMs?f(new Zu(Yu.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise(j=>{const H=o();_=window.setTimeout(j,H)}),R())}),b=D=>ii(this,void 0,void 0,function*(){const j=yield D.data.arrayBuffer();switch(u.__type){case"connecting":if(j.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const H=yield LA();p.send(yield NA(H.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:H.privateKey};break;case"connected":try{const G=j.slice(0,_d),K=OL(G);if(K!==l+1)throw new Error("Encrypted message has invalid sequence number");l=K;const te=yield Upe(j,u.sharedSecret),ne=m[te.id];delete m[te.id],ne.resolve(te.result)}catch(G){if(G instanceof U$){const K=m[G.jsonRpcMessageId];delete m[G.jsonRpcMessageId],K.reject(G)}else throw G}break;case"hello_req_sent":{if(j.byteLength===0){const ee=yield LA();p.send(yield NA(ee.publicKey,t.privateKey)),u={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:ee.privateKey};break}const G=yield zpe(j,u.associationPublicKey,u.ecdhPrivateKey),K=j.slice(z$),te=K.byteLength!==0?yield(()=>ii(this,void 0,void 0,function*(){const ee=K.slice(0,_d),L=OL(ee);if(L!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=L,$pe(K,G)}))():{protocol_version:"legacy"};u={__type:"connected",sharedSecret:G,sessionProperties:te};const ne=Ppe(te.protocol_version,(ee,L)=>ii(this,void 0,void 0,function*(){const w=a++;return p.send(yield Fpe({id:w,jsonrpc:"2.0",method:ee,params:L??{}},G)),new Promise((A,O)=>{m[w]={resolve(C){switch(ee){case"authorize":case"reauthorize":{const{wallet_uri_base:k}=C;if(k!=null)try{tme(k)}catch(U){O(U);return}break}}A(C)},reject:O}})}));try{h(yield n(ne))}catch(ee){f(ee)}finally{S(),p.close()}break}}});let S,_;const R=()=>{S&&S(),u={__type:"connecting",associationKeypair:t},s===void 0&&(s=Date.now()),p=new WebSocket(i,[Jpe]),p.addEventListener("open",g),p.addEventListener("close",v),p.addEventListener("error",x),p.addEventListener("message",b),S=()=>{window.clearTimeout(_),p.removeEventListener("open",g),p.removeEventListener("close",v),p.removeEventListener("error",x),p.removeEventListener("message",b)}};R()})})}function rme(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var r=0;r<n.length;r++){var i=n.charAt(r),s=i.charCodeAt(0);if(e[s]!==255)throw new TypeError(i+" is ambiguous");e[s]=r}var o=n.length,a=n.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function h(m){if(m instanceof Uint8Array||(ArrayBuffer.isView(m)?m=new Uint8Array(m.buffer,m.byteOffset,m.byteLength):Array.isArray(m)&&(m=Uint8Array.from(m))),!(m instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(m.length===0)return"";for(var g=0,v=0,x=0,b=m.length;x!==b&&m[x]===0;)x++,g++;for(var S=(b-x)*u+1>>>0,_=new Uint8Array(S);x!==b;){for(var R=m[x],D=0,j=S-1;(R!==0||D<v)&&j!==-1;j--,D++)R+=256*_[j]>>>0,_[j]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");v=D,x++}for(var H=S-v;H!==S&&_[H]===0;)H++;for(var G=a.repeat(g);H<S;++H)G+=n.charAt(_[H]);return G}function f(m){if(typeof m!="string")throw new TypeError("Expected String");if(m.length===0)return new Uint8Array;for(var g=0,v=0,x=0;m[g]===a;)v++,g++;for(var b=(m.length-g)*l+1>>>0,S=new Uint8Array(b);m[g];){var _=e[m.charCodeAt(g)];if(_===255)return;for(var R=0,D=b-1;(_!==0||R<x)&&D!==-1;D--,R++)_+=o*S[D]>>>0,S[D]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");x=R,g++}for(var j=b-x;j!==b&&S[j]===0;)j++;for(var H=new Uint8Array(v+(b-j)),G=v;j!==b;)H[G++]=S[j++];return H}function p(m){var g=f(m);if(g)return g;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:f,decode:p}}var ime=rme;const sme=ime,ome="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var ame=sme(ome);const lme=rl(ame);function DA(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function iw(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function W$(n){return window.btoa(String.fromCharCode.call(null,...n))}function FA(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function NL(n){const e="version"in n?n.serialize():n.serialize({requireAllSignatures:!1,verifySignatures:!1});return W$(e)}function ume(n){const t=n[0]*Sy+1;return PP.deserializeMessageVersion(n.slice(t,n.length))==="legacy"?Ga.from(n):Ay.deserialize(n)}function cme(n,e){return iw(this,void 0,void 0,function*(){return yield nme(r=>{const i=new Proxy({},{get(s,o){if(s[o]==null)switch(o){case"signAndSendTransactions":s[o]=function(a){var{minContextSlot:l,commitment:u,skipPreflight:h,maxRetries:f,waitForCommitmentToSendNextTransaction:p,transactions:m}=a,g=DA(a,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return iw(this,void 0,void 0,function*(){const v=m.map(NL),x={min_context_slot:l,commitment:u,skip_preflight:h,max_retries:f,wait_for_commitment_to_send_next_transaction:p},{signatures:b}=yield r.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},g),Object.values(x).some(_=>_!=null)?{options:x}:null),{payloads:v}));return b.map(FA).map(lme.encode)})};break;case"signMessages":s[o]=function(a){var{payloads:l}=a,u=DA(a,["payloads"]);return iw(this,void 0,void 0,function*(){const h=l.map(W$),{signed_payloads:f}=yield r.signMessages(Object.assign(Object.assign({},u),{payloads:h}));return f.map(FA)})};break;case"signTransactions":s[o]=function(a){var{transactions:l}=a,u=DA(a,["transactions"]);return iw(this,void 0,void 0,function*(){const h=l.map(NL),{signed_payloads:f}=yield r.signTransactions(Object.assign(Object.assign({},u),{payloads:h}));return f.map(FA).map(ume)})};break;default:{s[o]=r[o];break}}return s[o]},defineProperty(){return!1},deleteProperty(){return!1}});return n(i)},e)})}var hme=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},G$={},Uo={};let DP;const dme=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Uo.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Uo.getSymbolTotalCodewords=function(e){return dme[e]};Uo.getBCHDigit=function(n){let e=0;for(;n!==0;)e++,n>>>=1;return e};Uo.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');DP=e};Uo.isKanjiModeEnabled=function(){return typeof DP<"u"};Uo.toSJIS=function(e){return DP(e)};var zb={};(function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function e(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+t)}}n.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},n.from=function(r,i){if(n.isValid(r))return r;try{return e(r)}catch{return i}}})(zb);function V$(){this.buffer=[],this.length=0}V$.prototype={get:function(n){const e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)===1},put:function(n,e){for(let t=0;t<e;t++)this.putBit((n>>>e-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(n){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var fme=V$;function av(n){if(!n||n<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=n,this.data=new Uint8Array(n*n),this.reservedBit=new Uint8Array(n*n)}av.prototype.set=function(n,e,t,r){const i=n*this.size+e;this.data[i]=t,r&&(this.reservedBit[i]=!0)};av.prototype.get=function(n,e){return this.data[n*this.size+e]};av.prototype.xor=function(n,e,t){this.data[n*this.size+e]^=t};av.prototype.isReserved=function(n,e){return this.reservedBit[n*this.size+e]};var pme=av,q$={};(function(n){const e=Uo.getSymbolSize;n.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,s=e(r),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,a=[s-7];for(let l=1;l<i-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},n.getPositions=function(r){const i=[],s=n.getRowColCoords(r),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||i.push([s[a],s[l]]);return i}})(q$);var X$={};const mme=Uo.getSymbolSize,BL=7;X$.getPositions=function(e){const t=mme(e);return[[0,0],[t-BL,0],[0,t-BL]]};var K$={};(function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};n.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},n.from=function(i){return n.isValid(i)?parseInt(i,10):void 0},n.getPenaltyN1=function(i){const s=i.size;let o=0,a=0,l=0,u=null,h=null;for(let f=0;f<s;f++){a=l=0,u=h=null;for(let p=0;p<s;p++){let m=i.get(f,p);m===u?a++:(a>=5&&(o+=e.N1+(a-5)),u=m,a=1),m=i.get(p,f),m===h?l++:(l>=5&&(o+=e.N1+(l-5)),h=m,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},n.getPenaltyN2=function(i){const s=i.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const u=i.get(a,l)+i.get(a,l+1)+i.get(a+1,l)+i.get(a+1,l+1);(u===4||u===0)&&o++}return o*e.N2},n.getPenaltyN3=function(i){const s=i.size;let o=0,a=0,l=0;for(let u=0;u<s;u++){a=l=0;for(let h=0;h<s;h++)a=a<<1&2047|i.get(u,h),h>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|i.get(h,u),h>=10&&(l===1488||l===93)&&o++}return o*e.N3},n.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let l=0;l<o;l++)s+=i.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function t(r,i,s){switch(r){case n.Patterns.PATTERN000:return(i+s)%2===0;case n.Patterns.PATTERN001:return i%2===0;case n.Patterns.PATTERN010:return s%3===0;case n.Patterns.PATTERN011:return(i+s)%3===0;case n.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case n.Patterns.PATTERN101:return i*s%2+i*s%3===0;case n.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case n.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}n.applyMask=function(i,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,t(i,l,a))},n.getBestMask=function(i,s){const o=Object.keys(n.Patterns).length;let a=0,l=1/0;for(let u=0;u<o;u++){s(u),n.applyMask(u,i);const h=n.getPenaltyN1(i)+n.getPenaltyN2(i)+n.getPenaltyN3(i)+n.getPenaltyN4(i);n.applyMask(u,i),h<l&&(l=h,a=u)}return a}})(K$);var $b={};const lh=zb,sw=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ow=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];$b.getBlocksCount=function(e,t){switch(t){case lh.L:return sw[(e-1)*4+0];case lh.M:return sw[(e-1)*4+1];case lh.Q:return sw[(e-1)*4+2];case lh.H:return sw[(e-1)*4+3];default:return}};$b.getTotalCodewordsCount=function(e,t){switch(t){case lh.L:return ow[(e-1)*4+0];case lh.M:return ow[(e-1)*4+1];case lh.Q:return ow[(e-1)*4+2];case lh.H:return ow[(e-1)*4+3];default:return}};var Q$={},jb={};const M0=new Uint8Array(512),y_=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)M0[t]=e,y_[e]=t,e<<=1,e&256&&(e^=285);for(let t=255;t<512;t++)M0[t]=M0[t-255]})();jb.log=function(e){if(e<1)throw new Error("log("+e+")");return y_[e]};jb.exp=function(e){return M0[e]};jb.mul=function(e,t){return e===0||t===0?0:M0[y_[e]+y_[t]]};(function(n){const e=jb;n.mul=function(r,i){const s=new Uint8Array(r.length+i.length-1);for(let o=0;o<r.length;o++)for(let a=0;a<i.length;a++)s[o+a]^=e.mul(r[o],i[a]);return s},n.mod=function(r,i){let s=new Uint8Array(r);for(;s.length-i.length>=0;){const o=s[0];for(let l=0;l<i.length;l++)s[l]^=e.mul(i[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},n.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let s=0;s<r;s++)i=n.mul(i,new Uint8Array([1,e.exp(s)]));return i}})(Q$);const Y$=Q$;function FP(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}FP.prototype.initialize=function(e){this.degree=e,this.genPoly=Y$.generateECPolynomial(this.degree)};FP.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const r=Y$.mod(t,this.genPoly),i=this.degree-r.length;if(i>0){const s=new Uint8Array(this.degree);return s.set(r,i),s}return r};var gme=FP,Z$={},Nh={},UP={};UP.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var lu={};const J$="[0-9]+",yme="[A-Z $%*+\\-./:]+";let Cy="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Cy=Cy.replace(/u/g,"\\u");const vme="(?:(?![A-Z0-9 $%*+\\-./:]|"+Cy+`)(?:.|[\r
]))+`;lu.KANJI=new RegExp(Cy,"g");lu.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");lu.BYTE=new RegExp(vme,"g");lu.NUMERIC=new RegExp(J$,"g");lu.ALPHANUMERIC=new RegExp(yme,"g");const wme=new RegExp("^"+Cy+"$"),xme=new RegExp("^"+J$+"$"),_me=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");lu.testKanji=function(e){return wme.test(e)};lu.testNumeric=function(e){return xme.test(e)};lu.testAlphanumeric=function(e){return _me.test(e)};(function(n){const e=UP,t=lu;n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},n.getBestModeForData=function(s){return t.testNumeric(s)?n.NUMERIC:t.testAlphanumeric(s)?n.ALPHANUMERIC:t.testKanji(s)?n.KANJI:n.BYTE},n.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},n.isValid=function(s){return s&&s.bit&&s.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+i)}}n.from=function(s,o){if(n.isValid(s))return s;try{return r(s)}catch{return o}}})(Nh);(function(n){const e=Uo,t=$b,r=zb,i=Nh,s=UP,o=7973,a=e.getBCHDigit(o);function l(p,m,g){for(let v=1;v<=40;v++)if(m<=n.getCapacity(v,g,p))return v}function u(p,m){return i.getCharCountIndicator(p,m)+4}function h(p,m){let g=0;return p.forEach(function(v){const x=u(v.mode,m);g+=x+v.getBitsLength()}),g}function f(p,m){for(let g=1;g<=40;g++)if(h(p,g)<=n.getCapacity(g,m,i.MIXED))return g}n.from=function(m,g){return s.isValid(m)?parseInt(m,10):g},n.getCapacity=function(m,g,v){if(!s.isValid(m))throw new Error("Invalid QR Code version");typeof v>"u"&&(v=i.BYTE);const x=e.getSymbolTotalCodewords(m),b=t.getTotalCodewordsCount(m,g),S=(x-b)*8;if(v===i.MIXED)return S;const _=S-u(v,m);switch(v){case i.NUMERIC:return Math.floor(_/10*3);case i.ALPHANUMERIC:return Math.floor(_/11*2);case i.KANJI:return Math.floor(_/13);case i.BYTE:default:return Math.floor(_/8)}},n.getBestVersionForData=function(m,g){let v;const x=r.from(g,r.M);if(Array.isArray(m)){if(m.length>1)return f(m,x);if(m.length===0)return 1;v=m[0]}else v=m;return l(v.mode,v.getLength(),x)},n.getEncodedBits=function(m){if(!s.isValid(m)||m<7)throw new Error("Invalid QR Code version");let g=m<<12;for(;e.getBCHDigit(g)-a>=0;)g^=o<<e.getBCHDigit(g)-a;return m<<12|g}})(Z$);var ej={};const GC=Uo,tj=1335,bme=21522,LL=GC.getBCHDigit(tj);ej.getEncodedBits=function(e,t){const r=e.bit<<3|t;let i=r<<10;for(;GC.getBCHDigit(i)-LL>=0;)i^=tj<<GC.getBCHDigit(i)-LL;return(r<<10|i)^bme};var nj={};const Sme=Nh;function Mm(n){this.mode=Sme.NUMERIC,this.data=n.toString()}Mm.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Mm.prototype.getLength=function(){return this.data.length};Mm.prototype.getBitsLength=function(){return Mm.getBitsLength(this.data.length)};Mm.prototype.write=function(e){let t,r,i;for(t=0;t+3<=this.data.length;t+=3)r=this.data.substr(t,3),i=parseInt(r,10),e.put(i,10);const s=this.data.length-t;s>0&&(r=this.data.substr(t),i=parseInt(r,10),e.put(i,s*3+1))};var Eme=Mm;const Ame=Nh,UA=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Om(n){this.mode=Ame.ALPHANUMERIC,this.data=n}Om.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};Om.prototype.getLength=function(){return this.data.length};Om.prototype.getBitsLength=function(){return Om.getBitsLength(this.data.length)};Om.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=UA.indexOf(this.data[t])*45;r+=UA.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(UA.indexOf(this.data[t]),6)};var Tme=Om;const Cme=Nh;function Nm(n){this.mode=Cme.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}Nm.getBitsLength=function(e){return e*8};Nm.prototype.getLength=function(){return this.data.length};Nm.prototype.getBitsLength=function(){return Nm.getBitsLength(this.data.length)};Nm.prototype.write=function(n){for(let e=0,t=this.data.length;e<t;e++)n.put(this.data[e],8)};var Ime=Nm;const Rme=Nh,Pme=Uo;function Bm(n){this.mode=Rme.KANJI,this.data=n}Bm.getBitsLength=function(e){return e*13};Bm.prototype.getLength=function(){return this.data.length};Bm.prototype.getBitsLength=function(){return Bm.getBitsLength(this.data.length)};Bm.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=Pme.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}};var kme=Bm,rj={exports:{}};(function(n){var e={single_source_shortest_paths:function(t,r,i){var s={},o={};o[r]=0;var a=e.PriorityQueue.make();a.push(r,0);for(var l,u,h,f,p,m,g,v,x;!a.empty();){l=a.pop(),u=l.value,f=l.cost,p=t[u]||{};for(h in p)p.hasOwnProperty(h)&&(m=p[h],g=f+m,v=o[h],x=typeof o[h]>"u",(x||v>g)&&(o[h]=g,a.push(h,g),s[h]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var b=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(b)}return s},extract_shortest_path_from_predecessor_list:function(t,r){for(var i=[],s=r;s;)i.push(s),t[s],s=t[s];return i.reverse(),i},find_path:function(t,r,i){var s=e.single_source_shortest_paths(t,r,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(t){var r=e.PriorityQueue,i={},s;t=t||{};for(s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);return i.queue=[],i.sorter=t.sorter||r.default_sorter,i},default_sorter:function(t,r){return t.cost-r.cost},push:function(t,r){var i={value:t,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=e})(rj);var Mme=rj.exports;(function(n){const e=Nh,t=Eme,r=Tme,i=Ime,s=kme,o=lu,a=Uo,l=Mme;function u(b){return unescape(encodeURIComponent(b)).length}function h(b,S,_){const R=[];let D;for(;(D=b.exec(_))!==null;)R.push({data:D[0],index:D.index,mode:S,length:D[0].length});return R}function f(b){const S=h(o.NUMERIC,e.NUMERIC,b),_=h(o.ALPHANUMERIC,e.ALPHANUMERIC,b);let R,D;return a.isKanjiModeEnabled()?(R=h(o.BYTE,e.BYTE,b),D=h(o.KANJI,e.KANJI,b)):(R=h(o.BYTE_KANJI,e.BYTE,b),D=[]),S.concat(_,R,D).sort(function(H,G){return H.index-G.index}).map(function(H){return{data:H.data,mode:H.mode,length:H.length}})}function p(b,S){switch(S){case e.NUMERIC:return t.getBitsLength(b);case e.ALPHANUMERIC:return r.getBitsLength(b);case e.KANJI:return s.getBitsLength(b);case e.BYTE:return i.getBitsLength(b)}}function m(b){return b.reduce(function(S,_){const R=S.length-1>=0?S[S.length-1]:null;return R&&R.mode===_.mode?(S[S.length-1].data+=_.data,S):(S.push(_),S)},[])}function g(b){const S=[];for(let _=0;_<b.length;_++){const R=b[_];switch(R.mode){case e.NUMERIC:S.push([R,{data:R.data,mode:e.ALPHANUMERIC,length:R.length},{data:R.data,mode:e.BYTE,length:R.length}]);break;case e.ALPHANUMERIC:S.push([R,{data:R.data,mode:e.BYTE,length:R.length}]);break;case e.KANJI:S.push([R,{data:R.data,mode:e.BYTE,length:u(R.data)}]);break;case e.BYTE:S.push([{data:R.data,mode:e.BYTE,length:u(R.data)}])}}return S}function v(b,S){const _={},R={start:{}};let D=["start"];for(let j=0;j<b.length;j++){const H=b[j],G=[];for(let K=0;K<H.length;K++){const te=H[K],ne=""+j+K;G.push(ne),_[ne]={node:te,lastCount:0},R[ne]={};for(let ee=0;ee<D.length;ee++){const L=D[ee];_[L]&&_[L].node.mode===te.mode?(R[L][ne]=p(_[L].lastCount+te.length,te.mode)-p(_[L].lastCount,te.mode),_[L].lastCount+=te.length):(_[L]&&(_[L].lastCount=te.length),R[L][ne]=p(te.length,te.mode)+4+e.getCharCountIndicator(te.mode,S))}}D=G}for(let j=0;j<D.length;j++)R[D[j]].end=0;return{map:R,table:_}}function x(b,S){let _;const R=e.getBestModeForData(b);if(_=e.from(S,R),_!==e.BYTE&&_.bit<R.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(_)+`.
 Suggested mode is: `+e.toString(R));switch(_===e.KANJI&&!a.isKanjiModeEnabled()&&(_=e.BYTE),_){case e.NUMERIC:return new t(b);case e.ALPHANUMERIC:return new r(b);case e.KANJI:return new s(b);case e.BYTE:return new i(b)}}n.fromArray=function(S){return S.reduce(function(_,R){return typeof R=="string"?_.push(x(R,null)):R.data&&_.push(x(R.data,R.mode)),_},[])},n.fromString=function(S,_){const R=f(S,a.isKanjiModeEnabled()),D=g(R),j=v(D,_),H=l.find_path(j.map,"start","end"),G=[];for(let K=1;K<H.length-1;K++)G.push(j.table[H[K]].node);return n.fromArray(m(G))},n.rawSplit=function(S){return n.fromArray(f(S,a.isKanjiModeEnabled()))}})(nj);const Hb=Uo,zA=zb,Ome=fme,Nme=pme,Bme=q$,Lme=X$,VC=K$,qC=$b,Dme=gme,v_=Z$,Fme=ej,Ume=Nh,$A=nj;function zme(n,e){const t=n.size,r=Lme.getPositions(e);for(let i=0;i<r.length;i++){const s=r[i][0],o=r[i][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||t<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||t<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?n.set(s+a,o+l,!0,!0):n.set(s+a,o+l,!1,!0))}}function $me(n){const e=n.size;for(let t=8;t<e-8;t++){const r=t%2===0;n.set(t,6,r,!0),n.set(6,t,r,!0)}}function jme(n,e){const t=Bme.getPositions(e);for(let r=0;r<t.length;r++){const i=t[r][0],s=t[r][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?n.set(i+o,s+a,!0,!0):n.set(i+o,s+a,!1,!0)}}function Hme(n,e){const t=n.size,r=v_.getEncodedBits(e);let i,s,o;for(let a=0;a<18;a++)i=Math.floor(a/3),s=a%3+t-8-3,o=(r>>a&1)===1,n.set(i,s,o,!0),n.set(s,i,o,!0)}function jA(n,e,t){const r=n.size,i=Fme.getEncodedBits(e,t);let s,o;for(s=0;s<15;s++)o=(i>>s&1)===1,s<6?n.set(s,8,o,!0):s<8?n.set(s+1,8,o,!0):n.set(r-15+s,8,o,!0),s<8?n.set(8,r-s-1,o,!0):s<9?n.set(8,15-s-1+1,o,!0):n.set(8,15-s-1,o,!0);n.set(r-8,8,1,!0)}function Wme(n,e){const t=n.size;let r=-1,i=t-1,s=7,o=0;for(let a=t-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!n.isReserved(i,a-l)){let u=!1;o<e.length&&(u=(e[o]>>>s&1)===1),n.set(i,a-l,u),s--,s===-1&&(o++,s=7)}if(i+=r,i<0||t<=i){i-=r,r=-r;break}}}function Gme(n,e,t){const r=new Ome;t.forEach(function(l){r.put(l.mode.bit,4),r.put(l.getLength(),Ume.getCharCountIndicator(l.mode,n)),l.write(r)});const i=Hb.getSymbolTotalCodewords(n),s=qC.getTotalCodewordsCount(n,e),o=(i-s)*8;for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const a=(o-r.getLengthInBits())/8;for(let l=0;l<a;l++)r.put(l%2?17:236,8);return Vme(r,n,e)}function Vme(n,e,t){const r=Hb.getSymbolTotalCodewords(e),i=qC.getTotalCodewordsCount(e,t),s=r-i,o=qC.getBlocksCount(e,t),a=r%o,l=o-a,u=Math.floor(r/o),h=Math.floor(s/o),f=h+1,p=u-h,m=new Dme(p);let g=0;const v=new Array(o),x=new Array(o);let b=0;const S=new Uint8Array(n.buffer);for(let H=0;H<o;H++){const G=H<l?h:f;v[H]=S.slice(g,g+G),x[H]=m.encode(v[H]),g+=G,b=Math.max(b,G)}const _=new Uint8Array(r);let R=0,D,j;for(D=0;D<b;D++)for(j=0;j<o;j++)D<v[j].length&&(_[R++]=v[j][D]);for(D=0;D<p;D++)for(j=0;j<o;j++)_[R++]=x[j][D];return _}function qme(n,e,t,r){let i;if(Array.isArray(n))i=$A.fromArray(n);else if(typeof n=="string"){let u=e;if(!u){const h=$A.rawSplit(n);u=v_.getBestVersionForData(h,t)}i=$A.fromString(n,u||40)}else throw new Error("Invalid data");const s=v_.getBestVersionForData(i,t);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=Gme(e,t,i),a=Hb.getSymbolSize(e),l=new Nme(a);return zme(l,e),$me(l),jme(l,e),jA(l,t,0),e>=7&&Hme(l,e),Wme(l,o),isNaN(r)&&(r=VC.getBestMask(l,jA.bind(null,l,t))),VC.applyMask(r,l),jA(l,t,r),{modules:l,version:e,errorCorrectionLevel:t,maskPattern:r,segments:i}}G$.create=function(e,t){if(typeof e>"u"||e==="")throw new Error("No input text");let r=zA.M,i,s;return typeof t<"u"&&(r=zA.from(t.errorCorrectionLevel,zA.M),i=v_.from(t.version),s=VC.from(t.maskPattern),t.toSJISFunc&&Hb.setToSJISFunction(t.toSJISFunc)),qme(e,i,r,s)};var ij={},zP={};(function(n){function e(t){if(typeof t=="number"&&(t=t.toString()),typeof t!="string")throw new Error("Color should be defined as hex string");let r=t.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+t);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(s){return[s,s]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}n.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,s=r.width&&r.width>=21?r.width:void 0,o=r.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(r.color.dark||"#000000ff"),light:e(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},n.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},n.getImageWidth=function(r,i){const s=n.getScale(r,i);return Math.floor((r+i.margin*2)*s)},n.qrToImageData=function(r,i,s){const o=i.modules.size,a=i.modules.data,l=n.getScale(o,s),u=Math.floor((o+s.margin*2)*l),h=s.margin*l,f=[s.color.light,s.color.dark];for(let p=0;p<u;p++)for(let m=0;m<u;m++){let g=(p*u+m)*4,v=s.color.light;if(p>=h&&m>=h&&p<u-h&&m<u-h){const x=Math.floor((p-h)/l),b=Math.floor((m-h)/l);v=f[a[x*o+b]?1:0]}r[g++]=v.r,r[g++]=v.g,r[g++]=v.b,r[g]=v.a}}})(zP);(function(n){const e=zP;function t(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(s,o,a){let l=a,u=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(u=r()),l=e.getOptions(l);const h=e.getImageWidth(s.modules.size,l),f=u.getContext("2d"),p=f.createImageData(h,h);return e.qrToImageData(p.data,s,l),t(f,u,h),f.putImageData(p,0,0),u},n.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const u=n.render(s,o,l),h=l.type||"image/png",f=l.rendererOpts||{};return u.toDataURL(h,f.quality)}})(ij);var sj={};const Xme=zP;function DL(n,e){const t=n.a/255,r=e+'="'+n.hex+'"';return t<1?r+" "+e+'-opacity="'+t.toFixed(2).slice(1)+'"':r}function HA(n,e,t){let r=n+e;return typeof t<"u"&&(r+=" "+t),r}function Kme(n,e,t){let r="",i=0,s=!1,o=0;for(let a=0;a<n.length;a++){const l=Math.floor(a%e),u=Math.floor(a/e);!l&&!s&&(s=!0),n[a]?(o++,a>0&&l>0&&n[a-1]||(r+=s?HA("M",l+t,.5+u+t):HA("m",i,0),i=0,s=!1),l+1<e&&n[a+1]||(r+=HA("h",o),o=0)):i++}return r}sj.render=function(e,t,r){const i=Xme.getOptions(t),s=e.modules.size,o=e.modules.data,a=s+i.margin*2,l=i.color.light.a?"<path "+DL(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",u="<path "+DL(i.color.dark,"stroke")+' d="'+Kme(o,s,i.margin)+'"/>',h='viewBox="0 0 '+a+" "+a+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+h+' shape-rendering="crispEdges">'+l+u+`</svg>
`;return typeof r=="function"&&r(null,p),p};const Qme=hme,XC=G$,oj=ij,Yme=sj;function $P(n,e,t,r,i){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!Qme())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(i=t,t=e,e=r=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=r,r=void 0):(i=r,r=t,t=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(t=e,e=r=void 0):o===2&&!e.getContext&&(r=t,t=e,e=void 0),new Promise(function(l,u){try{const h=XC.create(t,r);l(n(h,e,r))}catch(h){u(h)}})}try{const l=XC.create(t,r);i(null,n(l,e,r))}catch(l){i(l)}}XC.create;$P.bind(null,oj.render);$P.bind(null,oj.renderToDataURL);$P.bind(null,function(n,e,t){return Yme.render(n,t)});function gn(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(r.next(h))}catch(f){o(f)}}function l(h){try{u(r.throw(h))}catch(f){o(f)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((r=r.apply(n,e||[])).next())})}function Fw(n){return new Uint8Array(window.atob(n).split("").map(e=>e.charCodeAt(0)))}function Zme(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}const Dc="Mobile Wallet Adapter",Jme=64;function ege(n){const e=Fw(n);return new ot(e)}function FL(n){return"version"in n}function tge(n){switch(n){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet"}}class nge extends gpe{constructor(e){var t;super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=Dc,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState=Zme()?vn.Loadable:vn.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._chain=(t=e.chain)!==null&&t!==void 0?t:tge(e.cluster),this._hostAuthority=e.remoteHostAuthority,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==vn.Unsupported&&this._authorizationResultCache.get().then(r=>{r&&this.declareWalletAsInstalled()})}get publicKey(){if(this._publicKey==null&&this._selectedAddress!=null)try{this._publicKey=ege(this._selectedAddress)}catch(e){throw new m_(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==vn.Installed&&this.emit("readyStateChange",this._readyState=vn.Installed)}runWithGuard(e){return gn(this,void 0,void 0,function*(){try{return yield e()}catch(t){throw this.emit("error",t),t}})}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return gn(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return gn(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){if(this._readyState!==vn.Installed&&this._readyState!==vn.Loadable)throw new jd;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new Ep(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}connect(){return gn(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){if(this._readyState!==vn.Installed&&this._readyState!==vn.Loadable)throw new jd;this._connecting=!0;try{yield this.performAuthorization()}catch(e){throw new Ep(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))})}performAuthorization(e){return gn(this,void 0,void 0,function*(){try{const t=yield this._authorizationResultCache.get();return t?(this.handleAuthorizationResult(t),t):yield this.transact(r=>gn(this,void 0,void 0,function*(){const i=yield r.authorize({chain:this._chain,identity:this._appIdentity,sign_in_payload:e});return Promise.all([this._authorizationResultCache.set(i),this.handleAuthorizationResult(i)]),i}))}catch(t){throw new Ep(t instanceof Error&&t.message||"Unknown error",t)}})}handleAuthorizationResult(e){var t;return gn(this,void 0,void 0,function*(){const r=this._authorizationResult==null||((t=this._authorizationResult)===null||t===void 0?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((i,s)=>i.address!==e.accounts[s].address);if(this._authorizationResult=e,this.declareWalletAsInstalled(),r){const i=yield this._addressSelector.select(e.accounts.map(({address:s})=>s));i!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey))}})}performReauthorization(e,t){return gn(this,void 0,void 0,function*(){try{const r=yield e.authorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)])}catch(r){throw this.disconnect(),new BP(r instanceof Error&&(r==null?void 0:r.message)||"Unknown error",r)}})}disconnect(){return gn(this,void 0,void 0,function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")})}transact(e){var t;return gn(this,void 0,void 0,function*(){const r=(t=this._authorizationResult)===null||t===void 0?void 0:t.wallet_uri_base,i=r?{baseUri:r}:void 0,s=this._hostAuthority?{remoteHostAuthority:this._hostAuthority}:void 0,o=this._connectionGeneration;try{return yield cme(e,Object.assign(Object.assign({},i),s))}catch(a){throw this._connectionGeneration!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield this._onWalletNotFound(this)),a}})}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new ro;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return gn(this,void 0,void 0,function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact(r=>gn(this,void 0,void 0,function*(){return yield this.performReauthorization(r,t),yield r.signTransactions({transactions:e})}))}catch(r){throw new Bu(r==null?void 0:r.message,r)}})}sendTransaction(e,t,r){return gn(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){const{authToken:i}=this.assertIsAuthorized(),s=r==null?void 0:r.minContextSlot;try{return yield this.transact(o=>gn(this,void 0,void 0,function*(){function a(){let f;switch(t.commitment){case"confirmed":case"finalized":case"processed":f=t.commitment;break;default:f="finalized"}let p;switch(r==null?void 0:r.preflightCommitment){case"confirmed":case"finalized":case"processed":p=r.preflightCommitment;break;case void 0:p=f;break;default:p="finalized"}return(p==="finalized"?2:p==="confirmed"?1:0)<(f==="finalized"?2:f==="confirmed"?1:0)?p:f}const[l,u,h]=yield Promise.all([o.getCapabilities(),this.performReauthorization(o,i),FL(e)?null:(()=>gn(this,void 0,void 0,function*(){var f;if(e.feePayer||(e.feePayer=(f=this.publicKey)!==null&&f!==void 0?f:void 0),e.recentBlockhash==null){const{blockhash:p}=yield t.getLatestBlockhash({commitment:a()});e.recentBlockhash=p}}))()]);if(l.supports_sign_and_send_transactions)return(yield o.signAndSendTransactions({minContextSlot:s,transactions:[e]}))[0];{const[f]=yield o.signTransactions({transactions:[e]});if(FL(f))return yield t.sendTransaction(f);{const p=f.serialize();return yield t.sendRawTransaction(p,Object.assign(Object.assign({},r),{preflightCommitment:a()}))}}}))}catch(o){throw new oh(o==null?void 0:o.message,o)}}))})}signTransaction(e){return gn(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){const[t]=yield this.performSignTransactions([e]);return t}))})}signAllTransactions(e){return gn(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){return yield this.performSignTransactions(e)}))})}signMessage(e){return gn(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){const{authToken:t,selectedAddress:r}=this.assertIsAuthorized();try{return yield this.transact(i=>gn(this,void 0,void 0,function*(){yield this.performReauthorization(i,t);const[s]=yield i.signMessages({addresses:[r],payloads:[e]});return s.slice(-Jme)}))}catch(i){throw new LP(i==null?void 0:i.message,i)}}))})}signIn(e){return gn(this,void 0,void 0,function*(){return yield this.runWithGuard(()=>gn(this,void 0,void 0,function*(){var t,r;if(this._readyState!==vn.Installed&&this._readyState!==vn.Loadable)throw new jd;this._connecting=!0;try{const i=yield this.performAuthorization(Object.assign(Object.assign({},e),{domain:(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const s=i.sign_in_result.address;return{account:Object.assign(Object.assign({},(r=i.accounts.find(a=>a.address==s))!==null&&r!==void 0?r:{address:s}),{publicKey:Fw(s)}),signedMessage:Fw(i.sign_in_result.signed_message),signature:Fw(i.sign_in_result.signature)}}catch(i){throw new Ep(i instanceof Error&&i.message||"Unknown error",i)}finally{this._connecting=!1}}))})}}function rge(){return{select(n){return gn(this,void 0,void 0,function*(){return n[0]})}}}const WA="SolanaMobileWalletAdapterDefaultAuthorizationCache";function ige(){let n;try{n=window.localStorage}catch{}return{clear(){return gn(this,void 0,void 0,function*(){if(n)try{n.removeItem(WA)}catch{}})},get(){return gn(this,void 0,void 0,function*(){if(n)try{return JSON.parse(n.getItem(WA))||void 0}catch{}})},set(e){return gn(this,void 0,void 0,function*(){if(n)try{n.setItem(WA,JSON.stringify(e))}catch{}})}}}function sge(n){return gn(this,void 0,void 0,function*(){typeof window<"u"&&window.location.assign(n.url)})}function oge(){return sge}globalThis&&globalThis.__classPrivateFieldGet;globalThis&&globalThis.__classPrivateFieldSet;function age(n,e){if(n===e)return!0;const t=n.length;if(t!==e.length)return!1;for(let r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function lge(n){if(n.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<n.length;u++){const h=n.charAt(u),f=h.charCodeAt(0);if(e[f]!==255)throw new TypeError(h+" is ambiguous");e[f]=u}const t=n.length,r=n.charAt(0),i=Math.log(t)/Math.log(256),s=Math.log(256)/Math.log(t);function o(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let h=0,f=0,p=0;const m=u.length;for(;p!==m&&u[p]===0;)p++,h++;const g=(m-p)*s+1>>>0,v=new Uint8Array(g);for(;p!==m;){let S=u[p],_=0;for(let R=g-1;(S!==0||_<f)&&R!==-1;R--,_++)S+=256*v[R]>>>0,v[R]=S%t>>>0,S=S/t>>>0;if(S!==0)throw new Error("Non-zero carry");f=_,p++}let x=g-f;for(;x!==g&&v[x]===0;)x++;let b=r.repeat(h);for(;x<g;++x)b+=n.charAt(v[x]);return b}function a(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let h=0,f=0,p=0;for(;u[h]===r;)f++,h++;const m=(u.length-h)*i+1>>>0,g=new Uint8Array(m);for(;u[h];){let S=e[u.charCodeAt(h)];if(S===255)return;let _=0;for(let R=m-1;(S!==0||_<p)&&R!==-1;R--,_++)S+=t*g[R]>>>0,g[R]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");p=_,h++}let v=m-p;for(;v!==m&&g[v]===0;)v++;const x=new Uint8Array(f+(m-v));let b=f;for(;v!==m;)x[b++]=g[v++];return x}function l(u){const h=a(u);if(h)return h;throw new Error("Non-base"+t+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var uge="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const aj=lge(uge);var Jr=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},ct=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Wi,Ys,bd,Sd,ld,l0,w_,yn,x_,KC,Uw,QC,O0,YC,UL,zL,$L,jL;class cge extends O${constructor({wallet:e}){super(),Wi.add(this),Ys.set(this,void 0),bd.set(this,void 0),Sd.set(this,void 0),ld.set(this,void 0),l0.set(this,void 0),w_.set(this,void 0),yn.set(this,void 0),x_.set(this,typeof window>"u"||typeof document>"u"?vn.Unsupported:vn.Installed),YC.set(this,t=>{if("accounts"in t){const r=ct(this,yn,"f").accounts[0];ct(this,Ys,"f")&&!ct(this,ld,"f")&&r!==ct(this,Ys,"f")&&(r?ct(this,Wi,"m",Uw).call(this,r):(this.emit("error",new BP),ct(this,Wi,"m",QC).call(this)))}"features"in t&&ct(this,Wi,"m",O0).call(this)}),Jr(this,yn,e,"f"),Jr(this,Ys,null,"f"),Jr(this,bd,null,"f"),Jr(this,Sd,!1,"f"),Jr(this,ld,!1,"f"),Jr(this,l0,ct(this,yn,"f").features[L$].on("change",ct(this,YC,"f")),"f"),ct(this,Wi,"m",O0).call(this)}get name(){return ct(this,yn,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return ct(this,yn,"f").icon}get readyState(){return ct(this,x_,"f")}get publicKey(){return ct(this,bd,"f")}get connecting(){return ct(this,Sd,"f")}get supportedTransactionVersions(){return ct(this,w_,"f")}get wallet(){return ct(this,yn,"f")}get standard(){return!0}destroy(){Jr(this,Ys,null,"f"),Jr(this,bd,null,"f"),Jr(this,Sd,!1,"f"),Jr(this,ld,!1,"f");const e=ct(this,l0,"f");e&&(Jr(this,l0,null,"f"),e())}async autoConnect(){return ct(this,Wi,"m",KC).call(this,{silent:!0})}async connect(){return ct(this,Wi,"m",KC).call(this)}async disconnect(){if(CL in ct(this,yn,"f").features)try{Jr(this,ld,!0,"f"),await ct(this,yn,"f").features[CL].disconnect()}catch(e){this.emit("error",new M$(e==null?void 0:e.message,e))}finally{Jr(this,ld,!1,"f")}ct(this,Wi,"m",QC).call(this)}async sendTransaction(e,t,r={}){try{const i=ct(this,Ys,"f");if(!i)throw new ro;let s;if(jc in ct(this,yn,"f").features)if(i.features.includes(jc))s=jc;else if(Hi in ct(this,yn,"f").features&&i.features.includes(Hi))s=Hi;else throw new xd;else if(Hi in ct(this,yn,"f").features){if(!i.features.includes(Hi))throw new xd;s=Hi}else throw new a0;const o=Epe(t.rpcEndpoint);if(!i.chains.includes(o))throw new oh;try{const{signers:a,...l}=r;let u;if(ah(e)?(a!=null&&a.length&&e.sign(a),u=e.serialize()):(e=await this.prepareTransaction(e,t,l),a!=null&&a.length&&e.partialSign(...a),u=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===jc){const[h]=await ct(this,yn,"f").features[jc].signAndSendTransaction({account:i,chain:o,transaction:u,options:{preflightCommitment:OA(l.preflightCommitment||t.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return aj.encode(h.signature)}else{const[h]=await ct(this,yn,"f").features[Hi].signTransaction({account:i,chain:o,transaction:u,options:{preflightCommitment:OA(l.preflightCommitment||t.commitment),minContextSlot:l.minContextSlot}});return await t.sendRawTransaction(h.signedTransaction,{...l,preflightCommitment:OA(l.preflightCommitment||t.commitment)})}}catch(a){throw a instanceof Ss?a:new oh(a==null?void 0:a.message,a)}}catch(i){throw this.emit("error",i),i}}}Ys=new WeakMap,bd=new WeakMap,Sd=new WeakMap,ld=new WeakMap,l0=new WeakMap,w_=new WeakMap,yn=new WeakMap,x_=new WeakMap,YC=new WeakMap,Wi=new WeakSet,KC=async function(e){try{if(this.connected||this.connecting)return;if(ct(this,x_,"f")!==vn.Installed)throw new jd;if(Jr(this,Sd,!0,"f"),!ct(this,yn,"f").accounts.length)try{await ct(this,yn,"f").features[B$].connect(e)}catch(r){throw new Ep(r==null?void 0:r.message,r)}const t=ct(this,yn,"f").accounts[0];if(!t)throw new xd;ct(this,Wi,"m",Uw).call(this,t)}catch(t){throw this.emit("error",t),t}finally{Jr(this,Sd,!1,"f")}},Uw=function(e){let t;try{t=new ot(e.address)}catch(r){throw new m_(r==null?void 0:r.message,r)}Jr(this,Ys,e,"f"),Jr(this,bd,t,"f"),ct(this,Wi,"m",O0).call(this),this.emit("connect",t)},QC=function(){Jr(this,Ys,null,"f"),Jr(this,bd,null,"f"),ct(this,Wi,"m",O0).call(this),this.emit("disconnect")},O0=function(){var t,r;const e=jc in ct(this,yn,"f").features?ct(this,yn,"f").features[jc].supportedTransactionVersions:ct(this,yn,"f").features[Hi].supportedTransactionVersions;Jr(this,w_,age(e,["legacy"])?null:new Set(e),"f"),Hi in ct(this,yn,"f").features&&((t=ct(this,Ys,"f"))!=null&&t.features.includes(Hi))?(this.signTransaction=ct(this,Wi,"m",UL),this.signAllTransactions=ct(this,Wi,"m",zL)):(delete this.signTransaction,delete this.signAllTransactions),zg in ct(this,yn,"f").features&&((r=ct(this,Ys,"f"))!=null&&r.features.includes(zg))?this.signMessage=ct(this,Wi,"m",$L):delete this.signMessage,MA in ct(this,yn,"f").features?this.signIn=ct(this,Wi,"m",jL):delete this.signIn},UL=async function(e){try{const t=ct(this,Ys,"f");if(!t)throw new ro;if(!(Hi in ct(this,yn,"f").features))throw new a0;if(!t.features.includes(Hi))throw new xd;try{const i=(await ct(this,yn,"f").features[Hi].signTransaction({account:t,transaction:ah(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ah(e)?Ay.deserialize(i):Ga.from(i)}catch(r){throw r instanceof Ss?r:new Bu(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},zL=async function(e){try{const t=ct(this,Ys,"f");if(!t)throw new ro;if(!(Hi in ct(this,yn,"f").features))throw new a0;if(!t.features.includes(Hi))throw new xd;try{const r=await ct(this,yn,"f").features[Hi].signTransaction(...e.map(i=>({account:t,transaction:ah(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=r[s].signedTransaction;return ah(i)?Ay.deserialize(o):Ga.from(o)})}catch(r){throw new Bu(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},$L=async function(e){try{const t=ct(this,Ys,"f");if(!t)throw new ro;if(!(zg in ct(this,yn,"f").features))throw new a0;if(!t.features.includes(zg))throw new xd;try{return(await ct(this,yn,"f").features[zg].signMessage({account:t,message:e}))[0].signature}catch(r){throw new LP(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}},jL=async function(e={}){try{if(!(MA in ct(this,yn,"f").features))throw new a0;let t;try{[t]=await ct(this,yn,"f").features[MA].signIn(e)}catch(r){throw new TL(r==null?void 0:r.message,r)}if(!t)throw new TL;return ct(this,Wi,"m",Uw).call(this,t.account),t}catch(t){throw this.emit("error",t),t}};const hge=ype;var dge=globalThis&&globalThis.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},fge=globalThis&&globalThis.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},zw;let bo;const Wb=new Set;function pge(n){N0=void 0,Wb.add(n)}function mge(n){N0=void 0,Wb.delete(n)}const Ap={};function gge(){if(bo||(bo=Object.freeze({register:HL,get:yge,on:vge}),typeof window>"u"))return bo;const n=Object.freeze({register:HL});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(n))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new wge(n))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return bo}function HL(...n){var e;return n=n.filter(t=>!Wb.has(t)),n.length?(n.forEach(t=>pge(t)),(e=Ap.register)==null||e.forEach(t=>ZC(()=>t(...n))),function(){var r;n.forEach(i=>mge(i)),(r=Ap.unregister)==null||r.forEach(i=>ZC(()=>i(...n)))}):()=>{}}let N0;function yge(){return N0||(N0=[...Wb]),N0}function vge(n,e){var t;return(t=Ap[n])!=null&&t.push(e)||(Ap[n]=[e]),function(){var i;Ap[n]=(i=Ap[n])==null?void 0:i.filter(s=>e!==s)}}function ZC(n){try{n()}catch(e){console.error(e)}}class wge extends Event{get detail(){return dge(this,zw,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),zw.set(this,void 0),fge(this,zw,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}zw=new WeakMap;function xge(){if(bo||(bo=gge(),typeof window>"u"))return bo;const n=window.navigator.wallets||[];if(!Array.isArray(n))return console.error("window.navigator.wallets is not an array"),bo;const{register:e}=bo,t=(...r)=>r.forEach(i=>ZC(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:t})})}catch{return console.error("window.navigator.wallets could not be set"),bo}return t(...n),bo}function _ge(n){const e=WL(()=>new Set),{get:t,on:r}=WL(()=>xge()),[i,s]=Y.useState(()=>GL(t()));Y.useEffect(()=>{const a=[r("register",(...l)=>s(u=>[...u,...GL(l)])),r("unregister",(...l)=>s(u=>u.filter(h=>l.some(f=>f===h.wallet))))];return()=>a.forEach(l=>l())},[r]);const o=bge(i);return Y.useEffect(()=>{if(!o)return;const a=new Set(i);new Set(o.filter(u=>!a.has(u))).forEach(u=>u.destroy())},[o,i]),Y.useEffect(()=>()=>i.forEach(a=>a.destroy()),[]),Y.useMemo(()=>[...i,...n.filter(({name:a})=>i.some(l=>l.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[i,n,e])}function WL(n){const e=Y.useRef();return e.current||(e.current={value:n()}),e.current.value}function bge(n){const e=Y.useRef();return Y.useEffect(()=>{e.current=n}),e.current}function GL(n){return n.filter(hge).map(e=>new cge({wallet:e}))}var Xp;(function(n){n[n.DESKTOP_WEB=0]="DESKTOP_WEB",n[n.MOBILE_WEB=1]="MOBILE_WEB"})(Xp||(Xp={}));function Sge(n){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(n)}function Ege({adapters:n,userAgentString:e}){return n.some(t=>t.name!==Dc&&t.readyState===vn.Installed)?Xp.DESKTOP_WEB:e&&/android/i.test(e)&&!Sge(e)?Xp.MOBILE_WEB:Xp.DESKTOP_WEB}function Age(n){return n?/devnet/i.test(n)?"devnet":/testnet/i.test(n)?"testnet":"mainnet-beta":"mainnet-beta"}function Tge({children:n,wallets:e,adapter:t,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:a}){const l=Y.useRef(!1),[u,h]=Y.useState(!1),f=Y.useRef(!1),[p,m]=Y.useState(!1),[g,v]=Y.useState(()=>(t==null?void 0:t.publicKey)??null),[x,b]=Y.useState(()=>(t==null?void 0:t.connected)??!1),S=Y.useRef(o);Y.useEffect(()=>(S.current=o,()=>{S.current=void 0}),[o]);const _=Y.useRef((A,O)=>(r.current||(S.current?S.current(A,O):(console.error(A,O),A instanceof jd&&typeof window<"u"&&O&&window.open(O.url,"_blank"))),A)),[R,D]=Y.useState(()=>e.map(A=>({adapter:A,readyState:A.readyState})).filter(({readyState:A})=>A!==vn.Unsupported));Y.useEffect(()=>{D(O=>e.map((C,k)=>{const U=O[k];return U&&U.adapter===C&&U.readyState===C.readyState?U:{adapter:C,readyState:C.readyState}}).filter(({readyState:C})=>C!==vn.Unsupported));function A(O){D(C=>{const k=C.findIndex(({adapter:z})=>z===this);if(k===-1)return C;const{adapter:U}=C[k];return[...C.slice(0,k),{adapter:U,readyState:O},...C.slice(k+1)].filter(({readyState:z})=>z!==vn.Unsupported)})}return e.forEach(O=>O.on("readyStateChange",A,O)),()=>{e.forEach(O=>O.off("readyStateChange",A,O))}},[t,e]);const j=Y.useMemo(()=>R.find(A=>A.adapter===t)??null,[t,R]);Y.useEffect(()=>{if(!t)return;const A=k=>{v(k),l.current=!1,h(!1),b(!0),f.current=!1,m(!1)},O=()=>{r.current||(v(null),l.current=!1,h(!1),b(!1),f.current=!1,m(!1))},C=k=>{_.current(k,t)};return t.on("connect",A),t.on("disconnect",O),t.on("error",C),()=>{t.off("connect",A),t.off("disconnect",O),t.off("error",C),O()}},[t,r]);const H=Y.useRef(!1);Y.useEffect(()=>()=>{H.current=!1},[t]),Y.useEffect(()=>{H.current||l.current||x||!i||!((j==null?void 0:j.readyState)===vn.Installed||(j==null?void 0:j.readyState)===vn.Loadable)||(l.current=!0,h(!0),H.current=!0,async function(){try{await i()}catch{s()}finally{h(!1),l.current=!1}}())},[x,i,s,j]);const G=Y.useCallback(async(A,O,C)=>{if(!t)throw _.current(new IL);if(!x)throw _.current(new ro,t);return await t.sendTransaction(A,O,C)},[t,x]),K=Y.useMemo(()=>t&&"signTransaction"in t?async A=>{if(!x)throw _.current(new ro,t);return await t.signTransaction(A)}:void 0,[t,x]),te=Y.useMemo(()=>t&&"signAllTransactions"in t?async A=>{if(!x)throw _.current(new ro,t);return await t.signAllTransactions(A)}:void 0,[t,x]),ne=Y.useMemo(()=>t&&"signMessage"in t?async A=>{if(!x)throw _.current(new ro,t);return await t.signMessage(A)}:void 0,[t,x]),ee=Y.useMemo(()=>t&&"signIn"in t?async A=>await t.signIn(A):void 0,[t]),L=Y.useCallback(async()=>{if(l.current||f.current||j!=null&&j.adapter.connected)return;if(!j)throw _.current(new IL);const{adapter:A,readyState:O}=j;if(!(O===vn.Installed||O===vn.Loadable))throw _.current(new jd,A);l.current=!0,h(!0);try{await A.connect()}catch(C){throw s(),C}finally{h(!1),l.current=!1}},[s,j]),w=Y.useCallback(async()=>{if(!f.current&&t){f.current=!0,m(!0);try{await t.disconnect()}finally{m(!1),f.current=!1}}},[t]);return kt.createElement(D$.Provider,{value:{autoConnect:!!i,wallets:R,wallet:j,publicKey:g,connected:x,connecting:u,disconnecting:p,select:a,connect:L,disconnect:w,sendTransaction:G,signTransaction:K,signAllTransactions:te,signMessage:ne,signIn:ee}},n)}let GA;function Cge(){var n;return GA===void 0&&(GA=((n=globalThis.navigator)==null?void 0:n.userAgent)??null),GA}function aw(n){const e=Cge();return Ege({adapters:n,userAgentString:e})===Xp.MOBILE_WEB}function Ige(){const n=globalThis.location;if(n)return`${n.protocol}//${n.host}`}function Rge({children:n,wallets:e,autoConnect:t,localStorageKey:r="walletName",onError:i}){const{connection:s}=hpe(),o=_ge(e),a=Y.useMemo(()=>{if(!aw(o))return null;const S=o.find(_=>_.name===Dc);return S||new nge({addressSelector:rge(),appIdentity:{uri:Ige()},authorizationResultCache:ige(),cluster:Age(s==null?void 0:s.rpcEndpoint),onWalletNotFound:oge()})},[o,s==null?void 0:s.rpcEndpoint]),l=Y.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[u,h]=wpe(r,aw(o)?Dc:null),f=Y.useMemo(()=>l.find(S=>S.name===u)??null,[l,u]),p=Y.useCallback(S=>{u!==S&&(f&&f.name!==Dc&&f.disconnect(),h(S))},[f,h,u]);Y.useEffect(()=>{if(!f)return;function S(){v.current||u===Dc&&aw(o)||h(null)}return f.on("disconnect",S),()=>{f.off("disconnect",S)}},[f,o,h,u]);const m=Y.useRef(!1),g=Y.useMemo(()=>{if(!(!t||!f))return async()=>{(t===!0||await t(f))&&(m.current?await f.connect():await f.autoConnect())}},[t,f]),v=Y.useRef(!1);Y.useEffect(()=>{if(u===Dc&&aw(o)){v.current=!1;return}function S(){v.current=!0}return window.addEventListener("beforeunload",S),()=>{window.removeEventListener("beforeunload",S)}},[o,u]);const x=Y.useCallback(()=>{f&&f.name!==Dc&&p(null)},[f,p]),b=Y.useCallback(S=>{m.current=!0,p(S)},[p]);return kt.createElement(Tge,{wallets:l,adapter:f,isUnloadingRef:v,onAutoConnectRequest:g,onConnectError:x,onError:i,onSelectWallet:b},n)}const Pge=n=>{if(!n)return"";if(n.length<10)return n;const e=n.slice(0,6),t=n.slice(-4);return`${e}...${t}`};function kge(){const{connected:n,publicKey:e,select:t,connect:r,disconnect:i,wallets:s}=F$(),o=async()=>{if(n)await i();else{const a=s.find(l=>l.adapter.name==="Phantom");if(a&&!n){t(a.adapter.name);try{await r()}catch(l){console.error("Failed to connect:",l)}}}};return q.jsx("button",{onClick:o,className:"bg-[#eeff99] text-black hover:bg-[#eeff99]/80 font-display px-8 py-3 rounded whitespace-nowrap",children:n?q.jsx("span",{className:"font-numbers",children:Pge(e==null?void 0:e.toString())}):"CONNECT WALLET"})}const Mge=new ot("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new ot("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const Oge=new ot("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new ot("So11111111111111111111111111111111111111112");new ot("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const jP=n=>{const e=n.decode.bind(n),t=n.encode.bind(n);return{decode:e,encode:t}},Nge=n=>e=>{const t=Hn(n,e),{encode:r,decode:i}=jP(t),s=t;return s.decode=(o,a)=>{const l=i(o,a);return Zz(ei.from(l))},s.encode=(o,a,l)=>{const u=Jz(o,n);return r(u,a,l)},s},Bge=Nge(8),Lge=n=>{const e=cn(n),{encode:t,decode:r}=jP(e),i=e;return i.decode=(s,o)=>!!r(s,o),i.encode=(s,o,a)=>{const l=Number(s);return t(l,o,a)},i},VL=n=>{const e=Hn(32,n),{encode:t,decode:r}=jP(e),i=e;return i.decode=(s,o)=>{const a=r(s,o);return new ot(a)},i.encode=(s,o,a)=>{const l=s.toBuffer();return t(l,o,a)},i};class Dge extends Error{constructor(e){super(e)}}class Fge extends Dge{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Uge=rt([pt("mintAuthorityOption"),VL("mintAuthority"),Bge("supply"),cn("decimals"),Lge("isInitialized"),pt("freezeAuthorityOption"),VL("freezeAuthority")]);Uge.span;async function zge(n,e,t=!1,r=Mge,i=Oge){if(!t&&!ot.isOnCurve(e.toBuffer()))throw new Fge;const[s]=await ot.findProgramAddress([e.toBuffer(),r.toBuffer(),n.toBuffer()],i);return s}var JC=new Map,lw=new WeakMap,qL=0,$ge=void 0;function jge(n){return n?(lw.has(n)||(qL+=1,lw.set(n,qL.toString())),lw.get(n)):"0"}function Hge(n){return Object.keys(n).sort().filter(e=>n[e]!==void 0).map(e=>`${e}_${e==="root"?jge(n.root):n[e]}`).toString()}function Wge(n){const e=Hge(n);let t=JC.get(e);if(!t){const r=new Map;let i;const s=new IntersectionObserver(o=>{o.forEach(a=>{var l;const u=a.isIntersecting&&i.some(h=>a.intersectionRatio>=h);n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=r.get(a.target))==null||l.forEach(h=>{h(u,a)})})},n);i=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:r},JC.set(e,t)}return t}function Gge(n,e,t={},r=$ge){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const l=n.getBoundingClientRect();return e(r,{isIntersecting:r,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:i,observer:s,elements:o}=Wge(t),a=o.get(n)||[];return o.has(n)||o.set(n,a),a.push(e),s.observe(n),function(){a.splice(a.indexOf(e),1),a.length===0&&(o.delete(n),s.unobserve(n)),o.size===0&&(s.disconnect(),JC.delete(i))}}function Vge({threshold:n,delay:e,trackVisibility:t,rootMargin:r,root:i,triggerOnce:s,skip:o,initialInView:a,fallbackInView:l,onChange:u}={}){var h;const[f,p]=Y.useState(null),m=Y.useRef(),[g,v]=Y.useState({inView:!!a,entry:void 0});m.current=u,Y.useEffect(()=>{if(o||!f)return;let _;return _=Gge(f,(R,D)=>{v({inView:R,entry:D}),m.current&&m.current(R,D),D.isIntersecting&&s&&_&&(_(),_=void 0)},{root:i,rootMargin:r,threshold:n,trackVisibility:t,delay:e},l),()=>{_&&_()}},[Array.isArray(n)?n.toString():n,f,i,r,s,o,t,l,e]);const x=(h=g.entry)==null?void 0:h.target,b=Y.useRef();!f&&x&&!s&&!o&&b.current!==x&&(b.current=x,v({inView:!!a,entry:void 0}));const S=[p,g.inView,g.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const qge="https://rpgtown.vercel.app",Xge=async()=>{const n=await fetch(`${qge}/api/game-state`);if(!n.ok)throw new Error("Failed to fetch game state");return n.json()},Kge=n=>{const[e,t]=Y.useState("");return Y.useEffect(()=>{if(!n)return;const r=()=>{const o=new Date(n).getTime(),a=new Date().getTime(),l=o-a;if(l<=0)return t("00:00:00"),!1;const u=Math.floor(l/(1e3*60*60)),h=Math.floor(l%(1e3*60*60)/(1e3*60)),f=Math.floor(l%(1e3*60)/1e3);return t(`${u.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`),!0};if(!r())return;const s=setInterval(()=>{r()||clearInterval(s)},1e3);return()=>clearInterval(s)},[n]),e};function Qge(){const{data:n,status:e}=az({queryKey:["gameState"],queryFn:Xge,refetchInterval:5e3}),t=Kge((n==null?void 0:n.generationEndTime)??null);return e==="pending"?q.jsx("div",{className:"text-center py-4",children:q.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#eeff99]"})}):e==="error"||!n?q.jsx("div",{className:"text-center py-4 font-display text-2xl text-[#eeff99] bg-black/80 rounded-lg p-4 mb-4",children:"SOLANA TOWN HAS NOT BEEN STARTED YET"}):n.generationEndTime===null?q.jsxs("div",{className:"text-center py-4 font-display text-2xl text-[#eeff99] bg-black/80 rounded-lg p-4 mb-4",children:["GENERATION ",q.jsx("span",{className:"font-numbers",children:n.currentGeneration})," IS BEING BORN... PLEASE WAIT FOR AN UPDATE"]}):q.jsxs("div",{className:"text-center py-4 font-display text-2xl text-[#eeff99] bg-black/80 rounded-lg p-4 mb-4",children:["GENERATION ",q.jsx("span",{className:"font-numbers",children:n.currentGeneration})," HATCHING WILL BEGIN IN ",q.jsx("span",{className:"font-numbers",children:t}),q.jsxs("div",{className:"text-sm mt-2",children:["TOP ",q.jsx("span",{className:"font-numbers",children:"10"})," RANKED CITIZENS WILL BE HATCHED"]})]})}var lj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},XL=kt.createContext&&kt.createContext(lj),Yge=["attr","size","title"];function Zge(n,e){if(n==null)return{};var t=Jge(n,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Jge(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function __(){return __=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__.apply(this,arguments)}function KL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function b_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?KL(Object(t),!0).forEach(function(r){e0e(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):KL(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function e0e(n,e,t){return e=t0e(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function t0e(n){var e=n0e(n,"string");return typeof e=="symbol"?e:e+""}function n0e(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function uj(n){return n&&n.map((e,t)=>kt.createElement(e.tag,b_({key:t},e.attr),uj(e.child)))}function r0e(n){return e=>kt.createElement(i0e,__({attr:b_({},n.attr)},e),uj(n.child))}function i0e(n){var e=t=>{var{attr:r,size:i,title:s}=n,o=Zge(n,Yge),a=i||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),kt.createElement("svg",__({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:l,style:b_(b_({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&kt.createElement("title",null,s),n.children)};return XL!==void 0?kt.createElement(XL.Consumer,null,t=>e(t)):e(lj)}function s0e(n){return r0e({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 0C86 0 0 214 0 320s86 192 192 192 192-86 192-192S298 0 192 0z"},child:[]}]})(n)}const o0e=new ot("9BB6NFEcjBCtnNLFko2FqVQBq8HHM13kCyYcdQbgpump"),eI="https://rpgtown.vercel.app",a0e="https://mainnet.helius-rpc.com/?api-key=b0060c8f-339e-417c-91db-0845095a34d9",l0e=new I$(a0e,"confirmed"),u0e=async({pageParam:n=0})=>{const e=await fetch(`${eI}/api/leaderboard?limit=20&offset=${n}&isBorn=false`);if(!e.ok)throw new Error("Network response was not ok");return e.json()},c0e=n=>n?`${n.slice(0,4)}...${n.slice(-4)}`:"";function h0e(){const{connected:n,publicKey:e,signMessage:t}=F$(),{ref:r,inView:i}=Vge(),s=iz(),[o,a]=Y.useState(!1);Y.useEffect(()=>{const ee=()=>{a(window.scrollY>500)};return window.addEventListener("scroll",ee),()=>window.removeEventListener("scroll",ee)},[]);const l=()=>{window.scrollTo({top:0,behavior:"smooth"})},{data:u,fetchNextPage:h,hasNextPage:f,isFetchingNextPage:p,status:m}=Fle({queryKey:["leaderboard","unborn"],initialPageParam:0,queryFn:({pageParam:ee})=>u0e({pageParam:ee}),getNextPageParam:ee=>ee.metadata.nextOffset});Y.useEffect(()=>{i&&f&&!p&&h()},[i,f,p,h]);const[g,v]=Y.useState({name:"",character:"",identity:""}),[x,b]=Y.useState({name:"",character:"",identity:"",token:""}),[S,_]=Y.useState(!1),[R,D]=Y.useState(null),[j,H]=Y.useState(!1);Y.useState(!1),Y.useEffect(()=>{let ee=!0;return(async()=>{if(n&&e){const w=await G();ee&&H(w>0)}})(),()=>{ee=!1}},[n,e]);const G=async()=>{if(!e)return 0;try{const ee=await zge(o0e,e),L=await l0e.getTokenAccountBalance(ee);return Number(L.value.uiAmountString)}catch(ee){return ee instanceof Error&&ee.message.includes("could not find account")||console.error("Error checking token balance:",ee),0}},K=()=>{v({name:"",character:"",identity:""}),b({name:"",character:"",identity:"",token:""})},te=async()=>{if(!n||!j||!t||!e)return;_(!0),b({name:"",character:"",identity:"",token:""});let ee=!1;const L={name:"",character:"",identity:"",token:""};if(g.name.trim()||(L.name="Name is required",ee=!0),g.character.trim()||(L.character="Character description is required",ee=!0),g.identity.trim()||(L.identity="Identity is required",ee=!0),ee){b(L),_(!1);return}try{const w=`Generate Solana Town Member: ${g.name} ${g.character} ${g.identity}`,A=new TextEncoder().encode(w),O=await t(A),C=aj.encode(O),k=await fetch(eI+"/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:g.character,signature:C,wallet:e.toBase58(),message:w,name:g.name,identity:g.identity})});if(!k.ok)throw new Error("Generation failed");const{predictionId:U}=await k.json();let z=!0;for(;z;){const N=await fetch(`${eI}/api/generate?predictionId=${U}&wallet=${e.toBase58()}&prompt=${encodeURIComponent(g.character)}&name=${encodeURIComponent(g.name)}&identity=${encodeURIComponent(g.identity)}&signature=${C}`);if(!N.ok)throw z=!1,new Error("Status check failed");const T=await N.json();if(T.status==="complete"){D(T.url),Vn.success("Generation successful!",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark",style:{background:"rgba(0, 0, 0, 0.8)",color:"#eeff99",borderRadius:"4px",fontSize:"16px",fontFamily:"Super Pixel, monospace"}}),s.invalidateQueries({queryKey:["leaderboard","unborn"]}),K(),z=!1;break}else if(T.status==="failed")throw z=!1,new Error("Generation failed during processing");await new Promise(V=>setTimeout(V,1e3))}}catch(w){console.error("Generation error:",w),b(A=>({...A,token:"Generation failed"}))}finally{_(!1)}},ne=(u==null?void 0:u.pages.flatMap(ee=>ee.items))??[];return q.jsxs("div",{className:"relative flex min-h-screen flex-col items-center justify-between font-body rest-background w-full",children:[q.jsx("div",{className:"w-full min-h-screen relative isolate overflow-hidden lg:p-8 shadow-2xl",children:q.jsxs("div",{className:"text-center",children:[q.jsxs("nav",{className:"flex justify-center gap-8 mb-12",children:[q.jsx(rh,{to:"/",children:"HOME"}),q.jsx(rh,{to:"/create",children:"CREATE"}),q.jsx(rh,{to:"/game-design",children:"GAME DESIGN"}),q.jsx(rh,{to:"/road-map",children:"ROAD MAP"})]}),q.jsxs("div",{className:"flex flex-col items-center justify-center py-24",children:[q.jsx("h1",{className:"font-display text-6xl mb-4",style:{color:"#eeff99"},children:"BORDER SERVICES"}),q.jsxs("p",{className:"text-white text-xl mb-16 text-center",children:["CREATE YOUR CHARACTER AND WAIT IN QUEUE TO RECEIVE YOUR",q.jsx("br",{}),"PASSPORT INTO SOLANATOWN."]}),q.jsxs("div",{className:"grid grid-cols-2 gap-16 max-w-5xl w-full px-8",children:[q.jsx("div",{className:"bg-black/80 rounded-lg aspect-square flex items-center justify-center",children:R?q.jsx("img",{src:R,alt:"Generated character",className:"w-full h-full object-contain"}):q.jsx("span",{className:"text-white/50",children:"Character preview will appear here"})}),q.jsxs("div",{className:"flex flex-col gap-8",children:[q.jsxs("div",{children:[q.jsx("label",{className:"text-[#eeff99] font-display text-2xl mb-3 block",children:"NAME"}),q.jsx("input",{type:"text",maxLength:50,value:g.name,onChange:ee=>v({...g,name:ee.target.value}),placeholder:"Enter your name...",className:`w-full bg-black/80 rounded p-4 text-white border-none outline-none focus:ring-2 focus:ring-[#eeff99]/50 ${x.name?"ring-2 ring-red-500":""}`}),x.name&&q.jsx("p",{className:"text-white mt-1",children:x.name})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-[#eeff99] font-display text-2xl mb-3 block",children:"CHARACTER"}),q.jsx("input",{type:"text",maxLength:100,value:g.character,onChange:ee=>v({...g,character:ee.target.value}),placeholder:"Rogue with poisoned daggers",className:`w-full bg-black/80 rounded p-4 text-white border-none outline-none focus:ring-2 focus:ring-[#eeff99]/50 ${x.character?"ring-2 ring-red-500":""}`}),x.character&&q.jsx("p",{className:"text-white mt-1",children:x.character})]}),q.jsxs("div",{children:[q.jsx("label",{className:"text-[#eeff99] font-display text-2xl mb-3 block",children:"LORE"}),q.jsx("textarea",{maxLength:500,value:g.identity,onChange:ee=>v({...g,identity:ee.target.value}),placeholder:"Write a backstory for your character. Who are they? Where did they come from? What drives them? What are their goals and aspirations in SolanaTown? What secrets do they hold?",className:`w-full bg-black/80 rounded p-4 text-white h-48 border-none outline-none focus:ring-2 focus:ring-[#eeff99]/50 resize-none ${x.identity?"ring-2 ring-red-500":""}`}),x.identity&&q.jsx("p",{className:"text-white mt-1",children:x.identity})]}),q.jsxs("div",{className:"flex flex-col gap-4 mt-4",children:[q.jsx(kge,{}),n&&q.jsxs(q.Fragment,{children:[q.jsx(rP,{onClick:te,disabled:S||!j,children:S?q.jsxs("span",{className:"flex items-center justify-center",children:[q.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[q.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),q.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"GENERATING..."]}):j?"GENERATE":"INSUFFICIENT $TOWN BALANCE"}),x.token&&q.jsx("p",{className:"text-white mt-1",children:x.token})]})]})]})]})]}),q.jsxs("div",{className:"mt-16 w-full max-w-6xl mx-auto px-8 pb-16",children:[q.jsx("h2",{className:"text-[#eeff99] font-display text-4xl mb-8",children:"WAITING ROOM"}),q.jsx(Qge,{}),q.jsxs("div",{className:"bg-black/80 rounded-lg p-6",children:[m==="pending"?q.jsx("div",{className:"text-center py-8",children:q.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#eeff99]"})}):m==="error"?q.jsx("div",{className:"text-center py-8 text-red-500",children:"Error loading leaderboard"}):ne.length===0?q.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:q.jsx("div",{className:"text-center py-8 font-display text-2xl text-[#eeff99]",children:"NO GENERATIONS YET, GENERATE A CITIZEN!"})}):q.jsxs(q.Fragment,{children:[q.jsx("div",{className:"sticky top-0 bg-black/80 z-10 py-4",children:q.jsxs("div",{className:"grid grid-cols-5 gap-4 text-[#eeff99] font-display text-xl px-4",children:[q.jsx("div",{children:"RANK"}),q.jsx("div",{children:"AVATAR"}),q.jsx("div",{children:"NAME"}),q.jsx("div",{children:"WALLET"}),q.jsx("div",{children:"$TOWN"})]})}),q.jsx("div",{className:"space-y-4",children:ne.map((ee,L)=>q.jsxs("div",{className:"grid grid-cols-5 gap-4 items-center bg-black/40 rounded p-4 text-white",children:[q.jsxs("div",{className:"font-display text-[#eeff99] flex items-center relative pl-6",children:[L<10&&q.jsxs("div",{className:"group absolute left-0 flex cursor-help",title:"This avatar will be born in the next generation",children:[q.jsx(s0e,{className:"text-[#eeff99] animate-pulse w-4 h-4"}),q.jsx("span",{className:"pointer-events-none absolute -top-7 left-0 w-max opacity-0 transition-opacity group-hover:opacity-100 bg-black/90 text-[#eeff99] text-sm rounded px-2 py-1",children:"Will be born next generation"})]}),q.jsxs("span",{className:"font-numbers flex-1 text-center",children:["#",L+1]})]}),q.jsx("div",{className:"flex items-center justify-center",children:q.jsx("div",{className:"w-16 h-16 relative",children:q.jsx("img",{src:ee.avatarUrl,alt:ee.name,className:"absolute inset-0 w-full h-full object-contain rounded brightness-90"})})}),q.jsx("div",{className:"font-display",children:ee.name}),q.jsx("div",{className:"font-display truncate",children:c0e(ee.wallet)}),q.jsx("div",{className:"font-display",children:q.jsx("span",{className:"font-numbers",children:ee.tokenBalance})})]},ee.id))})]}),q.jsx("div",{ref:r,className:"h-4"}),p&&q.jsx("div",{className:"text-center py-4",children:q.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#eeff99]"})})]})]})]})}),o&&q.jsxs("button",{onClick:l,className:"fixed bottom-8 right-8 rounded-full bg-[#eeff99] px-4 py-2 text-black shadow-lg transition-colors hover:bg-[#deff66] z-50 flex items-center gap-2",children:[q.jsx("span",{children:""}),q.jsx("span",{children:"Go to top"})]})]})}const d0e="Phantom";class f0e extends N${constructor(e={}){super(),this.name=d0e,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?vn.Unsupported:vn.NotDetected,this._disconnected=()=>{const t=this._wallet;t&&(t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new BP),this.emit("disconnect"))},this._accountChanged=t=>{const r=this._publicKey;if(r){try{t=new ot(t.toBytes())}catch(i){this.emit("error",new m_(i==null?void 0:i.message,i));return}r.equals(t)||(this._publicKey=t,this.emit("connect",t))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==vn.Unsupported&&(ppe()?(this._readyState=vn.Loadable,this.emit("readyStateChange",this._readyState)):fpe(()=>{var t,r,i;return(r=(t=window.phantom)==null?void 0:t.solana)!=null&&r.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=vn.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===vn.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===vn.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==vn.Installed)throw new jd;this._connecting=!0;const t=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!t.isConnected)try{await t.connect()}catch(i){throw new Ep(i==null?void 0:i.message,i)}if(!t.publicKey)throw new xd;let r;try{r=new ot(t.publicKey.toBytes())}catch(i){throw new m_(i==null?void 0:i.message,i)}t.on("disconnect",this._disconnected),t.on("accountChanged",this._accountChanged),this._wallet=t,this._publicKey=r,this.emit("connect",r)}catch(t){throw this.emit("error",t),t}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(t){this.emit("error",new M$(t==null?void 0:t.message,t))}}this.emit("disconnect")}async sendTransaction(e,t,r={}){try{const i=this._wallet;if(!i)throw new ro;try{const{signers:s,...o}=r;ah(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,t,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||t.commitment;const{signature:a}=await i.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof Ss?s:new oh(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const t=this._wallet;if(!t)throw new ro;try{return await t.signTransaction(e)||e}catch(r){throw new Bu(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signAllTransactions(e){try{const t=this._wallet;if(!t)throw new ro;try{return await t.signAllTransactions(e)||e}catch(r){throw new Bu(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}async signMessage(e){try{const t=this._wallet;if(!t)throw new ro;try{const{signature:r}=await t.signMessage(e);return r}catch(r){throw new LP(r==null?void 0:r.message,r)}}catch(t){throw this.emit("error",t),t}}}const p0e=HC.Devnet,m0e=cpe(p0e),g0e=[new f0e],y0e=new ble({defaultOptions:{queries:{staleTime:5e3,refetchOnWindowFocus:!1}}});VA.createRoot(document.getElementById("root")).render(q.jsx(kt.StrictMode,{children:q.jsx(Tle,{client:y0e,children:q.jsx(dpe,{endpoint:m0e,children:q.jsx(Rge,{wallets:g0e,autoConnect:!0,children:q.jsx(Xle,{children:q.jsxs(Qae,{children:[q.jsxs(Aae,{children:[q.jsx(yC,{path:"/",element:q.jsx(Wle,{})}),q.jsx(yC,{path:"/create",element:q.jsx(h0e,{})})]}),q.jsx(Ux,{})]})})})})})}))});export default v0e();
